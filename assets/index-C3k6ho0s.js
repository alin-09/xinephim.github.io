var Jw=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var z3=Jw((US,or)=>{(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function eA(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Qf={exports:{}},xo={};var ov;function tA(){if(ov)return xo;ov=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(i,s,a){var l=null;if(a!==void 0&&(l=""+a),s.key!==void 0&&(l=""+s.key),"key"in s){a={};for(var c in s)c!=="key"&&(a[c]=s[c])}else a=s;return s=a.ref,{$$typeof:n,type:i,key:l,ref:s!==void 0?s:null,props:a}}return xo.Fragment=e,xo.jsx=t,xo.jsxs=t,xo}var lv;function iA(){return lv||(lv=1,Qf.exports=tA()),Qf.exports}var U=iA(),Zf={exports:{}},To={},Jf={exports:{}},eh={};var cv;function nA(){return cv||(cv=1,(function(n){function e(k,G){var K=k.length;k.push(G);e:for(;0<K;){var oe=K-1>>>1,fe=k[oe];if(0<s(fe,G))k[oe]=G,k[K]=fe,K=oe;else break e}}function t(k){return k.length===0?null:k[0]}function i(k){if(k.length===0)return null;var G=k[0],K=k.pop();if(K!==G){k[0]=K;e:for(var oe=0,fe=k.length,M=fe>>>1;oe<M;){var $=2*(oe+1)-1,se=k[$],de=$+1,he=k[de];if(0>s(se,K))de<fe&&0>s(he,se)?(k[oe]=he,k[de]=K,oe=de):(k[oe]=se,k[$]=K,oe=$);else if(de<fe&&0>s(he,K))k[oe]=he,k[de]=K,oe=de;else break e}}return G}function s(k,G){var K=k.sortIndex-G.sortIndex;return K!==0?K:k.id-G.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;n.unstable_now=function(){return a.now()}}else{var l=Date,c=l.now();n.unstable_now=function(){return l.now()-c}}var f=[],d=[],h=1,p=null,g=3,b=!1,y=!1,T=!1,x=!1,w=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;function _(k){for(var G=t(d);G!==null;){if(G.callback===null)i(d);else if(G.startTime<=k)i(d),G.sortIndex=G.expirationTime,e(f,G);else break;G=t(d)}}function I(k){if(T=!1,_(k),!y)if(t(f)!==null)y=!0,P||(P=!0,ee());else{var G=t(d);G!==null&&W(I,G.startTime-k)}}var P=!1,C=-1,O=5,B=-1;function N(){return x?!0:!(n.unstable_now()-B<O)}function V(){if(x=!1,P){var k=n.unstable_now();B=k;var G=!0;try{e:{y=!1,T&&(T=!1,S(C),C=-1),b=!0;var K=g;try{t:{for(_(k),p=t(f);p!==null&&!(p.expirationTime>k&&N());){var oe=p.callback;if(typeof oe=="function"){p.callback=null,g=p.priorityLevel;var fe=oe(p.expirationTime<=k);if(k=n.unstable_now(),typeof fe=="function"){p.callback=fe,_(k),G=!0;break t}p===t(f)&&i(f),_(k)}else i(f);p=t(f)}if(p!==null)G=!0;else{var M=t(d);M!==null&&W(I,M.startTime-k),G=!1}}break e}finally{p=null,g=K,b=!1}G=void 0}}finally{G?ee():P=!1}}}var ee;if(typeof A=="function")ee=function(){A(V)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,H=z.port2;z.port1.onmessage=V,ee=function(){H.postMessage(null)}}else ee=function(){w(V,0)};function W(k,G){C=w(function(){k(n.unstable_now())},G)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(k){k.callback=null},n.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<k?Math.floor(1e3/k):5},n.unstable_getCurrentPriorityLevel=function(){return g},n.unstable_next=function(k){switch(g){case 1:case 2:case 3:var G=3;break;default:G=g}var K=g;g=G;try{return k()}finally{g=K}},n.unstable_requestPaint=function(){x=!0},n.unstable_runWithPriority=function(k,G){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var K=g;g=k;try{return G()}finally{g=K}},n.unstable_scheduleCallback=function(k,G,K){var oe=n.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?oe+K:oe):K=oe,k){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=K+fe,k={id:h++,callback:G,priorityLevel:k,startTime:K,expirationTime:fe,sortIndex:-1},K>oe?(k.sortIndex=K,e(d,k),t(f)===null&&k===t(d)&&(T?(S(C),C=-1):T=!0,W(I,K-oe))):(k.sortIndex=fe,e(f,k),y||b||(y=!0,P||(P=!0,ee()))),k},n.unstable_shouldYield=N,n.unstable_wrapCallback=function(k){var G=g;return function(){var K=g;g=G;try{return k.apply(this,arguments)}finally{g=K}}}})(eh)),eh}var uv;function sA(){return uv||(uv=1,Jf.exports=nA()),Jf.exports}var th={exports:{}},Ce={};var dv;function rA(){if(dv)return Ce;dv=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.for("react.activity"),g=Symbol.iterator;function b(M){return M===null||typeof M!="object"?null:(M=g&&M[g]||M["@@iterator"],typeof M=="function"?M:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},T=Object.assign,x={};function w(M,$,se){this.props=M,this.context=$,this.refs=x,this.updater=se||y}w.prototype.isReactComponent={},w.prototype.setState=function(M,$){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,$,"setState")},w.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function S(){}S.prototype=w.prototype;function A(M,$,se){this.props=M,this.context=$,this.refs=x,this.updater=se||y}var _=A.prototype=new S;_.constructor=A,T(_,w.prototype),_.isPureReactComponent=!0;var I=Array.isArray;function P(){}var C={H:null,A:null,T:null,S:null},O=Object.prototype.hasOwnProperty;function B(M,$,se){var de=se.ref;return{$$typeof:n,type:M,key:$,ref:de!==void 0?de:null,props:se}}function N(M,$){return B(M.type,$,M.props)}function V(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function ee(M){var $={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(se){return $[se]})}var z=/\/+/g;function H(M,$){return typeof M=="object"&&M!==null&&M.key!=null?ee(""+M.key):$.toString(36)}function W(M){switch(M.status){case"fulfilled":return M.value;case"rejected":throw M.reason;default:switch(typeof M.status=="string"?M.then(P,P):(M.status="pending",M.then(function($){M.status==="pending"&&(M.status="fulfilled",M.value=$)},function($){M.status==="pending"&&(M.status="rejected",M.reason=$)})),M.status){case"fulfilled":return M.value;case"rejected":throw M.reason}}throw M}function k(M,$,se,de,he){var me=typeof M;(me==="undefined"||me==="boolean")&&(M=null);var Se=!1;if(M===null)Se=!0;else switch(me){case"bigint":case"string":case"number":Se=!0;break;case"object":switch(M.$$typeof){case n:case e:Se=!0;break;case h:return Se=M._init,k(Se(M._payload),$,se,de,he)}}if(Se)return he=he(M),Se=de===""?"."+H(M,0):de,I(he)?(se="",Se!=null&&(se=Se.replace(z,"$&/")+"/"),k(he,$,se,"",function(pt){return pt})):he!=null&&(V(he)&&(he=N(he,se+(he.key==null||M&&M.key===he.key?"":(""+he.key).replace(z,"$&/")+"/")+Se)),$.push(he)),1;Se=0;var Oe=de===""?".":de+":";if(I(M))for(var ke=0;ke<M.length;ke++)de=M[ke],me=Oe+H(de,ke),Se+=k(de,$,se,me,he);else if(ke=b(M),typeof ke=="function")for(M=ke.call(M),ke=0;!(de=M.next()).done;)de=de.value,me=Oe+H(de,ke++),Se+=k(de,$,se,me,he);else if(me==="object"){if(typeof M.then=="function")return k(W(M),$,se,de,he);throw $=String(M),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return Se}function G(M,$,se){if(M==null)return M;var de=[],he=0;return k(M,de,"","",function(me){return $.call(se,me,he++)}),de}function K(M){if(M._status===-1){var $=M._result;$=$(),$.then(function(se){(M._status===0||M._status===-1)&&(M._status=1,M._result=se)},function(se){(M._status===0||M._status===-1)&&(M._status=2,M._result=se)}),M._status===-1&&(M._status=0,M._result=$)}if(M._status===1)return M._result.default;throw M._result}var oe=typeof reportError=="function"?reportError:function(M){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof M=="object"&&M!==null&&typeof M.message=="string"?String(M.message):String(M),error:M});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",M);return}console.error(M)},fe={map:G,forEach:function(M,$,se){G(M,function(){$.apply(this,arguments)},se)},count:function(M){var $=0;return G(M,function(){$++}),$},toArray:function(M){return G(M,function($){return $})||[]},only:function(M){if(!V(M))throw Error("React.Children.only expected to receive a single React element child.");return M}};return Ce.Activity=p,Ce.Children=fe,Ce.Component=w,Ce.Fragment=t,Ce.Profiler=s,Ce.PureComponent=A,Ce.StrictMode=i,Ce.Suspense=f,Ce.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=C,Ce.__COMPILER_RUNTIME={__proto__:null,c:function(M){return C.H.useMemoCache(M)}},Ce.cache=function(M){return function(){return M.apply(null,arguments)}},Ce.cacheSignal=function(){return null},Ce.cloneElement=function(M,$,se){if(M==null)throw Error("The argument must be a React element, but you passed "+M+".");var de=T({},M.props),he=M.key;if($!=null)for(me in $.key!==void 0&&(he=""+$.key),$)!O.call($,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&$.ref===void 0||(de[me]=$[me]);var me=arguments.length-2;if(me===1)de.children=se;else if(1<me){for(var Se=Array(me),Oe=0;Oe<me;Oe++)Se[Oe]=arguments[Oe+2];de.children=Se}return B(M.type,he,de)},Ce.createContext=function(M){return M={$$typeof:l,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null},M.Provider=M,M.Consumer={$$typeof:a,_context:M},M},Ce.createElement=function(M,$,se){var de,he={},me=null;if($!=null)for(de in $.key!==void 0&&(me=""+$.key),$)O.call($,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(he[de]=$[de]);var Se=arguments.length-2;if(Se===1)he.children=se;else if(1<Se){for(var Oe=Array(Se),ke=0;ke<Se;ke++)Oe[ke]=arguments[ke+2];he.children=Oe}if(M&&M.defaultProps)for(de in Se=M.defaultProps,Se)he[de]===void 0&&(he[de]=Se[de]);return B(M,me,he)},Ce.createRef=function(){return{current:null}},Ce.forwardRef=function(M){return{$$typeof:c,render:M}},Ce.isValidElement=V,Ce.lazy=function(M){return{$$typeof:h,_payload:{_status:-1,_result:M},_init:K}},Ce.memo=function(M,$){return{$$typeof:d,type:M,compare:$===void 0?null:$}},Ce.startTransition=function(M){var $=C.T,se={};C.T=se;try{var de=M(),he=C.S;he!==null&&he(se,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(P,oe)}catch(me){oe(me)}finally{$!==null&&se.types!==null&&($.types=se.types),C.T=$}},Ce.unstable_useCacheRefresh=function(){return C.H.useCacheRefresh()},Ce.use=function(M){return C.H.use(M)},Ce.useActionState=function(M,$,se){return C.H.useActionState(M,$,se)},Ce.useCallback=function(M,$){return C.H.useCallback(M,$)},Ce.useContext=function(M){return C.H.useContext(M)},Ce.useDebugValue=function(){},Ce.useDeferredValue=function(M,$){return C.H.useDeferredValue(M,$)},Ce.useEffect=function(M,$){return C.H.useEffect(M,$)},Ce.useEffectEvent=function(M){return C.H.useEffectEvent(M)},Ce.useId=function(){return C.H.useId()},Ce.useImperativeHandle=function(M,$,se){return C.H.useImperativeHandle(M,$,se)},Ce.useInsertionEffect=function(M,$){return C.H.useInsertionEffect(M,$)},Ce.useLayoutEffect=function(M,$){return C.H.useLayoutEffect(M,$)},Ce.useMemo=function(M,$){return C.H.useMemo(M,$)},Ce.useOptimistic=function(M,$){return C.H.useOptimistic(M,$)},Ce.useReducer=function(M,$,se){return C.H.useReducer(M,$,se)},Ce.useRef=function(M){return C.H.useRef(M)},Ce.useState=function(M){return C.H.useState(M)},Ce.useSyncExternalStore=function(M,$,se){return C.H.useSyncExternalStore(M,$,se)},Ce.useTransition=function(){return C.H.useTransition()},Ce.version="19.2.4",Ce}var fv;function mm(){return fv||(fv=1,th.exports=rA()),th.exports}var ih={exports:{}},Qt={};var hv;function aA(){if(hv)return Qt;hv=1;var n=mm();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var i={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(f,d,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:p==null?null:""+p,children:f,containerInfo:d,implementation:h}}var l=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Qt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Qt.createPortal=function(f,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(f,d,null,h)},Qt.flushSync=function(f){var d=l.T,h=i.p;try{if(l.T=null,i.p=2,f)return f()}finally{l.T=d,i.p=h,i.d.f()}},Qt.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,i.d.C(f,d))},Qt.prefetchDNS=function(f){typeof f=="string"&&i.d.D(f)},Qt.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var h=d.as,p=c(h,d.crossOrigin),g=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?i.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:b}):h==="script"&&i.d.X(f,{crossOrigin:p,integrity:g,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Qt.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=c(d.as,d.crossOrigin);i.d.M(f,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&i.d.M(f)},Qt.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,p=c(h,d.crossOrigin);i.d.L(f,h,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Qt.preloadModule=function(f,d){if(typeof f=="string")if(d){var h=c(d.as,d.crossOrigin);i.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else i.d.m(f)},Qt.requestFormReset=function(f){i.d.r(f)},Qt.unstable_batchedUpdates=function(f,d){return f(d)},Qt.useFormState=function(f,d,h){return l.H.useFormState(f,d,h)},Qt.useFormStatus=function(){return l.H.useHostTransitionStatus()},Qt.version="19.2.4",Qt}var mv;function oA(){if(mv)return ih.exports;mv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),ih.exports=aA(),ih.exports}var pv;function lA(){if(pv)return To;pv=1;var n=sA(),e=mm(),t=oA();function i(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var o=r,u=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(u=o.return),r=o.return;while(r)}return o.tag===3?u:null}function l(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function c(r){if(r.tag===31){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function f(r){if(a(r)!==r)throw Error(i(188))}function d(r){var o=r.alternate;if(!o){if(o=a(r),o===null)throw Error(i(188));return o!==r?null:r}for(var u=r,m=o;;){var v=u.return;if(v===null)break;var E=v.alternate;if(E===null){if(m=v.return,m!==null){u=m;continue}break}if(v.child===E.child){for(E=v.child;E;){if(E===u)return f(v),r;if(E===m)return f(v),o;E=E.sibling}throw Error(i(188))}if(u.return!==m.return)u=v,m=E;else{for(var R=!1,D=v.child;D;){if(D===u){R=!0,u=v,m=E;break}if(D===m){R=!0,m=v,u=E;break}D=D.sibling}if(!R){for(D=E.child;D;){if(D===u){R=!0,u=E,m=v;break}if(D===m){R=!0,m=E,u=v;break}D=D.sibling}if(!R)throw Error(i(189))}}if(u.alternate!==m)throw Error(i(190))}if(u.tag!==3)throw Error(i(188));return u.stateNode.current===u?r:o}function h(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=h(r),o!==null)return o;r=r.sibling}return null}var p=Object.assign,g=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),S=Symbol.for("react.consumer"),A=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),C=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),V=Symbol.iterator;function ee(r){return r===null||typeof r!="object"?null:(r=V&&r[V]||r["@@iterator"],typeof r=="function"?r:null)}var z=Symbol.for("react.client.reference");function H(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===z?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case T:return"Fragment";case w:return"Profiler";case x:return"StrictMode";case I:return"Suspense";case P:return"SuspenseList";case B:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case y:return"Portal";case A:return r.displayName||"Context";case S:return(r._context.displayName||"Context")+".Consumer";case _:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case C:return o=r.displayName||null,o!==null?o:H(r.type)||"Memo";case O:o=r._payload,r=r._init;try{return H(r(o))}catch{}}return null}var W=Array.isArray,k=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},oe=[],fe=-1;function M(r){return{current:r}}function $(r){0>fe||(r.current=oe[fe],oe[fe]=null,fe--)}function se(r,o){fe++,oe[fe]=r.current,r.current=o}var de=M(null),he=M(null),me=M(null),Se=M(null);function Oe(r,o){switch(se(me,o),se(he,r),se(de,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?Iy(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=Iy(o),r=Dy(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}$(de),se(de,r)}function ke(){$(de),$(he),$(me)}function pt(r){r.memoizedState!==null&&se(Se,r);var o=de.current,u=Dy(o,r.type);o!==u&&(se(he,r),se(de,u))}function It(r){he.current===r&&($(de),$(he)),Se.current===r&&($(Se),yo._currentValue=K)}var Xt,Ni;function Pt(r){if(Xt===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);Xt=o&&o[1]||"",Ni=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xt+r+Ni}var on=!1;function Le(r,o){if(!r||on)return"";on=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(o){var ue=function(){throw Error()};if(Object.defineProperty(ue.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ue,[])}catch(ne){var te=ne}Reflect.construct(r,[],ue)}else{try{ue.call()}catch(ne){te=ne}r.call(ue.prototype)}}else{try{throw Error()}catch(ne){te=ne}(ue=r())&&typeof ue.catch=="function"&&ue.catch(function(){})}}catch(ne){if(ne&&te&&typeof ne.stack=="string")return[ne.stack,te.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=m.DetermineComponentFrameRoot(),R=E[0],D=E[1];if(R&&D){var F=R.split(`
`),J=D.split(`
`);for(v=m=0;m<F.length&&!F[m].includes("DetermineComponentFrameRoot");)m++;for(;v<J.length&&!J[v].includes("DetermineComponentFrameRoot");)v++;if(m===F.length||v===J.length)for(m=F.length-1,v=J.length-1;1<=m&&0<=v&&F[m]!==J[v];)v--;for(;1<=m&&0<=v;m--,v--)if(F[m]!==J[v]){if(m!==1||v!==1)do if(m--,v--,0>v||F[m]!==J[v]){var ae=`
`+F[m].replace(" at new "," at ");return r.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",r.displayName)),ae}while(1<=m&&0<=v);break}}}finally{on=!1,Error.prepareStackTrace=u}return(u=r?r.displayName||r.name:"")?Pt(u):""}function ye(r,o){switch(r.tag){case 26:case 27:case 5:return Pt(r.type);case 16:return Pt("Lazy");case 13:return r.child!==o&&o!==null?Pt("Suspense Fallback"):Pt("Suspense");case 19:return Pt("SuspenseList");case 0:case 15:return Le(r.type,!1);case 11:return Le(r.type.render,!1);case 1:return Le(r.type,!0);case 31:return Pt("Activity");default:return""}}function Dt(r){try{var o="",u=null;do o+=ye(r,u),u=r,r=r.return;while(r);return o}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}var gt=Object.prototype.hasOwnProperty,yt=n.unstable_scheduleCallback,$t=n.unstable_cancelCallback,Wt=n.unstable_shouldYield,ei=n.unstable_requestPaint,ut=n.unstable_now,wn=n.unstable_getCurrentPriorityLevel,li=n.unstable_ImmediatePriority,Ns=n.unstable_UserBlockingPriority,Jn=n.unstable_NormalPriority,Er=n.unstable_LowPriority,Bs=n.unstable_IdlePriority,An=n.log,Pu=n.unstable_setDisableYieldValue,Fs=null,ti=null;function ln(r){if(typeof An=="function"&&Pu(r),ti&&typeof ti.setStrictMode=="function")try{ti.setStrictMode(Fs,r)}catch{}}var ii=Math.clz32?Math.clz32:Ne,Nu=Math.log,Bu=Math.LN2;function Ne(r){return r>>>=0,r===0?32:31-(Nu(r)/Bu|0)|0}var tl=256,il=262144,nl=4194304;function Us(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function sl(r,o,u){var m=r.pendingLanes;if(m===0)return 0;var v=0,E=r.suspendedLanes,R=r.pingedLanes;r=r.warmLanes;var D=m&134217727;return D!==0?(m=D&~E,m!==0?v=Us(m):(R&=D,R!==0?v=Us(R):u||(u=D&~r,u!==0&&(v=Us(u))))):(D=m&~E,D!==0?v=Us(D):R!==0?v=Us(R):u||(u=m&~r,u!==0&&(v=Us(u)))),v===0?0:o!==0&&o!==v&&(o&E)===0&&(E=v&-v,u=o&-o,E>=u||E===32&&(u&4194048)!==0)?o:v}function Ca(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function $S(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dp(){var r=nl;return nl<<=1,(nl&62914560)===0&&(nl=4194304),r}function Fu(r){for(var o=[],u=0;31>u;u++)o.push(r);return o}function Ia(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function jS(r,o,u,m,v,E){var R=r.pendingLanes;r.pendingLanes=u,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=u,r.entangledLanes&=u,r.errorRecoveryDisabledLanes&=u,r.shellSuspendCounter=0;var D=r.entanglements,F=r.expirationTimes,J=r.hiddenUpdates;for(u=R&~u;0<u;){var ae=31-ii(u),ue=1<<ae;D[ae]=0,F[ae]=-1;var te=J[ae];if(te!==null)for(J[ae]=null,ae=0;ae<te.length;ae++){var ne=te[ae];ne!==null&&(ne.lane&=-536870913)}u&=~ue}m!==0&&fp(r,m,0),E!==0&&v===0&&r.tag!==0&&(r.suspendedLanes|=E&~(R&~o))}function fp(r,o,u){r.pendingLanes|=o,r.suspendedLanes&=~o;var m=31-ii(o);r.entangledLanes|=o,r.entanglements[m]=r.entanglements[m]|1073741824|u&261930}function hp(r,o){var u=r.entangledLanes|=o;for(r=r.entanglements;u;){var m=31-ii(u),v=1<<m;v&o|r[m]&o&&(r[m]|=o),u&=~v}}function mp(r,o){var u=o&-o;return u=(u&42)!==0?1:Uu(u),(u&(r.suspendedLanes|o))!==0?0:u}function Uu(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function $u(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function pp(){var r=G.p;return r!==0?r:(r=window.event,r===void 0?32:ev(r.type))}function gp(r,o){var u=G.p;try{return G.p=r,o()}finally{G.p=u}}var es=Math.random().toString(36).slice(2),jt="__reactFiber$"+es,ci="__reactProps$"+es,xr="__reactContainer$"+es,ju="__reactEvents$"+es,HS="__reactListeners$"+es,GS="__reactHandles$"+es,yp="__reactResources$"+es,Da="__reactMarker$"+es;function Hu(r){delete r[jt],delete r[ci],delete r[ju],delete r[HS],delete r[GS]}function Tr(r){var o=r[jt];if(o)return o;for(var u=r.parentNode;u;){if(o=u[xr]||u[jt]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(r=Fy(r);r!==null;){if(u=r[jt])return u;r=Fy(r)}return o}r=u,u=r.parentNode}return null}function Sr(r){if(r=r[jt]||r[xr]){var o=r.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return r}return null}function ka(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(i(33))}function wr(r){var o=r[yp];return o||(o=r[yp]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Nt(r){r[Da]=!0}var vp=new Set,bp={};function $s(r,o){Ar(r,o),Ar(r+"Capture",o)}function Ar(r,o){for(bp[r]=o,r=0;r<o.length;r++)vp.add(o[r])}var zS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ep={},xp={};function VS(r){return gt.call(xp,r)?!0:gt.call(Ep,r)?!1:zS.test(r)?xp[r]=!0:(Ep[r]=!0,!1)}function rl(r,o,u){if(VS(o))if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var m=o.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+u)}}function al(r,o,u){if(u===null)r.removeAttribute(o);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+u)}}function Rn(r,o,u,m){if(m===null)r.removeAttribute(u);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(u);return}r.setAttributeNS(o,u,""+m)}}function Bi(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Tp(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function qS(r,o,u){var m=Object.getOwnPropertyDescriptor(r.constructor.prototype,o);if(!r.hasOwnProperty(o)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var v=m.get,E=m.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return v.call(this)},set:function(R){u=""+R,E.call(this,R)}}),Object.defineProperty(r,o,{enumerable:m.enumerable}),{getValue:function(){return u},setValue:function(R){u=""+R},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function Gu(r){if(!r._valueTracker){var o=Tp(r)?"checked":"value";r._valueTracker=qS(r,o,""+r[o])}}function Sp(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var u=o.getValue(),m="";return r&&(m=Tp(r)?r.checked?"true":"false":r.value),r=m,r!==u?(o.setValue(r),!0):!1}function ol(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var KS=/[\n"\\]/g;function Fi(r){return r.replace(KS,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function zu(r,o,u,m,v,E,R,D){r.name="",R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?r.type=R:r.removeAttribute("type"),o!=null?R==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+Bi(o)):r.value!==""+Bi(o)&&(r.value=""+Bi(o)):R!=="submit"&&R!=="reset"||r.removeAttribute("value"),o!=null?Vu(r,R,Bi(o)):u!=null?Vu(r,R,Bi(u)):m!=null&&r.removeAttribute("value"),v==null&&E!=null&&(r.defaultChecked=!!E),v!=null&&(r.checked=v&&typeof v!="function"&&typeof v!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?r.name=""+Bi(D):r.removeAttribute("name")}function wp(r,o,u,m,v,E,R,D){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(r.type=E),o!=null||u!=null){if(!(E!=="submit"&&E!=="reset"||o!=null)){Gu(r);return}u=u!=null?""+Bi(u):"",o=o!=null?""+Bi(o):u,D||o===r.value||(r.value=o),r.defaultValue=o}m=m??v,m=typeof m!="function"&&typeof m!="symbol"&&!!m,r.checked=D?r.checked:!!m,r.defaultChecked=!!m,R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"&&(r.name=R),Gu(r)}function Vu(r,o,u){o==="number"&&ol(r.ownerDocument)===r||r.defaultValue===""+u||(r.defaultValue=""+u)}function Rr(r,o,u,m){if(r=r.options,o){o={};for(var v=0;v<u.length;v++)o["$"+u[v]]=!0;for(u=0;u<r.length;u++)v=o.hasOwnProperty("$"+r[u].value),r[u].selected!==v&&(r[u].selected=v),v&&m&&(r[u].defaultSelected=!0)}else{for(u=""+Bi(u),o=null,v=0;v<r.length;v++){if(r[v].value===u){r[v].selected=!0,m&&(r[v].defaultSelected=!0);return}o!==null||r[v].disabled||(o=r[v])}o!==null&&(o.selected=!0)}}function Ap(r,o,u){if(o!=null&&(o=""+Bi(o),o!==r.value&&(r.value=o),u==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=u!=null?""+Bi(u):""}function Rp(r,o,u,m){if(o==null){if(m!=null){if(u!=null)throw Error(i(92));if(W(m)){if(1<m.length)throw Error(i(93));m=m[0]}u=m}u==null&&(u=""),o=u}u=Bi(o),r.defaultValue=u,m=r.textContent,m===u&&m!==""&&m!==null&&(r.value=m),Gu(r)}function Lr(r,o){if(o){var u=r.firstChild;if(u&&u===r.lastChild&&u.nodeType===3){u.nodeValue=o;return}}r.textContent=o}var YS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Lp(r,o,u){var m=o.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?m?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":m?r.setProperty(o,u):typeof u!="number"||u===0||YS.has(o)?o==="float"?r.cssFloat=u:r[o]=(""+u).trim():r[o]=u+"px"}function _p(r,o,u){if(o!=null&&typeof o!="object")throw Error(i(62));if(r=r.style,u!=null){for(var m in u)!u.hasOwnProperty(m)||o!=null&&o.hasOwnProperty(m)||(m.indexOf("--")===0?r.setProperty(m,""):m==="float"?r.cssFloat="":r[m]="");for(var v in o)m=o[v],o.hasOwnProperty(v)&&u[v]!==m&&Lp(r,v,m)}else for(var E in o)o.hasOwnProperty(E)&&Lp(r,E,o[E])}function qu(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var XS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),WS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ll(r){return WS.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Ln(){}var Ku=null;function Yu(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var _r=null,Cr=null;function Cp(r){var o=Sr(r);if(o&&(r=o.stateNode)){var u=r[ci]||null;e:switch(r=o.stateNode,o.type){case"input":if(zu(r,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),o=u.name,u.type==="radio"&&o!=null){for(u=r;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+Fi(""+o)+'"][type="radio"]'),o=0;o<u.length;o++){var m=u[o];if(m!==r&&m.form===r.form){var v=m[ci]||null;if(!v)throw Error(i(90));zu(m,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(o=0;o<u.length;o++)m=u[o],m.form===r.form&&Sp(m)}break e;case"textarea":Ap(r,u.value,u.defaultValue);break e;case"select":o=u.value,o!=null&&Rr(r,!!u.multiple,o,!1)}}}var Xu=!1;function Ip(r,o,u){if(Xu)return r(o,u);Xu=!0;try{var m=r(o);return m}finally{if(Xu=!1,(_r!==null||Cr!==null)&&(Xl(),_r&&(o=_r,r=Cr,Cr=_r=null,Cp(o),r)))for(o=0;o<r.length;o++)Cp(r[o])}}function Oa(r,o){var u=r.stateNode;if(u===null)return null;var m=u[ci]||null;if(m===null)return null;u=m[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(r=r.type,m=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!m;break e;default:r=!1}if(r)return null;if(u&&typeof u!="function")throw Error(i(231,o,typeof u));return u}var _n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wu=!1;if(_n)try{var Ma={};Object.defineProperty(Ma,"passive",{get:function(){Wu=!0}}),window.addEventListener("test",Ma,Ma),window.removeEventListener("test",Ma,Ma)}catch{Wu=!1}var ts=null,Qu=null,cl=null;function Dp(){if(cl)return cl;var r,o=Qu,u=o.length,m,v="value"in ts?ts.value:ts.textContent,E=v.length;for(r=0;r<u&&o[r]===v[r];r++);var R=u-r;for(m=1;m<=R&&o[u-m]===v[E-m];m++);return cl=v.slice(r,1<m?1-m:void 0)}function ul(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function dl(){return!0}function kp(){return!1}function ui(r){function o(u,m,v,E,R){this._reactName=u,this._targetInst=v,this.type=m,this.nativeEvent=E,this.target=R,this.currentTarget=null;for(var D in r)r.hasOwnProperty(D)&&(u=r[D],this[D]=u?u(E):E[D]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?dl:kp,this.isPropagationStopped=kp,this}return p(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=dl)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=dl)},persist:function(){},isPersistent:dl}),o}var js={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fl=ui(js),Pa=p({},js,{view:0,detail:0}),QS=ui(Pa),Zu,Ju,Na,hl=p({},Pa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:td,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Na&&(Na&&r.type==="mousemove"?(Zu=r.screenX-Na.screenX,Ju=r.screenY-Na.screenY):Ju=Zu=0,Na=r),Zu)},movementY:function(r){return"movementY"in r?r.movementY:Ju}}),Op=ui(hl),ZS=p({},hl,{dataTransfer:0}),JS=ui(ZS),e1=p({},Pa,{relatedTarget:0}),ed=ui(e1),t1=p({},js,{animationName:0,elapsedTime:0,pseudoElement:0}),i1=ui(t1),n1=p({},js,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),s1=ui(n1),r1=p({},js,{data:0}),Mp=ui(r1),a1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},o1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},l1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function c1(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=l1[r])?!!o[r]:!1}function td(){return c1}var u1=p({},Pa,{key:function(r){if(r.key){var o=a1[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=ul(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?o1[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:td,charCode:function(r){return r.type==="keypress"?ul(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?ul(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),d1=ui(u1),f1=p({},hl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Pp=ui(f1),h1=p({},Pa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:td}),m1=ui(h1),p1=p({},js,{propertyName:0,elapsedTime:0,pseudoElement:0}),g1=ui(p1),y1=p({},hl,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),v1=ui(y1),b1=p({},js,{newState:0,oldState:0}),E1=ui(b1),x1=[9,13,27,32],id=_n&&"CompositionEvent"in window,Ba=null;_n&&"documentMode"in document&&(Ba=document.documentMode);var T1=_n&&"TextEvent"in window&&!Ba,Np=_n&&(!id||Ba&&8<Ba&&11>=Ba),Bp=" ",Fp=!1;function Up(r,o){switch(r){case"keyup":return x1.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $p(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Ir=!1;function S1(r,o){switch(r){case"compositionend":return $p(o);case"keypress":return o.which!==32?null:(Fp=!0,Bp);case"textInput":return r=o.data,r===Bp&&Fp?null:r;default:return null}}function w1(r,o){if(Ir)return r==="compositionend"||!id&&Up(r,o)?(r=Dp(),cl=Qu=ts=null,Ir=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return Np&&o.locale!=="ko"?null:o.data;default:return null}}var A1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function jp(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!A1[r.type]:o==="textarea"}function Hp(r,o,u,m){_r?Cr?Cr.push(m):Cr=[m]:_r=m,o=ic(o,"onChange"),0<o.length&&(u=new fl("onChange","change",null,u,m),r.push({event:u,listeners:o}))}var Fa=null,Ua=null;function R1(r){wy(r,0)}function ml(r){var o=ka(r);if(Sp(o))return r}function Gp(r,o){if(r==="change")return o}var zp=!1;if(_n){var nd;if(_n){var sd="oninput"in document;if(!sd){var Vp=document.createElement("div");Vp.setAttribute("oninput","return;"),sd=typeof Vp.oninput=="function"}nd=sd}else nd=!1;zp=nd&&(!document.documentMode||9<document.documentMode)}function qp(){Fa&&(Fa.detachEvent("onpropertychange",Kp),Ua=Fa=null)}function Kp(r){if(r.propertyName==="value"&&ml(Ua)){var o=[];Hp(o,Ua,r,Yu(r)),Ip(R1,o)}}function L1(r,o,u){r==="focusin"?(qp(),Fa=o,Ua=u,Fa.attachEvent("onpropertychange",Kp)):r==="focusout"&&qp()}function _1(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return ml(Ua)}function C1(r,o){if(r==="click")return ml(o)}function I1(r,o){if(r==="input"||r==="change")return ml(o)}function D1(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var xi=typeof Object.is=="function"?Object.is:D1;function $a(r,o){if(xi(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var u=Object.keys(r),m=Object.keys(o);if(u.length!==m.length)return!1;for(m=0;m<u.length;m++){var v=u[m];if(!gt.call(o,v)||!xi(r[v],o[v]))return!1}return!0}function Yp(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Xp(r,o){var u=Yp(r);r=0;for(var m;u;){if(u.nodeType===3){if(m=r+u.textContent.length,r<=o&&m>=o)return{node:u,offset:o-r};r=m}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Yp(u)}}function Wp(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?Wp(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function Qp(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=ol(r.document);o instanceof r.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)r=o.contentWindow;else break;o=ol(r.document)}return o}function rd(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var k1=_n&&"documentMode"in document&&11>=document.documentMode,Dr=null,ad=null,ja=null,od=!1;function Zp(r,o,u){var m=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;od||Dr==null||Dr!==ol(m)||(m=Dr,"selectionStart"in m&&rd(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),ja&&$a(ja,m)||(ja=m,m=ic(ad,"onSelect"),0<m.length&&(o=new fl("onSelect","select",null,o,u),r.push({event:o,listeners:m}),o.target=Dr)))}function Hs(r,o){var u={};return u[r.toLowerCase()]=o.toLowerCase(),u["Webkit"+r]="webkit"+o,u["Moz"+r]="moz"+o,u}var kr={animationend:Hs("Animation","AnimationEnd"),animationiteration:Hs("Animation","AnimationIteration"),animationstart:Hs("Animation","AnimationStart"),transitionrun:Hs("Transition","TransitionRun"),transitionstart:Hs("Transition","TransitionStart"),transitioncancel:Hs("Transition","TransitionCancel"),transitionend:Hs("Transition","TransitionEnd")},ld={},Jp={};_n&&(Jp=document.createElement("div").style,"AnimationEvent"in window||(delete kr.animationend.animation,delete kr.animationiteration.animation,delete kr.animationstart.animation),"TransitionEvent"in window||delete kr.transitionend.transition);function Gs(r){if(ld[r])return ld[r];if(!kr[r])return r;var o=kr[r],u;for(u in o)if(o.hasOwnProperty(u)&&u in Jp)return ld[r]=o[u];return r}var eg=Gs("animationend"),tg=Gs("animationiteration"),ig=Gs("animationstart"),O1=Gs("transitionrun"),M1=Gs("transitionstart"),P1=Gs("transitioncancel"),ng=Gs("transitionend"),sg=new Map,cd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");cd.push("scrollEnd");function Ji(r,o){sg.set(r,o),$s(o,[r])}var pl=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},Ui=[],Or=0,ud=0;function gl(){for(var r=Or,o=ud=Or=0;o<r;){var u=Ui[o];Ui[o++]=null;var m=Ui[o];Ui[o++]=null;var v=Ui[o];Ui[o++]=null;var E=Ui[o];if(Ui[o++]=null,m!==null&&v!==null){var R=m.pending;R===null?v.next=v:(v.next=R.next,R.next=v),m.pending=v}E!==0&&rg(u,v,E)}}function yl(r,o,u,m){Ui[Or++]=r,Ui[Or++]=o,Ui[Or++]=u,Ui[Or++]=m,ud|=m,r.lanes|=m,r=r.alternate,r!==null&&(r.lanes|=m)}function dd(r,o,u,m){return yl(r,o,u,m),vl(r)}function zs(r,o){return yl(r,null,null,o),vl(r)}function rg(r,o,u){r.lanes|=u;var m=r.alternate;m!==null&&(m.lanes|=u);for(var v=!1,E=r.return;E!==null;)E.childLanes|=u,m=E.alternate,m!==null&&(m.childLanes|=u),E.tag===22&&(r=E.stateNode,r===null||r._visibility&1||(v=!0)),r=E,E=E.return;return r.tag===3?(E=r.stateNode,v&&o!==null&&(v=31-ii(u),r=E.hiddenUpdates,m=r[v],m===null?r[v]=[o]:m.push(o),o.lane=u|536870912),E):null}function vl(r){if(50<co)throw co=0,xf=null,Error(i(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var Mr={};function N1(r,o,u,m){this.tag=r,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ti(r,o,u,m){return new N1(r,o,u,m)}function fd(r){return r=r.prototype,!(!r||!r.isReactComponent)}function Cn(r,o){var u=r.alternate;return u===null?(u=Ti(r.tag,o,r.key,r.mode),u.elementType=r.elementType,u.type=r.type,u.stateNode=r.stateNode,u.alternate=r,r.alternate=u):(u.pendingProps=o,u.type=r.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=r.flags&65011712,u.childLanes=r.childLanes,u.lanes=r.lanes,u.child=r.child,u.memoizedProps=r.memoizedProps,u.memoizedState=r.memoizedState,u.updateQueue=r.updateQueue,o=r.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=r.sibling,u.index=r.index,u.ref=r.ref,u.refCleanup=r.refCleanup,u}function ag(r,o){r.flags&=65011714;var u=r.alternate;return u===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=u.childLanes,r.lanes=u.lanes,r.child=u.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=u.memoizedProps,r.memoizedState=u.memoizedState,r.updateQueue=u.updateQueue,r.type=u.type,o=u.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function bl(r,o,u,m,v,E){var R=0;if(m=r,typeof r=="function")fd(r)&&(R=1);else if(typeof r=="string")R=jw(r,u,de.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case B:return r=Ti(31,u,o,v),r.elementType=B,r.lanes=E,r;case T:return Vs(u.children,v,E,o);case x:R=8,v|=24;break;case w:return r=Ti(12,u,o,v|2),r.elementType=w,r.lanes=E,r;case I:return r=Ti(13,u,o,v),r.elementType=I,r.lanes=E,r;case P:return r=Ti(19,u,o,v),r.elementType=P,r.lanes=E,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case A:R=10;break e;case S:R=9;break e;case _:R=11;break e;case C:R=14;break e;case O:R=16,m=null;break e}R=29,u=Error(i(130,r===null?"null":typeof r,"")),m=null}return o=Ti(R,u,o,v),o.elementType=r,o.type=m,o.lanes=E,o}function Vs(r,o,u,m){return r=Ti(7,r,m,o),r.lanes=u,r}function hd(r,o,u){return r=Ti(6,r,null,o),r.lanes=u,r}function og(r){var o=Ti(18,null,null,0);return o.stateNode=r,o}function md(r,o,u){return o=Ti(4,r.children!==null?r.children:[],r.key,o),o.lanes=u,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var lg=new WeakMap;function $i(r,o){if(typeof r=="object"&&r!==null){var u=lg.get(r);return u!==void 0?u:(o={value:r,source:o,stack:Dt(o)},lg.set(r,o),o)}return{value:r,source:o,stack:Dt(o)}}var Pr=[],Nr=0,El=null,Ha=0,ji=[],Hi=0,is=null,cn=1,un="";function In(r,o){Pr[Nr++]=Ha,Pr[Nr++]=El,El=r,Ha=o}function cg(r,o,u){ji[Hi++]=cn,ji[Hi++]=un,ji[Hi++]=is,is=r;var m=cn;r=un;var v=32-ii(m)-1;m&=~(1<<v),u+=1;var E=32-ii(o)+v;if(30<E){var R=v-v%5;E=(m&(1<<R)-1).toString(32),m>>=R,v-=R,cn=1<<32-ii(o)+v|u<<v|m,un=E+r}else cn=1<<E|u<<v|m,un=r}function pd(r){r.return!==null&&(In(r,1),cg(r,1,0))}function gd(r){for(;r===El;)El=Pr[--Nr],Pr[Nr]=null,Ha=Pr[--Nr],Pr[Nr]=null;for(;r===is;)is=ji[--Hi],ji[Hi]=null,un=ji[--Hi],ji[Hi]=null,cn=ji[--Hi],ji[Hi]=null}function ug(r,o){ji[Hi++]=cn,ji[Hi++]=un,ji[Hi++]=is,cn=o.id,un=o.overflow,is=r}var Ht=null,at=null,je=!1,ns=null,Gi=!1,yd=Error(i(519));function ss(r){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ga($i(o,r)),yd}function dg(r){var o=r.stateNode,u=r.type,m=r.memoizedProps;switch(o[jt]=r,o[ci]=m,u){case"dialog":Fe("cancel",o),Fe("close",o);break;case"iframe":case"object":case"embed":Fe("load",o);break;case"video":case"audio":for(u=0;u<fo.length;u++)Fe(fo[u],o);break;case"source":Fe("error",o);break;case"img":case"image":case"link":Fe("error",o),Fe("load",o);break;case"details":Fe("toggle",o);break;case"input":Fe("invalid",o),wp(o,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0);break;case"select":Fe("invalid",o);break;case"textarea":Fe("invalid",o),Rp(o,m.value,m.defaultValue,m.children)}u=m.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||o.textContent===""+u||m.suppressHydrationWarning===!0||_y(o.textContent,u)?(m.popover!=null&&(Fe("beforetoggle",o),Fe("toggle",o)),m.onScroll!=null&&Fe("scroll",o),m.onScrollEnd!=null&&Fe("scrollend",o),m.onClick!=null&&(o.onclick=Ln),o=!0):o=!1,o||ss(r,!0)}function fg(r){for(Ht=r.return;Ht;)switch(Ht.tag){case 5:case 31:case 13:Gi=!1;return;case 27:case 3:Gi=!0;return;default:Ht=Ht.return}}function Br(r){if(r!==Ht)return!1;if(!je)return fg(r),je=!0,!1;var o=r.tag,u;if((u=o!==3&&o!==27)&&((u=o===5)&&(u=r.type,u=!(u!=="form"&&u!=="button")||Nf(r.type,r.memoizedProps)),u=!u),u&&at&&ss(r),fg(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));at=By(r)}else if(o===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));at=By(r)}else o===27?(o=at,vs(r.type)?(r=jf,jf=null,at=r):at=o):at=Ht?Vi(r.stateNode.nextSibling):null;return!0}function qs(){at=Ht=null,je=!1}function vd(){var r=ns;return r!==null&&(mi===null?mi=r:mi.push.apply(mi,r),ns=null),r}function Ga(r){ns===null?ns=[r]:ns.push(r)}var bd=M(null),Ks=null,Dn=null;function rs(r,o,u){se(bd,o._currentValue),o._currentValue=u}function kn(r){r._currentValue=bd.current,$(bd)}function Ed(r,o,u){for(;r!==null;){var m=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,m!==null&&(m.childLanes|=o)):m!==null&&(m.childLanes&o)!==o&&(m.childLanes|=o),r===u)break;r=r.return}}function xd(r,o,u,m){var v=r.child;for(v!==null&&(v.return=r);v!==null;){var E=v.dependencies;if(E!==null){var R=v.child;E=E.firstContext;e:for(;E!==null;){var D=E;E=v;for(var F=0;F<o.length;F++)if(D.context===o[F]){E.lanes|=u,D=E.alternate,D!==null&&(D.lanes|=u),Ed(E.return,u,r),m||(R=null);break e}E=D.next}}else if(v.tag===18){if(R=v.return,R===null)throw Error(i(341));R.lanes|=u,E=R.alternate,E!==null&&(E.lanes|=u),Ed(R,u,r),R=null}else R=v.child;if(R!==null)R.return=v;else for(R=v;R!==null;){if(R===r){R=null;break}if(v=R.sibling,v!==null){v.return=R.return,R=v;break}R=R.return}v=R}}function Fr(r,o,u,m){r=null;for(var v=o,E=!1;v!==null;){if(!E){if((v.flags&524288)!==0)E=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var R=v.alternate;if(R===null)throw Error(i(387));if(R=R.memoizedProps,R!==null){var D=v.type;xi(v.pendingProps.value,R.value)||(r!==null?r.push(D):r=[D])}}else if(v===Se.current){if(R=v.alternate,R===null)throw Error(i(387));R.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(r!==null?r.push(yo):r=[yo])}v=v.return}r!==null&&xd(o,r,u,m),o.flags|=262144}function xl(r){for(r=r.firstContext;r!==null;){if(!xi(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Ys(r){Ks=r,Dn=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function Gt(r){return hg(Ks,r)}function Tl(r,o){return Ks===null&&Ys(r),hg(r,o)}function hg(r,o){var u=o._currentValue;if(o={context:o,memoizedValue:u,next:null},Dn===null){if(r===null)throw Error(i(308));Dn=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else Dn=Dn.next=o;return u}var B1=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(u,m){r.push(m)}};this.abort=function(){o.aborted=!0,r.forEach(function(u){return u()})}},F1=n.unstable_scheduleCallback,U1=n.unstable_NormalPriority,Rt={$$typeof:A,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Td(){return{controller:new B1,data:new Map,refCount:0}}function za(r){r.refCount--,r.refCount===0&&F1(U1,function(){r.controller.abort()})}var Va=null,Sd=0,Ur=0,$r=null;function $1(r,o){if(Va===null){var u=Va=[];Sd=0,Ur=Lf(),$r={status:"pending",value:void 0,then:function(m){u.push(m)}}}return Sd++,o.then(mg,mg),o}function mg(){if(--Sd===0&&Va!==null){$r!==null&&($r.status="fulfilled");var r=Va;Va=null,Ur=0,$r=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function j1(r,o){var u=[],m={status:"pending",value:null,reason:null,then:function(v){u.push(v)}};return r.then(function(){m.status="fulfilled",m.value=o;for(var v=0;v<u.length;v++)(0,u[v])(o)},function(v){for(m.status="rejected",m.reason=v,v=0;v<u.length;v++)(0,u[v])(void 0)}),m}var pg=k.S;k.S=function(r,o){Z0=ut(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&$1(r,o),pg!==null&&pg(r,o)};var Xs=M(null);function wd(){var r=Xs.current;return r!==null?r:tt.pooledCache}function Sl(r,o){o===null?se(Xs,Xs.current):se(Xs,o.pool)}function gg(){var r=wd();return r===null?null:{parent:Rt._currentValue,pool:r}}var jr=Error(i(460)),Ad=Error(i(474)),wl=Error(i(542)),Al={then:function(){}};function yg(r){return r=r.status,r==="fulfilled"||r==="rejected"}function vg(r,o,u){switch(u=r[u],u===void 0?r.push(o):u!==o&&(o.then(Ln,Ln),o=u),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,Eg(r),r;default:if(typeof o.status=="string")o.then(Ln,Ln);else{if(r=tt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=o,r.status="pending",r.then(function(m){if(o.status==="pending"){var v=o;v.status="fulfilled",v.value=m}},function(m){if(o.status==="pending"){var v=o;v.status="rejected",v.reason=m}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,Eg(r),r}throw Qs=o,jr}}function Ws(r){try{var o=r._init;return o(r._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Qs=u,jr):u}}var Qs=null;function bg(){if(Qs===null)throw Error(i(459));var r=Qs;return Qs=null,r}function Eg(r){if(r===jr||r===wl)throw Error(i(483))}var Hr=null,qa=0;function Rl(r){var o=qa;return qa+=1,Hr===null&&(Hr=[]),vg(Hr,r,o)}function Ka(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function Ll(r,o){throw o.$$typeof===g?Error(i(525)):(r=Object.prototype.toString.call(o),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function xg(r){function o(q,j){if(r){var Z=q.deletions;Z===null?(q.deletions=[j],q.flags|=16):Z.push(j)}}function u(q,j){if(!r)return null;for(;j!==null;)o(q,j),j=j.sibling;return null}function m(q){for(var j=new Map;q!==null;)q.key!==null?j.set(q.key,q):j.set(q.index,q),q=q.sibling;return j}function v(q,j){return q=Cn(q,j),q.index=0,q.sibling=null,q}function E(q,j,Z){return q.index=Z,r?(Z=q.alternate,Z!==null?(Z=Z.index,Z<j?(q.flags|=67108866,j):Z):(q.flags|=67108866,j)):(q.flags|=1048576,j)}function R(q){return r&&q.alternate===null&&(q.flags|=67108866),q}function D(q,j,Z,ce){return j===null||j.tag!==6?(j=hd(Z,q.mode,ce),j.return=q,j):(j=v(j,Z),j.return=q,j)}function F(q,j,Z,ce){var Te=Z.type;return Te===T?ae(q,j,Z.props.children,ce,Z.key):j!==null&&(j.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===O&&Ws(Te)===j.type)?(j=v(j,Z.props),Ka(j,Z),j.return=q,j):(j=bl(Z.type,Z.key,Z.props,null,q.mode,ce),Ka(j,Z),j.return=q,j)}function J(q,j,Z,ce){return j===null||j.tag!==4||j.stateNode.containerInfo!==Z.containerInfo||j.stateNode.implementation!==Z.implementation?(j=md(Z,q.mode,ce),j.return=q,j):(j=v(j,Z.children||[]),j.return=q,j)}function ae(q,j,Z,ce,Te){return j===null||j.tag!==7?(j=Vs(Z,q.mode,ce,Te),j.return=q,j):(j=v(j,Z),j.return=q,j)}function ue(q,j,Z){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=hd(""+j,q.mode,Z),j.return=q,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case b:return Z=bl(j.type,j.key,j.props,null,q.mode,Z),Ka(Z,j),Z.return=q,Z;case y:return j=md(j,q.mode,Z),j.return=q,j;case O:return j=Ws(j),ue(q,j,Z)}if(W(j)||ee(j))return j=Vs(j,q.mode,Z,null),j.return=q,j;if(typeof j.then=="function")return ue(q,Rl(j),Z);if(j.$$typeof===A)return ue(q,Tl(q,j),Z);Ll(q,j)}return null}function te(q,j,Z,ce){var Te=j!==null?j.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Te!==null?null:D(q,j,""+Z,ce);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case b:return Z.key===Te?F(q,j,Z,ce):null;case y:return Z.key===Te?J(q,j,Z,ce):null;case O:return Z=Ws(Z),te(q,j,Z,ce)}if(W(Z)||ee(Z))return Te!==null?null:ae(q,j,Z,ce,null);if(typeof Z.then=="function")return te(q,j,Rl(Z),ce);if(Z.$$typeof===A)return te(q,j,Tl(q,Z),ce);Ll(q,Z)}return null}function ne(q,j,Z,ce,Te){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return q=q.get(Z)||null,D(j,q,""+ce,Te);if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case b:return q=q.get(ce.key===null?Z:ce.key)||null,F(j,q,ce,Te);case y:return q=q.get(ce.key===null?Z:ce.key)||null,J(j,q,ce,Te);case O:return ce=Ws(ce),ne(q,j,Z,ce,Te)}if(W(ce)||ee(ce))return q=q.get(Z)||null,ae(j,q,ce,Te,null);if(typeof ce.then=="function")return ne(q,j,Z,Rl(ce),Te);if(ce.$$typeof===A)return ne(q,j,Z,Tl(j,ce),Te);Ll(j,ce)}return null}function ve(q,j,Z,ce){for(var Te=null,He=null,be=j,De=j=0,$e=null;be!==null&&De<Z.length;De++){be.index>De?($e=be,be=null):$e=be.sibling;var Ge=te(q,be,Z[De],ce);if(Ge===null){be===null&&(be=$e);break}r&&be&&Ge.alternate===null&&o(q,be),j=E(Ge,j,De),He===null?Te=Ge:He.sibling=Ge,He=Ge,be=$e}if(De===Z.length)return u(q,be),je&&In(q,De),Te;if(be===null){for(;De<Z.length;De++)be=ue(q,Z[De],ce),be!==null&&(j=E(be,j,De),He===null?Te=be:He.sibling=be,He=be);return je&&In(q,De),Te}for(be=m(be);De<Z.length;De++)$e=ne(be,q,De,Z[De],ce),$e!==null&&(r&&$e.alternate!==null&&be.delete($e.key===null?De:$e.key),j=E($e,j,De),He===null?Te=$e:He.sibling=$e,He=$e);return r&&be.forEach(function(Ss){return o(q,Ss)}),je&&In(q,De),Te}function we(q,j,Z,ce){if(Z==null)throw Error(i(151));for(var Te=null,He=null,be=j,De=j=0,$e=null,Ge=Z.next();be!==null&&!Ge.done;De++,Ge=Z.next()){be.index>De?($e=be,be=null):$e=be.sibling;var Ss=te(q,be,Ge.value,ce);if(Ss===null){be===null&&(be=$e);break}r&&be&&Ss.alternate===null&&o(q,be),j=E(Ss,j,De),He===null?Te=Ss:He.sibling=Ss,He=Ss,be=$e}if(Ge.done)return u(q,be),je&&In(q,De),Te;if(be===null){for(;!Ge.done;De++,Ge=Z.next())Ge=ue(q,Ge.value,ce),Ge!==null&&(j=E(Ge,j,De),He===null?Te=Ge:He.sibling=Ge,He=Ge);return je&&In(q,De),Te}for(be=m(be);!Ge.done;De++,Ge=Z.next())Ge=ne(be,q,De,Ge.value,ce),Ge!==null&&(r&&Ge.alternate!==null&&be.delete(Ge.key===null?De:Ge.key),j=E(Ge,j,De),He===null?Te=Ge:He.sibling=Ge,He=Ge);return r&&be.forEach(function(Zw){return o(q,Zw)}),je&&In(q,De),Te}function Je(q,j,Z,ce){if(typeof Z=="object"&&Z!==null&&Z.type===T&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case b:e:{for(var Te=Z.key;j!==null;){if(j.key===Te){if(Te=Z.type,Te===T){if(j.tag===7){u(q,j.sibling),ce=v(j,Z.props.children),ce.return=q,q=ce;break e}}else if(j.elementType===Te||typeof Te=="object"&&Te!==null&&Te.$$typeof===O&&Ws(Te)===j.type){u(q,j.sibling),ce=v(j,Z.props),Ka(ce,Z),ce.return=q,q=ce;break e}u(q,j);break}else o(q,j);j=j.sibling}Z.type===T?(ce=Vs(Z.props.children,q.mode,ce,Z.key),ce.return=q,q=ce):(ce=bl(Z.type,Z.key,Z.props,null,q.mode,ce),Ka(ce,Z),ce.return=q,q=ce)}return R(q);case y:e:{for(Te=Z.key;j!==null;){if(j.key===Te)if(j.tag===4&&j.stateNode.containerInfo===Z.containerInfo&&j.stateNode.implementation===Z.implementation){u(q,j.sibling),ce=v(j,Z.children||[]),ce.return=q,q=ce;break e}else{u(q,j);break}else o(q,j);j=j.sibling}ce=md(Z,q.mode,ce),ce.return=q,q=ce}return R(q);case O:return Z=Ws(Z),Je(q,j,Z,ce)}if(W(Z))return ve(q,j,Z,ce);if(ee(Z)){if(Te=ee(Z),typeof Te!="function")throw Error(i(150));return Z=Te.call(Z),we(q,j,Z,ce)}if(typeof Z.then=="function")return Je(q,j,Rl(Z),ce);if(Z.$$typeof===A)return Je(q,j,Tl(q,Z),ce);Ll(q,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,j!==null&&j.tag===6?(u(q,j.sibling),ce=v(j,Z),ce.return=q,q=ce):(u(q,j),ce=hd(Z,q.mode,ce),ce.return=q,q=ce),R(q)):u(q,j)}return function(q,j,Z,ce){try{qa=0;var Te=Je(q,j,Z,ce);return Hr=null,Te}catch(be){if(be===jr||be===wl)throw be;var He=Ti(29,be,null,q.mode);return He.lanes=ce,He.return=q,He}}}var Zs=xg(!0),Tg=xg(!1),as=!1;function Rd(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ld(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function os(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function ls(r,o,u){var m=r.updateQueue;if(m===null)return null;if(m=m.shared,(ze&2)!==0){var v=m.pending;return v===null?o.next=o:(o.next=v.next,v.next=o),m.pending=o,o=vl(r),rg(r,null,u),o}return yl(r,m,o,u),vl(r)}function Ya(r,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194048)!==0)){var m=o.lanes;m&=r.pendingLanes,u|=m,o.lanes=u,hp(r,u)}}function _d(r,o){var u=r.updateQueue,m=r.alternate;if(m!==null&&(m=m.updateQueue,u===m)){var v=null,E=null;if(u=u.firstBaseUpdate,u!==null){do{var R={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};E===null?v=E=R:E=E.next=R,u=u.next}while(u!==null);E===null?v=E=o:E=E.next=o}else v=E=o;u={baseState:m.baseState,firstBaseUpdate:v,lastBaseUpdate:E,shared:m.shared,callbacks:m.callbacks},r.updateQueue=u;return}r=u.lastBaseUpdate,r===null?u.firstBaseUpdate=o:r.next=o,u.lastBaseUpdate=o}var Cd=!1;function Xa(){if(Cd){var r=$r;if(r!==null)throw r}}function Wa(r,o,u,m){Cd=!1;var v=r.updateQueue;as=!1;var E=v.firstBaseUpdate,R=v.lastBaseUpdate,D=v.shared.pending;if(D!==null){v.shared.pending=null;var F=D,J=F.next;F.next=null,R===null?E=J:R.next=J,R=F;var ae=r.alternate;ae!==null&&(ae=ae.updateQueue,D=ae.lastBaseUpdate,D!==R&&(D===null?ae.firstBaseUpdate=J:D.next=J,ae.lastBaseUpdate=F))}if(E!==null){var ue=v.baseState;R=0,ae=J=F=null,D=E;do{var te=D.lane&-536870913,ne=te!==D.lane;if(ne?(Ue&te)===te:(m&te)===te){te!==0&&te===Ur&&(Cd=!0),ae!==null&&(ae=ae.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var ve=r,we=D;te=o;var Je=u;switch(we.tag){case 1:if(ve=we.payload,typeof ve=="function"){ue=ve.call(Je,ue,te);break e}ue=ve;break e;case 3:ve.flags=ve.flags&-65537|128;case 0:if(ve=we.payload,te=typeof ve=="function"?ve.call(Je,ue,te):ve,te==null)break e;ue=p({},ue,te);break e;case 2:as=!0}}te=D.callback,te!==null&&(r.flags|=64,ne&&(r.flags|=8192),ne=v.callbacks,ne===null?v.callbacks=[te]:ne.push(te))}else ne={lane:te,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ae===null?(J=ae=ne,F=ue):ae=ae.next=ne,R|=te;if(D=D.next,D===null){if(D=v.shared.pending,D===null)break;ne=D,D=ne.next,ne.next=null,v.lastBaseUpdate=ne,v.shared.pending=null}}while(!0);ae===null&&(F=ue),v.baseState=F,v.firstBaseUpdate=J,v.lastBaseUpdate=ae,E===null&&(v.shared.lanes=0),hs|=R,r.lanes=R,r.memoizedState=ue}}function Sg(r,o){if(typeof r!="function")throw Error(i(191,r));r.call(o)}function wg(r,o){var u=r.callbacks;if(u!==null)for(r.callbacks=null,r=0;r<u.length;r++)Sg(u[r],o)}var Gr=M(null),_l=M(0);function Ag(r,o){r=jn,se(_l,r),se(Gr,o),jn=r|o.baseLanes}function Id(){se(_l,jn),se(Gr,Gr.current)}function Dd(){jn=_l.current,$(Gr),$(_l)}var Si=M(null),zi=null;function cs(r){var o=r.alternate;se(xt,xt.current&1),se(Si,r),zi===null&&(o===null||Gr.current!==null||o.memoizedState!==null)&&(zi=r)}function kd(r){se(xt,xt.current),se(Si,r),zi===null&&(zi=r)}function Rg(r){r.tag===22?(se(xt,xt.current),se(Si,r),zi===null&&(zi=r)):us()}function us(){se(xt,xt.current),se(Si,Si.current)}function wi(r){$(Si),zi===r&&(zi=null),$(xt)}var xt=M(0);function Cl(r){for(var o=r;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Uf(u)||$f(u)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var On=0,Ie=null,Qe=null,Lt=null,Il=!1,zr=!1,Js=!1,Dl=0,Qa=0,Vr=null,H1=0;function vt(){throw Error(i(321))}function Od(r,o){if(o===null)return!1;for(var u=0;u<o.length&&u<r.length;u++)if(!xi(r[u],o[u]))return!1;return!0}function Md(r,o,u,m,v,E){return On=E,Ie=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,k.H=r===null||r.memoizedState===null?c0:Xd,Js=!1,E=u(m,v),Js=!1,zr&&(E=_g(o,u,m,v)),Lg(r),E}function Lg(r){k.H=eo;var o=Qe!==null&&Qe.next!==null;if(On=0,Lt=Qe=Ie=null,Il=!1,Qa=0,Vr=null,o)throw Error(i(300));r===null||_t||(r=r.dependencies,r!==null&&xl(r)&&(_t=!0))}function _g(r,o,u,m){Ie=r;var v=0;do{if(zr&&(Vr=null),Qa=0,zr=!1,25<=v)throw Error(i(301));if(v+=1,Lt=Qe=null,r.updateQueue!=null){var E=r.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}k.H=u0,E=o(u,m)}while(zr);return E}function G1(){var r=k.H,o=r.useState()[0];return o=typeof o.then=="function"?Za(o):o,r=r.useState()[0],(Qe!==null?Qe.memoizedState:null)!==r&&(Ie.flags|=1024),o}function Pd(){var r=Dl!==0;return Dl=0,r}function Nd(r,o,u){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~u}function Bd(r){if(Il){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Il=!1}On=0,Lt=Qe=Ie=null,zr=!1,Qa=Dl=0,Vr=null}function ni(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?Ie.memoizedState=Lt=r:Lt=Lt.next=r,Lt}function Tt(){if(Qe===null){var r=Ie.alternate;r=r!==null?r.memoizedState:null}else r=Qe.next;var o=Lt===null?Ie.memoizedState:Lt.next;if(o!==null)Lt=o,Qe=r;else{if(r===null)throw Ie.alternate===null?Error(i(467)):Error(i(310));Qe=r,r={memoizedState:Qe.memoizedState,baseState:Qe.baseState,baseQueue:Qe.baseQueue,queue:Qe.queue,next:null},Lt===null?Ie.memoizedState=Lt=r:Lt=Lt.next=r}return Lt}function kl(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Za(r){var o=Qa;return Qa+=1,Vr===null&&(Vr=[]),r=vg(Vr,r,o),o=Ie,(Lt===null?o.memoizedState:Lt.next)===null&&(o=o.alternate,k.H=o===null||o.memoizedState===null?c0:Xd),r}function Ol(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return Za(r);if(r.$$typeof===A)return Gt(r)}throw Error(i(438,String(r)))}function Fd(r){var o=null,u=Ie.updateQueue;if(u!==null&&(o=u.memoCache),o==null){var m=Ie.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(o={data:m.data.map(function(v){return v.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),u===null&&(u=kl(),Ie.updateQueue=u),u.memoCache=o,u=o.data[o.index],u===void 0)for(u=o.data[o.index]=Array(r),m=0;m<r;m++)u[m]=N;return o.index++,u}function Mn(r,o){return typeof o=="function"?o(r):o}function Ml(r){var o=Tt();return Ud(o,Qe,r)}function Ud(r,o,u){var m=r.queue;if(m===null)throw Error(i(311));m.lastRenderedReducer=u;var v=r.baseQueue,E=m.pending;if(E!==null){if(v!==null){var R=v.next;v.next=E.next,E.next=R}o.baseQueue=v=E,m.pending=null}if(E=r.baseState,v===null)r.memoizedState=E;else{o=v.next;var D=R=null,F=null,J=o,ae=!1;do{var ue=J.lane&-536870913;if(ue!==J.lane?(Ue&ue)===ue:(On&ue)===ue){var te=J.revertLane;if(te===0)F!==null&&(F=F.next={lane:0,revertLane:0,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null}),ue===Ur&&(ae=!0);else if((On&te)===te){J=J.next,te===Ur&&(ae=!0);continue}else ue={lane:0,revertLane:J.revertLane,gesture:null,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},F===null?(D=F=ue,R=E):F=F.next=ue,Ie.lanes|=te,hs|=te;ue=J.action,Js&&u(E,ue),E=J.hasEagerState?J.eagerState:u(E,ue)}else te={lane:ue,revertLane:J.revertLane,gesture:J.gesture,action:J.action,hasEagerState:J.hasEagerState,eagerState:J.eagerState,next:null},F===null?(D=F=te,R=E):F=F.next=te,Ie.lanes|=ue,hs|=ue;J=J.next}while(J!==null&&J!==o);if(F===null?R=E:F.next=D,!xi(E,r.memoizedState)&&(_t=!0,ae&&(u=$r,u!==null)))throw u;r.memoizedState=E,r.baseState=R,r.baseQueue=F,m.lastRenderedState=E}return v===null&&(m.lanes=0),[r.memoizedState,m.dispatch]}function $d(r){var o=Tt(),u=o.queue;if(u===null)throw Error(i(311));u.lastRenderedReducer=r;var m=u.dispatch,v=u.pending,E=o.memoizedState;if(v!==null){u.pending=null;var R=v=v.next;do E=r(E,R.action),R=R.next;while(R!==v);xi(E,o.memoizedState)||(_t=!0),o.memoizedState=E,o.baseQueue===null&&(o.baseState=E),u.lastRenderedState=E}return[E,m]}function Cg(r,o,u){var m=Ie,v=Tt(),E=je;if(E){if(u===void 0)throw Error(i(407));u=u()}else u=o();var R=!xi((Qe||v).memoizedState,u);if(R&&(v.memoizedState=u,_t=!0),v=v.queue,Gd(kg.bind(null,m,v,r),[r]),v.getSnapshot!==o||R||Lt!==null&&Lt.memoizedState.tag&1){if(m.flags|=2048,qr(9,{destroy:void 0},Dg.bind(null,m,v,u,o),null),tt===null)throw Error(i(349));E||(On&127)!==0||Ig(m,o,u)}return u}function Ig(r,o,u){r.flags|=16384,r={getSnapshot:o,value:u},o=Ie.updateQueue,o===null?(o=kl(),Ie.updateQueue=o,o.stores=[r]):(u=o.stores,u===null?o.stores=[r]:u.push(r))}function Dg(r,o,u,m){o.value=u,o.getSnapshot=m,Og(o)&&Mg(r)}function kg(r,o,u){return u(function(){Og(o)&&Mg(r)})}function Og(r){var o=r.getSnapshot;r=r.value;try{var u=o();return!xi(r,u)}catch{return!0}}function Mg(r){var o=zs(r,2);o!==null&&pi(o,r,2)}function jd(r){var o=ni();if(typeof r=="function"){var u=r;if(r=u(),Js){ln(!0);try{u()}finally{ln(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mn,lastRenderedState:r},o}function Pg(r,o,u,m){return r.baseState=u,Ud(r,Qe,typeof m=="function"?m:Mn)}function z1(r,o,u,m,v){if(Bl(r))throw Error(i(485));if(r=o.action,r!==null){var E={payload:v,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(R){E.listeners.push(R)}};k.T!==null?u(!0):E.isTransition=!1,m(E),u=o.pending,u===null?(E.next=o.pending=E,Ng(o,E)):(E.next=u.next,o.pending=u.next=E)}}function Ng(r,o){var u=o.action,m=o.payload,v=r.state;if(o.isTransition){var E=k.T,R={};k.T=R;try{var D=u(v,m),F=k.S;F!==null&&F(R,D),Bg(r,o,D)}catch(J){Hd(r,o,J)}finally{E!==null&&R.types!==null&&(E.types=R.types),k.T=E}}else try{E=u(v,m),Bg(r,o,E)}catch(J){Hd(r,o,J)}}function Bg(r,o,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(m){Fg(r,o,m)},function(m){return Hd(r,o,m)}):Fg(r,o,u)}function Fg(r,o,u){o.status="fulfilled",o.value=u,Ug(o),r.state=u,o=r.pending,o!==null&&(u=o.next,u===o?r.pending=null:(u=u.next,o.next=u,Ng(r,u)))}function Hd(r,o,u){var m=r.pending;if(r.pending=null,m!==null){m=m.next;do o.status="rejected",o.reason=u,Ug(o),o=o.next;while(o!==m)}r.action=null}function Ug(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function $g(r,o){return o}function jg(r,o){if(je){var u=tt.formState;if(u!==null){e:{var m=Ie;if(je){if(at){t:{for(var v=at,E=Gi;v.nodeType!==8;){if(!E){v=null;break t}if(v=Vi(v.nextSibling),v===null){v=null;break t}}E=v.data,v=E==="F!"||E==="F"?v:null}if(v){at=Vi(v.nextSibling),m=v.data==="F!";break e}}ss(m)}m=!1}m&&(o=u[0])}}return u=ni(),u.memoizedState=u.baseState=o,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:$g,lastRenderedState:o},u.queue=m,u=a0.bind(null,Ie,m),m.dispatch=u,m=jd(!1),E=Yd.bind(null,Ie,!1,m.queue),m=ni(),v={state:o,dispatch:null,action:r,pending:null},m.queue=v,u=z1.bind(null,Ie,v,E,u),v.dispatch=u,m.memoizedState=r,[o,u,!1]}function Hg(r){var o=Tt();return Gg(o,Qe,r)}function Gg(r,o,u){if(o=Ud(r,o,$g)[0],r=Ml(Mn)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var m=Za(o)}catch(R){throw R===jr?wl:R}else m=o;o=Tt();var v=o.queue,E=v.dispatch;return u!==o.memoizedState&&(Ie.flags|=2048,qr(9,{destroy:void 0},V1.bind(null,v,u),null)),[m,E,r]}function V1(r,o){r.action=o}function zg(r){var o=Tt(),u=Qe;if(u!==null)return Gg(o,u,r);Tt(),o=o.memoizedState,u=Tt();var m=u.queue.dispatch;return u.memoizedState=r,[o,m,!1]}function qr(r,o,u,m){return r={tag:r,create:u,deps:m,inst:o,next:null},o=Ie.updateQueue,o===null&&(o=kl(),Ie.updateQueue=o),u=o.lastEffect,u===null?o.lastEffect=r.next=r:(m=u.next,u.next=r,r.next=m,o.lastEffect=r),r}function Vg(){return Tt().memoizedState}function Pl(r,o,u,m){var v=ni();Ie.flags|=r,v.memoizedState=qr(1|o,{destroy:void 0},u,m===void 0?null:m)}function Nl(r,o,u,m){var v=Tt();m=m===void 0?null:m;var E=v.memoizedState.inst;Qe!==null&&m!==null&&Od(m,Qe.memoizedState.deps)?v.memoizedState=qr(o,E,u,m):(Ie.flags|=r,v.memoizedState=qr(1|o,E,u,m))}function qg(r,o){Pl(8390656,8,r,o)}function Gd(r,o){Nl(2048,8,r,o)}function q1(r){Ie.flags|=4;var o=Ie.updateQueue;if(o===null)o=kl(),Ie.updateQueue=o,o.events=[r];else{var u=o.events;u===null?o.events=[r]:u.push(r)}}function Kg(r){var o=Tt().memoizedState;return q1({ref:o,nextImpl:r}),function(){if((ze&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function Yg(r,o){return Nl(4,2,r,o)}function Xg(r,o){return Nl(4,4,r,o)}function Wg(r,o){if(typeof o=="function"){r=r();var u=o(r);return function(){typeof u=="function"?u():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function Qg(r,o,u){u=u!=null?u.concat([r]):null,Nl(4,4,Wg.bind(null,o,r),u)}function zd(){}function Zg(r,o){var u=Tt();o=o===void 0?null:o;var m=u.memoizedState;return o!==null&&Od(o,m[1])?m[0]:(u.memoizedState=[r,o],r)}function Jg(r,o){var u=Tt();o=o===void 0?null:o;var m=u.memoizedState;if(o!==null&&Od(o,m[1]))return m[0];if(m=r(),Js){ln(!0);try{r()}finally{ln(!1)}}return u.memoizedState=[m,o],m}function Vd(r,o,u){return u===void 0||(On&1073741824)!==0&&(Ue&261930)===0?r.memoizedState=o:(r.memoizedState=u,r=ey(),Ie.lanes|=r,hs|=r,u)}function e0(r,o,u,m){return xi(u,o)?u:Gr.current!==null?(r=Vd(r,u,m),xi(r,o)||(_t=!0),r):(On&42)===0||(On&1073741824)!==0&&(Ue&261930)===0?(_t=!0,r.memoizedState=u):(r=ey(),Ie.lanes|=r,hs|=r,o)}function t0(r,o,u,m,v){var E=G.p;G.p=E!==0&&8>E?E:8;var R=k.T,D={};k.T=D,Yd(r,!1,o,u);try{var F=v(),J=k.S;if(J!==null&&J(D,F),F!==null&&typeof F=="object"&&typeof F.then=="function"){var ae=j1(F,m);Ja(r,o,ae,Li(r))}else Ja(r,o,m,Li(r))}catch(ue){Ja(r,o,{then:function(){},status:"rejected",reason:ue},Li())}finally{G.p=E,R!==null&&D.types!==null&&(R.types=D.types),k.T=R}}function K1(){}function qd(r,o,u,m){if(r.tag!==5)throw Error(i(476));var v=i0(r).queue;t0(r,v,o,K,u===null?K1:function(){return n0(r),u(m)})}function i0(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mn,lastRenderedState:K},next:null};var u={};return o.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mn,lastRenderedState:u},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function n0(r){var o=i0(r);o.next===null&&(o=r.alternate.memoizedState),Ja(r,o.next.queue,{},Li())}function Kd(){return Gt(yo)}function s0(){return Tt().memoizedState}function r0(){return Tt().memoizedState}function Y1(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var u=Li();r=os(u);var m=ls(o,r,u);m!==null&&(pi(m,o,u),Ya(m,o,u)),o={cache:Td()},r.payload=o;return}o=o.return}}function X1(r,o,u){var m=Li();u={lane:m,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Bl(r)?o0(o,u):(u=dd(r,o,u,m),u!==null&&(pi(u,r,m),l0(u,o,m)))}function a0(r,o,u){var m=Li();Ja(r,o,u,m)}function Ja(r,o,u,m){var v={lane:m,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Bl(r))o0(o,v);else{var E=r.alternate;if(r.lanes===0&&(E===null||E.lanes===0)&&(E=o.lastRenderedReducer,E!==null))try{var R=o.lastRenderedState,D=E(R,u);if(v.hasEagerState=!0,v.eagerState=D,xi(D,R))return yl(r,o,v,0),tt===null&&gl(),!1}catch{}if(u=dd(r,o,v,m),u!==null)return pi(u,r,m),l0(u,o,m),!0}return!1}function Yd(r,o,u,m){if(m={lane:2,revertLane:Lf(),gesture:null,action:m,hasEagerState:!1,eagerState:null,next:null},Bl(r)){if(o)throw Error(i(479))}else o=dd(r,u,m,2),o!==null&&pi(o,r,2)}function Bl(r){var o=r.alternate;return r===Ie||o!==null&&o===Ie}function o0(r,o){zr=Il=!0;var u=r.pending;u===null?o.next=o:(o.next=u.next,u.next=o),r.pending=o}function l0(r,o,u){if((u&4194048)!==0){var m=o.lanes;m&=r.pendingLanes,u|=m,o.lanes=u,hp(r,u)}}var eo={readContext:Gt,use:Ol,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useLayoutEffect:vt,useInsertionEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useSyncExternalStore:vt,useId:vt,useHostTransitionStatus:vt,useFormState:vt,useActionState:vt,useOptimistic:vt,useMemoCache:vt,useCacheRefresh:vt};eo.useEffectEvent=vt;var c0={readContext:Gt,use:Ol,useCallback:function(r,o){return ni().memoizedState=[r,o===void 0?null:o],r},useContext:Gt,useEffect:qg,useImperativeHandle:function(r,o,u){u=u!=null?u.concat([r]):null,Pl(4194308,4,Wg.bind(null,o,r),u)},useLayoutEffect:function(r,o){return Pl(4194308,4,r,o)},useInsertionEffect:function(r,o){Pl(4,2,r,o)},useMemo:function(r,o){var u=ni();o=o===void 0?null:o;var m=r();if(Js){ln(!0);try{r()}finally{ln(!1)}}return u.memoizedState=[m,o],m},useReducer:function(r,o,u){var m=ni();if(u!==void 0){var v=u(o);if(Js){ln(!0);try{u(o)}finally{ln(!1)}}}else v=o;return m.memoizedState=m.baseState=v,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:v},m.queue=r,r=r.dispatch=X1.bind(null,Ie,r),[m.memoizedState,r]},useRef:function(r){var o=ni();return r={current:r},o.memoizedState=r},useState:function(r){r=jd(r);var o=r.queue,u=a0.bind(null,Ie,o);return o.dispatch=u,[r.memoizedState,u]},useDebugValue:zd,useDeferredValue:function(r,o){var u=ni();return Vd(u,r,o)},useTransition:function(){var r=jd(!1);return r=t0.bind(null,Ie,r.queue,!0,!1),ni().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,u){var m=Ie,v=ni();if(je){if(u===void 0)throw Error(i(407));u=u()}else{if(u=o(),tt===null)throw Error(i(349));(Ue&127)!==0||Ig(m,o,u)}v.memoizedState=u;var E={value:u,getSnapshot:o};return v.queue=E,qg(kg.bind(null,m,E,r),[r]),m.flags|=2048,qr(9,{destroy:void 0},Dg.bind(null,m,E,u,o),null),u},useId:function(){var r=ni(),o=tt.identifierPrefix;if(je){var u=un,m=cn;u=(m&~(1<<32-ii(m)-1)).toString(32)+u,o="_"+o+"R_"+u,u=Dl++,0<u&&(o+="H"+u.toString(32)),o+="_"}else u=H1++,o="_"+o+"r_"+u.toString(32)+"_";return r.memoizedState=o},useHostTransitionStatus:Kd,useFormState:jg,useActionState:jg,useOptimistic:function(r){var o=ni();o.memoizedState=o.baseState=r;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=u,o=Yd.bind(null,Ie,!0,u),u.dispatch=o,[r,o]},useMemoCache:Fd,useCacheRefresh:function(){return ni().memoizedState=Y1.bind(null,Ie)},useEffectEvent:function(r){var o=ni(),u={impl:r};return o.memoizedState=u,function(){if((ze&2)!==0)throw Error(i(440));return u.impl.apply(void 0,arguments)}}},Xd={readContext:Gt,use:Ol,useCallback:Zg,useContext:Gt,useEffect:Gd,useImperativeHandle:Qg,useInsertionEffect:Yg,useLayoutEffect:Xg,useMemo:Jg,useReducer:Ml,useRef:Vg,useState:function(){return Ml(Mn)},useDebugValue:zd,useDeferredValue:function(r,o){var u=Tt();return e0(u,Qe.memoizedState,r,o)},useTransition:function(){var r=Ml(Mn)[0],o=Tt().memoizedState;return[typeof r=="boolean"?r:Za(r),o]},useSyncExternalStore:Cg,useId:s0,useHostTransitionStatus:Kd,useFormState:Hg,useActionState:Hg,useOptimistic:function(r,o){var u=Tt();return Pg(u,Qe,r,o)},useMemoCache:Fd,useCacheRefresh:r0};Xd.useEffectEvent=Kg;var u0={readContext:Gt,use:Ol,useCallback:Zg,useContext:Gt,useEffect:Gd,useImperativeHandle:Qg,useInsertionEffect:Yg,useLayoutEffect:Xg,useMemo:Jg,useReducer:$d,useRef:Vg,useState:function(){return $d(Mn)},useDebugValue:zd,useDeferredValue:function(r,o){var u=Tt();return Qe===null?Vd(u,r,o):e0(u,Qe.memoizedState,r,o)},useTransition:function(){var r=$d(Mn)[0],o=Tt().memoizedState;return[typeof r=="boolean"?r:Za(r),o]},useSyncExternalStore:Cg,useId:s0,useHostTransitionStatus:Kd,useFormState:zg,useActionState:zg,useOptimistic:function(r,o){var u=Tt();return Qe!==null?Pg(u,Qe,r,o):(u.baseState=r,[r,u.queue.dispatch])},useMemoCache:Fd,useCacheRefresh:r0};u0.useEffectEvent=Kg;function Wd(r,o,u,m){o=r.memoizedState,u=u(m,o),u=u==null?o:p({},o,u),r.memoizedState=u,r.lanes===0&&(r.updateQueue.baseState=u)}var Qd={enqueueSetState:function(r,o,u){r=r._reactInternals;var m=Li(),v=os(m);v.payload=o,u!=null&&(v.callback=u),o=ls(r,v,m),o!==null&&(pi(o,r,m),Ya(o,r,m))},enqueueReplaceState:function(r,o,u){r=r._reactInternals;var m=Li(),v=os(m);v.tag=1,v.payload=o,u!=null&&(v.callback=u),o=ls(r,v,m),o!==null&&(pi(o,r,m),Ya(o,r,m))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var u=Li(),m=os(u);m.tag=2,o!=null&&(m.callback=o),o=ls(r,m,u),o!==null&&(pi(o,r,u),Ya(o,r,u))}};function d0(r,o,u,m,v,E,R){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(m,E,R):o.prototype&&o.prototype.isPureReactComponent?!$a(u,m)||!$a(v,E):!0}function f0(r,o,u,m){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,m),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,m),o.state!==r&&Qd.enqueueReplaceState(o,o.state,null)}function er(r,o){var u=o;if("ref"in o){u={};for(var m in o)m!=="ref"&&(u[m]=o[m])}if(r=r.defaultProps){u===o&&(u=p({},u));for(var v in r)u[v]===void 0&&(u[v]=r[v])}return u}function h0(r){pl(r)}function m0(r){console.error(r)}function p0(r){pl(r)}function Fl(r,o){try{var u=r.onUncaughtError;u(o.value,{componentStack:o.stack})}catch(m){setTimeout(function(){throw m})}}function g0(r,o,u){try{var m=r.onCaughtError;m(u.value,{componentStack:u.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Zd(r,o,u){return u=os(u),u.tag=3,u.payload={element:null},u.callback=function(){Fl(r,o)},u}function y0(r){return r=os(r),r.tag=3,r}function v0(r,o,u,m){var v=u.type.getDerivedStateFromError;if(typeof v=="function"){var E=m.value;r.payload=function(){return v(E)},r.callback=function(){g0(o,u,m)}}var R=u.stateNode;R!==null&&typeof R.componentDidCatch=="function"&&(r.callback=function(){g0(o,u,m),typeof v!="function"&&(ms===null?ms=new Set([this]):ms.add(this));var D=m.stack;this.componentDidCatch(m.value,{componentStack:D!==null?D:""})})}function W1(r,o,u,m,v){if(u.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(o=u.alternate,o!==null&&Fr(o,u,v,!0),u=Si.current,u!==null){switch(u.tag){case 31:case 13:return zi===null?Wl():u.alternate===null&&bt===0&&(bt=3),u.flags&=-257,u.flags|=65536,u.lanes=v,m===Al?u.flags|=16384:(o=u.updateQueue,o===null?u.updateQueue=new Set([m]):o.add(m),wf(r,m,v)),!1;case 22:return u.flags|=65536,m===Al?u.flags|=16384:(o=u.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([m])},u.updateQueue=o):(u=o.retryQueue,u===null?o.retryQueue=new Set([m]):u.add(m)),wf(r,m,v)),!1}throw Error(i(435,u.tag))}return wf(r,m,v),Wl(),!1}if(je)return o=Si.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=v,m!==yd&&(r=Error(i(422),{cause:m}),Ga($i(r,u)))):(m!==yd&&(o=Error(i(423),{cause:m}),Ga($i(o,u))),r=r.current.alternate,r.flags|=65536,v&=-v,r.lanes|=v,m=$i(m,u),v=Zd(r.stateNode,m,v),_d(r,v),bt!==4&&(bt=2)),!1;var E=Error(i(520),{cause:m});if(E=$i(E,u),lo===null?lo=[E]:lo.push(E),bt!==4&&(bt=2),o===null)return!0;m=$i(m,u),u=o;do{switch(u.tag){case 3:return u.flags|=65536,r=v&-v,u.lanes|=r,r=Zd(u.stateNode,m,r),_d(u,r),!1;case 1:if(o=u.type,E=u.stateNode,(u.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(ms===null||!ms.has(E))))return u.flags|=65536,v&=-v,u.lanes|=v,v=y0(v),v0(v,r,u,m),_d(u,v),!1}u=u.return}while(u!==null);return!1}var Jd=Error(i(461)),_t=!1;function zt(r,o,u,m){o.child=r===null?Tg(o,null,u,m):Zs(o,r.child,u,m)}function b0(r,o,u,m,v){u=u.render;var E=o.ref;if("ref"in m){var R={};for(var D in m)D!=="ref"&&(R[D]=m[D])}else R=m;return Ys(o),m=Md(r,o,u,R,E,v),D=Pd(),r!==null&&!_t?(Nd(r,o,v),Pn(r,o,v)):(je&&D&&pd(o),o.flags|=1,zt(r,o,m,v),o.child)}function E0(r,o,u,m,v){if(r===null){var E=u.type;return typeof E=="function"&&!fd(E)&&E.defaultProps===void 0&&u.compare===null?(o.tag=15,o.type=E,x0(r,o,E,m,v)):(r=bl(u.type,null,m,o,o.mode,v),r.ref=o.ref,r.return=o,o.child=r)}if(E=r.child,!lf(r,v)){var R=E.memoizedProps;if(u=u.compare,u=u!==null?u:$a,u(R,m)&&r.ref===o.ref)return Pn(r,o,v)}return o.flags|=1,r=Cn(E,m),r.ref=o.ref,r.return=o,o.child=r}function x0(r,o,u,m,v){if(r!==null){var E=r.memoizedProps;if($a(E,m)&&r.ref===o.ref)if(_t=!1,o.pendingProps=m=E,lf(r,v))(r.flags&131072)!==0&&(_t=!0);else return o.lanes=r.lanes,Pn(r,o,v)}return ef(r,o,u,m,v)}function T0(r,o,u,m){var v=m.children,E=r!==null?r.memoizedState:null;if(r===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),m.mode==="hidden"){if((o.flags&128)!==0){if(E=E!==null?E.baseLanes|u:u,r!==null){for(m=o.child=r.child,v=0;m!==null;)v=v|m.lanes|m.childLanes,m=m.sibling;m=v&~E}else m=0,o.child=null;return S0(r,o,E,u,m)}if((u&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&Sl(o,E!==null?E.cachePool:null),E!==null?Ag(o,E):Id(),Rg(o);else return m=o.lanes=536870912,S0(r,o,E!==null?E.baseLanes|u:u,u,m)}else E!==null?(Sl(o,E.cachePool),Ag(o,E),us(),o.memoizedState=null):(r!==null&&Sl(o,null),Id(),us());return zt(r,o,v,u),o.child}function to(r,o){return r!==null&&r.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function S0(r,o,u,m,v){var E=wd();return E=E===null?null:{parent:Rt._currentValue,pool:E},o.memoizedState={baseLanes:u,cachePool:E},r!==null&&Sl(o,null),Id(),Rg(o),r!==null&&Fr(r,o,m,!0),o.childLanes=v,null}function Ul(r,o){return o=jl({mode:o.mode,children:o.children},r.mode),o.ref=r.ref,r.child=o,o.return=r,o}function w0(r,o,u){return Zs(o,r.child,null,u),r=Ul(o,o.pendingProps),r.flags|=2,wi(o),o.memoizedState=null,r}function Q1(r,o,u){var m=o.pendingProps,v=(o.flags&128)!==0;if(o.flags&=-129,r===null){if(je){if(m.mode==="hidden")return r=Ul(o,m),o.lanes=536870912,to(null,r);if(kd(o),(r=at)?(r=Ny(r,Gi),r=r!==null&&r.data==="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:is!==null?{id:cn,overflow:un}:null,retryLane:536870912,hydrationErrors:null},u=og(r),u.return=o,o.child=u,Ht=o,at=null)):r=null,r===null)throw ss(o);return o.lanes=536870912,null}return Ul(o,m)}var E=r.memoizedState;if(E!==null){var R=E.dehydrated;if(kd(o),v)if(o.flags&256)o.flags&=-257,o=w0(r,o,u);else if(o.memoizedState!==null)o.child=r.child,o.flags|=128,o=null;else throw Error(i(558));else if(_t||Fr(r,o,u,!1),v=(u&r.childLanes)!==0,_t||v){if(m=tt,m!==null&&(R=mp(m,u),R!==0&&R!==E.retryLane))throw E.retryLane=R,zs(r,R),pi(m,r,R),Jd;Wl(),o=w0(r,o,u)}else r=E.treeContext,at=Vi(R.nextSibling),Ht=o,je=!0,ns=null,Gi=!1,r!==null&&ug(o,r),o=Ul(o,m),o.flags|=4096;return o}return r=Cn(r.child,{mode:m.mode,children:m.children}),r.ref=o.ref,o.child=r,r.return=o,r}function $l(r,o){var u=o.ref;if(u===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(i(284));(r===null||r.ref!==u)&&(o.flags|=4194816)}}function ef(r,o,u,m,v){return Ys(o),u=Md(r,o,u,m,void 0,v),m=Pd(),r!==null&&!_t?(Nd(r,o,v),Pn(r,o,v)):(je&&m&&pd(o),o.flags|=1,zt(r,o,u,v),o.child)}function A0(r,o,u,m,v,E){return Ys(o),o.updateQueue=null,u=_g(o,m,u,v),Lg(r),m=Pd(),r!==null&&!_t?(Nd(r,o,E),Pn(r,o,E)):(je&&m&&pd(o),o.flags|=1,zt(r,o,u,E),o.child)}function R0(r,o,u,m,v){if(Ys(o),o.stateNode===null){var E=Mr,R=u.contextType;typeof R=="object"&&R!==null&&(E=Gt(R)),E=new u(m,E),o.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=Qd,o.stateNode=E,E._reactInternals=o,E=o.stateNode,E.props=m,E.state=o.memoizedState,E.refs={},Rd(o),R=u.contextType,E.context=typeof R=="object"&&R!==null?Gt(R):Mr,E.state=o.memoizedState,R=u.getDerivedStateFromProps,typeof R=="function"&&(Wd(o,u,R,m),E.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(R=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),R!==E.state&&Qd.enqueueReplaceState(E,E.state,null),Wa(o,m,E,v),Xa(),E.state=o.memoizedState),typeof E.componentDidMount=="function"&&(o.flags|=4194308),m=!0}else if(r===null){E=o.stateNode;var D=o.memoizedProps,F=er(u,D);E.props=F;var J=E.context,ae=u.contextType;R=Mr,typeof ae=="object"&&ae!==null&&(R=Gt(ae));var ue=u.getDerivedStateFromProps;ae=typeof ue=="function"||typeof E.getSnapshotBeforeUpdate=="function",D=o.pendingProps!==D,ae||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(D||J!==R)&&f0(o,E,m,R),as=!1;var te=o.memoizedState;E.state=te,Wa(o,m,E,v),Xa(),J=o.memoizedState,D||te!==J||as?(typeof ue=="function"&&(Wd(o,u,ue,m),J=o.memoizedState),(F=as||d0(o,u,F,m,te,J,R))?(ae||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(o.flags|=4194308)):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=m,o.memoizedState=J),E.props=m,E.state=J,E.context=R,m=F):(typeof E.componentDidMount=="function"&&(o.flags|=4194308),m=!1)}else{E=o.stateNode,Ld(r,o),R=o.memoizedProps,ae=er(u,R),E.props=ae,ue=o.pendingProps,te=E.context,J=u.contextType,F=Mr,typeof J=="object"&&J!==null&&(F=Gt(J)),D=u.getDerivedStateFromProps,(J=typeof D=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(R!==ue||te!==F)&&f0(o,E,m,F),as=!1,te=o.memoizedState,E.state=te,Wa(o,m,E,v),Xa();var ne=o.memoizedState;R!==ue||te!==ne||as||r!==null&&r.dependencies!==null&&xl(r.dependencies)?(typeof D=="function"&&(Wd(o,u,D,m),ne=o.memoizedState),(ae=as||d0(o,u,ae,m,te,ne,F)||r!==null&&r.dependencies!==null&&xl(r.dependencies))?(J||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(m,ne,F),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(m,ne,F)),typeof E.componentDidUpdate=="function"&&(o.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof E.componentDidUpdate!="function"||R===r.memoizedProps&&te===r.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||R===r.memoizedProps&&te===r.memoizedState||(o.flags|=1024),o.memoizedProps=m,o.memoizedState=ne),E.props=m,E.state=ne,E.context=F,m=ae):(typeof E.componentDidUpdate!="function"||R===r.memoizedProps&&te===r.memoizedState||(o.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||R===r.memoizedProps&&te===r.memoizedState||(o.flags|=1024),m=!1)}return E=m,$l(r,o),m=(o.flags&128)!==0,E||m?(E=o.stateNode,u=m&&typeof u.getDerivedStateFromError!="function"?null:E.render(),o.flags|=1,r!==null&&m?(o.child=Zs(o,r.child,null,v),o.child=Zs(o,null,u,v)):zt(r,o,u,v),o.memoizedState=E.state,r=o.child):r=Pn(r,o,v),r}function L0(r,o,u,m){return qs(),o.flags|=256,zt(r,o,u,m),o.child}var tf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function nf(r){return{baseLanes:r,cachePool:gg()}}function sf(r,o,u){return r=r!==null?r.childLanes&~u:0,o&&(r|=Ri),r}function _0(r,o,u){var m=o.pendingProps,v=!1,E=(o.flags&128)!==0,R;if((R=E)||(R=r!==null&&r.memoizedState===null?!1:(xt.current&2)!==0),R&&(v=!0,o.flags&=-129),R=(o.flags&32)!==0,o.flags&=-33,r===null){if(je){if(v?cs(o):us(),(r=at)?(r=Ny(r,Gi),r=r!==null&&r.data!=="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:is!==null?{id:cn,overflow:un}:null,retryLane:536870912,hydrationErrors:null},u=og(r),u.return=o,o.child=u,Ht=o,at=null)):r=null,r===null)throw ss(o);return $f(r)?o.lanes=32:o.lanes=536870912,null}var D=m.children;return m=m.fallback,v?(us(),v=o.mode,D=jl({mode:"hidden",children:D},v),m=Vs(m,v,u,null),D.return=o,m.return=o,D.sibling=m,o.child=D,m=o.child,m.memoizedState=nf(u),m.childLanes=sf(r,R,u),o.memoizedState=tf,to(null,m)):(cs(o),rf(o,D))}var F=r.memoizedState;if(F!==null&&(D=F.dehydrated,D!==null)){if(E)o.flags&256?(cs(o),o.flags&=-257,o=af(r,o,u)):o.memoizedState!==null?(us(),o.child=r.child,o.flags|=128,o=null):(us(),D=m.fallback,v=o.mode,m=jl({mode:"visible",children:m.children},v),D=Vs(D,v,u,null),D.flags|=2,m.return=o,D.return=o,m.sibling=D,o.child=m,Zs(o,r.child,null,u),m=o.child,m.memoizedState=nf(u),m.childLanes=sf(r,R,u),o.memoizedState=tf,o=to(null,m));else if(cs(o),$f(D)){if(R=D.nextSibling&&D.nextSibling.dataset,R)var J=R.dgst;R=J,m=Error(i(419)),m.stack="",m.digest=R,Ga({value:m,source:null,stack:null}),o=af(r,o,u)}else if(_t||Fr(r,o,u,!1),R=(u&r.childLanes)!==0,_t||R){if(R=tt,R!==null&&(m=mp(R,u),m!==0&&m!==F.retryLane))throw F.retryLane=m,zs(r,m),pi(R,r,m),Jd;Uf(D)||Wl(),o=af(r,o,u)}else Uf(D)?(o.flags|=192,o.child=r.child,o=null):(r=F.treeContext,at=Vi(D.nextSibling),Ht=o,je=!0,ns=null,Gi=!1,r!==null&&ug(o,r),o=rf(o,m.children),o.flags|=4096);return o}return v?(us(),D=m.fallback,v=o.mode,F=r.child,J=F.sibling,m=Cn(F,{mode:"hidden",children:m.children}),m.subtreeFlags=F.subtreeFlags&65011712,J!==null?D=Cn(J,D):(D=Vs(D,v,u,null),D.flags|=2),D.return=o,m.return=o,m.sibling=D,o.child=m,to(null,m),m=o.child,D=r.child.memoizedState,D===null?D=nf(u):(v=D.cachePool,v!==null?(F=Rt._currentValue,v=v.parent!==F?{parent:F,pool:F}:v):v=gg(),D={baseLanes:D.baseLanes|u,cachePool:v}),m.memoizedState=D,m.childLanes=sf(r,R,u),o.memoizedState=tf,to(r.child,m)):(cs(o),u=r.child,r=u.sibling,u=Cn(u,{mode:"visible",children:m.children}),u.return=o,u.sibling=null,r!==null&&(R=o.deletions,R===null?(o.deletions=[r],o.flags|=16):R.push(r)),o.child=u,o.memoizedState=null,u)}function rf(r,o){return o=jl({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function jl(r,o){return r=Ti(22,r,null,o),r.lanes=0,r}function af(r,o,u){return Zs(o,r.child,null,u),r=rf(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function C0(r,o,u){r.lanes|=o;var m=r.alternate;m!==null&&(m.lanes|=o),Ed(r.return,o,u)}function of(r,o,u,m,v,E){var R=r.memoizedState;R===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:m,tail:u,tailMode:v,treeForkCount:E}:(R.isBackwards=o,R.rendering=null,R.renderingStartTime=0,R.last=m,R.tail=u,R.tailMode=v,R.treeForkCount=E)}function I0(r,o,u){var m=o.pendingProps,v=m.revealOrder,E=m.tail;m=m.children;var R=xt.current,D=(R&2)!==0;if(D?(R=R&1|2,o.flags|=128):R&=1,se(xt,R),zt(r,o,m,u),m=je?Ha:0,!D&&r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&C0(r,u,o);else if(r.tag===19)C0(r,u,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(v){case"forwards":for(u=o.child,v=null;u!==null;)r=u.alternate,r!==null&&Cl(r)===null&&(v=u),u=u.sibling;u=v,u===null?(v=o.child,o.child=null):(v=u.sibling,u.sibling=null),of(o,!1,v,u,E,m);break;case"backwards":case"unstable_legacy-backwards":for(u=null,v=o.child,o.child=null;v!==null;){if(r=v.alternate,r!==null&&Cl(r)===null){o.child=v;break}r=v.sibling,v.sibling=u,u=v,v=r}of(o,!0,u,null,E,m);break;case"together":of(o,!1,null,null,void 0,m);break;default:o.memoizedState=null}return o.child}function Pn(r,o,u){if(r!==null&&(o.dependencies=r.dependencies),hs|=o.lanes,(u&o.childLanes)===0)if(r!==null){if(Fr(r,o,u,!1),(u&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(i(153));if(o.child!==null){for(r=o.child,u=Cn(r,r.pendingProps),o.child=u,u.return=o;r.sibling!==null;)r=r.sibling,u=u.sibling=Cn(r,r.pendingProps),u.return=o;u.sibling=null}return o.child}function lf(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&xl(r)))}function Z1(r,o,u){switch(o.tag){case 3:Oe(o,o.stateNode.containerInfo),rs(o,Rt,r.memoizedState.cache),qs();break;case 27:case 5:pt(o);break;case 4:Oe(o,o.stateNode.containerInfo);break;case 10:rs(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,kd(o),null;break;case 13:var m=o.memoizedState;if(m!==null)return m.dehydrated!==null?(cs(o),o.flags|=128,null):(u&o.child.childLanes)!==0?_0(r,o,u):(cs(o),r=Pn(r,o,u),r!==null?r.sibling:null);cs(o);break;case 19:var v=(r.flags&128)!==0;if(m=(u&o.childLanes)!==0,m||(Fr(r,o,u,!1),m=(u&o.childLanes)!==0),v){if(m)return I0(r,o,u);o.flags|=128}if(v=o.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),se(xt,xt.current),m)break;return null;case 22:return o.lanes=0,T0(r,o,u,o.pendingProps);case 24:rs(o,Rt,r.memoizedState.cache)}return Pn(r,o,u)}function D0(r,o,u){if(r!==null)if(r.memoizedProps!==o.pendingProps)_t=!0;else{if(!lf(r,u)&&(o.flags&128)===0)return _t=!1,Z1(r,o,u);_t=(r.flags&131072)!==0}else _t=!1,je&&(o.flags&1048576)!==0&&cg(o,Ha,o.index);switch(o.lanes=0,o.tag){case 16:e:{var m=o.pendingProps;if(r=Ws(o.elementType),o.type=r,typeof r=="function")fd(r)?(m=er(r,m),o.tag=1,o=R0(null,o,r,m,u)):(o.tag=0,o=ef(null,o,r,m,u));else{if(r!=null){var v=r.$$typeof;if(v===_){o.tag=11,o=b0(null,o,r,m,u);break e}else if(v===C){o.tag=14,o=E0(null,o,r,m,u);break e}}throw o=H(r)||r,Error(i(306,o,""))}}return o;case 0:return ef(r,o,o.type,o.pendingProps,u);case 1:return m=o.type,v=er(m,o.pendingProps),R0(r,o,m,v,u);case 3:e:{if(Oe(o,o.stateNode.containerInfo),r===null)throw Error(i(387));m=o.pendingProps;var E=o.memoizedState;v=E.element,Ld(r,o),Wa(o,m,null,u);var R=o.memoizedState;if(m=R.cache,rs(o,Rt,m),m!==E.cache&&xd(o,[Rt],u,!0),Xa(),m=R.element,E.isDehydrated)if(E={element:m,isDehydrated:!1,cache:R.cache},o.updateQueue.baseState=E,o.memoizedState=E,o.flags&256){o=L0(r,o,m,u);break e}else if(m!==v){v=$i(Error(i(424)),o),Ga(v),o=L0(r,o,m,u);break e}else for(r=o.stateNode.containerInfo,r.nodeType===9?r=r.body:r=r.nodeName==="HTML"?r.ownerDocument.body:r,at=Vi(r.firstChild),Ht=o,je=!0,ns=null,Gi=!0,u=Tg(o,null,m,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(qs(),m===v){o=Pn(r,o,u);break e}zt(r,o,m,u)}o=o.child}return o;case 26:return $l(r,o),r===null?(u=Hy(o.type,null,o.pendingProps,null))?o.memoizedState=u:je||(u=o.type,r=o.pendingProps,m=nc(me.current).createElement(u),m[jt]=o,m[ci]=r,Vt(m,u,r),Nt(m),o.stateNode=m):o.memoizedState=Hy(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return pt(o),r===null&&je&&(m=o.stateNode=Uy(o.type,o.pendingProps,me.current),Ht=o,Gi=!0,v=at,vs(o.type)?(jf=v,at=Vi(m.firstChild)):at=v),zt(r,o,o.pendingProps.children,u),$l(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&je&&((v=m=at)&&(m=_w(m,o.type,o.pendingProps,Gi),m!==null?(o.stateNode=m,Ht=o,at=Vi(m.firstChild),Gi=!1,v=!0):v=!1),v||ss(o)),pt(o),v=o.type,E=o.pendingProps,R=r!==null?r.memoizedProps:null,m=E.children,Nf(v,E)?m=null:R!==null&&Nf(v,R)&&(o.flags|=32),o.memoizedState!==null&&(v=Md(r,o,G1,null,null,u),yo._currentValue=v),$l(r,o),zt(r,o,m,u),o.child;case 6:return r===null&&je&&((r=u=at)&&(u=Cw(u,o.pendingProps,Gi),u!==null?(o.stateNode=u,Ht=o,at=null,r=!0):r=!1),r||ss(o)),null;case 13:return _0(r,o,u);case 4:return Oe(o,o.stateNode.containerInfo),m=o.pendingProps,r===null?o.child=Zs(o,null,m,u):zt(r,o,m,u),o.child;case 11:return b0(r,o,o.type,o.pendingProps,u);case 7:return zt(r,o,o.pendingProps,u),o.child;case 8:return zt(r,o,o.pendingProps.children,u),o.child;case 12:return zt(r,o,o.pendingProps.children,u),o.child;case 10:return m=o.pendingProps,rs(o,o.type,m.value),zt(r,o,m.children,u),o.child;case 9:return v=o.type._context,m=o.pendingProps.children,Ys(o),v=Gt(v),m=m(v),o.flags|=1,zt(r,o,m,u),o.child;case 14:return E0(r,o,o.type,o.pendingProps,u);case 15:return x0(r,o,o.type,o.pendingProps,u);case 19:return I0(r,o,u);case 31:return Q1(r,o,u);case 22:return T0(r,o,u,o.pendingProps);case 24:return Ys(o),m=Gt(Rt),r===null?(v=wd(),v===null&&(v=tt,E=Td(),v.pooledCache=E,E.refCount++,E!==null&&(v.pooledCacheLanes|=u),v=E),o.memoizedState={parent:m,cache:v},Rd(o),rs(o,Rt,v)):((r.lanes&u)!==0&&(Ld(r,o),Wa(o,null,null,u),Xa()),v=r.memoizedState,E=o.memoizedState,v.parent!==m?(v={parent:m,cache:m},o.memoizedState=v,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=v),rs(o,Rt,m)):(m=E.cache,rs(o,Rt,m),m!==v.cache&&xd(o,[Rt],u,!0))),zt(r,o,o.pendingProps.children,u),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function Nn(r){r.flags|=4}function cf(r,o,u,m,v){if((o=(r.mode&32)!==0)&&(o=!1),o){if(r.flags|=16777216,(v&335544128)===v)if(r.stateNode.complete)r.flags|=8192;else if(sy())r.flags|=8192;else throw Qs=Al,Ad}else r.flags&=-16777217}function k0(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!Ky(o))if(sy())r.flags|=8192;else throw Qs=Al,Ad}function Hl(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?dp():536870912,r.lanes|=o,Wr|=o)}function io(r,o){if(!je)switch(r.tailMode){case"hidden":o=r.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?r.tail=null:u.sibling=null;break;case"collapsed":u=r.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:m.sibling=null}}function ot(r){var o=r.alternate!==null&&r.alternate.child===r.child,u=0,m=0;if(o)for(var v=r.child;v!==null;)u|=v.lanes|v.childLanes,m|=v.subtreeFlags&65011712,m|=v.flags&65011712,v.return=r,v=v.sibling;else for(v=r.child;v!==null;)u|=v.lanes|v.childLanes,m|=v.subtreeFlags,m|=v.flags,v.return=r,v=v.sibling;return r.subtreeFlags|=m,r.childLanes=u,o}function J1(r,o,u){var m=o.pendingProps;switch(gd(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(o),null;case 1:return ot(o),null;case 3:return u=o.stateNode,m=null,r!==null&&(m=r.memoizedState.cache),o.memoizedState.cache!==m&&(o.flags|=2048),kn(Rt),ke(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(r===null||r.child===null)&&(Br(o)?Nn(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,vd())),ot(o),null;case 26:var v=o.type,E=o.memoizedState;return r===null?(Nn(o),E!==null?(ot(o),k0(o,E)):(ot(o),cf(o,v,null,m,u))):E?E!==r.memoizedState?(Nn(o),ot(o),k0(o,E)):(ot(o),o.flags&=-16777217):(r=r.memoizedProps,r!==m&&Nn(o),ot(o),cf(o,v,r,m,u)),null;case 27:if(It(o),u=me.current,v=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==m&&Nn(o);else{if(!m){if(o.stateNode===null)throw Error(i(166));return ot(o),null}r=de.current,Br(o)?dg(o):(r=Uy(v,m,u),o.stateNode=r,Nn(o))}return ot(o),null;case 5:if(It(o),v=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==m&&Nn(o);else{if(!m){if(o.stateNode===null)throw Error(i(166));return ot(o),null}if(E=de.current,Br(o))dg(o);else{var R=nc(me.current);switch(E){case 1:E=R.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:E=R.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":E=R.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":E=R.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":E=R.createElement("div"),E.innerHTML="<script><\/script>",E=E.removeChild(E.firstChild);break;case"select":E=typeof m.is=="string"?R.createElement("select",{is:m.is}):R.createElement("select"),m.multiple?E.multiple=!0:m.size&&(E.size=m.size);break;default:E=typeof m.is=="string"?R.createElement(v,{is:m.is}):R.createElement(v)}}E[jt]=o,E[ci]=m;e:for(R=o.child;R!==null;){if(R.tag===5||R.tag===6)E.appendChild(R.stateNode);else if(R.tag!==4&&R.tag!==27&&R.child!==null){R.child.return=R,R=R.child;continue}if(R===o)break e;for(;R.sibling===null;){if(R.return===null||R.return===o)break e;R=R.return}R.sibling.return=R.return,R=R.sibling}o.stateNode=E;e:switch(Vt(E,v,m),v){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}m&&Nn(o)}}return ot(o),cf(o,o.type,r===null?null:r.memoizedProps,o.pendingProps,u),null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==m&&Nn(o);else{if(typeof m!="string"&&o.stateNode===null)throw Error(i(166));if(r=me.current,Br(o)){if(r=o.stateNode,u=o.memoizedProps,m=null,v=Ht,v!==null)switch(v.tag){case 27:case 5:m=v.memoizedProps}r[jt]=o,r=!!(r.nodeValue===u||m!==null&&m.suppressHydrationWarning===!0||_y(r.nodeValue,u)),r||ss(o,!0)}else r=nc(r).createTextNode(m),r[jt]=o,o.stateNode=r}return ot(o),null;case 31:if(u=o.memoizedState,r===null||r.memoizedState!==null){if(m=Br(o),u!==null){if(r===null){if(!m)throw Error(i(318));if(r=o.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[jt]=o}else qs(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ot(o),r=!1}else u=vd(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=u),r=!0;if(!r)return o.flags&256?(wi(o),o):(wi(o),null);if((o.flags&128)!==0)throw Error(i(558))}return ot(o),null;case 13:if(m=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(v=Br(o),m!==null&&m.dehydrated!==null){if(r===null){if(!v)throw Error(i(318));if(v=o.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(i(317));v[jt]=o}else qs(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;ot(o),v=!1}else v=vd(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=v),v=!0;if(!v)return o.flags&256?(wi(o),o):(wi(o),null)}return wi(o),(o.flags&128)!==0?(o.lanes=u,o):(u=m!==null,r=r!==null&&r.memoizedState!==null,u&&(m=o.child,v=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(v=m.alternate.memoizedState.cachePool.pool),E=null,m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(E=m.memoizedState.cachePool.pool),E!==v&&(m.flags|=2048)),u!==r&&u&&(o.child.flags|=8192),Hl(o,o.updateQueue),ot(o),null);case 4:return ke(),r===null&&Df(o.stateNode.containerInfo),ot(o),null;case 10:return kn(o.type),ot(o),null;case 19:if($(xt),m=o.memoizedState,m===null)return ot(o),null;if(v=(o.flags&128)!==0,E=m.rendering,E===null)if(v)io(m,!1);else{if(bt!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(E=Cl(r),E!==null){for(o.flags|=128,io(m,!1),r=E.updateQueue,o.updateQueue=r,Hl(o,r),o.subtreeFlags=0,r=u,u=o.child;u!==null;)ag(u,r),u=u.sibling;return se(xt,xt.current&1|2),je&&In(o,m.treeForkCount),o.child}r=r.sibling}m.tail!==null&&ut()>Kl&&(o.flags|=128,v=!0,io(m,!1),o.lanes=4194304)}else{if(!v)if(r=Cl(E),r!==null){if(o.flags|=128,v=!0,r=r.updateQueue,o.updateQueue=r,Hl(o,r),io(m,!0),m.tail===null&&m.tailMode==="hidden"&&!E.alternate&&!je)return ot(o),null}else 2*ut()-m.renderingStartTime>Kl&&u!==536870912&&(o.flags|=128,v=!0,io(m,!1),o.lanes=4194304);m.isBackwards?(E.sibling=o.child,o.child=E):(r=m.last,r!==null?r.sibling=E:o.child=E,m.last=E)}return m.tail!==null?(r=m.tail,m.rendering=r,m.tail=r.sibling,m.renderingStartTime=ut(),r.sibling=null,u=xt.current,se(xt,v?u&1|2:u&1),je&&In(o,m.treeForkCount),r):(ot(o),null);case 22:case 23:return wi(o),Dd(),m=o.memoizedState!==null,r!==null?r.memoizedState!==null!==m&&(o.flags|=8192):m&&(o.flags|=8192),m?(u&536870912)!==0&&(o.flags&128)===0&&(ot(o),o.subtreeFlags&6&&(o.flags|=8192)):ot(o),u=o.updateQueue,u!==null&&Hl(o,u.retryQueue),u=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),m=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),m!==u&&(o.flags|=2048),r!==null&&$(Xs),null;case 24:return u=null,r!==null&&(u=r.memoizedState.cache),o.memoizedState.cache!==u&&(o.flags|=2048),kn(Rt),ot(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function ew(r,o){switch(gd(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return kn(Rt),ke(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return It(o),null;case 31:if(o.memoizedState!==null){if(wi(o),o.alternate===null)throw Error(i(340));qs()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 13:if(wi(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(i(340));qs()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return $(xt),null;case 4:return ke(),null;case 10:return kn(o.type),null;case 22:case 23:return wi(o),Dd(),r!==null&&$(Xs),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return kn(Rt),null;case 25:return null;default:return null}}function O0(r,o){switch(gd(o),o.tag){case 3:kn(Rt),ke();break;case 26:case 27:case 5:It(o);break;case 4:ke();break;case 31:o.memoizedState!==null&&wi(o);break;case 13:wi(o);break;case 19:$(xt);break;case 10:kn(o.type);break;case 22:case 23:wi(o),Dd(),r!==null&&$(Xs);break;case 24:kn(Rt)}}function no(r,o){try{var u=o.updateQueue,m=u!==null?u.lastEffect:null;if(m!==null){var v=m.next;u=v;do{if((u.tag&r)===r){m=void 0;var E=u.create,R=u.inst;m=E(),R.destroy=m}u=u.next}while(u!==v)}}catch(D){Ye(o,o.return,D)}}function ds(r,o,u){try{var m=o.updateQueue,v=m!==null?m.lastEffect:null;if(v!==null){var E=v.next;m=E;do{if((m.tag&r)===r){var R=m.inst,D=R.destroy;if(D!==void 0){R.destroy=void 0,v=o;var F=u,J=D;try{J()}catch(ae){Ye(v,F,ae)}}}m=m.next}while(m!==E)}}catch(ae){Ye(o,o.return,ae)}}function M0(r){var o=r.updateQueue;if(o!==null){var u=r.stateNode;try{wg(o,u)}catch(m){Ye(r,r.return,m)}}}function P0(r,o,u){u.props=er(r.type,r.memoizedProps),u.state=r.memoizedState;try{u.componentWillUnmount()}catch(m){Ye(r,o,m)}}function so(r,o){try{var u=r.ref;if(u!==null){switch(r.tag){case 26:case 27:case 5:var m=r.stateNode;break;case 30:m=r.stateNode;break;default:m=r.stateNode}typeof u=="function"?r.refCleanup=u(m):u.current=m}}catch(v){Ye(r,o,v)}}function dn(r,o){var u=r.ref,m=r.refCleanup;if(u!==null)if(typeof m=="function")try{m()}catch(v){Ye(r,o,v)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(v){Ye(r,o,v)}else u.current=null}function N0(r){var o=r.type,u=r.memoizedProps,m=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":u.autoFocus&&m.focus();break e;case"img":u.src?m.src=u.src:u.srcSet&&(m.srcset=u.srcSet)}}catch(v){Ye(r,r.return,v)}}function uf(r,o,u){try{var m=r.stateNode;Tw(m,r.type,u,o),m[ci]=o}catch(v){Ye(r,r.return,v)}}function B0(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&vs(r.type)||r.tag===4}function df(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||B0(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&vs(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function ff(r,o,u){var m=r.tag;if(m===5||m===6)r=r.stateNode,o?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(r,o):(o=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,o.appendChild(r),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Ln));else if(m!==4&&(m===27&&vs(r.type)&&(u=r.stateNode,o=null),r=r.child,r!==null))for(ff(r,o,u),r=r.sibling;r!==null;)ff(r,o,u),r=r.sibling}function Gl(r,o,u){var m=r.tag;if(m===5||m===6)r=r.stateNode,o?u.insertBefore(r,o):u.appendChild(r);else if(m!==4&&(m===27&&vs(r.type)&&(u=r.stateNode),r=r.child,r!==null))for(Gl(r,o,u),r=r.sibling;r!==null;)Gl(r,o,u),r=r.sibling}function F0(r){var o=r.stateNode,u=r.memoizedProps;try{for(var m=r.type,v=o.attributes;v.length;)o.removeAttributeNode(v[0]);Vt(o,m,u),o[jt]=r,o[ci]=u}catch(E){Ye(r,r.return,E)}}var Bn=!1,Ct=!1,hf=!1,U0=typeof WeakSet=="function"?WeakSet:Set,Bt=null;function tw(r,o){if(r=r.containerInfo,Mf=uc,r=Qp(r),rd(r)){if("selectionStart"in r)var u={start:r.selectionStart,end:r.selectionEnd};else e:{u=(u=r.ownerDocument)&&u.defaultView||window;var m=u.getSelection&&u.getSelection();if(m&&m.rangeCount!==0){u=m.anchorNode;var v=m.anchorOffset,E=m.focusNode;m=m.focusOffset;try{u.nodeType,E.nodeType}catch{u=null;break e}var R=0,D=-1,F=-1,J=0,ae=0,ue=r,te=null;t:for(;;){for(var ne;ue!==u||v!==0&&ue.nodeType!==3||(D=R+v),ue!==E||m!==0&&ue.nodeType!==3||(F=R+m),ue.nodeType===3&&(R+=ue.nodeValue.length),(ne=ue.firstChild)!==null;)te=ue,ue=ne;for(;;){if(ue===r)break t;if(te===u&&++J===v&&(D=R),te===E&&++ae===m&&(F=R),(ne=ue.nextSibling)!==null)break;ue=te,te=ue.parentNode}ue=ne}u=D===-1||F===-1?null:{start:D,end:F}}else u=null}u=u||{start:0,end:0}}else u=null;for(Pf={focusedElem:r,selectionRange:u},uc=!1,Bt=o;Bt!==null;)if(o=Bt,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,Bt=r;else for(;Bt!==null;){switch(o=Bt,E=o.alternate,r=o.flags,o.tag){case 0:if((r&4)!==0&&(r=o.updateQueue,r=r!==null?r.events:null,r!==null))for(u=0;u<r.length;u++)v=r[u],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&E!==null){r=void 0,u=o,v=E.memoizedProps,E=E.memoizedState,m=u.stateNode;try{var ve=er(u.type,v);r=m.getSnapshotBeforeUpdate(ve,E),m.__reactInternalSnapshotBeforeUpdate=r}catch(we){Ye(u,u.return,we)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,u=r.nodeType,u===9)Ff(r);else if(u===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":Ff(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=o.sibling,r!==null){r.return=o.return,Bt=r;break}Bt=o.return}}function $0(r,o,u){var m=u.flags;switch(u.tag){case 0:case 11:case 15:Un(r,u),m&4&&no(5,u);break;case 1:if(Un(r,u),m&4)if(r=u.stateNode,o===null)try{r.componentDidMount()}catch(R){Ye(u,u.return,R)}else{var v=er(u.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(v,o,r.__reactInternalSnapshotBeforeUpdate)}catch(R){Ye(u,u.return,R)}}m&64&&M0(u),m&512&&so(u,u.return);break;case 3:if(Un(r,u),m&64&&(r=u.updateQueue,r!==null)){if(o=null,u.child!==null)switch(u.child.tag){case 27:case 5:o=u.child.stateNode;break;case 1:o=u.child.stateNode}try{wg(r,o)}catch(R){Ye(u,u.return,R)}}break;case 27:o===null&&m&4&&F0(u);case 26:case 5:Un(r,u),o===null&&m&4&&N0(u),m&512&&so(u,u.return);break;case 12:Un(r,u);break;case 31:Un(r,u),m&4&&G0(r,u);break;case 13:Un(r,u),m&4&&z0(r,u),m&64&&(r=u.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(u=uw.bind(null,u),Iw(r,u))));break;case 22:if(m=u.memoizedState!==null||Bn,!m){o=o!==null&&o.memoizedState!==null||Ct,v=Bn;var E=Ct;Bn=m,(Ct=o)&&!E?$n(r,u,(u.subtreeFlags&8772)!==0):Un(r,u),Bn=v,Ct=E}break;case 30:break;default:Un(r,u)}}function j0(r){var o=r.alternate;o!==null&&(r.alternate=null,j0(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&Hu(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var dt=null,di=!1;function Fn(r,o,u){for(u=u.child;u!==null;)H0(r,o,u),u=u.sibling}function H0(r,o,u){if(ti&&typeof ti.onCommitFiberUnmount=="function")try{ti.onCommitFiberUnmount(Fs,u)}catch{}switch(u.tag){case 26:Ct||dn(u,o),Fn(r,o,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:Ct||dn(u,o);var m=dt,v=di;vs(u.type)&&(dt=u.stateNode,di=!1),Fn(r,o,u),mo(u.stateNode),dt=m,di=v;break;case 5:Ct||dn(u,o);case 6:if(m=dt,v=di,dt=null,Fn(r,o,u),dt=m,di=v,dt!==null)if(di)try{(dt.nodeType===9?dt.body:dt.nodeName==="HTML"?dt.ownerDocument.body:dt).removeChild(u.stateNode)}catch(E){Ye(u,o,E)}else try{dt.removeChild(u.stateNode)}catch(E){Ye(u,o,E)}break;case 18:dt!==null&&(di?(r=dt,My(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,u.stateNode),sa(r)):My(dt,u.stateNode));break;case 4:m=dt,v=di,dt=u.stateNode.containerInfo,di=!0,Fn(r,o,u),dt=m,di=v;break;case 0:case 11:case 14:case 15:ds(2,u,o),Ct||ds(4,u,o),Fn(r,o,u);break;case 1:Ct||(dn(u,o),m=u.stateNode,typeof m.componentWillUnmount=="function"&&P0(u,o,m)),Fn(r,o,u);break;case 21:Fn(r,o,u);break;case 22:Ct=(m=Ct)||u.memoizedState!==null,Fn(r,o,u),Ct=m;break;default:Fn(r,o,u)}}function G0(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{sa(r)}catch(u){Ye(o,o.return,u)}}}function z0(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{sa(r)}catch(u){Ye(o,o.return,u)}}function iw(r){switch(r.tag){case 31:case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new U0),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new U0),o;default:throw Error(i(435,r.tag))}}function zl(r,o){var u=iw(r);o.forEach(function(m){if(!u.has(m)){u.add(m);var v=dw.bind(null,r,m);m.then(v,v)}})}function fi(r,o){var u=o.deletions;if(u!==null)for(var m=0;m<u.length;m++){var v=u[m],E=r,R=o,D=R;e:for(;D!==null;){switch(D.tag){case 27:if(vs(D.type)){dt=D.stateNode,di=!1;break e}break;case 5:dt=D.stateNode,di=!1;break e;case 3:case 4:dt=D.stateNode.containerInfo,di=!0;break e}D=D.return}if(dt===null)throw Error(i(160));H0(E,R,v),dt=null,di=!1,E=v.alternate,E!==null&&(E.return=null),v.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)V0(o,r),o=o.sibling}var en=null;function V0(r,o){var u=r.alternate,m=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:fi(o,r),hi(r),m&4&&(ds(3,r,r.return),no(3,r),ds(5,r,r.return));break;case 1:fi(o,r),hi(r),m&512&&(Ct||u===null||dn(u,u.return)),m&64&&Bn&&(r=r.updateQueue,r!==null&&(m=r.callbacks,m!==null&&(u=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=u===null?m:u.concat(m))));break;case 26:var v=en;if(fi(o,r),hi(r),m&512&&(Ct||u===null||dn(u,u.return)),m&4){var E=u!==null?u.memoizedState:null;if(m=r.memoizedState,u===null)if(m===null)if(r.stateNode===null){e:{m=r.type,u=r.memoizedProps,v=v.ownerDocument||v;t:switch(m){case"title":E=v.getElementsByTagName("title")[0],(!E||E[Da]||E[jt]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=v.createElement(m),v.head.insertBefore(E,v.querySelector("head > title"))),Vt(E,m,u),E[jt]=r,Nt(E),m=E;break e;case"link":var R=Vy("link","href",v).get(m+(u.href||""));if(R){for(var D=0;D<R.length;D++)if(E=R[D],E.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&E.getAttribute("rel")===(u.rel==null?null:u.rel)&&E.getAttribute("title")===(u.title==null?null:u.title)&&E.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){R.splice(D,1);break t}}E=v.createElement(m),Vt(E,m,u),v.head.appendChild(E);break;case"meta":if(R=Vy("meta","content",v).get(m+(u.content||""))){for(D=0;D<R.length;D++)if(E=R[D],E.getAttribute("content")===(u.content==null?null:""+u.content)&&E.getAttribute("name")===(u.name==null?null:u.name)&&E.getAttribute("property")===(u.property==null?null:u.property)&&E.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&E.getAttribute("charset")===(u.charSet==null?null:u.charSet)){R.splice(D,1);break t}}E=v.createElement(m),Vt(E,m,u),v.head.appendChild(E);break;default:throw Error(i(468,m))}E[jt]=r,Nt(E),m=E}r.stateNode=m}else qy(v,r.type,r.stateNode);else r.stateNode=zy(v,m,r.memoizedProps);else E!==m?(E===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):E.count--,m===null?qy(v,r.type,r.stateNode):zy(v,m,r.memoizedProps)):m===null&&r.stateNode!==null&&uf(r,r.memoizedProps,u.memoizedProps)}break;case 27:fi(o,r),hi(r),m&512&&(Ct||u===null||dn(u,u.return)),u!==null&&m&4&&uf(r,r.memoizedProps,u.memoizedProps);break;case 5:if(fi(o,r),hi(r),m&512&&(Ct||u===null||dn(u,u.return)),r.flags&32){v=r.stateNode;try{Lr(v,"")}catch(ve){Ye(r,r.return,ve)}}m&4&&r.stateNode!=null&&(v=r.memoizedProps,uf(r,v,u!==null?u.memoizedProps:v)),m&1024&&(hf=!0);break;case 6:if(fi(o,r),hi(r),m&4){if(r.stateNode===null)throw Error(i(162));m=r.memoizedProps,u=r.stateNode;try{u.nodeValue=m}catch(ve){Ye(r,r.return,ve)}}break;case 3:if(ac=null,v=en,en=sc(o.containerInfo),fi(o,r),en=v,hi(r),m&4&&u!==null&&u.memoizedState.isDehydrated)try{sa(o.containerInfo)}catch(ve){Ye(r,r.return,ve)}hf&&(hf=!1,q0(r));break;case 4:m=en,en=sc(r.stateNode.containerInfo),fi(o,r),hi(r),en=m;break;case 12:fi(o,r),hi(r);break;case 31:fi(o,r),hi(r),m&4&&(m=r.updateQueue,m!==null&&(r.updateQueue=null,zl(r,m)));break;case 13:fi(o,r),hi(r),r.child.flags&8192&&r.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&(ql=ut()),m&4&&(m=r.updateQueue,m!==null&&(r.updateQueue=null,zl(r,m)));break;case 22:v=r.memoizedState!==null;var F=u!==null&&u.memoizedState!==null,J=Bn,ae=Ct;if(Bn=J||v,Ct=ae||F,fi(o,r),Ct=ae,Bn=J,hi(r),m&8192)e:for(o=r.stateNode,o._visibility=v?o._visibility&-2:o._visibility|1,v&&(u===null||F||Bn||Ct||tr(r)),u=null,o=r;;){if(o.tag===5||o.tag===26){if(u===null){F=u=o;try{if(E=F.stateNode,v)R=E.style,typeof R.setProperty=="function"?R.setProperty("display","none","important"):R.display="none";else{D=F.stateNode;var ue=F.memoizedProps.style,te=ue!=null&&ue.hasOwnProperty("display")?ue.display:null;D.style.display=te==null||typeof te=="boolean"?"":(""+te).trim()}}catch(ve){Ye(F,F.return,ve)}}}else if(o.tag===6){if(u===null){F=o;try{F.stateNode.nodeValue=v?"":F.memoizedProps}catch(ve){Ye(F,F.return,ve)}}}else if(o.tag===18){if(u===null){F=o;try{var ne=F.stateNode;v?Py(ne,!0):Py(F.stateNode,!1)}catch(ve){Ye(F,F.return,ve)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;u===o&&(u=null),o=o.return}u===o&&(u=null),o.sibling.return=o.return,o=o.sibling}m&4&&(m=r.updateQueue,m!==null&&(u=m.retryQueue,u!==null&&(m.retryQueue=null,zl(r,u))));break;case 19:fi(o,r),hi(r),m&4&&(m=r.updateQueue,m!==null&&(r.updateQueue=null,zl(r,m)));break;case 30:break;case 21:break;default:fi(o,r),hi(r)}}function hi(r){var o=r.flags;if(o&2){try{for(var u,m=r.return;m!==null;){if(B0(m)){u=m;break}m=m.return}if(u==null)throw Error(i(160));switch(u.tag){case 27:var v=u.stateNode,E=df(r);Gl(r,E,v);break;case 5:var R=u.stateNode;u.flags&32&&(Lr(R,""),u.flags&=-33);var D=df(r);Gl(r,D,R);break;case 3:case 4:var F=u.stateNode.containerInfo,J=df(r);ff(r,J,F);break;default:throw Error(i(161))}}catch(ae){Ye(r,r.return,ae)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function q0(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;q0(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function Un(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)$0(r,o.alternate,o),o=o.sibling}function tr(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:ds(4,o,o.return),tr(o);break;case 1:dn(o,o.return);var u=o.stateNode;typeof u.componentWillUnmount=="function"&&P0(o,o.return,u),tr(o);break;case 27:mo(o.stateNode);case 26:case 5:dn(o,o.return),tr(o);break;case 22:o.memoizedState===null&&tr(o);break;case 30:tr(o);break;default:tr(o)}r=r.sibling}}function $n(r,o,u){for(u=u&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var m=o.alternate,v=r,E=o,R=E.flags;switch(E.tag){case 0:case 11:case 15:$n(v,E,u),no(4,E);break;case 1:if($n(v,E,u),m=E,v=m.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(J){Ye(m,m.return,J)}if(m=E,v=m.updateQueue,v!==null){var D=m.stateNode;try{var F=v.shared.hiddenCallbacks;if(F!==null)for(v.shared.hiddenCallbacks=null,v=0;v<F.length;v++)Sg(F[v],D)}catch(J){Ye(m,m.return,J)}}u&&R&64&&M0(E),so(E,E.return);break;case 27:F0(E);case 26:case 5:$n(v,E,u),u&&m===null&&R&4&&N0(E),so(E,E.return);break;case 12:$n(v,E,u);break;case 31:$n(v,E,u),u&&R&4&&G0(v,E);break;case 13:$n(v,E,u),u&&R&4&&z0(v,E);break;case 22:E.memoizedState===null&&$n(v,E,u),so(E,E.return);break;case 30:break;default:$n(v,E,u)}o=o.sibling}}function mf(r,o){var u=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(u=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==u&&(r!=null&&r.refCount++,u!=null&&za(u))}function pf(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&za(r))}function tn(r,o,u,m){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)K0(r,o,u,m),o=o.sibling}function K0(r,o,u,m){var v=o.flags;switch(o.tag){case 0:case 11:case 15:tn(r,o,u,m),v&2048&&no(9,o);break;case 1:tn(r,o,u,m);break;case 3:tn(r,o,u,m),v&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&za(r)));break;case 12:if(v&2048){tn(r,o,u,m),r=o.stateNode;try{var E=o.memoizedProps,R=E.id,D=E.onPostCommit;typeof D=="function"&&D(R,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(F){Ye(o,o.return,F)}}else tn(r,o,u,m);break;case 31:tn(r,o,u,m);break;case 13:tn(r,o,u,m);break;case 23:break;case 22:E=o.stateNode,R=o.alternate,o.memoizedState!==null?E._visibility&2?tn(r,o,u,m):ro(r,o):E._visibility&2?tn(r,o,u,m):(E._visibility|=2,Kr(r,o,u,m,(o.subtreeFlags&10256)!==0||!1)),v&2048&&mf(R,o);break;case 24:tn(r,o,u,m),v&2048&&pf(o.alternate,o);break;default:tn(r,o,u,m)}}function Kr(r,o,u,m,v){for(v=v&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var E=r,R=o,D=u,F=m,J=R.flags;switch(R.tag){case 0:case 11:case 15:Kr(E,R,D,F,v),no(8,R);break;case 23:break;case 22:var ae=R.stateNode;R.memoizedState!==null?ae._visibility&2?Kr(E,R,D,F,v):ro(E,R):(ae._visibility|=2,Kr(E,R,D,F,v)),v&&J&2048&&mf(R.alternate,R);break;case 24:Kr(E,R,D,F,v),v&&J&2048&&pf(R.alternate,R);break;default:Kr(E,R,D,F,v)}o=o.sibling}}function ro(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var u=r,m=o,v=m.flags;switch(m.tag){case 22:ro(u,m),v&2048&&mf(m.alternate,m);break;case 24:ro(u,m),v&2048&&pf(m.alternate,m);break;default:ro(u,m)}o=o.sibling}}var ao=8192;function Yr(r,o,u){if(r.subtreeFlags&ao)for(r=r.child;r!==null;)Y0(r,o,u),r=r.sibling}function Y0(r,o,u){switch(r.tag){case 26:Yr(r,o,u),r.flags&ao&&r.memoizedState!==null&&Hw(u,en,r.memoizedState,r.memoizedProps);break;case 5:Yr(r,o,u);break;case 3:case 4:var m=en;en=sc(r.stateNode.containerInfo),Yr(r,o,u),en=m;break;case 22:r.memoizedState===null&&(m=r.alternate,m!==null&&m.memoizedState!==null?(m=ao,ao=16777216,Yr(r,o,u),ao=m):Yr(r,o,u));break;default:Yr(r,o,u)}}function X0(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function oo(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var m=o[u];Bt=m,Q0(m,r)}X0(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)W0(r),r=r.sibling}function W0(r){switch(r.tag){case 0:case 11:case 15:oo(r),r.flags&2048&&ds(9,r,r.return);break;case 3:oo(r);break;case 12:oo(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,Vl(r)):oo(r);break;default:oo(r)}}function Vl(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var u=0;u<o.length;u++){var m=o[u];Bt=m,Q0(m,r)}X0(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:ds(8,o,o.return),Vl(o);break;case 22:u=o.stateNode,u._visibility&2&&(u._visibility&=-3,Vl(o));break;default:Vl(o)}r=r.sibling}}function Q0(r,o){for(;Bt!==null;){var u=Bt;switch(u.tag){case 0:case 11:case 15:ds(8,u,o);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var m=u.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:za(u.memoizedState.cache)}if(m=u.child,m!==null)m.return=u,Bt=m;else e:for(u=r;Bt!==null;){m=Bt;var v=m.sibling,E=m.return;if(j0(m),m===u){Bt=null;break e}if(v!==null){v.return=E,Bt=v;break e}Bt=E}}}var nw={getCacheForType:function(r){var o=Gt(Rt),u=o.data.get(r);return u===void 0&&(u=r(),o.data.set(r,u)),u},cacheSignal:function(){return Gt(Rt).controller.signal}},sw=typeof WeakMap=="function"?WeakMap:Map,ze=0,tt=null,Be=null,Ue=0,Ke=0,Ai=null,fs=!1,Xr=!1,gf=!1,jn=0,bt=0,hs=0,ir=0,yf=0,Ri=0,Wr=0,lo=null,mi=null,vf=!1,ql=0,Z0=0,Kl=1/0,Yl=null,ms=null,kt=0,ps=null,Qr=null,Hn=0,bf=0,Ef=null,J0=null,co=0,xf=null;function Li(){return(ze&2)!==0&&Ue!==0?Ue&-Ue:k.T!==null?Lf():pp()}function ey(){if(Ri===0)if((Ue&536870912)===0||je){var r=il;il<<=1,(il&3932160)===0&&(il=262144),Ri=r}else Ri=536870912;return r=Si.current,r!==null&&(r.flags|=32),Ri}function pi(r,o,u){(r===tt&&(Ke===2||Ke===9)||r.cancelPendingCommit!==null)&&(Zr(r,0),gs(r,Ue,Ri,!1)),Ia(r,u),((ze&2)===0||r!==tt)&&(r===tt&&((ze&2)===0&&(ir|=u),bt===4&&gs(r,Ue,Ri,!1)),fn(r))}function ty(r,o,u){if((ze&6)!==0)throw Error(i(327));var m=!u&&(o&127)===0&&(o&r.expiredLanes)===0||Ca(r,o),v=m?ow(r,o):Sf(r,o,!0),E=m;do{if(v===0){Xr&&!m&&gs(r,o,0,!1);break}else{if(u=r.current.alternate,E&&!rw(u)){v=Sf(r,o,!1),E=!1;continue}if(v===2){if(E=o,r.errorRecoveryDisabledLanes&E)var R=0;else R=r.pendingLanes&-536870913,R=R!==0?R:R&536870912?536870912:0;if(R!==0){o=R;e:{var D=r;v=lo;var F=D.current.memoizedState.isDehydrated;if(F&&(Zr(D,R).flags|=256),R=Sf(D,R,!1),R!==2){if(gf&&!F){D.errorRecoveryDisabledLanes|=E,ir|=E,v=4;break e}E=mi,mi=v,E!==null&&(mi===null?mi=E:mi.push.apply(mi,E))}v=R}if(E=!1,v!==2)continue}}if(v===1){Zr(r,0),gs(r,o,0,!0);break}e:{switch(m=r,E=v,E){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:gs(m,o,Ri,!fs);break e;case 2:mi=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(v=ql+300-ut(),10<v)){if(gs(m,o,Ri,!fs),sl(m,0,!0)!==0)break e;Hn=o,m.timeoutHandle=ky(iy.bind(null,m,u,mi,Yl,vf,o,Ri,ir,Wr,fs,E,"Throttled",-0,0),v);break e}iy(m,u,mi,Yl,vf,o,Ri,ir,Wr,fs,E,null,-0,0)}}break}while(!0);fn(r)}function iy(r,o,u,m,v,E,R,D,F,J,ae,ue,te,ne){if(r.timeoutHandle=-1,ue=o.subtreeFlags,ue&8192||(ue&16785408)===16785408){ue={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Ln},Y0(o,E,ue);var ve=(E&62914560)===E?ql-ut():(E&4194048)===E?Z0-ut():0;if(ve=Gw(ue,ve),ve!==null){Hn=E,r.cancelPendingCommit=ve(uy.bind(null,r,o,E,u,m,v,R,D,F,ae,ue,null,te,ne)),gs(r,E,R,!J);return}}uy(r,o,E,u,m,v,R,D,F)}function rw(r){for(var o=r;;){var u=o.tag;if((u===0||u===11||u===15)&&o.flags&16384&&(u=o.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var m=0;m<u.length;m++){var v=u[m],E=v.getSnapshot;v=v.value;try{if(!xi(E(),v))return!1}catch{return!1}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function gs(r,o,u,m){o&=~yf,o&=~ir,r.suspendedLanes|=o,r.pingedLanes&=~o,m&&(r.warmLanes|=o),m=r.expirationTimes;for(var v=o;0<v;){var E=31-ii(v),R=1<<E;m[E]=-1,v&=~R}u!==0&&fp(r,u,o)}function Xl(){return(ze&6)===0?(uo(0),!1):!0}function Tf(){if(Be!==null){if(Ke===0)var r=Be.return;else r=Be,Dn=Ks=null,Bd(r),Hr=null,qa=0,r=Be;for(;r!==null;)O0(r.alternate,r),r=r.return;Be=null}}function Zr(r,o){var u=r.timeoutHandle;u!==-1&&(r.timeoutHandle=-1,Aw(u)),u=r.cancelPendingCommit,u!==null&&(r.cancelPendingCommit=null,u()),Hn=0,Tf(),tt=r,Be=u=Cn(r.current,null),Ue=o,Ke=0,Ai=null,fs=!1,Xr=Ca(r,o),gf=!1,Wr=Ri=yf=ir=hs=bt=0,mi=lo=null,vf=!1,(o&8)!==0&&(o|=o&32);var m=r.entangledLanes;if(m!==0)for(r=r.entanglements,m&=o;0<m;){var v=31-ii(m),E=1<<v;o|=r[v],m&=~E}return jn=o,gl(),u}function ny(r,o){Ie=null,k.H=eo,o===jr||o===wl?(o=bg(),Ke=3):o===Ad?(o=bg(),Ke=4):Ke=o===Jd?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Ai=o,Be===null&&(bt=1,Fl(r,$i(o,r.current)))}function sy(){var r=Si.current;return r===null?!0:(Ue&4194048)===Ue?zi===null:(Ue&62914560)===Ue||(Ue&536870912)!==0?r===zi:!1}function ry(){var r=k.H;return k.H=eo,r===null?eo:r}function ay(){var r=k.A;return k.A=nw,r}function Wl(){bt=4,fs||(Ue&4194048)!==Ue&&Si.current!==null||(Xr=!0),(hs&134217727)===0&&(ir&134217727)===0||tt===null||gs(tt,Ue,Ri,!1)}function Sf(r,o,u){var m=ze;ze|=2;var v=ry(),E=ay();(tt!==r||Ue!==o)&&(Yl=null,Zr(r,o)),o=!1;var R=bt;e:do try{if(Ke!==0&&Be!==null){var D=Be,F=Ai;switch(Ke){case 8:Tf(),R=6;break e;case 3:case 2:case 9:case 6:Si.current===null&&(o=!0);var J=Ke;if(Ke=0,Ai=null,Jr(r,D,F,J),u&&Xr){R=0;break e}break;default:J=Ke,Ke=0,Ai=null,Jr(r,D,F,J)}}aw(),R=bt;break}catch(ae){ny(r,ae)}while(!0);return o&&r.shellSuspendCounter++,Dn=Ks=null,ze=m,k.H=v,k.A=E,Be===null&&(tt=null,Ue=0,gl()),R}function aw(){for(;Be!==null;)oy(Be)}function ow(r,o){var u=ze;ze|=2;var m=ry(),v=ay();tt!==r||Ue!==o?(Yl=null,Kl=ut()+500,Zr(r,o)):Xr=Ca(r,o);e:do try{if(Ke!==0&&Be!==null){o=Be;var E=Ai;t:switch(Ke){case 1:Ke=0,Ai=null,Jr(r,o,E,1);break;case 2:case 9:if(yg(E)){Ke=0,Ai=null,ly(o);break}o=function(){Ke!==2&&Ke!==9||tt!==r||(Ke=7),fn(r)},E.then(o,o);break e;case 3:Ke=7;break e;case 4:Ke=5;break e;case 7:yg(E)?(Ke=0,Ai=null,ly(o)):(Ke=0,Ai=null,Jr(r,o,E,7));break;case 5:var R=null;switch(Be.tag){case 26:R=Be.memoizedState;case 5:case 27:var D=Be;if(R?Ky(R):D.stateNode.complete){Ke=0,Ai=null;var F=D.sibling;if(F!==null)Be=F;else{var J=D.return;J!==null?(Be=J,Ql(J)):Be=null}break t}}Ke=0,Ai=null,Jr(r,o,E,5);break;case 6:Ke=0,Ai=null,Jr(r,o,E,6);break;case 8:Tf(),bt=6;break e;default:throw Error(i(462))}}lw();break}catch(ae){ny(r,ae)}while(!0);return Dn=Ks=null,k.H=m,k.A=v,ze=u,Be!==null?0:(tt=null,Ue=0,gl(),bt)}function lw(){for(;Be!==null&&!Wt();)oy(Be)}function oy(r){var o=D0(r.alternate,r,jn);r.memoizedProps=r.pendingProps,o===null?Ql(r):Be=o}function ly(r){var o=r,u=o.alternate;switch(o.tag){case 15:case 0:o=A0(u,o,o.pendingProps,o.type,void 0,Ue);break;case 11:o=A0(u,o,o.pendingProps,o.type.render,o.ref,Ue);break;case 5:Bd(o);default:O0(u,o),o=Be=ag(o,jn),o=D0(u,o,jn)}r.memoizedProps=r.pendingProps,o===null?Ql(r):Be=o}function Jr(r,o,u,m){Dn=Ks=null,Bd(o),Hr=null,qa=0;var v=o.return;try{if(W1(r,v,o,u,Ue)){bt=1,Fl(r,$i(u,r.current)),Be=null;return}}catch(E){if(v!==null)throw Be=v,E;bt=1,Fl(r,$i(u,r.current)),Be=null;return}o.flags&32768?(je||m===1?r=!0:Xr||(Ue&536870912)!==0?r=!1:(fs=r=!0,(m===2||m===9||m===3||m===6)&&(m=Si.current,m!==null&&m.tag===13&&(m.flags|=16384))),cy(o,r)):Ql(o)}function Ql(r){var o=r;do{if((o.flags&32768)!==0){cy(o,fs);return}r=o.return;var u=J1(o.alternate,o,jn);if(u!==null){Be=u;return}if(o=o.sibling,o!==null){Be=o;return}Be=o=r}while(o!==null);bt===0&&(bt=5)}function cy(r,o){do{var u=ew(r.alternate,r);if(u!==null){u.flags&=32767,Be=u;return}if(u=r.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!o&&(r=r.sibling,r!==null)){Be=r;return}Be=r=u}while(r!==null);bt=6,Be=null}function uy(r,o,u,m,v,E,R,D,F){r.cancelPendingCommit=null;do Zl();while(kt!==0);if((ze&6)!==0)throw Error(i(327));if(o!==null){if(o===r.current)throw Error(i(177));if(E=o.lanes|o.childLanes,E|=ud,jS(r,u,E,R,D,F),r===tt&&(Be=tt=null,Ue=0),Qr=o,ps=r,Hn=u,bf=E,Ef=v,J0=m,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,fw(Jn,function(){return py(),null})):(r.callbackNode=null,r.callbackPriority=0),m=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||m){m=k.T,k.T=null,v=G.p,G.p=2,R=ze,ze|=4;try{tw(r,o,u)}finally{ze=R,G.p=v,k.T=m}}kt=1,dy(),fy(),hy()}}function dy(){if(kt===1){kt=0;var r=ps,o=Qr,u=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||u){u=k.T,k.T=null;var m=G.p;G.p=2;var v=ze;ze|=4;try{V0(o,r);var E=Pf,R=Qp(r.containerInfo),D=E.focusedElem,F=E.selectionRange;if(R!==D&&D&&D.ownerDocument&&Wp(D.ownerDocument.documentElement,D)){if(F!==null&&rd(D)){var J=F.start,ae=F.end;if(ae===void 0&&(ae=J),"selectionStart"in D)D.selectionStart=J,D.selectionEnd=Math.min(ae,D.value.length);else{var ue=D.ownerDocument||document,te=ue&&ue.defaultView||window;if(te.getSelection){var ne=te.getSelection(),ve=D.textContent.length,we=Math.min(F.start,ve),Je=F.end===void 0?we:Math.min(F.end,ve);!ne.extend&&we>Je&&(R=Je,Je=we,we=R);var q=Xp(D,we),j=Xp(D,Je);if(q&&j&&(ne.rangeCount!==1||ne.anchorNode!==q.node||ne.anchorOffset!==q.offset||ne.focusNode!==j.node||ne.focusOffset!==j.offset)){var Z=ue.createRange();Z.setStart(q.node,q.offset),ne.removeAllRanges(),we>Je?(ne.addRange(Z),ne.extend(j.node,j.offset)):(Z.setEnd(j.node,j.offset),ne.addRange(Z))}}}}for(ue=[],ne=D;ne=ne.parentNode;)ne.nodeType===1&&ue.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<ue.length;D++){var ce=ue[D];ce.element.scrollLeft=ce.left,ce.element.scrollTop=ce.top}}uc=!!Mf,Pf=Mf=null}finally{ze=v,G.p=m,k.T=u}}r.current=o,kt=2}}function fy(){if(kt===2){kt=0;var r=ps,o=Qr,u=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||u){u=k.T,k.T=null;var m=G.p;G.p=2;var v=ze;ze|=4;try{$0(r,o.alternate,o)}finally{ze=v,G.p=m,k.T=u}}kt=3}}function hy(){if(kt===4||kt===3){kt=0,ei();var r=ps,o=Qr,u=Hn,m=J0;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?kt=5:(kt=0,Qr=ps=null,my(r,r.pendingLanes));var v=r.pendingLanes;if(v===0&&(ms=null),$u(u),o=o.stateNode,ti&&typeof ti.onCommitFiberRoot=="function")try{ti.onCommitFiberRoot(Fs,o,void 0,(o.current.flags&128)===128)}catch{}if(m!==null){o=k.T,v=G.p,G.p=2,k.T=null;try{for(var E=r.onRecoverableError,R=0;R<m.length;R++){var D=m[R];E(D.value,{componentStack:D.stack})}}finally{k.T=o,G.p=v}}(Hn&3)!==0&&Zl(),fn(r),v=r.pendingLanes,(u&261930)!==0&&(v&42)!==0?r===xf?co++:(co=0,xf=r):co=0,uo(0)}}function my(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,za(o)))}function Zl(){return dy(),fy(),hy(),py()}function py(){if(kt!==5)return!1;var r=ps,o=bf;bf=0;var u=$u(Hn),m=k.T,v=G.p;try{G.p=32>u?32:u,k.T=null,u=Ef,Ef=null;var E=ps,R=Hn;if(kt=0,Qr=ps=null,Hn=0,(ze&6)!==0)throw Error(i(331));var D=ze;if(ze|=4,W0(E.current),K0(E,E.current,R,u),ze=D,uo(0,!1),ti&&typeof ti.onPostCommitFiberRoot=="function")try{ti.onPostCommitFiberRoot(Fs,E)}catch{}return!0}finally{G.p=v,k.T=m,my(r,o)}}function gy(r,o,u){o=$i(u,o),o=Zd(r.stateNode,o,2),r=ls(r,o,2),r!==null&&(Ia(r,2),fn(r))}function Ye(r,o,u){if(r.tag===3)gy(r,r,u);else for(;o!==null;){if(o.tag===3){gy(o,r,u);break}else if(o.tag===1){var m=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(ms===null||!ms.has(m))){r=$i(u,r),u=y0(2),m=ls(o,u,2),m!==null&&(v0(u,m,o,r),Ia(m,2),fn(m));break}}o=o.return}}function wf(r,o,u){var m=r.pingCache;if(m===null){m=r.pingCache=new sw;var v=new Set;m.set(o,v)}else v=m.get(o),v===void 0&&(v=new Set,m.set(o,v));v.has(u)||(gf=!0,v.add(u),r=cw.bind(null,r,o,u),o.then(r,r))}function cw(r,o,u){var m=r.pingCache;m!==null&&m.delete(o),r.pingedLanes|=r.suspendedLanes&u,r.warmLanes&=~u,tt===r&&(Ue&u)===u&&(bt===4||bt===3&&(Ue&62914560)===Ue&&300>ut()-ql?(ze&2)===0&&Zr(r,0):yf|=u,Wr===Ue&&(Wr=0)),fn(r)}function yy(r,o){o===0&&(o=dp()),r=zs(r,o),r!==null&&(Ia(r,o),fn(r))}function uw(r){var o=r.memoizedState,u=0;o!==null&&(u=o.retryLane),yy(r,u)}function dw(r,o){var u=0;switch(r.tag){case 31:case 13:var m=r.stateNode,v=r.memoizedState;v!==null&&(u=v.retryLane);break;case 19:m=r.stateNode;break;case 22:m=r.stateNode._retryCache;break;default:throw Error(i(314))}m!==null&&m.delete(o),yy(r,u)}function fw(r,o){return yt(r,o)}var Jl=null,ea=null,Af=!1,ec=!1,Rf=!1,ys=0;function fn(r){r!==ea&&r.next===null&&(ea===null?Jl=ea=r:ea=ea.next=r),ec=!0,Af||(Af=!0,mw())}function uo(r,o){if(!Rf&&ec){Rf=!0;do for(var u=!1,m=Jl;m!==null;){if(r!==0){var v=m.pendingLanes;if(v===0)var E=0;else{var R=m.suspendedLanes,D=m.pingedLanes;E=(1<<31-ii(42|r)+1)-1,E&=v&~(R&~D),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(u=!0,xy(m,E))}else E=Ue,E=sl(m,m===tt?E:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(E&3)===0||Ca(m,E)||(u=!0,xy(m,E));m=m.next}while(u);Rf=!1}}function hw(){vy()}function vy(){ec=Af=!1;var r=0;ys!==0&&ww()&&(r=ys);for(var o=ut(),u=null,m=Jl;m!==null;){var v=m.next,E=by(m,o);E===0?(m.next=null,u===null?Jl=v:u.next=v,v===null&&(ea=u)):(u=m,(r!==0||(E&3)!==0)&&(ec=!0)),m=v}kt!==0&&kt!==5||uo(r),ys!==0&&(ys=0)}function by(r,o){for(var u=r.suspendedLanes,m=r.pingedLanes,v=r.expirationTimes,E=r.pendingLanes&-62914561;0<E;){var R=31-ii(E),D=1<<R,F=v[R];F===-1?((D&u)===0||(D&m)!==0)&&(v[R]=$S(D,o)):F<=o&&(r.expiredLanes|=D),E&=~D}if(o=tt,u=Ue,u=sl(r,r===o?u:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),m=r.callbackNode,u===0||r===o&&(Ke===2||Ke===9)||r.cancelPendingCommit!==null)return m!==null&&m!==null&&$t(m),r.callbackNode=null,r.callbackPriority=0;if((u&3)===0||Ca(r,u)){if(o=u&-u,o===r.callbackPriority)return o;switch(m!==null&&$t(m),$u(u)){case 2:case 8:u=Ns;break;case 32:u=Jn;break;case 268435456:u=Bs;break;default:u=Jn}return m=Ey.bind(null,r),u=yt(u,m),r.callbackPriority=o,r.callbackNode=u,o}return m!==null&&m!==null&&$t(m),r.callbackPriority=2,r.callbackNode=null,2}function Ey(r,o){if(kt!==0&&kt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var u=r.callbackNode;if(Zl()&&r.callbackNode!==u)return null;var m=Ue;return m=sl(r,r===tt?m:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),m===0?null:(ty(r,m,o),by(r,ut()),r.callbackNode!=null&&r.callbackNode===u?Ey.bind(null,r):null)}function xy(r,o){if(Zl())return null;ty(r,o,!0)}function mw(){Rw(function(){(ze&6)!==0?yt(li,hw):vy()})}function Lf(){if(ys===0){var r=Ur;r===0&&(r=tl,tl<<=1,(tl&261888)===0&&(tl=256)),ys=r}return ys}function Ty(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:ll(""+r)}function Sy(r,o){var u=o.ownerDocument.createElement("input");return u.name=o.name,u.value=o.value,r.id&&u.setAttribute("form",r.id),o.parentNode.insertBefore(u,o),r=new FormData(r),u.parentNode.removeChild(u),r}function pw(r,o,u,m,v){if(o==="submit"&&u&&u.stateNode===v){var E=Ty((v[ci]||null).action),R=m.submitter;R&&(o=(o=R[ci]||null)?Ty(o.formAction):R.getAttribute("formAction"),o!==null&&(E=o,R=null));var D=new fl("action","action",null,m,v);r.push({event:D,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(ys!==0){var F=R?Sy(v,R):new FormData(v);qd(u,{pending:!0,data:F,method:v.method,action:E},null,F)}}else typeof E=="function"&&(D.preventDefault(),F=R?Sy(v,R):new FormData(v),qd(u,{pending:!0,data:F,method:v.method,action:E},E,F))},currentTarget:v}]})}}for(var _f=0;_f<cd.length;_f++){var Cf=cd[_f],gw=Cf.toLowerCase(),yw=Cf[0].toUpperCase()+Cf.slice(1);Ji(gw,"on"+yw)}Ji(eg,"onAnimationEnd"),Ji(tg,"onAnimationIteration"),Ji(ig,"onAnimationStart"),Ji("dblclick","onDoubleClick"),Ji("focusin","onFocus"),Ji("focusout","onBlur"),Ji(O1,"onTransitionRun"),Ji(M1,"onTransitionStart"),Ji(P1,"onTransitionCancel"),Ji(ng,"onTransitionEnd"),Ar("onMouseEnter",["mouseout","mouseover"]),Ar("onMouseLeave",["mouseout","mouseover"]),Ar("onPointerEnter",["pointerout","pointerover"]),Ar("onPointerLeave",["pointerout","pointerover"]),$s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),$s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),$s("onBeforeInput",["compositionend","keypress","textInput","paste"]),$s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),$s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),$s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var fo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),vw=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(fo));function wy(r,o){o=(o&4)!==0;for(var u=0;u<r.length;u++){var m=r[u],v=m.event;m=m.listeners;e:{var E=void 0;if(o)for(var R=m.length-1;0<=R;R--){var D=m[R],F=D.instance,J=D.currentTarget;if(D=D.listener,F!==E&&v.isPropagationStopped())break e;E=D,v.currentTarget=J;try{E(v)}catch(ae){pl(ae)}v.currentTarget=null,E=F}else for(R=0;R<m.length;R++){if(D=m[R],F=D.instance,J=D.currentTarget,D=D.listener,F!==E&&v.isPropagationStopped())break e;E=D,v.currentTarget=J;try{E(v)}catch(ae){pl(ae)}v.currentTarget=null,E=F}}}}function Fe(r,o){var u=o[ju];u===void 0&&(u=o[ju]=new Set);var m=r+"__bubble";u.has(m)||(Ay(o,r,2,!1),u.add(m))}function If(r,o,u){var m=0;o&&(m|=4),Ay(u,r,m,o)}var tc="_reactListening"+Math.random().toString(36).slice(2);function Df(r){if(!r[tc]){r[tc]=!0,vp.forEach(function(u){u!=="selectionchange"&&(vw.has(u)||If(u,!1,r),If(u,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[tc]||(o[tc]=!0,If("selectionchange",!1,o))}}function Ay(r,o,u,m){switch(ev(o)){case 2:var v=qw;break;case 8:v=Kw;break;default:v=qf}u=v.bind(null,o,u,r),v=void 0,!Wu||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(v=!0),m?v!==void 0?r.addEventListener(o,u,{capture:!0,passive:v}):r.addEventListener(o,u,!0):v!==void 0?r.addEventListener(o,u,{passive:v}):r.addEventListener(o,u,!1)}function kf(r,o,u,m,v){var E=m;if((o&1)===0&&(o&2)===0&&m!==null)e:for(;;){if(m===null)return;var R=m.tag;if(R===3||R===4){var D=m.stateNode.containerInfo;if(D===v)break;if(R===4)for(R=m.return;R!==null;){var F=R.tag;if((F===3||F===4)&&R.stateNode.containerInfo===v)return;R=R.return}for(;D!==null;){if(R=Tr(D),R===null)return;if(F=R.tag,F===5||F===6||F===26||F===27){m=E=R;continue e}D=D.parentNode}}m=m.return}Ip(function(){var J=E,ae=Yu(u),ue=[];e:{var te=sg.get(r);if(te!==void 0){var ne=fl,ve=r;switch(r){case"keypress":if(ul(u)===0)break e;case"keydown":case"keyup":ne=d1;break;case"focusin":ve="focus",ne=ed;break;case"focusout":ve="blur",ne=ed;break;case"beforeblur":case"afterblur":ne=ed;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=Op;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=JS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=m1;break;case eg:case tg:case ig:ne=i1;break;case ng:ne=g1;break;case"scroll":case"scrollend":ne=QS;break;case"wheel":ne=v1;break;case"copy":case"cut":case"paste":ne=s1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=Pp;break;case"toggle":case"beforetoggle":ne=E1}var we=(o&4)!==0,Je=!we&&(r==="scroll"||r==="scrollend"),q=we?te!==null?te+"Capture":null:te;we=[];for(var j=J,Z;j!==null;){var ce=j;if(Z=ce.stateNode,ce=ce.tag,ce!==5&&ce!==26&&ce!==27||Z===null||q===null||(ce=Oa(j,q),ce!=null&&we.push(ho(j,ce,Z))),Je)break;j=j.return}0<we.length&&(te=new ne(te,ve,null,u,ae),ue.push({event:te,listeners:we}))}}if((o&7)===0){e:{if(te=r==="mouseover"||r==="pointerover",ne=r==="mouseout"||r==="pointerout",te&&u!==Ku&&(ve=u.relatedTarget||u.fromElement)&&(Tr(ve)||ve[xr]))break e;if((ne||te)&&(te=ae.window===ae?ae:(te=ae.ownerDocument)?te.defaultView||te.parentWindow:window,ne?(ve=u.relatedTarget||u.toElement,ne=J,ve=ve?Tr(ve):null,ve!==null&&(Je=a(ve),we=ve.tag,ve!==Je||we!==5&&we!==27&&we!==6)&&(ve=null)):(ne=null,ve=J),ne!==ve)){if(we=Op,ce="onMouseLeave",q="onMouseEnter",j="mouse",(r==="pointerout"||r==="pointerover")&&(we=Pp,ce="onPointerLeave",q="onPointerEnter",j="pointer"),Je=ne==null?te:ka(ne),Z=ve==null?te:ka(ve),te=new we(ce,j+"leave",ne,u,ae),te.target=Je,te.relatedTarget=Z,ce=null,Tr(ae)===J&&(we=new we(q,j+"enter",ve,u,ae),we.target=Z,we.relatedTarget=Je,ce=we),Je=ce,ne&&ve)t:{for(we=bw,q=ne,j=ve,Z=0,ce=q;ce;ce=we(ce))Z++;ce=0;for(var Te=j;Te;Te=we(Te))ce++;for(;0<Z-ce;)q=we(q),Z--;for(;0<ce-Z;)j=we(j),ce--;for(;Z--;){if(q===j||j!==null&&q===j.alternate){we=q;break t}q=we(q),j=we(j)}we=null}else we=null;ne!==null&&Ry(ue,te,ne,we,!1),ve!==null&&Je!==null&&Ry(ue,Je,ve,we,!0)}}e:{if(te=J?ka(J):window,ne=te.nodeName&&te.nodeName.toLowerCase(),ne==="select"||ne==="input"&&te.type==="file")var He=Gp;else if(jp(te))if(zp)He=I1;else{He=_1;var be=L1}else ne=te.nodeName,!ne||ne.toLowerCase()!=="input"||te.type!=="checkbox"&&te.type!=="radio"?J&&qu(J.elementType)&&(He=Gp):He=C1;if(He&&(He=He(r,J))){Hp(ue,He,u,ae);break e}be&&be(r,te,J),r==="focusout"&&J&&te.type==="number"&&J.memoizedProps.value!=null&&Vu(te,"number",te.value)}switch(be=J?ka(J):window,r){case"focusin":(jp(be)||be.contentEditable==="true")&&(Dr=be,ad=J,ja=null);break;case"focusout":ja=ad=Dr=null;break;case"mousedown":od=!0;break;case"contextmenu":case"mouseup":case"dragend":od=!1,Zp(ue,u,ae);break;case"selectionchange":if(k1)break;case"keydown":case"keyup":Zp(ue,u,ae)}var De;if(id)e:{switch(r){case"compositionstart":var $e="onCompositionStart";break e;case"compositionend":$e="onCompositionEnd";break e;case"compositionupdate":$e="onCompositionUpdate";break e}$e=void 0}else Ir?Up(r,u)&&($e="onCompositionEnd"):r==="keydown"&&u.keyCode===229&&($e="onCompositionStart");$e&&(Np&&u.locale!=="ko"&&(Ir||$e!=="onCompositionStart"?$e==="onCompositionEnd"&&Ir&&(De=Dp()):(ts=ae,Qu="value"in ts?ts.value:ts.textContent,Ir=!0)),be=ic(J,$e),0<be.length&&($e=new Mp($e,r,null,u,ae),ue.push({event:$e,listeners:be}),De?$e.data=De:(De=$p(u),De!==null&&($e.data=De)))),(De=T1?S1(r,u):w1(r,u))&&($e=ic(J,"onBeforeInput"),0<$e.length&&(be=new Mp("onBeforeInput","beforeinput",null,u,ae),ue.push({event:be,listeners:$e}),be.data=De)),pw(ue,r,J,u,ae)}wy(ue,o)})}function ho(r,o,u){return{instance:r,listener:o,currentTarget:u}}function ic(r,o){for(var u=o+"Capture",m=[];r!==null;){var v=r,E=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||E===null||(v=Oa(r,u),v!=null&&m.unshift(ho(r,v,E)),v=Oa(r,o),v!=null&&m.push(ho(r,v,E))),r.tag===3)return m;r=r.return}return[]}function bw(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Ry(r,o,u,m,v){for(var E=o._reactName,R=[];u!==null&&u!==m;){var D=u,F=D.alternate,J=D.stateNode;if(D=D.tag,F!==null&&F===m)break;D!==5&&D!==26&&D!==27||J===null||(F=J,v?(J=Oa(u,E),J!=null&&R.unshift(ho(u,J,F))):v||(J=Oa(u,E),J!=null&&R.push(ho(u,J,F)))),u=u.return}R.length!==0&&r.push({event:o,listeners:R})}var Ew=/\r\n?/g,xw=/\u0000|\uFFFD/g;function Ly(r){return(typeof r=="string"?r:""+r).replace(Ew,`
`).replace(xw,"")}function _y(r,o){return o=Ly(o),Ly(r)===o}function Ze(r,o,u,m,v,E){switch(u){case"children":typeof m=="string"?o==="body"||o==="textarea"&&m===""||Lr(r,m):(typeof m=="number"||typeof m=="bigint")&&o!=="body"&&Lr(r,""+m);break;case"className":al(r,"class",m);break;case"tabIndex":al(r,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":al(r,u,m);break;case"style":_p(r,m,E);break;case"data":if(o!=="object"){al(r,"data",m);break}case"src":case"href":if(m===""&&(o!=="a"||u!=="href")){r.removeAttribute(u);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){r.removeAttribute(u);break}m=ll(""+m),r.setAttribute(u,m);break;case"action":case"formAction":if(typeof m=="function"){r.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(u==="formAction"?(o!=="input"&&Ze(r,o,"name",v.name,v,null),Ze(r,o,"formEncType",v.formEncType,v,null),Ze(r,o,"formMethod",v.formMethod,v,null),Ze(r,o,"formTarget",v.formTarget,v,null)):(Ze(r,o,"encType",v.encType,v,null),Ze(r,o,"method",v.method,v,null),Ze(r,o,"target",v.target,v,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){r.removeAttribute(u);break}m=ll(""+m),r.setAttribute(u,m);break;case"onClick":m!=null&&(r.onclick=Ln);break;case"onScroll":m!=null&&Fe("scroll",r);break;case"onScrollEnd":m!=null&&Fe("scrollend",r);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(u=m.__html,u!=null){if(v.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"multiple":r.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":r.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){r.removeAttribute("xlink:href");break}u=ll(""+m),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?r.setAttribute(u,""+m):r.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?r.setAttribute(u,""):r.removeAttribute(u);break;case"capture":case"download":m===!0?r.setAttribute(u,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?r.setAttribute(u,m):r.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?r.setAttribute(u,m):r.removeAttribute(u);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?r.removeAttribute(u):r.setAttribute(u,m);break;case"popover":Fe("beforetoggle",r),Fe("toggle",r),rl(r,"popover",m);break;case"xlinkActuate":Rn(r,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Rn(r,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Rn(r,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Rn(r,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Rn(r,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Rn(r,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Rn(r,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Rn(r,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Rn(r,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":rl(r,"is",m);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=XS.get(u)||u,rl(r,u,m))}}function Of(r,o,u,m,v,E){switch(u){case"style":_p(r,m,E);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(i(61));if(u=m.__html,u!=null){if(v.children!=null)throw Error(i(60));r.innerHTML=u}}break;case"children":typeof m=="string"?Lr(r,m):(typeof m=="number"||typeof m=="bigint")&&Lr(r,""+m);break;case"onScroll":m!=null&&Fe("scroll",r);break;case"onScrollEnd":m!=null&&Fe("scrollend",r);break;case"onClick":m!=null&&(r.onclick=Ln);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!bp.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(v=u.endsWith("Capture"),o=u.slice(2,v?u.length-7:void 0),E=r[ci]||null,E=E!=null?E[u]:null,typeof E=="function"&&r.removeEventListener(o,E,v),typeof m=="function")){typeof E!="function"&&E!==null&&(u in r?r[u]=null:r.hasAttribute(u)&&r.removeAttribute(u)),r.addEventListener(o,m,v);break e}u in r?r[u]=m:m===!0?r.setAttribute(u,""):rl(r,u,m)}}}function Vt(r,o,u){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fe("error",r),Fe("load",r);var m=!1,v=!1,E;for(E in u)if(u.hasOwnProperty(E)){var R=u[E];if(R!=null)switch(E){case"src":m=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Ze(r,o,E,R,u,null)}}v&&Ze(r,o,"srcSet",u.srcSet,u,null),m&&Ze(r,o,"src",u.src,u,null);return;case"input":Fe("invalid",r);var D=E=R=v=null,F=null,J=null;for(m in u)if(u.hasOwnProperty(m)){var ae=u[m];if(ae!=null)switch(m){case"name":v=ae;break;case"type":R=ae;break;case"checked":F=ae;break;case"defaultChecked":J=ae;break;case"value":E=ae;break;case"defaultValue":D=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(i(137,o));break;default:Ze(r,o,m,ae,u,null)}}wp(r,E,D,F,J,R,v,!1);return;case"select":Fe("invalid",r),m=R=E=null;for(v in u)if(u.hasOwnProperty(v)&&(D=u[v],D!=null))switch(v){case"value":E=D;break;case"defaultValue":R=D;break;case"multiple":m=D;default:Ze(r,o,v,D,u,null)}o=E,u=R,r.multiple=!!m,o!=null?Rr(r,!!m,o,!1):u!=null&&Rr(r,!!m,u,!0);return;case"textarea":Fe("invalid",r),E=v=m=null;for(R in u)if(u.hasOwnProperty(R)&&(D=u[R],D!=null))switch(R){case"value":m=D;break;case"defaultValue":v=D;break;case"children":E=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(i(91));break;default:Ze(r,o,R,D,u,null)}Rp(r,m,v,E);return;case"option":for(F in u)u.hasOwnProperty(F)&&(m=u[F],m!=null)&&(F==="selected"?r.selected=m&&typeof m!="function"&&typeof m!="symbol":Ze(r,o,F,m,u,null));return;case"dialog":Fe("beforetoggle",r),Fe("toggle",r),Fe("cancel",r),Fe("close",r);break;case"iframe":case"object":Fe("load",r);break;case"video":case"audio":for(m=0;m<fo.length;m++)Fe(fo[m],r);break;case"image":Fe("error",r),Fe("load",r);break;case"details":Fe("toggle",r);break;case"embed":case"source":case"link":Fe("error",r),Fe("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(J in u)if(u.hasOwnProperty(J)&&(m=u[J],m!=null))switch(J){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:Ze(r,o,J,m,u,null)}return;default:if(qu(o)){for(ae in u)u.hasOwnProperty(ae)&&(m=u[ae],m!==void 0&&Of(r,o,ae,m,u,void 0));return}}for(D in u)u.hasOwnProperty(D)&&(m=u[D],m!=null&&Ze(r,o,D,m,u,null))}function Tw(r,o,u,m){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,E=null,R=null,D=null,F=null,J=null,ae=null;for(ne in u){var ue=u[ne];if(u.hasOwnProperty(ne)&&ue!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":F=ue;default:m.hasOwnProperty(ne)||Ze(r,o,ne,null,m,ue)}}for(var te in m){var ne=m[te];if(ue=u[te],m.hasOwnProperty(te)&&(ne!=null||ue!=null))switch(te){case"type":E=ne;break;case"name":v=ne;break;case"checked":J=ne;break;case"defaultChecked":ae=ne;break;case"value":R=ne;break;case"defaultValue":D=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(i(137,o));break;default:ne!==ue&&Ze(r,o,te,ne,m,ue)}}zu(r,R,D,F,J,ae,E,v);return;case"select":ne=R=D=te=null;for(E in u)if(F=u[E],u.hasOwnProperty(E)&&F!=null)switch(E){case"value":break;case"multiple":ne=F;default:m.hasOwnProperty(E)||Ze(r,o,E,null,m,F)}for(v in m)if(E=m[v],F=u[v],m.hasOwnProperty(v)&&(E!=null||F!=null))switch(v){case"value":te=E;break;case"defaultValue":D=E;break;case"multiple":R=E;default:E!==F&&Ze(r,o,v,E,m,F)}o=D,u=R,m=ne,te!=null?Rr(r,!!u,te,!1):!!m!=!!u&&(o!=null?Rr(r,!!u,o,!0):Rr(r,!!u,u?[]:"",!1));return;case"textarea":ne=te=null;for(D in u)if(v=u[D],u.hasOwnProperty(D)&&v!=null&&!m.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:Ze(r,o,D,null,m,v)}for(R in m)if(v=m[R],E=u[R],m.hasOwnProperty(R)&&(v!=null||E!=null))switch(R){case"value":te=v;break;case"defaultValue":ne=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(i(91));break;default:v!==E&&Ze(r,o,R,v,m,E)}Ap(r,te,ne);return;case"option":for(var ve in u)te=u[ve],u.hasOwnProperty(ve)&&te!=null&&!m.hasOwnProperty(ve)&&(ve==="selected"?r.selected=!1:Ze(r,o,ve,null,m,te));for(F in m)te=m[F],ne=u[F],m.hasOwnProperty(F)&&te!==ne&&(te!=null||ne!=null)&&(F==="selected"?r.selected=te&&typeof te!="function"&&typeof te!="symbol":Ze(r,o,F,te,m,ne));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var we in u)te=u[we],u.hasOwnProperty(we)&&te!=null&&!m.hasOwnProperty(we)&&Ze(r,o,we,null,m,te);for(J in m)if(te=m[J],ne=u[J],m.hasOwnProperty(J)&&te!==ne&&(te!=null||ne!=null))switch(J){case"children":case"dangerouslySetInnerHTML":if(te!=null)throw Error(i(137,o));break;default:Ze(r,o,J,te,m,ne)}return;default:if(qu(o)){for(var Je in u)te=u[Je],u.hasOwnProperty(Je)&&te!==void 0&&!m.hasOwnProperty(Je)&&Of(r,o,Je,void 0,m,te);for(ae in m)te=m[ae],ne=u[ae],!m.hasOwnProperty(ae)||te===ne||te===void 0&&ne===void 0||Of(r,o,ae,te,m,ne);return}}for(var q in u)te=u[q],u.hasOwnProperty(q)&&te!=null&&!m.hasOwnProperty(q)&&Ze(r,o,q,null,m,te);for(ue in m)te=m[ue],ne=u[ue],!m.hasOwnProperty(ue)||te===ne||te==null&&ne==null||Ze(r,o,ue,te,m,ne)}function Cy(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Sw(){if(typeof performance.getEntriesByType=="function"){for(var r=0,o=0,u=performance.getEntriesByType("resource"),m=0;m<u.length;m++){var v=u[m],E=v.transferSize,R=v.initiatorType,D=v.duration;if(E&&D&&Cy(R)){for(R=0,D=v.responseEnd,m+=1;m<u.length;m++){var F=u[m],J=F.startTime;if(J>D)break;var ae=F.transferSize,ue=F.initiatorType;ae&&Cy(ue)&&(F=F.responseEnd,R+=ae*(F<D?1:(D-J)/(F-J)))}if(--m,o+=8*(E+R)/(v.duration/1e3),r++,10<r)break}}if(0<r)return o/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var Mf=null,Pf=null;function nc(r){return r.nodeType===9?r:r.ownerDocument}function Iy(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Dy(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function Nf(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var Bf=null;function ww(){var r=window.event;return r&&r.type==="popstate"?r===Bf?!1:(Bf=r,!0):(Bf=null,!1)}var ky=typeof setTimeout=="function"?setTimeout:void 0,Aw=typeof clearTimeout=="function"?clearTimeout:void 0,Oy=typeof Promise=="function"?Promise:void 0,Rw=typeof queueMicrotask=="function"?queueMicrotask:typeof Oy<"u"?function(r){return Oy.resolve(null).then(r).catch(Lw)}:ky;function Lw(r){setTimeout(function(){throw r})}function vs(r){return r==="head"}function My(r,o){var u=o,m=0;do{var v=u.nextSibling;if(r.removeChild(u),v&&v.nodeType===8)if(u=v.data,u==="/$"||u==="/&"){if(m===0){r.removeChild(v),sa(o);return}m--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")m++;else if(u==="html")mo(r.ownerDocument.documentElement);else if(u==="head"){u=r.ownerDocument.head,mo(u);for(var E=u.firstChild;E;){var R=E.nextSibling,D=E.nodeName;E[Da]||D==="SCRIPT"||D==="STYLE"||D==="LINK"&&E.rel.toLowerCase()==="stylesheet"||u.removeChild(E),E=R}}else u==="body"&&mo(r.ownerDocument.body);u=v}while(u);sa(o)}function Py(r,o){var u=r;r=0;do{var m=u.nextSibling;if(u.nodeType===1?o?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(o?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),m&&m.nodeType===8)if(u=m.data,u==="/$"){if(r===0)break;r--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||r++;u=m}while(u)}function Ff(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var u=o;switch(o=o.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Ff(u),Hu(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}r.removeChild(u)}}function _w(r,o,u,m){for(;r.nodeType===1;){var v=u;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!m&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(m){if(!r[Da])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(E=r.getAttribute("rel"),E==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(E!==v.rel||r.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||r.getAttribute("title")!==(v.title==null?null:v.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(E=r.getAttribute("src"),(E!==(v.src==null?null:v.src)||r.getAttribute("type")!==(v.type==null?null:v.type)||r.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&E&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var E=v.name==null?null:""+v.name;if(v.type==="hidden"&&r.getAttribute("name")===E)return r}else return r;if(r=Vi(r.nextSibling),r===null)break}return null}function Cw(r,o,u){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!u||(r=Vi(r.nextSibling),r===null))return null;return r}function Ny(r,o){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=Vi(r.nextSibling),r===null))return null;return r}function Uf(r){return r.data==="$?"||r.data==="$~"}function $f(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function Iw(r,o){var u=r.ownerDocument;if(r.data==="$~")r._reactRetry=o;else if(r.data!=="$?"||u.readyState!=="loading")o();else{var m=function(){o(),u.removeEventListener("DOMContentLoaded",m)};u.addEventListener("DOMContentLoaded",m),r._reactRetry=m}}function Vi(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return r}var jf=null;function By(r){r=r.nextSibling;for(var o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="/$"||u==="/&"){if(o===0)return Vi(r.nextSibling);o--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||o++}r=r.nextSibling}return null}function Fy(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var u=r.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(o===0)return r;o--}else u!=="/$"&&u!=="/&"||o++}r=r.previousSibling}return null}function Uy(r,o,u){switch(o=nc(u),r){case"html":if(r=o.documentElement,!r)throw Error(i(452));return r;case"head":if(r=o.head,!r)throw Error(i(453));return r;case"body":if(r=o.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function mo(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);Hu(r)}var qi=new Map,$y=new Set;function sc(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var Gn=G.d;G.d={f:Dw,r:kw,D:Ow,C:Mw,L:Pw,m:Nw,X:Fw,S:Bw,M:Uw};function Dw(){var r=Gn.f(),o=Xl();return r||o}function kw(r){var o=Sr(r);o!==null&&o.tag===5&&o.type==="form"?n0(o):Gn.r(r)}var ta=typeof document>"u"?null:document;function jy(r,o,u){var m=ta;if(m&&typeof o=="string"&&o){var v=Fi(o);v='link[rel="'+r+'"][href="'+v+'"]',typeof u=="string"&&(v+='[crossorigin="'+u+'"]'),$y.has(v)||($y.add(v),r={rel:r,crossOrigin:u,href:o},m.querySelector(v)===null&&(o=m.createElement("link"),Vt(o,"link",r),Nt(o),m.head.appendChild(o)))}}function Ow(r){Gn.D(r),jy("dns-prefetch",r,null)}function Mw(r,o){Gn.C(r,o),jy("preconnect",r,o)}function Pw(r,o,u){Gn.L(r,o,u);var m=ta;if(m&&r&&o){var v='link[rel="preload"][as="'+Fi(o)+'"]';o==="image"&&u&&u.imageSrcSet?(v+='[imagesrcset="'+Fi(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(v+='[imagesizes="'+Fi(u.imageSizes)+'"]')):v+='[href="'+Fi(r)+'"]';var E=v;switch(o){case"style":E=ia(r);break;case"script":E=na(r)}qi.has(E)||(r=p({rel:"preload",href:o==="image"&&u&&u.imageSrcSet?void 0:r,as:o},u),qi.set(E,r),m.querySelector(v)!==null||o==="style"&&m.querySelector(po(E))||o==="script"&&m.querySelector(go(E))||(o=m.createElement("link"),Vt(o,"link",r),Nt(o),m.head.appendChild(o)))}}function Nw(r,o){Gn.m(r,o);var u=ta;if(u&&r){var m=o&&typeof o.as=="string"?o.as:"script",v='link[rel="modulepreload"][as="'+Fi(m)+'"][href="'+Fi(r)+'"]',E=v;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=na(r)}if(!qi.has(E)&&(r=p({rel:"modulepreload",href:r},o),qi.set(E,r),u.querySelector(v)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(go(E)))return}m=u.createElement("link"),Vt(m,"link",r),Nt(m),u.head.appendChild(m)}}}function Bw(r,o,u){Gn.S(r,o,u);var m=ta;if(m&&r){var v=wr(m).hoistableStyles,E=ia(r);o=o||"default";var R=v.get(E);if(!R){var D={loading:0,preload:null};if(R=m.querySelector(po(E)))D.loading=5;else{r=p({rel:"stylesheet",href:r,"data-precedence":o},u),(u=qi.get(E))&&Hf(r,u);var F=R=m.createElement("link");Nt(F),Vt(F,"link",r),F._p=new Promise(function(J,ae){F.onload=J,F.onerror=ae}),F.addEventListener("load",function(){D.loading|=1}),F.addEventListener("error",function(){D.loading|=2}),D.loading|=4,rc(R,o,m)}R={type:"stylesheet",instance:R,count:1,state:D},v.set(E,R)}}}function Fw(r,o){Gn.X(r,o);var u=ta;if(u&&r){var m=wr(u).hoistableScripts,v=na(r),E=m.get(v);E||(E=u.querySelector(go(v)),E||(r=p({src:r,async:!0},o),(o=qi.get(v))&&Gf(r,o),E=u.createElement("script"),Nt(E),Vt(E,"link",r),u.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(v,E))}}function Uw(r,o){Gn.M(r,o);var u=ta;if(u&&r){var m=wr(u).hoistableScripts,v=na(r),E=m.get(v);E||(E=u.querySelector(go(v)),E||(r=p({src:r,async:!0,type:"module"},o),(o=qi.get(v))&&Gf(r,o),E=u.createElement("script"),Nt(E),Vt(E,"link",r),u.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(v,E))}}function Hy(r,o,u,m){var v=(v=me.current)?sc(v):null;if(!v)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(o=ia(u.href),u=wr(v).hoistableStyles,m=u.get(o),m||(m={type:"style",instance:null,count:0,state:null},u.set(o,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){r=ia(u.href);var E=wr(v).hoistableStyles,R=E.get(r);if(R||(v=v.ownerDocument||v,R={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(r,R),(E=v.querySelector(po(r)))&&!E._p&&(R.instance=E,R.state.loading=5),qi.has(r)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},qi.set(r,u),E||$w(v,r,u,R.state))),o&&m===null)throw Error(i(528,""));return R}if(o&&m!==null)throw Error(i(529,""));return null;case"script":return o=u.async,u=u.src,typeof u=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=na(u),u=wr(v).hoistableScripts,m=u.get(o),m||(m={type:"script",instance:null,count:0,state:null},u.set(o,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function ia(r){return'href="'+Fi(r)+'"'}function po(r){return'link[rel="stylesheet"]['+r+"]"}function Gy(r){return p({},r,{"data-precedence":r.precedence,precedence:null})}function $w(r,o,u,m){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?m.loading=1:(o=r.createElement("link"),m.preload=o,o.addEventListener("load",function(){return m.loading|=1}),o.addEventListener("error",function(){return m.loading|=2}),Vt(o,"link",u),Nt(o),r.head.appendChild(o))}function na(r){return'[src="'+Fi(r)+'"]'}function go(r){return"script[async]"+r}function zy(r,o,u){if(o.count++,o.instance===null)switch(o.type){case"style":var m=r.querySelector('style[data-href~="'+Fi(u.href)+'"]');if(m)return o.instance=m,Nt(m),m;var v=p({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return m=(r.ownerDocument||r).createElement("style"),Nt(m),Vt(m,"style",v),rc(m,u.precedence,r),o.instance=m;case"stylesheet":v=ia(u.href);var E=r.querySelector(po(v));if(E)return o.state.loading|=4,o.instance=E,Nt(E),E;m=Gy(u),(v=qi.get(v))&&Hf(m,v),E=(r.ownerDocument||r).createElement("link"),Nt(E);var R=E;return R._p=new Promise(function(D,F){R.onload=D,R.onerror=F}),Vt(E,"link",m),o.state.loading|=4,rc(E,u.precedence,r),o.instance=E;case"script":return E=na(u.src),(v=r.querySelector(go(E)))?(o.instance=v,Nt(v),v):(m=u,(v=qi.get(E))&&(m=p({},u),Gf(m,v)),r=r.ownerDocument||r,v=r.createElement("script"),Nt(v),Vt(v,"link",m),r.head.appendChild(v),o.instance=v);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(m=o.instance,o.state.loading|=4,rc(m,u.precedence,r));return o.instance}function rc(r,o,u){for(var m=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=m.length?m[m.length-1]:null,E=v,R=0;R<m.length;R++){var D=m[R];if(D.dataset.precedence===o)E=D;else if(E!==v)break}E?E.parentNode.insertBefore(r,E.nextSibling):(o=u.nodeType===9?u.head:u,o.insertBefore(r,o.firstChild))}function Hf(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function Gf(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var ac=null;function Vy(r,o,u){if(ac===null){var m=new Map,v=ac=new Map;v.set(u,m)}else v=ac,m=v.get(u),m||(m=new Map,v.set(u,m));if(m.has(r))return m;for(m.set(r,null),u=u.getElementsByTagName(r),v=0;v<u.length;v++){var E=u[v];if(!(E[Da]||E[jt]||r==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var R=E.getAttribute(o)||"";R=r+R;var D=m.get(R);D?D.push(E):m.set(R,[E])}}return m}function qy(r,o,u){r=r.ownerDocument||r,r.head.insertBefore(u,o==="title"?r.querySelector("head > title"):null)}function jw(r,o,u){if(u===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;return o.rel==="stylesheet"?(r=o.disabled,typeof o.precedence=="string"&&r==null):!0;case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function Ky(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function Hw(r,o,u,m){if(u.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var v=ia(m.href),E=o.querySelector(po(v));if(E){o=E._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(r.count++,r=oc.bind(r),o.then(r,r)),u.state.loading|=4,u.instance=E,Nt(E);return}E=o.ownerDocument||o,m=Gy(m),(v=qi.get(v))&&Hf(m,v),E=E.createElement("link"),Nt(E);var R=E;R._p=new Promise(function(D,F){R.onload=D,R.onerror=F}),Vt(E,"link",m),u.instance=E}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(u,o),(o=u.state.preload)&&(u.state.loading&3)===0&&(r.count++,u=oc.bind(r),o.addEventListener("load",u),o.addEventListener("error",u))}}var zf=0;function Gw(r,o){return r.stylesheets&&r.count===0&&cc(r,r.stylesheets),0<r.count||0<r.imgCount?function(u){var m=setTimeout(function(){if(r.stylesheets&&cc(r,r.stylesheets),r.unsuspend){var E=r.unsuspend;r.unsuspend=null,E()}},6e4+o);0<r.imgBytes&&zf===0&&(zf=62500*Sw());var v=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&cc(r,r.stylesheets),r.unsuspend)){var E=r.unsuspend;r.unsuspend=null,E()}},(r.imgBytes>zf?50:800)+o);return r.unsuspend=u,function(){r.unsuspend=null,clearTimeout(m),clearTimeout(v)}}:null}function oc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)cc(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var lc=null;function cc(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,lc=new Map,o.forEach(zw,r),lc=null,oc.call(r))}function zw(r,o){if(!(o.state.loading&4)){var u=lc.get(r);if(u)var m=u.get(null);else{u=new Map,lc.set(r,u);for(var v=r.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<v.length;E++){var R=v[E];(R.nodeName==="LINK"||R.getAttribute("media")!=="not all")&&(u.set(R.dataset.precedence,R),m=R)}m&&u.set(null,m)}v=o.instance,R=v.getAttribute("data-precedence"),E=u.get(R)||m,E===m&&u.set(null,v),u.set(R,v),this.count++,m=oc.bind(this),v.addEventListener("load",m),v.addEventListener("error",m),E?E.parentNode.insertBefore(v,E.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(v,r.firstChild)),o.state.loading|=4}}var yo={$$typeof:A,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function Vw(r,o,u,m,v,E,R,D,F){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fu(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fu(0),this.hiddenUpdates=Fu(null),this.identifierPrefix=m,this.onUncaughtError=v,this.onCaughtError=E,this.onRecoverableError=R,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=F,this.incompleteTransitions=new Map}function Yy(r,o,u,m,v,E,R,D,F,J,ae,ue){return r=new Vw(r,o,u,R,F,J,ae,ue,D),o=1,E===!0&&(o|=24),E=Ti(3,null,null,o),r.current=E,E.stateNode=r,o=Td(),o.refCount++,r.pooledCache=o,o.refCount++,E.memoizedState={element:m,isDehydrated:u,cache:o},Rd(E),r}function Xy(r){return r?(r=Mr,r):Mr}function Wy(r,o,u,m,v,E){v=Xy(v),m.context===null?m.context=v:m.pendingContext=v,m=os(o),m.payload={element:u},E=E===void 0?null:E,E!==null&&(m.callback=E),u=ls(r,m,o),u!==null&&(pi(u,r,o),Ya(u,r,o))}function Qy(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var u=r.retryLane;r.retryLane=u!==0&&u<o?u:o}}function Vf(r,o){Qy(r,o),(r=r.alternate)&&Qy(r,o)}function Zy(r){if(r.tag===13||r.tag===31){var o=zs(r,67108864);o!==null&&pi(o,r,67108864),Vf(r,67108864)}}function Jy(r){if(r.tag===13||r.tag===31){var o=Li();o=Uu(o);var u=zs(r,o);u!==null&&pi(u,r,o),Vf(r,o)}}var uc=!0;function qw(r,o,u,m){var v=k.T;k.T=null;var E=G.p;try{G.p=2,qf(r,o,u,m)}finally{G.p=E,k.T=v}}function Kw(r,o,u,m){var v=k.T;k.T=null;var E=G.p;try{G.p=8,qf(r,o,u,m)}finally{G.p=E,k.T=v}}function qf(r,o,u,m){if(uc){var v=Kf(m);if(v===null)kf(r,o,m,dc,u),tv(r,m);else if(Xw(v,r,o,u,m))m.stopPropagation();else if(tv(r,m),o&4&&-1<Yw.indexOf(r)){for(;v!==null;){var E=Sr(v);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var R=Us(E.pendingLanes);if(R!==0){var D=E;for(D.pendingLanes|=2,D.entangledLanes|=2;R;){var F=1<<31-ii(R);D.entanglements[1]|=F,R&=~F}fn(E),(ze&6)===0&&(Kl=ut()+500,uo(0))}}break;case 31:case 13:D=zs(E,2),D!==null&&pi(D,E,2),Xl(),Vf(E,2)}if(E=Kf(m),E===null&&kf(r,o,m,dc,u),E===v)break;v=E}v!==null&&m.stopPropagation()}else kf(r,o,m,null,u)}}function Kf(r){return r=Yu(r),Yf(r)}var dc=null;function Yf(r){if(dc=null,r=Tr(r),r!==null){var o=a(r);if(o===null)r=null;else{var u=o.tag;if(u===13){if(r=l(o),r!==null)return r;r=null}else if(u===31){if(r=c(o),r!==null)return r;r=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return dc=r,null}function ev(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wn()){case li:return 2;case Ns:return 8;case Jn:case Er:return 32;case Bs:return 268435456;default:return 32}default:return 32}}var Xf=!1,bs=null,Es=null,xs=null,vo=new Map,bo=new Map,Ts=[],Yw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function tv(r,o){switch(r){case"focusin":case"focusout":bs=null;break;case"dragenter":case"dragleave":Es=null;break;case"mouseover":case"mouseout":xs=null;break;case"pointerover":case"pointerout":vo.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":bo.delete(o.pointerId)}}function Eo(r,o,u,m,v,E){return r===null||r.nativeEvent!==E?(r={blockedOn:o,domEventName:u,eventSystemFlags:m,nativeEvent:E,targetContainers:[v]},o!==null&&(o=Sr(o),o!==null&&Zy(o)),r):(r.eventSystemFlags|=m,o=r.targetContainers,v!==null&&o.indexOf(v)===-1&&o.push(v),r)}function Xw(r,o,u,m,v){switch(o){case"focusin":return bs=Eo(bs,r,o,u,m,v),!0;case"dragenter":return Es=Eo(Es,r,o,u,m,v),!0;case"mouseover":return xs=Eo(xs,r,o,u,m,v),!0;case"pointerover":var E=v.pointerId;return vo.set(E,Eo(vo.get(E)||null,r,o,u,m,v)),!0;case"gotpointercapture":return E=v.pointerId,bo.set(E,Eo(bo.get(E)||null,r,o,u,m,v)),!0}return!1}function iv(r){var o=Tr(r.target);if(o!==null){var u=a(o);if(u!==null){if(o=u.tag,o===13){if(o=l(u),o!==null){r.blockedOn=o,gp(r.priority,function(){Jy(u)});return}}else if(o===31){if(o=c(u),o!==null){r.blockedOn=o,gp(r.priority,function(){Jy(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){r.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}r.blockedOn=null}function fc(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var u=Kf(r.nativeEvent);if(u===null){u=r.nativeEvent;var m=new u.constructor(u.type,u);Ku=m,u.target.dispatchEvent(m),Ku=null}else return o=Sr(u),o!==null&&Zy(o),r.blockedOn=u,!1;o.shift()}return!0}function nv(r,o,u){fc(r)&&u.delete(o)}function Ww(){Xf=!1,bs!==null&&fc(bs)&&(bs=null),Es!==null&&fc(Es)&&(Es=null),xs!==null&&fc(xs)&&(xs=null),vo.forEach(nv),bo.forEach(nv)}function hc(r,o){r.blockedOn===o&&(r.blockedOn=null,Xf||(Xf=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,Ww)))}var mc=null;function sv(r){mc!==r&&(mc=r,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){mc===r&&(mc=null);for(var o=0;o<r.length;o+=3){var u=r[o],m=r[o+1],v=r[o+2];if(typeof m!="function"){if(Yf(m||u)===null)continue;break}var E=Sr(u);E!==null&&(r.splice(o,3),o-=3,qd(E,{pending:!0,data:v,method:u.method,action:m},m,v))}}))}function sa(r){function o(F){return hc(F,r)}bs!==null&&hc(bs,r),Es!==null&&hc(Es,r),xs!==null&&hc(xs,r),vo.forEach(o),bo.forEach(o);for(var u=0;u<Ts.length;u++){var m=Ts[u];m.blockedOn===r&&(m.blockedOn=null)}for(;0<Ts.length&&(u=Ts[0],u.blockedOn===null);)iv(u),u.blockedOn===null&&Ts.shift();if(u=(r.ownerDocument||r).$$reactFormReplay,u!=null)for(m=0;m<u.length;m+=3){var v=u[m],E=u[m+1],R=v[ci]||null;if(typeof E=="function")R||sv(u);else if(R){var D=null;if(E&&E.hasAttribute("formAction")){if(v=E,R=E[ci]||null)D=R.formAction;else if(Yf(v)!==null)continue}else D=R.action;typeof D=="function"?u[m+1]=D:(u.splice(m,3),m-=3),sv(u)}}}function rv(){function r(E){E.canIntercept&&E.info==="react-transition"&&E.intercept({handler:function(){return new Promise(function(R){return v=R})},focusReset:"manual",scroll:"manual"})}function o(){v!==null&&(v(),v=null),m||setTimeout(u,20)}function u(){if(!m&&!navigation.transition){var E=navigation.currentEntry;E&&E.url!=null&&navigation.navigate(E.url,{state:E.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var m=!1,v=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(u,100),function(){m=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),v!==null&&(v(),v=null)}}}function Wf(r){this._internalRoot=r}pc.prototype.render=Wf.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(i(409));var u=o.current,m=Li();Wy(u,m,r,o,null,null)},pc.prototype.unmount=Wf.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;Wy(r.current,2,null,r,null,null),Xl(),o[xr]=null}};function pc(r){this._internalRoot=r}pc.prototype.unstable_scheduleHydration=function(r){if(r){var o=pp();r={blockedOn:null,target:r,priority:o};for(var u=0;u<Ts.length&&o!==0&&o<Ts[u].priority;u++);Ts.splice(u,0,r),u===0&&iv(r)}};var av=e.version;if(av!=="19.2.4")throw Error(i(527,av,"19.2.4"));G.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=d(o),r=r!==null?h(r):null,r=r===null?null:r.stateNode,r};var Qw={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:k,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gc.isDisabled&&gc.supportsFiber)try{Fs=gc.inject(Qw),ti=gc}catch{}}return To.createRoot=function(r,o){if(!s(r))throw Error(i(299));var u=!1,m="",v=h0,E=m0,R=p0;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(m=o.identifierPrefix),o.onUncaughtError!==void 0&&(v=o.onUncaughtError),o.onCaughtError!==void 0&&(E=o.onCaughtError),o.onRecoverableError!==void 0&&(R=o.onRecoverableError)),o=Yy(r,1,!1,null,null,u,m,null,v,E,R,rv),r[xr]=o.current,Df(r),new Wf(o)},To.hydrateRoot=function(r,o,u){if(!s(r))throw Error(i(299));var m=!1,v="",E=h0,R=m0,D=p0,F=null;return u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(v=u.identifierPrefix),u.onUncaughtError!==void 0&&(E=u.onUncaughtError),u.onCaughtError!==void 0&&(R=u.onCaughtError),u.onRecoverableError!==void 0&&(D=u.onRecoverableError),u.formState!==void 0&&(F=u.formState)),o=Yy(r,1,!0,o,u??null,m,v,F,E,R,D,rv),o.context=Xy(null),u=o.current,m=Li(),m=Uu(m),v=os(m),v.callback=null,ls(u,v,m),u=m,o.current.lanes=u,Ia(o,u),fn(o),r[xr]=o.current,Df(r),new pc(o)},To.version="19.2.4",To}var gv;function cA(){if(gv)return Zf.exports;gv=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Zf.exports=lA(),Zf.exports}var uA=cA(),Y=mm();const lt=eA(Y);var yv="popstate";function dA(n={}){function e(i,s){let{pathname:a,search:l,hash:c}=i.location;return Nh("",{pathname:a,search:l,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(i,s){return typeof s=="string"?s:Io(s)}return hA(e,t,null,n)}function mt(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function En(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fA(){return Math.random().toString(36).substring(2,10)}function vv(n,e){return{usr:n.state,key:n.key,idx:e}}function Nh(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Ta(e):e,state:t,key:e&&e.key||i||fA()}}function Io({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Ta(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function hA(n,e,t,i={}){let{window:s=document.defaultView,v5Compat:a=!1}=i,l=s.history,c="POP",f=null,d=h();d==null&&(d=0,l.replaceState({...l.state,idx:d},""));function h(){return(l.state||{idx:null}).idx}function p(){c="POP";let x=h(),w=x==null?null:x-d;d=x,f&&f({action:c,location:T.location,delta:w})}function g(x,w){c="PUSH";let S=Nh(T.location,x,w);d=h()+1;let A=vv(S,d),_=T.createHref(S);try{l.pushState(A,"",_)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;s.location.assign(_)}a&&f&&f({action:c,location:T.location,delta:1})}function b(x,w){c="REPLACE";let S=Nh(T.location,x,w);d=h();let A=vv(S,d),_=T.createHref(S);l.replaceState(A,"",_),a&&f&&f({action:c,location:T.location,delta:0})}function y(x){return mA(x)}let T={get action(){return c},get location(){return n(s,l)},listen(x){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(yv,p),f=x,()=>{s.removeEventListener(yv,p),f=null}},createHref(x){return e(s,x)},createURL:y,encodeLocation(x){let w=y(x);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:g,replace:b,go(x){return l.go(x)}};return T}function mA(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),mt(t,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Io(n);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=t+i),new URL(i,t)}function yE(n,e,t="/"){return pA(n,e,t,!1)}function pA(n,e,t,i){let s=typeof e=="string"?Ta(e):e,a=Qn(s.pathname||"/",t);if(a==null)return null;let l=vE(n);gA(l);let c=null;for(let f=0;c==null&&f<l.length;++f){let d=LA(a);c=AA(l[f],d,i)}return c}function vE(n,e=[],t=[],i="",s=!1){let a=(l,c,f=s,d)=>{let h={relativePath:d===void 0?l.path||"":d,caseSensitive:l.caseSensitive===!0,childrenIndex:c,route:l};if(h.relativePath.startsWith("/")){if(!h.relativePath.startsWith(i)&&f)return;mt(h.relativePath.startsWith(i),`Absolute route path "${h.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),h.relativePath=h.relativePath.slice(i.length)}let p=Xn([i,h.relativePath]),g=t.concat(h);l.children&&l.children.length>0&&(mt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),vE(l.children,e,g,p,f)),!(l.path==null&&!l.index)&&e.push({path:p,score:SA(p,l.index),routesMeta:g})};return n.forEach((l,c)=>{if(l.path===""||!l.path?.includes("?"))a(l,c);else for(let f of bE(l.path))a(l,c,!0,f)}),e}function bE(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(i.length===0)return s?[a,""]:[a];let l=bE(i.join("/")),c=[];return c.push(...l.map(f=>f===""?a:[a,f].join("/"))),s&&c.push(...l),c.map(f=>n.startsWith("/")&&f===""?"/":f)}function gA(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:wA(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var yA=/^:[\w-]+$/,vA=3,bA=2,EA=1,xA=10,TA=-2,bv=n=>n==="*";function SA(n,e){let t=n.split("/"),i=t.length;return t.some(bv)&&(i+=TA),e&&(i+=bA),t.filter(s=>!bv(s)).reduce((s,a)=>s+(yA.test(a)?vA:a===""?EA:xA),i)}function wA(n,e){return n.length===e.length&&n.slice(0,-1).every((i,s)=>i===e[s])?n[n.length-1]-e[e.length-1]:0}function AA(n,e,t=!1){let{routesMeta:i}=n,s={},a="/",l=[];for(let c=0;c<i.length;++c){let f=i[c],d=c===i.length-1,h=a==="/"?e:e.slice(a.length)||"/",p=Yc({path:f.relativePath,caseSensitive:f.caseSensitive,end:d},h),g=f.route;if(!p&&d&&t&&!i[i.length-1].route.index&&(p=Yc({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},h)),!p)return null;Object.assign(s,p.params),l.push({params:s,pathname:Xn([a,p.pathname]),pathnameBase:DA(Xn([a,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(a=Xn([a,p.pathnameBase]))}return l}function Yc(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=RA(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let a=s[0],l=a.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:i.reduce((d,{paramName:h,isOptional:p},g)=>{if(h==="*"){let y=c[g]||"";l=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const b=c[g];return p&&!b?d[h]=void 0:d[h]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:l,pattern:n}}function RA(n,e=!1,t=!0){En(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,c,f)=>(i.push({paramName:c,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),i]}function LA(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return En(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Qn(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}var _A=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function CA(n,e="/"){let{pathname:t,search:i="",hash:s=""}=typeof n=="string"?Ta(n):n,a;return t?(t=t.replace(/\/\/+/g,"/"),t.startsWith("/")?a=Ev(t.substring(1),"/"):a=Ev(t,e)):a=e,{pathname:a,search:kA(i),hash:OA(s)}}function Ev(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function nh(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function IA(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function EE(n){let e=IA(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function xE(n,e,t,i=!1){let s;typeof n=="string"?s=Ta(n):(s={...n},mt(!s.pathname||!s.pathname.includes("?"),nh("?","pathname","search",s)),mt(!s.pathname||!s.pathname.includes("#"),nh("#","pathname","hash",s)),mt(!s.search||!s.search.includes("#"),nh("#","search","hash",s)));let a=n===""||s.pathname==="",l=a?"/":s.pathname,c;if(l==null)c=t;else{let p=e.length-1;if(!i&&l.startsWith("..")){let g=l.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}c=p>=0?e[p]:"/"}let f=CA(s,c),d=l&&l!=="/"&&l.endsWith("/"),h=(a||l===".")&&t.endsWith("/");return!f.pathname.endsWith("/")&&(d||h)&&(f.pathname+="/"),f}var Xn=n=>n.join("/").replace(/\/\/+/g,"/"),DA=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),kA=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,OA=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n,MA=class{constructor(n,e,t,i=!1){this.status=n,this.statusText=e||"",this.internal=i,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function PA(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}function NA(n){return n.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var TE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function SE(n,e){let t=n;if(typeof t!="string"||!_A.test(t))return{absoluteURL:void 0,isExternal:!1,to:t};let i=t,s=!1;if(TE)try{let a=new URL(window.location.href),l=t.startsWith("//")?new URL(a.protocol+t):new URL(t),c=Qn(l.pathname,e);l.origin===a.origin&&c!=null?t=c+l.search+l.hash:s=!0}catch{En(!1,`<Link to="${t}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:s,to:t}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var wE=["POST","PUT","PATCH","DELETE"];new Set(wE);var BA=["GET",...wE];new Set(BA);var Sa=Y.createContext(null);Sa.displayName="DataRouter";var yu=Y.createContext(null);yu.displayName="DataRouterState";var FA=Y.createContext(!1),AE=Y.createContext({isTransitioning:!1});AE.displayName="ViewTransition";var UA=Y.createContext(new Map);UA.displayName="Fetchers";var $A=Y.createContext(null);$A.displayName="Await";var Wi=Y.createContext(null);Wi.displayName="Navigation";var Uo=Y.createContext(null);Uo.displayName="Location";var rn=Y.createContext({outlet:null,matches:[],isDataRoute:!1});rn.displayName="Route";var pm=Y.createContext(null);pm.displayName="RouteError";var RE="REACT_ROUTER_ERROR",jA="REDIRECT",HA="ROUTE_ERROR_RESPONSE";function GA(n){if(n.startsWith(`${RE}:${jA}:{`))try{let e=JSON.parse(n.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function zA(n){if(n.startsWith(`${RE}:${HA}:{`))try{let e=JSON.parse(n.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new MA(e.status,e.statusText,e.data)}catch{}}function VA(n,{relative:e}={}){mt($o(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=Y.useContext(Wi),{hash:s,pathname:a,search:l}=jo(n,{relative:e}),c=a;return t!=="/"&&(c=a==="/"?t:Xn([t,a])),i.createHref({pathname:c,search:l,hash:s})}function $o(){return Y.useContext(Uo)!=null}function Ps(){return mt($o(),"useLocation() may be used only in the context of a <Router> component."),Y.useContext(Uo).location}var LE="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function _E(n){Y.useContext(Wi).static||Y.useLayoutEffect(n)}function yr(){let{isDataRoute:n}=Y.useContext(rn);return n?o2():qA()}function qA(){mt($o(),"useNavigate() may be used only in the context of a <Router> component.");let n=Y.useContext(Sa),{basename:e,navigator:t}=Y.useContext(Wi),{matches:i}=Y.useContext(rn),{pathname:s}=Ps(),a=JSON.stringify(EE(i)),l=Y.useRef(!1);return _E(()=>{l.current=!0}),Y.useCallback((f,d={})=>{if(En(l.current,LE),!l.current)return;if(typeof f=="number"){t.go(f);return}let h=xE(f,JSON.parse(a),s,d.relative==="path");n==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Xn([e,h.pathname])),(d.replace?t.replace:t.push)(h,d.state,d)},[e,t,a,s,n])}var KA=Y.createContext(null);function YA(n){let e=Y.useContext(rn).outlet;return Y.useMemo(()=>e&&Y.createElement(KA.Provider,{value:n},e),[e,n])}function XA(){let{matches:n}=Y.useContext(rn),e=n[n.length-1];return e?e.params:{}}function jo(n,{relative:e}={}){let{matches:t}=Y.useContext(rn),{pathname:i}=Ps(),s=JSON.stringify(EE(t));return Y.useMemo(()=>xE(n,JSON.parse(s),i,e==="path"),[n,s,i,e])}function WA(n,e){return CE(n,e)}function CE(n,e,t,i,s){mt($o(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=Y.useContext(Wi),{matches:l}=Y.useContext(rn),c=l[l.length-1],f=c?c.params:{},d=c?c.pathname:"/",h=c?c.pathnameBase:"/",p=c&&c.route;{let S=p&&p.path||"";DE(d,!p||S.endsWith("*")||S.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${S}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${S}"> to <Route path="${S==="/"?"*":`${S}/*`}">.`)}let g=Ps(),b;if(e){let S=typeof e=="string"?Ta(e):e;mt(h==="/"||S.pathname?.startsWith(h),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${h}" but pathname "${S.pathname}" was given in the \`location\` prop.`),b=S}else b=g;let y=b.pathname||"/",T=y;if(h!=="/"){let S=h.replace(/^\//,"").split("/");T="/"+y.replace(/^\//,"").split("/").slice(S.length).join("/")}let x=yE(n,{pathname:T});En(p||x!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),En(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let w=t2(x&&x.map(S=>Object.assign({},S,{params:Object.assign({},f,S.params),pathname:Xn([h,a.encodeLocation?a.encodeLocation(S.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathname]),pathnameBase:S.pathnameBase==="/"?h:Xn([h,a.encodeLocation?a.encodeLocation(S.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:S.pathnameBase])})),l,t,i,s);return e&&w?Y.createElement(Uo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},w):w}function QA(){let n=a2(),e=PA(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},l=null;return console.error("Error handled by React Router default ErrorBoundary:",n),l=Y.createElement(Y.Fragment,null,Y.createElement("p",null," Hey developer "),Y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",Y.createElement("code",{style:a},"ErrorBoundary")," or"," ",Y.createElement("code",{style:a},"errorElement")," prop on your route.")),Y.createElement(Y.Fragment,null,Y.createElement("h2",null,"Unexpected Application Error!"),Y.createElement("h3",{style:{fontStyle:"italic"}},e),t?Y.createElement("pre",{style:s},t):null,l)}var ZA=Y.createElement(QA,null),IE=class extends Y.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){let n=this.state.error;if(this.context&&typeof n=="object"&&n&&"digest"in n&&typeof n.digest=="string"){const t=zA(n.digest);t&&(n=t)}let e=n!==void 0?Y.createElement(rn.Provider,{value:this.props.routeContext},Y.createElement(pm.Provider,{value:n,children:this.props.component})):this.props.children;return this.context?Y.createElement(JA,{error:n},e):e}};IE.contextType=FA;var sh=new WeakMap;function JA({children:n,error:e}){let{basename:t}=Y.useContext(Wi);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=GA(e.digest);if(i){let s=sh.get(e);if(s)throw s;let a=SE(i.location,t);if(TE&&!sh.get(e))if(a.isExternal||i.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:i.replace}));throw sh.set(e,l),l}return Y.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return n}function e2({routeContext:n,match:e,children:t}){let i=Y.useContext(Sa);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),Y.createElement(rn.Provider,{value:n},t)}function t2(n,e=[],t=null,i=null,s=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let a=n,l=t?.errors;if(l!=null){let h=a.findIndex(p=>p.route.id&&l?.[p.route.id]!==void 0);mt(h>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,h+1))}let c=!1,f=-1;if(t)for(let h=0;h<a.length;h++){let p=a[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(f=h),p.route.id){let{loaderData:g,errors:b}=t,y=p.route.loader&&!g.hasOwnProperty(p.route.id)&&(!b||b[p.route.id]===void 0);if(p.route.lazy||y){c=!0,f>=0?a=a.slice(0,f+1):a=[a[0]];break}}}let d=t&&i?(h,p)=>{i(h,{location:t.location,params:t.matches?.[0]?.params??{},unstable_pattern:NA(t.matches),errorInfo:p})}:void 0;return a.reduceRight((h,p,g)=>{let b,y=!1,T=null,x=null;t&&(b=l&&p.route.id?l[p.route.id]:void 0,T=p.route.errorElement||ZA,c&&(f<0&&g===0?(DE("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,x=null):f===g&&(y=!0,x=p.route.hydrateFallbackElement||null)));let w=e.concat(a.slice(0,g+1)),S=()=>{let A;return b?A=T:y?A=x:p.route.Component?A=Y.createElement(p.route.Component,null):p.route.element?A=p.route.element:A=h,Y.createElement(e2,{match:p,routeContext:{outlet:h,matches:w,isDataRoute:t!=null},children:A})};return t&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?Y.createElement(IE,{location:t.location,revalidation:t.revalidation,component:T,error:b,children:S(),routeContext:{outlet:null,matches:w,isDataRoute:!0},onError:d}):S()},null)}function gm(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function i2(n){let e=Y.useContext(Sa);return mt(e,gm(n)),e}function n2(n){let e=Y.useContext(yu);return mt(e,gm(n)),e}function s2(n){let e=Y.useContext(rn);return mt(e,gm(n)),e}function ym(n){let e=s2(n),t=e.matches[e.matches.length-1];return mt(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function r2(){return ym("useRouteId")}function a2(){let n=Y.useContext(pm),e=n2("useRouteError"),t=ym("useRouteError");return n!==void 0?n:e.errors?.[t]}function o2(){let{router:n}=i2("useNavigate"),e=ym("useNavigate"),t=Y.useRef(!1);return _E(()=>{t.current=!0}),Y.useCallback(async(s,a={})=>{En(t.current,LE),t.current&&(typeof s=="number"?await n.navigate(s):await n.navigate(s,{fromRouteId:e,...a}))},[n,e])}var xv={};function DE(n,e,t){!e&&!xv[n]&&(xv[n]=!0,En(!1,t))}Y.memo(l2);function l2({routes:n,future:e,state:t,onError:i}){return CE(n,void 0,t,i,e)}function c2(n){return YA(n.context)}function Rs(n){mt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function u2({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:s,static:a=!1,unstable_useTransitions:l}){mt(!$o(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),f=Y.useMemo(()=>({basename:c,navigator:s,static:a,unstable_useTransitions:l,future:{}}),[c,s,a,l]);typeof t=="string"&&(t=Ta(t));let{pathname:d="/",search:h="",hash:p="",state:g=null,key:b="default"}=t,y=Y.useMemo(()=>{let T=Qn(d,c);return T==null?null:{location:{pathname:T,search:h,hash:p,state:g,key:b},navigationType:i}},[c,d,h,p,g,b,i]);return En(y!=null,`<Router basename="${c}"> is not able to match the URL "${d}${h}${p}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:Y.createElement(Wi.Provider,{value:f},Y.createElement(Uo.Provider,{children:e,value:y}))}function d2({children:n,location:e}){return WA(Bh(n),e)}function Bh(n,e=[]){let t=[];return Y.Children.forEach(n,(i,s)=>{if(!Y.isValidElement(i))return;let a=[...e,s];if(i.type===Y.Fragment){t.push.apply(t,Bh(i.props.children,a));return}mt(i.type===Rs,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),mt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let l={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=Bh(i.props.children,a)),t.push(l)}),t}var Pc="get",Nc="application/x-www-form-urlencoded";function vu(n){return typeof HTMLElement<"u"&&n instanceof HTMLElement}function f2(n){return vu(n)&&n.tagName.toLowerCase()==="button"}function h2(n){return vu(n)&&n.tagName.toLowerCase()==="form"}function m2(n){return vu(n)&&n.tagName.toLowerCase()==="input"}function p2(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function g2(n,e){return n.button===0&&(!e||e==="_self")&&!p2(n)}var yc=null;function y2(){if(yc===null)try{new FormData(document.createElement("form"),0),yc=!1}catch{yc=!0}return yc}var v2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function rh(n){return n!=null&&!v2.has(n)?(En(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Nc}"`),null):n}function b2(n,e){let t,i,s,a,l;if(h2(n)){let c=n.getAttribute("action");i=c?Qn(c,e):null,t=n.getAttribute("method")||Pc,s=rh(n.getAttribute("enctype"))||Nc,a=new FormData(n)}else if(f2(n)||m2(n)&&(n.type==="submit"||n.type==="image")){let c=n.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let f=n.getAttribute("formaction")||c.getAttribute("action");if(i=f?Qn(f,e):null,t=n.getAttribute("formmethod")||c.getAttribute("method")||Pc,s=rh(n.getAttribute("formenctype"))||rh(c.getAttribute("enctype"))||Nc,a=new FormData(c,n),!y2()){let{name:d,type:h,value:p}=n;if(h==="image"){let g=d?`${d}.`:"";a.append(`${g}x`,"0"),a.append(`${g}y`,"0")}else d&&a.append(d,p)}}else{if(vu(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Pc,i=null,s=Nc,l=n}return a&&s==="text/plain"&&(l=a,a=void 0),{action:i,method:t.toLowerCase(),encType:s,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function vm(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function E2(n,e,t,i){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t?s.pathname.endsWith("/")?s.pathname=`${s.pathname}_.${i}`:s.pathname=`${s.pathname}.${i}`:s.pathname==="/"?s.pathname=`_root.${i}`:e&&Qn(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${i}`,s}async function x2(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function T2(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function S2(n,e,t){let i=await Promise.all(n.map(async s=>{let a=e.routes[s.route.id];if(a){let l=await x2(a,t);return l.links?l.links():[]}return[]}));return L2(i.flat(1).filter(T2).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Tv(n,e,t,i,s,a){let l=(f,d)=>t[d]?f.route.id!==t[d].route.id:!0,c=(f,d)=>t[d].pathname!==f.pathname||t[d].route.path?.endsWith("*")&&t[d].params["*"]!==f.params["*"];return a==="assets"?e.filter((f,d)=>l(f,d)||c(f,d)):a==="data"?e.filter((f,d)=>{let h=i.routes[f.route.id];if(!h||!h.hasLoader)return!1;if(l(f,d)||c(f,d))return!0;if(f.route.shouldRevalidate){let p=f.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:f.params,defaultShouldRevalidate:!0});if(typeof p=="boolean")return p}return!0}):[]}function w2(n,e,{includeHydrateFallback:t}={}){return A2(n.map(i=>{let s=e.routes[i.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function A2(n){return[...new Set(n)]}function R2(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function L2(n,e){let t=new Set;return new Set(e),n.reduce((i,s)=>{let a=JSON.stringify(R2(s));return t.has(a)||(t.add(a),i.push({key:a,link:s})),i},[])}function kE(){let n=Y.useContext(Sa);return vm(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function _2(){let n=Y.useContext(yu);return vm(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var bm=Y.createContext(void 0);bm.displayName="FrameworkContext";function OE(){let n=Y.useContext(bm);return vm(n,"You must render this element inside a <HydratedRouter> element"),n}function C2(n,e){let t=Y.useContext(bm),[i,s]=Y.useState(!1),[a,l]=Y.useState(!1),{onFocus:c,onBlur:f,onMouseEnter:d,onMouseLeave:h,onTouchStart:p}=e,g=Y.useRef(null);Y.useEffect(()=>{if(n==="render"&&l(!0),n==="viewport"){let T=w=>{w.forEach(S=>{l(S.isIntersecting)})},x=new IntersectionObserver(T,{threshold:.5});return g.current&&x.observe(g.current),()=>{x.disconnect()}}},[n]),Y.useEffect(()=>{if(i){let T=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(T)}}},[i]);let b=()=>{s(!0)},y=()=>{s(!1),l(!1)};return t?n!=="intent"?[a,g,{}]:[a,g,{onFocus:So(c,b),onBlur:So(f,y),onMouseEnter:So(d,b),onMouseLeave:So(h,y),onTouchStart:So(p,b)}]:[!1,g,{}]}function So(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function I2({page:n,...e}){let{router:t}=kE(),i=Y.useMemo(()=>yE(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?Y.createElement(k2,{page:n,matches:i,...e}):null}function D2(n){let{manifest:e,routeModules:t}=OE(),[i,s]=Y.useState([]);return Y.useEffect(()=>{let a=!1;return S2(n,e,t).then(l=>{a||s(l)}),()=>{a=!0}},[n,e,t]),i}function k2({page:n,matches:e,...t}){let i=Ps(),{future:s,manifest:a,routeModules:l}=OE(),{basename:c}=kE(),{loaderData:f,matches:d}=_2(),h=Y.useMemo(()=>Tv(n,e,d,a,i,"data"),[n,e,d,a,i]),p=Y.useMemo(()=>Tv(n,e,d,a,i,"assets"),[n,e,d,a,i]),g=Y.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let T=new Set,x=!1;if(e.forEach(S=>{let A=a.routes[S.route.id];!A||!A.hasLoader||(!h.some(_=>_.route.id===S.route.id)&&S.route.id in f&&l[S.route.id]?.shouldRevalidate||A.hasClientLoader?x=!0:T.add(S.route.id))}),T.size===0)return[];let w=E2(n,c,s.unstable_trailingSlashAwareDataRequests,"data");return x&&T.size>0&&w.searchParams.set("_routes",e.filter(S=>T.has(S.route.id)).map(S=>S.route.id).join(",")),[w.pathname+w.search]},[c,s.unstable_trailingSlashAwareDataRequests,f,i,a,h,e,n,l]),b=Y.useMemo(()=>w2(p,a),[p,a]),y=D2(p);return Y.createElement(Y.Fragment,null,g.map(T=>Y.createElement("link",{key:T,rel:"prefetch",as:"fetch",href:T,...t})),b.map(T=>Y.createElement("link",{key:T,rel:"modulepreload",href:T,...t})),y.map(({key:T,link:x})=>Y.createElement("link",{key:T,nonce:t.nonce,...x,crossOrigin:x.crossOrigin??t.crossOrigin})))}function O2(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var M2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{M2&&(window.__reactRouterVersion="7.13.0")}catch{}function P2({basename:n,children:e,unstable_useTransitions:t,window:i}){let s=Y.useRef();s.current==null&&(s.current=dA({window:i,v5Compat:!0}));let a=s.current,[l,c]=Y.useState({action:a.action,location:a.location}),f=Y.useCallback(d=>{t===!1?c(d):Y.startTransition(()=>c(d))},[t]);return Y.useLayoutEffect(()=>a.listen(f),[a,f]),Y.createElement(u2,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:a,unstable_useTransitions:t})}var ME=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,PE=Y.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:s,reloadDocument:a,replace:l,state:c,target:f,to:d,preventScrollReset:h,viewTransition:p,unstable_defaultShouldRevalidate:g,...b},y){let{basename:T,unstable_useTransitions:x}=Y.useContext(Wi),w=typeof d=="string"&&ME.test(d),S=SE(d,T);d=S.to;let A=VA(d,{relative:s}),[_,I,P]=C2(i,b),C=U2(d,{replace:l,state:c,target:f,preventScrollReset:h,relative:s,viewTransition:p,unstable_defaultShouldRevalidate:g,unstable_useTransitions:x});function O(N){e&&e(N),N.defaultPrevented||C(N)}let B=Y.createElement("a",{...b,...P,href:S.absoluteURL||A,onClick:S.isExternal||a?e:O,ref:O2(y,I),target:f,"data-discover":!w&&t==="render"?"true":void 0});return _&&!w?Y.createElement(Y.Fragment,null,B,Y.createElement(I2,{page:A})):B});PE.displayName="Link";var N2=Y.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:s=!1,style:a,to:l,viewTransition:c,children:f,...d},h){let p=jo(l,{relative:d.relative}),g=Ps(),b=Y.useContext(yu),{navigator:y,basename:T}=Y.useContext(Wi),x=b!=null&&z2(p)&&c===!0,w=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,S=g.pathname,A=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;t||(S=S.toLowerCase(),A=A?A.toLowerCase():null,w=w.toLowerCase()),A&&T&&(A=Qn(A,T)||A);const _=w!=="/"&&w.endsWith("/")?w.length-1:w.length;let I=S===w||!s&&S.startsWith(w)&&S.charAt(_)==="/",P=A!=null&&(A===w||!s&&A.startsWith(w)&&A.charAt(w.length)==="/"),C={isActive:I,isPending:P,isTransitioning:x},O=I?e:void 0,B;typeof i=="function"?B=i(C):B=[i,I?"active":null,P?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let N=typeof a=="function"?a(C):a;return Y.createElement(PE,{...d,"aria-current":O,className:B,ref:h,style:N,to:l,viewTransition:c},typeof f=="function"?f(C):f)});N2.displayName="NavLink";var B2=Y.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:s,state:a,method:l=Pc,action:c,onSubmit:f,relative:d,preventScrollReset:h,viewTransition:p,unstable_defaultShouldRevalidate:g,...b},y)=>{let{unstable_useTransitions:T}=Y.useContext(Wi),x=H2(),w=G2(c,{relative:d}),S=l.toLowerCase()==="get"?"get":"post",A=typeof c=="string"&&ME.test(c),_=I=>{if(f&&f(I),I.defaultPrevented)return;I.preventDefault();let P=I.nativeEvent.submitter,C=P?.getAttribute("formmethod")||l,O=()=>x(P||I.currentTarget,{fetcherKey:e,method:C,navigate:t,replace:s,state:a,relative:d,preventScrollReset:h,viewTransition:p,unstable_defaultShouldRevalidate:g});T&&t!==!1?Y.startTransition(()=>O()):O()};return Y.createElement("form",{ref:y,method:S,action:w,onSubmit:i?f:_,...b,"data-discover":!A&&n==="render"?"true":void 0})});B2.displayName="Form";function F2(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function NE(n){let e=Y.useContext(Sa);return mt(e,F2(n)),e}function U2(n,{target:e,replace:t,state:i,preventScrollReset:s,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:c,unstable_useTransitions:f}={}){let d=yr(),h=Ps(),p=jo(n,{relative:a});return Y.useCallback(g=>{if(g2(g,e)){g.preventDefault();let b=t!==void 0?t:Io(h)===Io(p),y=()=>d(n,{replace:b,state:i,preventScrollReset:s,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:c});f?Y.startTransition(()=>y()):y()}},[h,d,p,t,i,e,n,s,a,l,c,f])}var $2=0,j2=()=>`__${String(++$2)}__`;function H2(){let{router:n}=NE("useSubmit"),{basename:e}=Y.useContext(Wi),t=r2(),i=n.fetch,s=n.navigate;return Y.useCallback(async(a,l={})=>{let{action:c,method:f,encType:d,formData:h,body:p}=b2(a,e);if(l.navigate===!1){let g=l.fetcherKey||j2();await i(g,t,l.action||c,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:h,body:p,formMethod:l.method||f,formEncType:l.encType||d,flushSync:l.flushSync})}else await s(l.action||c,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:h,body:p,formMethod:l.method||f,formEncType:l.encType||d,replace:l.replace,state:l.state,fromRouteId:t,flushSync:l.flushSync,viewTransition:l.viewTransition})},[i,s,e,t])}function G2(n,{relative:e}={}){let{basename:t}=Y.useContext(Wi),i=Y.useContext(rn);mt(i,"useFormAction must be used inside a RouteContext");let[s]=i.matches.slice(-1),a={...jo(n||".",{relative:e})},l=Ps();if(n==null){a.search=l.search;let c=new URLSearchParams(a.search),f=c.getAll("index");if(f.some(h=>h==="")){c.delete("index"),f.filter(p=>p).forEach(p=>c.append("index",p));let h=c.toString();a.search=h?`?${h}`:""}}return(!n||n===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:Xn([t,a.pathname])),Io(a)}function z2(n,{relative:e}={}){let t=Y.useContext(AE);mt(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=NE("useViewTransitionState"),s=jo(n,{relative:e});if(!t.isTransitioning)return!1;let a=Qn(t.currentLocation.pathname,i)||t.currentLocation.pathname,l=Qn(t.nextLocation.pathname,i)||t.nextLocation.pathname;return Yc(s.pathname,l)!=null||Yc(s.pathname,a)!=null}function BE(n){var e,t,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var s=n.length;for(e=0;e<s;e++)n[e]&&(t=BE(n[e]))&&(i&&(i+=" "),i+=t)}else for(t in n)n[t]&&(i&&(i+=" "),i+=t);return i}function cr(){for(var n,e,t=0,i="",s=arguments.length;t<s;t++)(n=arguments[t])&&(e=BE(n))&&(i&&(i+=" "),i+=e);return i}function V2(n){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],t=document.createElement("style");t.type="text/css",e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t),t.styleSheet?t.styleSheet.cssText=n:t.appendChild(document.createTextNode(n))}V2(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var Ho=n=>typeof n=="number"&&!isNaN(n),hr=n=>typeof n=="string",Zn=n=>typeof n=="function",q2=n=>hr(n)||Ho(n),Fh=n=>hr(n)||Zn(n)?n:null,K2=(n,e)=>n===!1||Ho(n)&&n>0?n:e,Uh=n=>Y.isValidElement(n)||hr(n)||Zn(n)||Ho(n);function Y2(n,e,t=300){let{scrollHeight:i,style:s}=n;requestAnimationFrame(()=>{s.minHeight="initial",s.height=i+"px",s.transition=`all ${t}ms`,requestAnimationFrame(()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(e,t)})})}function X2({enter:n,exit:e,appendPosition:t=!1,collapse:i=!0,collapseDuration:s=300}){return function({children:a,position:l,preventExitTransition:c,done:f,nodeRef:d,isIn:h,playToast:p}){let g=t?`${n}--${l}`:n,b=t?`${e}--${l}`:e,y=Y.useRef(0);return Y.useLayoutEffect(()=>{let T=d.current,x=g.split(" "),w=S=>{S.target===d.current&&(p(),T.removeEventListener("animationend",w),T.removeEventListener("animationcancel",w),y.current===0&&S.type!=="animationcancel"&&T.classList.remove(...x))};T.classList.add(...x),T.addEventListener("animationend",w),T.addEventListener("animationcancel",w)},[]),Y.useEffect(()=>{let T=d.current,x=()=>{T.removeEventListener("animationend",x),i?Y2(T,f,s):f()};h||(c?x():(y.current=1,T.className+=` ${b}`,T.addEventListener("animationend",x)))},[h]),lt.createElement(lt.Fragment,null,a)}}function Sv(n,e){return{content:FE(n.content,n.props),containerId:n.props.containerId,id:n.props.toastId,theme:n.props.theme,type:n.props.type,data:n.props.data||{},isLoading:n.props.isLoading,icon:n.props.icon,reason:n.removalReason,status:e}}function FE(n,e,t=!1){return Y.isValidElement(n)&&!hr(n.type)?Y.cloneElement(n,{closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):Zn(n)?n({closeToast:e.closeToast,toastProps:e,data:e.data,isPaused:t}):n}function W2({closeToast:n,theme:e,ariaLabel:t="close"}){return lt.createElement("button",{className:`Toastify__close-button Toastify__close-button--${e}`,type:"button",onClick:i=>{i.stopPropagation(),n(!0)},"aria-label":t},lt.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},lt.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function Q2({delay:n,isRunning:e,closeToast:t,type:i="default",hide:s,className:a,controlledProgress:l,progress:c,rtl:f,isIn:d,theme:h}){let p=s||l&&c===0,g={animationDuration:`${n}ms`,animationPlayState:e?"running":"paused"};l&&(g.transform=`scaleX(${c})`);let b=cr("Toastify__progress-bar",l?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${h}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":f}),y=Zn(a)?a({rtl:f,type:i,defaultClassName:b}):cr(b,a),T={[l&&c>=1?"onTransitionEnd":"onAnimationEnd"]:l&&c<1?null:()=>{d&&t()}};return lt.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":p},lt.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${h} Toastify__progress-bar--${i}`}),lt.createElement("div",{role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:y,style:g,...T}))}var Z2=1,UE=()=>`${Z2++}`;function J2(n,e,t){let i=1,s=0,a=[],l=[],c=e,f=new Map,d=new Set,h=S=>(d.add(S),()=>d.delete(S)),p=()=>{l=Array.from(f.values()),d.forEach(S=>S())},g=({containerId:S,toastId:A,updateId:_})=>{let I=S?S!==n:n!==1,P=f.has(A)&&_==null;return I||P},b=(S,A)=>{f.forEach(_=>{var I;(A==null||A===_.props.toastId)&&((I=_.toggle)==null||I.call(_,S))})},y=S=>{var A,_;(_=(A=S.props)==null?void 0:A.onClose)==null||_.call(A,S.removalReason),S.isActive=!1},T=S=>{if(S==null)f.forEach(y);else{let A=f.get(S);A&&y(A)}p()},x=()=>{s-=a.length,a=[]},w=S=>{var A,_;let{toastId:I,updateId:P}=S.props,C=P==null;S.staleId&&f.delete(S.staleId),S.isActive=!0,f.set(I,S),p(),t(Sv(S,C?"added":"updated")),C&&((_=(A=S.props).onOpen)==null||_.call(A))};return{id:n,props:c,observe:h,toggle:b,removeToast:T,toasts:f,clearQueue:x,buildToast:(S,A)=>{if(g(A))return;let{toastId:_,updateId:I,data:P,staleId:C,delay:O}=A,B=I==null;B&&s++;let N={...c,style:c.toastStyle,key:i++,...Object.fromEntries(Object.entries(A).filter(([ee,z])=>z!=null)),toastId:_,updateId:I,data:P,isIn:!1,className:Fh(A.className||c.toastClassName),progressClassName:Fh(A.progressClassName||c.progressClassName),autoClose:A.isLoading?!1:K2(A.autoClose,c.autoClose),closeToast(ee){f.get(_).removalReason=ee,T(_)},deleteToast(){let ee=f.get(_);if(ee!=null){if(t(Sv(ee,"removed")),f.delete(_),s--,s<0&&(s=0),a.length>0){w(a.shift());return}p()}}};N.closeButton=c.closeButton,A.closeButton===!1||Uh(A.closeButton)?N.closeButton=A.closeButton:A.closeButton===!0&&(N.closeButton=Uh(c.closeButton)?c.closeButton:!0);let V={content:S,props:N,staleId:C};c.limit&&c.limit>0&&s>c.limit&&B?a.push(V):Ho(O)?setTimeout(()=>{w(V)},O):w(V)},setProps(S){c=S},setToggle:(S,A)=>{let _=f.get(S);_&&(_.toggle=A)},isToastActive:S=>{var A;return(A=f.get(S))==null?void 0:A.isActive},getSnapshot:()=>l}}var si=new Map,Do=[],$h=new Set,eR=n=>$h.forEach(e=>e(n)),$E=()=>si.size>0;function tR(){Do.forEach(n=>HE(n.content,n.options)),Do=[]}var iR=(n,{containerId:e})=>{var t;return(t=si.get(e||1))==null?void 0:t.toasts.get(n)};function jE(n,e){var t;if(e)return!!((t=si.get(e))!=null&&t.isToastActive(n));let i=!1;return si.forEach(s=>{s.isToastActive(n)&&(i=!0)}),i}function nR(n){if(!$E()){Do=Do.filter(e=>n!=null&&e.options.toastId!==n);return}if(n==null||q2(n))si.forEach(e=>{e.removeToast(n)});else if(n&&("containerId"in n||"id"in n)){let e=si.get(n.containerId);e?e.removeToast(n.id):si.forEach(t=>{t.removeToast(n.id)})}}var sR=(n={})=>{si.forEach(e=>{e.props.limit&&(!n.containerId||e.id===n.containerId)&&e.clearQueue()})};function HE(n,e){Uh(n)&&($E()||Do.push({content:n,options:e}),si.forEach(t=>{t.buildToast(n,e)}))}function rR(n){var e;(e=si.get(n.containerId||1))==null||e.setToggle(n.id,n.fn)}function GE(n,e){si.forEach(t=>{(e==null||!(e!=null&&e.containerId)||e?.containerId===t.id)&&t.toggle(n,e?.id)})}function aR(n){let e=n.containerId||1;return{subscribe(t){let i=J2(e,n,eR);si.set(e,i);let s=i.observe(t);return tR(),()=>{s(),si.delete(e)}},setProps(t){var i;(i=si.get(e))==null||i.setProps(t)},getSnapshot(){var t;return(t=si.get(e))==null?void 0:t.getSnapshot()}}}function oR(n){return $h.add(n),()=>{$h.delete(n)}}function lR(n){return n&&(hr(n.toastId)||Ho(n.toastId))?n.toastId:UE()}function Go(n,e){return HE(n,e),e.toastId}function bu(n,e){return{...e,type:e&&e.type||n,toastId:lR(e)}}function Eu(n){return(e,t)=>Go(e,bu(n,t))}function nt(n,e){return Go(n,bu("default",e))}nt.loading=(n,e)=>Go(n,bu("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e}));function cR(n,{pending:e,error:t,success:i},s){let a;e&&(a=hr(e)?nt.loading(e,s):nt.loading(e.render,{...s,...e}));let l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(d,h,p)=>{if(h==null){nt.dismiss(a);return}let g={type:d,...l,...s,data:p},b=hr(h)?{render:h}:h;return a?nt.update(a,{...g,...b}):nt(b.render,{...g,...b}),p},f=Zn(n)?n():n;return f.then(d=>c("success",i,d)).catch(d=>c("error",t,d)),f}nt.promise=cR;nt.success=Eu("success");nt.info=Eu("info");nt.error=Eu("error");nt.warning=Eu("warning");nt.warn=nt.warning;nt.dark=(n,e)=>Go(n,bu("default",{theme:"dark",...e}));function uR(n){nR(n)}nt.dismiss=uR;nt.clearWaitingQueue=sR;nt.isActive=jE;nt.update=(n,e={})=>{let t=iR(n,e);if(t){let{props:i,content:s}=t,a={delay:100,...i,...e,toastId:e.toastId||n,updateId:UE()};a.toastId!==n&&(a.staleId=n);let l=a.render||s;delete a.render,Go(l,a)}};nt.done=n=>{nt.update(n,{progress:1})};nt.onChange=oR;nt.play=n=>GE(!0,n);nt.pause=n=>GE(!1,n);function dR(n){var e;let{subscribe:t,getSnapshot:i,setProps:s}=Y.useRef(aR(n)).current;s(n);let a=(e=Y.useSyncExternalStore(t,i,i))==null?void 0:e.slice();function l(c){if(!a)return[];let f=new Map;return n.newestOnTop&&a.reverse(),a.forEach(d=>{let{position:h}=d.props;f.has(h)||f.set(h,[]),f.get(h).push(d)}),Array.from(f,d=>c(d[0],d[1]))}return{getToastToRender:l,isToastActive:jE,count:a?.length}}function fR(n){let[e,t]=Y.useState(!1),[i,s]=Y.useState(!1),a=Y.useRef(null),l=Y.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:c,pauseOnHover:f,closeToast:d,onClick:h,closeOnClick:p}=n;rR({id:n.toastId,containerId:n.containerId,fn:t}),Y.useEffect(()=>{if(n.pauseOnFocusLoss)return g(),()=>{b()}},[n.pauseOnFocusLoss]);function g(){document.hasFocus()||w(),window.addEventListener("focus",x),window.addEventListener("blur",w)}function b(){window.removeEventListener("focus",x),window.removeEventListener("blur",w)}function y(C){if(n.draggable===!0||n.draggable===C.pointerType){S();let O=a.current;l.canCloseOnClick=!0,l.canDrag=!0,O.style.transition="none",n.draggableDirection==="x"?(l.start=C.clientX,l.removalDistance=O.offsetWidth*(n.draggablePercent/100)):(l.start=C.clientY,l.removalDistance=O.offsetHeight*(n.draggablePercent===80?n.draggablePercent*1.5:n.draggablePercent)/100)}}function T(C){let{top:O,bottom:B,left:N,right:V}=a.current.getBoundingClientRect();C.nativeEvent.type!=="touchend"&&n.pauseOnHover&&C.clientX>=N&&C.clientX<=V&&C.clientY>=O&&C.clientY<=B?w():x()}function x(){t(!0)}function w(){t(!1)}function S(){l.didMove=!1,document.addEventListener("pointermove",_),document.addEventListener("pointerup",I)}function A(){document.removeEventListener("pointermove",_),document.removeEventListener("pointerup",I)}function _(C){let O=a.current;if(l.canDrag&&O){l.didMove=!0,e&&w(),n.draggableDirection==="x"?l.delta=C.clientX-l.start:l.delta=C.clientY-l.start,l.start!==C.clientX&&(l.canCloseOnClick=!1);let B=n.draggableDirection==="x"?`${l.delta}px, var(--y)`:`0, calc(${l.delta}px + var(--y))`;O.style.transform=`translate3d(${B},0)`,O.style.opacity=`${1-Math.abs(l.delta/l.removalDistance)}`}}function I(){A();let C=a.current;if(l.canDrag&&l.didMove&&C){if(l.canDrag=!1,Math.abs(l.delta)>l.removalDistance){s(!0),n.closeToast(!0),n.collapseAll();return}C.style.transition="transform 0.2s, opacity 0.2s",C.style.removeProperty("transform"),C.style.removeProperty("opacity")}}let P={onPointerDown:y,onPointerUp:T};return c&&f&&(P.onMouseEnter=w,n.stacked||(P.onMouseLeave=x)),p&&(P.onClick=C=>{h&&h(C),l.canCloseOnClick&&d(!0)}),{playToast:x,pauseToast:w,isRunning:e,preventExitTransition:i,toastRef:a,eventHandlers:P}}var hR=typeof window<"u"?Y.useLayoutEffect:Y.useEffect,xu=({theme:n,type:e,isLoading:t,...i})=>lt.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:n==="colored"?"currentColor":`var(--toastify-icon-color-${e})`,...i});function mR(n){return lt.createElement(xu,{...n},lt.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function pR(n){return lt.createElement(xu,{...n},lt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function gR(n){return lt.createElement(xu,{...n},lt.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function yR(n){return lt.createElement(xu,{...n},lt.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function vR(){return lt.createElement("div",{className:"Toastify__spinner"})}var jh={info:pR,warning:mR,success:gR,error:yR,spinner:vR},bR=n=>n in jh;function ER({theme:n,type:e,isLoading:t,icon:i}){let s=null,a={theme:n,type:e};return i===!1||(Zn(i)?s=i({...a,isLoading:t}):Y.isValidElement(i)?s=Y.cloneElement(i,a):t?s=jh.spinner():bR(e)&&(s=jh[e](a))),s}var xR=n=>{let{isRunning:e,preventExitTransition:t,toastRef:i,eventHandlers:s,playToast:a}=fR(n),{closeButton:l,children:c,autoClose:f,onClick:d,type:h,hideProgressBar:p,closeToast:g,transition:b,position:y,className:T,style:x,progressClassName:w,updateId:S,role:A,progress:_,rtl:I,toastId:P,deleteToast:C,isIn:O,isLoading:B,closeOnClick:N,theme:V,ariaLabel:ee}=n,z=cr("Toastify__toast",`Toastify__toast-theme--${V}`,`Toastify__toast--${h}`,{"Toastify__toast--rtl":I},{"Toastify__toast--close-on-click":N}),H=Zn(T)?T({rtl:I,position:y,type:h,defaultClassName:z}):cr(z,T),W=ER(n),k=!!_||!f,G={closeToast:g,type:h,theme:V},K=null;return l===!1||(Zn(l)?K=l(G):Y.isValidElement(l)?K=Y.cloneElement(l,G):K=W2(G)),lt.createElement(b,{isIn:O,done:C,position:y,preventExitTransition:t,nodeRef:i,playToast:a},lt.createElement("div",{id:P,tabIndex:0,onClick:d,"data-in":O,className:H,...s,style:x,ref:i,...O&&{role:A,"aria-label":ee}},W!=null&&lt.createElement("div",{className:cr("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!B})},W),FE(c,n,!e),K,!n.customProgressBar&&lt.createElement(Q2,{...S&&!k?{key:`p-${S}`}:{},rtl:I,theme:V,delay:f,isRunning:e,isIn:O,closeToast:g,hide:p,type:h,className:w,controlledProgress:k,progress:_||0})))},TR=(n,e=!1)=>({enter:`Toastify--animate Toastify__${n}-enter`,exit:`Toastify--animate Toastify__${n}-exit`,appendPosition:e}),SR=X2(TR("bounce",!0)),wR={position:"top-right",transition:SR,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:n=>n.altKey&&n.code==="KeyT"};function AR(n){let e={...wR,...n},t=n.stacked,[i,s]=Y.useState(!0),a=Y.useRef(null),{getToastToRender:l,isToastActive:c,count:f}=dR(e),{className:d,style:h,rtl:p,containerId:g,hotKeys:b}=e;function y(x){let w=cr("Toastify__toast-container",`Toastify__toast-container--${x}`,{"Toastify__toast-container--rtl":p});return Zn(d)?d({position:x,rtl:p,defaultClassName:w}):cr(w,Fh(d))}function T(){t&&(s(!0),nt.play())}return hR(()=>{var x;if(t){let w=a.current.querySelectorAll('[data-in="true"]'),S=12,A=(x=e.position)==null?void 0:x.includes("top"),_=0,I=0;Array.from(w).reverse().forEach((P,C)=>{let O=P;O.classList.add("Toastify__toast--stacked"),C>0&&(O.dataset.collapsed=`${i}`),O.dataset.pos||(O.dataset.pos=A?"top":"bot");let B=_*(i?.2:1)+(i?0:S*C);O.style.setProperty("--y",`${A?B:B*-1}px`),O.style.setProperty("--g",`${S}`),O.style.setProperty("--s",`${1-(i?I:0)}`),_+=O.offsetHeight,I+=.025})}},[i,f,t]),Y.useEffect(()=>{function x(w){var S;let A=a.current;b(w)&&((S=A.querySelector('[tabIndex="0"]'))==null||S.focus(),s(!1),nt.pause()),w.key==="Escape"&&(document.activeElement===A||A!=null&&A.contains(document.activeElement))&&(s(!0),nt.play())}return document.addEventListener("keydown",x),()=>{document.removeEventListener("keydown",x)}},[b]),lt.createElement("section",{ref:a,className:"Toastify",id:g,onMouseEnter:()=>{t&&(s(!1),nt.pause())},onMouseLeave:T,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":e["aria-label"]},l((x,w)=>{let S=w.length?{...h}:{...h,pointerEvents:"none"};return lt.createElement("div",{tabIndex:-1,className:y(x),"data-stacked":t,style:S,key:`c-${x}`},w.map(({content:A,props:_})=>lt.createElement(xR,{..._,stacked:t,collapseAll:T,isIn:c(_.toastId,_.containerId),key:`t-${_.key}`},A)))}))}const RR="modulepreload",LR=function(n){return"/"+n},wv={},_R=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){let d=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};var l=d;document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),f=c?.nonce||c?.getAttribute("nonce");s=d(t.map(h=>{if(h=LR(h),h in wv)return;wv[h]=!0;const p=h.endsWith(".css"),g=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${g}`))return;const b=document.createElement("link");if(b.rel=p?"stylesheet":RR,p||(b.as="script"),b.crossOrigin="",b.href=h,f&&b.setAttribute("nonce",f),document.head.appendChild(b),p)return new Promise((y,T)=>{b.addEventListener("load",y),b.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(c){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=c,window.dispatchEvent(f),!f.defaultPrevented)throw c}return s.then(c=>{for(const f of c||[])f.status==="rejected"&&a(f.reason);return e().catch(a)})};function CR(n={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:i,onRegistered:s,onRegisteredSW:a,onRegisterError:l}=n;let c,f;const d=async(p=!0)=>{await f};async function h(){if("serviceWorker"in navigator){if(c=await _R(async()=>{const{Workbox:p}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:p}},[]).then(({Workbox:p})=>new p("/sw.js",{scope:"/",type:"classic"})).catch(p=>{l?.(p)}),!c)return;c.addEventListener("activated",p=>{(p.isUpdate||p.isExternal)&&window.location.reload()}),c.addEventListener("installed",p=>{p.isUpdate||i?.()}),c.register({immediate:e}).then(p=>{a?a("/sw.js",p):s?.(p)}).catch(p=>{l?.(p)})}}return f=h(),d}function zE(n,e){return function(){return n.apply(e,arguments)}}const{toString:IR}=Object.prototype,{getPrototypeOf:Em}=Object,{iterator:Tu,toStringTag:VE}=Symbol,Su=(n=>e=>{const t=IR.call(e);return n[t]||(n[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),an=n=>(n=n.toLowerCase(),e=>Su(e)===n),wu=n=>e=>typeof e===n,{isArray:wa}=Array,ya=wu("undefined");function zo(n){return n!==null&&!ya(n)&&n.constructor!==null&&!ya(n.constructor)&&vi(n.constructor.isBuffer)&&n.constructor.isBuffer(n)}const qE=an("ArrayBuffer");function DR(n){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(n):e=n&&n.buffer&&qE(n.buffer),e}const kR=wu("string"),vi=wu("function"),KE=wu("number"),Vo=n=>n!==null&&typeof n=="object",OR=n=>n===!0||n===!1,Bc=n=>{if(Su(n)!=="object")return!1;const e=Em(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(VE in n)&&!(Tu in n)},MR=n=>{if(!Vo(n)||zo(n))return!1;try{return Object.keys(n).length===0&&Object.getPrototypeOf(n)===Object.prototype}catch{return!1}},PR=an("Date"),NR=an("File"),BR=an("Blob"),FR=an("FileList"),UR=n=>Vo(n)&&vi(n.pipe),$R=n=>{let e;return n&&(typeof FormData=="function"&&n instanceof FormData||vi(n.append)&&((e=Su(n))==="formdata"||e==="object"&&vi(n.toString)&&n.toString()==="[object FormData]"))},jR=an("URLSearchParams"),[HR,GR,zR,VR]=["ReadableStream","Request","Response","Headers"].map(an),qR=n=>n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function qo(n,e,{allOwnKeys:t=!1}={}){if(n===null||typeof n>"u")return;let i,s;if(typeof n!="object"&&(n=[n]),wa(n))for(i=0,s=n.length;i<s;i++)e.call(null,n[i],i,n);else{if(zo(n))return;const a=t?Object.getOwnPropertyNames(n):Object.keys(n),l=a.length;let c;for(i=0;i<l;i++)c=a[i],e.call(null,n[c],c,n)}}function YE(n,e){if(zo(n))return null;e=e.toLowerCase();const t=Object.keys(n);let i=t.length,s;for(;i-- >0;)if(s=t[i],e===s.toLowerCase())return s;return null}const lr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,XE=n=>!ya(n)&&n!==lr;function Hh(){const{caseless:n,skipUndefined:e}=XE(this)&&this||{},t={},i=(s,a)=>{if(a==="__proto__"||a==="constructor"||a==="prototype")return;const l=n&&YE(t,a)||a;Bc(t[l])&&Bc(s)?t[l]=Hh(t[l],s):Bc(s)?t[l]=Hh({},s):wa(s)?t[l]=s.slice():(!e||!ya(s))&&(t[l]=s)};for(let s=0,a=arguments.length;s<a;s++)arguments[s]&&qo(arguments[s],i);return t}const KR=(n,e,t,{allOwnKeys:i}={})=>(qo(e,(s,a)=>{t&&vi(s)?Object.defineProperty(n,a,{value:zE(s,t),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(n,a,{value:s,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:i}),n),YR=n=>(n.charCodeAt(0)===65279&&(n=n.slice(1)),n),XR=(n,e,t,i)=>{n.prototype=Object.create(e.prototype,i),Object.defineProperty(n.prototype,"constructor",{value:n,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(n,"super",{value:e.prototype}),t&&Object.assign(n.prototype,t)},WR=(n,e,t,i)=>{let s,a,l;const c={};if(e=e||{},n==null)return e;do{for(s=Object.getOwnPropertyNames(n),a=s.length;a-- >0;)l=s[a],(!i||i(l,n,e))&&!c[l]&&(e[l]=n[l],c[l]=!0);n=t!==!1&&Em(n)}while(n&&(!t||t(n,e))&&n!==Object.prototype);return e},QR=(n,e,t)=>{n=String(n),(t===void 0||t>n.length)&&(t=n.length),t-=e.length;const i=n.indexOf(e,t);return i!==-1&&i===t},ZR=n=>{if(!n)return null;if(wa(n))return n;let e=n.length;if(!KE(e))return null;const t=new Array(e);for(;e-- >0;)t[e]=n[e];return t},JR=(n=>e=>n&&e instanceof n)(typeof Uint8Array<"u"&&Em(Uint8Array)),eL=(n,e)=>{const i=(n&&n[Tu]).call(n);let s;for(;(s=i.next())&&!s.done;){const a=s.value;e.call(n,a[0],a[1])}},tL=(n,e)=>{let t;const i=[];for(;(t=n.exec(e))!==null;)i.push(t);return i},iL=an("HTMLFormElement"),nL=n=>n.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,i,s){return i.toUpperCase()+s}),Av=(({hasOwnProperty:n})=>(e,t)=>n.call(e,t))(Object.prototype),sL=an("RegExp"),WE=(n,e)=>{const t=Object.getOwnPropertyDescriptors(n),i={};qo(t,(s,a)=>{let l;(l=e(s,a,n))!==!1&&(i[a]=l||s)}),Object.defineProperties(n,i)},rL=n=>{WE(n,(e,t)=>{if(vi(n)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;const i=n[t];if(vi(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},aL=(n,e)=>{const t={},i=s=>{s.forEach(a=>{t[a]=!0})};return wa(n)?i(n):i(String(n).split(e)),t},oL=()=>{},lL=(n,e)=>n!=null&&Number.isFinite(n=+n)?n:e;function cL(n){return!!(n&&vi(n.append)&&n[VE]==="FormData"&&n[Tu])}const uL=n=>{const e=new Array(10),t=(i,s)=>{if(Vo(i)){if(e.indexOf(i)>=0)return;if(zo(i))return i;if(!("toJSON"in i)){e[s]=i;const a=wa(i)?[]:{};return qo(i,(l,c)=>{const f=t(l,s+1);!ya(f)&&(a[c]=f)}),e[s]=void 0,a}}return i};return t(n,0)},dL=an("AsyncFunction"),fL=n=>n&&(Vo(n)||vi(n))&&vi(n.then)&&vi(n.catch),QE=((n,e)=>n?setImmediate:e?((t,i)=>(lr.addEventListener("message",({source:s,data:a})=>{s===lr&&a===t&&i.length&&i.shift()()},!1),s=>{i.push(s),lr.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",vi(lr.postMessage)),hL=typeof queueMicrotask<"u"?queueMicrotask.bind(lr):typeof process<"u"&&process.nextTick||QE,mL=n=>n!=null&&vi(n[Tu]),ie={isArray:wa,isArrayBuffer:qE,isBuffer:zo,isFormData:$R,isArrayBufferView:DR,isString:kR,isNumber:KE,isBoolean:OR,isObject:Vo,isPlainObject:Bc,isEmptyObject:MR,isReadableStream:HR,isRequest:GR,isResponse:zR,isHeaders:VR,isUndefined:ya,isDate:PR,isFile:NR,isBlob:BR,isRegExp:sL,isFunction:vi,isStream:UR,isURLSearchParams:jR,isTypedArray:JR,isFileList:FR,forEach:qo,merge:Hh,extend:KR,trim:qR,stripBOM:YR,inherits:XR,toFlatObject:WR,kindOf:Su,kindOfTest:an,endsWith:QR,toArray:ZR,forEachEntry:eL,matchAll:tL,isHTMLForm:iL,hasOwnProperty:Av,hasOwnProp:Av,reduceDescriptors:WE,freezeMethods:rL,toObjectSet:aL,toCamelCase:nL,noop:oL,toFiniteNumber:lL,findKey:YE,global:lr,isContextDefined:XE,isSpecCompliantForm:cL,toJSONObject:uL,isAsyncFn:dL,isThenable:fL,setImmediate:QE,asap:hL,isIterable:mL};let Ae=class ZE extends Error{static from(e,t,i,s,a,l){const c=new ZE(e.message,t||e.code,i,s,a);return c.cause=e,c.name=e.name,l&&Object.assign(c,l),c}constructor(e,t,i,s,a){super(e),this.name="AxiosError",this.isAxiosError=!0,t&&(this.code=t),i&&(this.config=i),s&&(this.request=s),a&&(this.response=a,this.status=a.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ie.toJSONObject(this.config),code:this.code,status:this.status}}};Ae.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";Ae.ERR_BAD_OPTION="ERR_BAD_OPTION";Ae.ECONNABORTED="ECONNABORTED";Ae.ETIMEDOUT="ETIMEDOUT";Ae.ERR_NETWORK="ERR_NETWORK";Ae.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";Ae.ERR_DEPRECATED="ERR_DEPRECATED";Ae.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";Ae.ERR_BAD_REQUEST="ERR_BAD_REQUEST";Ae.ERR_CANCELED="ERR_CANCELED";Ae.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";Ae.ERR_INVALID_URL="ERR_INVALID_URL";const pL=null;function Gh(n){return ie.isPlainObject(n)||ie.isArray(n)}function JE(n){return ie.endsWith(n,"[]")?n.slice(0,-2):n}function Rv(n,e,t){return n?n.concat(e).map(function(s,a){return s=JE(s),!t&&a?"["+s+"]":s}).join(t?".":""):e}function gL(n){return ie.isArray(n)&&!n.some(Gh)}const yL=ie.toFlatObject(ie,{},null,function(e){return/^is[A-Z]/.test(e)});function Au(n,e,t){if(!ie.isObject(n))throw new TypeError("target must be an object");e=e||new FormData,t=ie.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(T,x){return!ie.isUndefined(x[T])});const i=t.metaTokens,s=t.visitor||h,a=t.dots,l=t.indexes,f=(t.Blob||typeof Blob<"u"&&Blob)&&ie.isSpecCompliantForm(e);if(!ie.isFunction(s))throw new TypeError("visitor must be a function");function d(y){if(y===null)return"";if(ie.isDate(y))return y.toISOString();if(ie.isBoolean(y))return y.toString();if(!f&&ie.isBlob(y))throw new Ae("Blob is not supported. Use a Buffer instead.");return ie.isArrayBuffer(y)||ie.isTypedArray(y)?f&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function h(y,T,x){let w=y;if(y&&!x&&typeof y=="object"){if(ie.endsWith(T,"{}"))T=i?T:T.slice(0,-2),y=JSON.stringify(y);else if(ie.isArray(y)&&gL(y)||(ie.isFileList(y)||ie.endsWith(T,"[]"))&&(w=ie.toArray(y)))return T=JE(T),w.forEach(function(A,_){!(ie.isUndefined(A)||A===null)&&e.append(l===!0?Rv([T],_,a):l===null?T:T+"[]",d(A))}),!1}return Gh(y)?!0:(e.append(Rv(x,T,a),d(y)),!1)}const p=[],g=Object.assign(yL,{defaultVisitor:h,convertValue:d,isVisitable:Gh});function b(y,T){if(!ie.isUndefined(y)){if(p.indexOf(y)!==-1)throw Error("Circular reference detected in "+T.join("."));p.push(y),ie.forEach(y,function(w,S){(!(ie.isUndefined(w)||w===null)&&s.call(e,w,ie.isString(S)?S.trim():S,T,g))===!0&&b(w,T?T.concat(S):[S])}),p.pop()}}if(!ie.isObject(n))throw new TypeError("data must be an object");return b(n),e}function Lv(n){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(n).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function xm(n,e){this._pairs=[],n&&Au(n,this,e)}const ex=xm.prototype;ex.append=function(e,t){this._pairs.push([e,t])};ex.toString=function(e){const t=e?function(i){return e.call(this,i,Lv)}:Lv;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};function vL(n){return encodeURIComponent(n).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function tx(n,e,t){if(!e)return n;const i=t&&t.encode||vL,s=ie.isFunction(t)?{serialize:t}:t,a=s&&s.serialize;let l;if(a?l=a(e,s):l=ie.isURLSearchParams(e)?e.toString():new xm(e,s).toString(i),l){const c=n.indexOf("#");c!==-1&&(n=n.slice(0,c)),n+=(n.indexOf("?")===-1?"?":"&")+l}return n}class _v{constructor(){this.handlers=[]}use(e,t,i){return this.handlers.push({fulfilled:e,rejected:t,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ie.forEach(this.handlers,function(i){i!==null&&e(i)})}}const Tm={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0},bL=typeof URLSearchParams<"u"?URLSearchParams:xm,EL=typeof FormData<"u"?FormData:null,xL=typeof Blob<"u"?Blob:null,TL={isBrowser:!0,classes:{URLSearchParams:bL,FormData:EL,Blob:xL},protocols:["http","https","file","blob","url","data"]},Sm=typeof window<"u"&&typeof document<"u",zh=typeof navigator=="object"&&navigator||void 0,SL=Sm&&(!zh||["ReactNative","NativeScript","NS"].indexOf(zh.product)<0),wL=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",AL=Sm&&window.location.href||"http://localhost",RL=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Sm,hasStandardBrowserEnv:SL,hasStandardBrowserWebWorkerEnv:wL,navigator:zh,origin:AL},Symbol.toStringTag,{value:"Module"})),Zt={...RL,...TL};function LL(n,e){return Au(n,new Zt.classes.URLSearchParams,{visitor:function(t,i,s,a){return Zt.isNode&&ie.isBuffer(t)?(this.append(i,t.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...e})}function _L(n){return ie.matchAll(/\w+|\[(\w*)]/g,n).map(e=>e[0]==="[]"?"":e[1]||e[0])}function CL(n){const e={},t=Object.keys(n);let i;const s=t.length;let a;for(i=0;i<s;i++)a=t[i],e[a]=n[a];return e}function ix(n){function e(t,i,s,a){let l=t[a++];if(l==="__proto__")return!0;const c=Number.isFinite(+l),f=a>=t.length;return l=!l&&ie.isArray(s)?s.length:l,f?(ie.hasOwnProp(s,l)?s[l]=[s[l],i]:s[l]=i,!c):((!s[l]||!ie.isObject(s[l]))&&(s[l]=[]),e(t,i,s[l],a)&&ie.isArray(s[l])&&(s[l]=CL(s[l])),!c)}if(ie.isFormData(n)&&ie.isFunction(n.entries)){const t={};return ie.forEachEntry(n,(i,s)=>{e(_L(i),s,t,0)}),t}return null}function IL(n,e,t){if(ie.isString(n))try{return(e||JSON.parse)(n),ie.trim(n)}catch(i){if(i.name!=="SyntaxError")throw i}return(t||JSON.stringify)(n)}const Ko={transitional:Tm,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const i=t.getContentType()||"",s=i.indexOf("application/json")>-1,a=ie.isObject(e);if(a&&ie.isHTMLForm(e)&&(e=new FormData(e)),ie.isFormData(e))return s?JSON.stringify(ix(e)):e;if(ie.isArrayBuffer(e)||ie.isBuffer(e)||ie.isStream(e)||ie.isFile(e)||ie.isBlob(e)||ie.isReadableStream(e))return e;if(ie.isArrayBufferView(e))return e.buffer;if(ie.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(a){if(i.indexOf("application/x-www-form-urlencoded")>-1)return LL(e,this.formSerializer).toString();if((c=ie.isFileList(e))||i.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return Au(c?{"files[]":e}:e,f&&new f,this.formSerializer)}}return a||s?(t.setContentType("application/json",!1),IL(e)):e}],transformResponse:[function(e){const t=this.transitional||Ko.transitional,i=t&&t.forcedJSONParsing,s=this.responseType==="json";if(ie.isResponse(e)||ie.isReadableStream(e))return e;if(e&&ie.isString(e)&&(i&&!this.responseType||s)){const l=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(c){if(l)throw c.name==="SyntaxError"?Ae.from(c,Ae.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Zt.classes.FormData,Blob:Zt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ie.forEach(["delete","get","head","post","put","patch"],n=>{Ko.headers[n]={}});const DL=ie.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),kL=n=>{const e={};let t,i,s;return n&&n.split(`
`).forEach(function(l){s=l.indexOf(":"),t=l.substring(0,s).trim().toLowerCase(),i=l.substring(s+1).trim(),!(!t||e[t]&&DL[t])&&(t==="set-cookie"?e[t]?e[t].push(i):e[t]=[i]:e[t]=e[t]?e[t]+", "+i:i)}),e},Cv=Symbol("internals");function wo(n){return n&&String(n).trim().toLowerCase()}function Fc(n){return n===!1||n==null?n:ie.isArray(n)?n.map(Fc):String(n)}function OL(n){const e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=t.exec(n);)e[i[1]]=i[2];return e}const ML=n=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(n.trim());function ah(n,e,t,i,s){if(ie.isFunction(i))return i.call(this,e,t);if(s&&(e=t),!!ie.isString(e)){if(ie.isString(i))return e.indexOf(i)!==-1;if(ie.isRegExp(i))return i.test(e)}}function PL(n){return n.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,i)=>t.toUpperCase()+i)}function NL(n,e){const t=ie.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(n,i+t,{value:function(s,a,l){return this[i].call(this,e,s,a,l)},configurable:!0})})}let bi=class{constructor(e){e&&this.set(e)}set(e,t,i){const s=this;function a(c,f,d){const h=wo(f);if(!h)throw new Error("header name must be a non-empty string");const p=ie.findKey(s,h);(!p||s[p]===void 0||d===!0||d===void 0&&s[p]!==!1)&&(s[p||f]=Fc(c))}const l=(c,f)=>ie.forEach(c,(d,h)=>a(d,h,f));if(ie.isPlainObject(e)||e instanceof this.constructor)l(e,t);else if(ie.isString(e)&&(e=e.trim())&&!ML(e))l(kL(e),t);else if(ie.isObject(e)&&ie.isIterable(e)){let c={},f,d;for(const h of e){if(!ie.isArray(h))throw TypeError("Object iterator must return a key-value pair");c[d=h[0]]=(f=c[d])?ie.isArray(f)?[...f,h[1]]:[f,h[1]]:h[1]}l(c,t)}else e!=null&&a(t,e,i);return this}get(e,t){if(e=wo(e),e){const i=ie.findKey(this,e);if(i){const s=this[i];if(!t)return s;if(t===!0)return OL(s);if(ie.isFunction(t))return t.call(this,s,i);if(ie.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=wo(e),e){const i=ie.findKey(this,e);return!!(i&&this[i]!==void 0&&(!t||ah(this,this[i],i,t)))}return!1}delete(e,t){const i=this;let s=!1;function a(l){if(l=wo(l),l){const c=ie.findKey(i,l);c&&(!t||ah(i,i[c],c,t))&&(delete i[c],s=!0)}}return ie.isArray(e)?e.forEach(a):a(e),s}clear(e){const t=Object.keys(this);let i=t.length,s=!1;for(;i--;){const a=t[i];(!e||ah(this,this[a],a,e,!0))&&(delete this[a],s=!0)}return s}normalize(e){const t=this,i={};return ie.forEach(this,(s,a)=>{const l=ie.findKey(i,a);if(l){t[l]=Fc(s),delete t[a];return}const c=e?PL(a):String(a).trim();c!==a&&delete t[a],t[c]=Fc(s),i[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return ie.forEach(this,(i,s)=>{i!=null&&i!==!1&&(t[s]=e&&ie.isArray(i)?i.join(", "):i)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const i=new this(e);return t.forEach(s=>i.set(s)),i}static accessor(e){const i=(this[Cv]=this[Cv]={accessors:{}}).accessors,s=this.prototype;function a(l){const c=wo(l);i[c]||(NL(s,l),i[c]=!0)}return ie.isArray(e)?e.forEach(a):a(e),this}};bi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ie.reduceDescriptors(bi.prototype,({value:n},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>n,set(i){this[t]=i}}});ie.freezeMethods(bi);function oh(n,e){const t=this||Ko,i=e||t,s=bi.from(i.headers);let a=i.data;return ie.forEach(n,function(c){a=c.call(t,a,s.normalize(),e?e.status:void 0)}),s.normalize(),a}function nx(n){return!!(n&&n.__CANCEL__)}let Yo=class extends Ae{constructor(e,t,i){super(e??"canceled",Ae.ERR_CANCELED,t,i),this.name="CanceledError",this.__CANCEL__=!0}};function sx(n,e,t){const i=t.config.validateStatus;!t.status||!i||i(t.status)?n(t):e(new Ae("Request failed with status code "+t.status,[Ae.ERR_BAD_REQUEST,Ae.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function BL(n){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(n);return e&&e[1]||""}function FL(n,e){n=n||10;const t=new Array(n),i=new Array(n);let s=0,a=0,l;return e=e!==void 0?e:1e3,function(f){const d=Date.now(),h=i[a];l||(l=d),t[s]=f,i[s]=d;let p=a,g=0;for(;p!==s;)g+=t[p++],p=p%n;if(s=(s+1)%n,s===a&&(a=(a+1)%n),d-l<e)return;const b=h&&d-h;return b?Math.round(g*1e3/b):void 0}}function UL(n,e){let t=0,i=1e3/e,s,a;const l=(d,h=Date.now())=>{t=h,s=null,a&&(clearTimeout(a),a=null),n(...d)};return[(...d)=>{const h=Date.now(),p=h-t;p>=i?l(d,h):(s=d,a||(a=setTimeout(()=>{a=null,l(s)},i-p)))},()=>s&&l(s)]}const Xc=(n,e,t=3)=>{let i=0;const s=FL(50,250);return UL(a=>{const l=a.loaded,c=a.lengthComputable?a.total:void 0,f=l-i,d=s(f),h=l<=c;i=l;const p={loaded:l,total:c,progress:c?l/c:void 0,bytes:f,rate:d||void 0,estimated:d&&c&&h?(c-l)/d:void 0,event:a,lengthComputable:c!=null,[e?"download":"upload"]:!0};n(p)},t)},Iv=(n,e)=>{const t=n!=null;return[i=>e[0]({lengthComputable:t,total:n,loaded:i}),e[1]]},Dv=n=>(...e)=>ie.asap(()=>n(...e)),$L=Zt.hasStandardBrowserEnv?((n,e)=>t=>(t=new URL(t,Zt.origin),n.protocol===t.protocol&&n.host===t.host&&(e||n.port===t.port)))(new URL(Zt.origin),Zt.navigator&&/(msie|trident)/i.test(Zt.navigator.userAgent)):()=>!0,jL=Zt.hasStandardBrowserEnv?{write(n,e,t,i,s,a,l){if(typeof document>"u")return;const c=[`${n}=${encodeURIComponent(e)}`];ie.isNumber(t)&&c.push(`expires=${new Date(t).toUTCString()}`),ie.isString(i)&&c.push(`path=${i}`),ie.isString(s)&&c.push(`domain=${s}`),a===!0&&c.push("secure"),ie.isString(l)&&c.push(`SameSite=${l}`),document.cookie=c.join("; ")},read(n){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+n+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(n){this.write(n,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function HL(n){return typeof n!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(n)}function GL(n,e){return e?n.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):n}function rx(n,e,t){let i=!HL(e);return n&&(i||t==!1)?GL(n,e):e}const kv=n=>n instanceof bi?{...n}:n;function mr(n,e){e=e||{};const t={};function i(d,h,p,g){return ie.isPlainObject(d)&&ie.isPlainObject(h)?ie.merge.call({caseless:g},d,h):ie.isPlainObject(h)?ie.merge({},h):ie.isArray(h)?h.slice():h}function s(d,h,p,g){if(ie.isUndefined(h)){if(!ie.isUndefined(d))return i(void 0,d,p,g)}else return i(d,h,p,g)}function a(d,h){if(!ie.isUndefined(h))return i(void 0,h)}function l(d,h){if(ie.isUndefined(h)){if(!ie.isUndefined(d))return i(void 0,d)}else return i(void 0,h)}function c(d,h,p){if(p in e)return i(d,h);if(p in n)return i(void 0,d)}const f={url:a,method:a,data:a,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:c,headers:(d,h,p)=>s(kv(d),kv(h),p,!0)};return ie.forEach(Object.keys({...n,...e}),function(h){if(h==="__proto__"||h==="constructor"||h==="prototype")return;const p=ie.hasOwnProp(f,h)?f[h]:s,g=p(n[h],e[h],h);ie.isUndefined(g)&&p!==c||(t[h]=g)}),t}const ax=n=>{const e=mr({},n);let{data:t,withXSRFToken:i,xsrfHeaderName:s,xsrfCookieName:a,headers:l,auth:c}=e;if(e.headers=l=bi.from(l),e.url=tx(rx(e.baseURL,e.url,e.allowAbsoluteUrls),n.params,n.paramsSerializer),c&&l.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),ie.isFormData(t)){if(Zt.hasStandardBrowserEnv||Zt.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(ie.isFunction(t.getHeaders)){const f=t.getHeaders(),d=["content-type","content-length"];Object.entries(f).forEach(([h,p])=>{d.includes(h.toLowerCase())&&l.set(h,p)})}}if(Zt.hasStandardBrowserEnv&&(i&&ie.isFunction(i)&&(i=i(e)),i||i!==!1&&$L(e.url))){const f=s&&a&&jL.read(a);f&&l.set(s,f)}return e},zL=typeof XMLHttpRequest<"u",VL=zL&&function(n){return new Promise(function(t,i){const s=ax(n);let a=s.data;const l=bi.from(s.headers).normalize();let{responseType:c,onUploadProgress:f,onDownloadProgress:d}=s,h,p,g,b,y;function T(){b&&b(),y&&y(),s.cancelToken&&s.cancelToken.unsubscribe(h),s.signal&&s.signal.removeEventListener("abort",h)}let x=new XMLHttpRequest;x.open(s.method.toUpperCase(),s.url,!0),x.timeout=s.timeout;function w(){if(!x)return;const A=bi.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),I={data:!c||c==="text"||c==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:A,config:n,request:x};sx(function(C){t(C),T()},function(C){i(C),T()},I),x=null}"onloadend"in x?x.onloadend=w:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(w)},x.onabort=function(){x&&(i(new Ae("Request aborted",Ae.ECONNABORTED,n,x)),x=null)},x.onerror=function(_){const I=_&&_.message?_.message:"Network Error",P=new Ae(I,Ae.ERR_NETWORK,n,x);P.event=_||null,i(P),x=null},x.ontimeout=function(){let _=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const I=s.transitional||Tm;s.timeoutErrorMessage&&(_=s.timeoutErrorMessage),i(new Ae(_,I.clarifyTimeoutError?Ae.ETIMEDOUT:Ae.ECONNABORTED,n,x)),x=null},a===void 0&&l.setContentType(null),"setRequestHeader"in x&&ie.forEach(l.toJSON(),function(_,I){x.setRequestHeader(I,_)}),ie.isUndefined(s.withCredentials)||(x.withCredentials=!!s.withCredentials),c&&c!=="json"&&(x.responseType=s.responseType),d&&([g,y]=Xc(d,!0),x.addEventListener("progress",g)),f&&x.upload&&([p,b]=Xc(f),x.upload.addEventListener("progress",p),x.upload.addEventListener("loadend",b)),(s.cancelToken||s.signal)&&(h=A=>{x&&(i(!A||A.type?new Yo(null,n,x):A),x.abort(),x=null)},s.cancelToken&&s.cancelToken.subscribe(h),s.signal&&(s.signal.aborted?h():s.signal.addEventListener("abort",h)));const S=BL(s.url);if(S&&Zt.protocols.indexOf(S)===-1){i(new Ae("Unsupported protocol "+S+":",Ae.ERR_BAD_REQUEST,n));return}x.send(a||null)})},qL=(n,e)=>{const{length:t}=n=n?n.filter(Boolean):[];if(e||t){let i=new AbortController,s;const a=function(d){if(!s){s=!0,c();const h=d instanceof Error?d:this.reason;i.abort(h instanceof Ae?h:new Yo(h instanceof Error?h.message:h))}};let l=e&&setTimeout(()=>{l=null,a(new Ae(`timeout of ${e}ms exceeded`,Ae.ETIMEDOUT))},e);const c=()=>{n&&(l&&clearTimeout(l),l=null,n.forEach(d=>{d.unsubscribe?d.unsubscribe(a):d.removeEventListener("abort",a)}),n=null)};n.forEach(d=>d.addEventListener("abort",a));const{signal:f}=i;return f.unsubscribe=()=>ie.asap(c),f}},KL=function*(n,e){let t=n.byteLength;if(t<e){yield n;return}let i=0,s;for(;i<t;)s=i+e,yield n.slice(i,s),i=s},YL=async function*(n,e){for await(const t of XL(n))yield*KL(t,e)},XL=async function*(n){if(n[Symbol.asyncIterator]){yield*n;return}const e=n.getReader();try{for(;;){const{done:t,value:i}=await e.read();if(t)break;yield i}}finally{await e.cancel()}},Ov=(n,e,t,i)=>{const s=YL(n,e);let a=0,l,c=f=>{l||(l=!0,i&&i(f))};return new ReadableStream({async pull(f){try{const{done:d,value:h}=await s.next();if(d){c(),f.close();return}let p=h.byteLength;if(t){let g=a+=p;t(g)}f.enqueue(new Uint8Array(h))}catch(d){throw c(d),d}},cancel(f){return c(f),s.return()}},{highWaterMark:2})},Mv=64*1024,{isFunction:vc}=ie,WL=(({Request:n,Response:e})=>({Request:n,Response:e}))(ie.global),{ReadableStream:Pv,TextEncoder:Nv}=ie.global,Bv=(n,...e)=>{try{return!!n(...e)}catch{return!1}},QL=n=>{n=ie.merge.call({skipUndefined:!0},WL,n);const{fetch:e,Request:t,Response:i}=n,s=e?vc(e):typeof fetch=="function",a=vc(t),l=vc(i);if(!s)return!1;const c=s&&vc(Pv),f=s&&(typeof Nv=="function"?(y=>T=>y.encode(T))(new Nv):async y=>new Uint8Array(await new t(y).arrayBuffer())),d=a&&c&&Bv(()=>{let y=!1;const T=new t(Zt.origin,{body:new Pv,method:"POST",get duplex(){return y=!0,"half"}}).headers.has("Content-Type");return y&&!T}),h=l&&c&&Bv(()=>ie.isReadableStream(new i("").body)),p={stream:h&&(y=>y.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(y=>{!p[y]&&(p[y]=(T,x)=>{let w=T&&T[y];if(w)return w.call(T);throw new Ae(`Response type '${y}' is not supported`,Ae.ERR_NOT_SUPPORT,x)})});const g=async y=>{if(y==null)return 0;if(ie.isBlob(y))return y.size;if(ie.isSpecCompliantForm(y))return(await new t(Zt.origin,{method:"POST",body:y}).arrayBuffer()).byteLength;if(ie.isArrayBufferView(y)||ie.isArrayBuffer(y))return y.byteLength;if(ie.isURLSearchParams(y)&&(y=y+""),ie.isString(y))return(await f(y)).byteLength},b=async(y,T)=>{const x=ie.toFiniteNumber(y.getContentLength());return x??g(T)};return async y=>{let{url:T,method:x,data:w,signal:S,cancelToken:A,timeout:_,onDownloadProgress:I,onUploadProgress:P,responseType:C,headers:O,withCredentials:B="same-origin",fetchOptions:N}=ax(y),V=e||fetch;C=C?(C+"").toLowerCase():"text";let ee=qL([S,A&&A.toAbortSignal()],_),z=null;const H=ee&&ee.unsubscribe&&(()=>{ee.unsubscribe()});let W;try{if(P&&d&&x!=="get"&&x!=="head"&&(W=await b(O,w))!==0){let M=new t(T,{method:"POST",body:w,duplex:"half"}),$;if(ie.isFormData(w)&&($=M.headers.get("content-type"))&&O.setContentType($),M.body){const[se,de]=Iv(W,Xc(Dv(P)));w=Ov(M.body,Mv,se,de)}}ie.isString(B)||(B=B?"include":"omit");const k=a&&"credentials"in t.prototype,G={...N,signal:ee,method:x.toUpperCase(),headers:O.normalize().toJSON(),body:w,duplex:"half",credentials:k?B:void 0};z=a&&new t(T,G);let K=await(a?V(z,N):V(T,G));const oe=h&&(C==="stream"||C==="response");if(h&&(I||oe&&H)){const M={};["status","statusText","headers"].forEach(he=>{M[he]=K[he]});const $=ie.toFiniteNumber(K.headers.get("content-length")),[se,de]=I&&Iv($,Xc(Dv(I),!0))||[];K=new i(Ov(K.body,Mv,se,()=>{de&&de(),H&&H()}),M)}C=C||"text";let fe=await p[ie.findKey(p,C)||"text"](K,y);return!oe&&H&&H(),await new Promise((M,$)=>{sx(M,$,{data:fe,headers:bi.from(K.headers),status:K.status,statusText:K.statusText,config:y,request:z})})}catch(k){throw H&&H(),k&&k.name==="TypeError"&&/Load failed|fetch/i.test(k.message)?Object.assign(new Ae("Network Error",Ae.ERR_NETWORK,y,z,k&&k.response),{cause:k.cause||k}):Ae.from(k,k&&k.code,y,z,k&&k.response)}}},ZL=new Map,ox=n=>{let e=n&&n.env||{};const{fetch:t,Request:i,Response:s}=e,a=[i,s,t];let l=a.length,c=l,f,d,h=ZL;for(;c--;)f=a[c],d=h.get(f),d===void 0&&h.set(f,d=c?new Map:QL(e)),h=d;return d};ox();const wm={http:pL,xhr:VL,fetch:{get:ox}};ie.forEach(wm,(n,e)=>{if(n){try{Object.defineProperty(n,"name",{value:e})}catch{}Object.defineProperty(n,"adapterName",{value:e})}});const Fv=n=>`- ${n}`,JL=n=>ie.isFunction(n)||n===null||n===!1;function e_(n,e){n=ie.isArray(n)?n:[n];const{length:t}=n;let i,s;const a={};for(let l=0;l<t;l++){i=n[l];let c;if(s=i,!JL(i)&&(s=wm[(c=String(i)).toLowerCase()],s===void 0))throw new Ae(`Unknown adapter '${c}'`);if(s&&(ie.isFunction(s)||(s=s.get(e))))break;a[c||"#"+l]=s}if(!s){const l=Object.entries(a).map(([f,d])=>`adapter ${f} `+(d===!1?"is not supported by the environment":"is not available in the build"));let c=t?l.length>1?`since :
`+l.map(Fv).join(`
`):" "+Fv(l[0]):"as no adapter specified";throw new Ae("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return s}const lx={getAdapter:e_,adapters:wm};function lh(n){if(n.cancelToken&&n.cancelToken.throwIfRequested(),n.signal&&n.signal.aborted)throw new Yo(null,n)}function Uv(n){return lh(n),n.headers=bi.from(n.headers),n.data=oh.call(n,n.transformRequest),["post","put","patch"].indexOf(n.method)!==-1&&n.headers.setContentType("application/x-www-form-urlencoded",!1),lx.getAdapter(n.adapter||Ko.adapter,n)(n).then(function(i){return lh(n),i.data=oh.call(n,n.transformResponse,i),i.headers=bi.from(i.headers),i},function(i){return nx(i)||(lh(n),i&&i.response&&(i.response.data=oh.call(n,n.transformResponse,i.response),i.response.headers=bi.from(i.response.headers))),Promise.reject(i)})}const cx="1.13.5",Ru={};["object","boolean","number","function","string","symbol"].forEach((n,e)=>{Ru[n]=function(i){return typeof i===n||"a"+(e<1?"n ":" ")+n}});const $v={};Ru.transitional=function(e,t,i){function s(a,l){return"[Axios v"+cx+"] Transitional option '"+a+"'"+l+(i?". "+i:"")}return(a,l,c)=>{if(e===!1)throw new Ae(s(l," has been removed"+(t?" in "+t:"")),Ae.ERR_DEPRECATED);return t&&!$v[l]&&($v[l]=!0,console.warn(s(l," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(a,l,c):!0}};Ru.spelling=function(e){return(t,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function t_(n,e,t){if(typeof n!="object")throw new Ae("options must be an object",Ae.ERR_BAD_OPTION_VALUE);const i=Object.keys(n);let s=i.length;for(;s-- >0;){const a=i[s],l=e[a];if(l){const c=n[a],f=c===void 0||l(c,a,n);if(f!==!0)throw new Ae("option "+a+" must be "+f,Ae.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new Ae("Unknown option "+a,Ae.ERR_BAD_OPTION)}}const Uc={assertOptions:t_,validators:Ru},Ki=Uc.validators;let ur=class{constructor(e){this.defaults=e||{},this.interceptors={request:new _v,response:new _v}}async request(e,t){try{return await this._request(e,t)}catch(i){if(i instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;const a=s.stack?s.stack.replace(/^.+\n/,""):"";try{i.stack?a&&!String(i.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+a):i.stack=a}catch{}}throw i}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=mr(this.defaults,t);const{transitional:i,paramsSerializer:s,headers:a}=t;i!==void 0&&Uc.assertOptions(i,{silentJSONParsing:Ki.transitional(Ki.boolean),forcedJSONParsing:Ki.transitional(Ki.boolean),clarifyTimeoutError:Ki.transitional(Ki.boolean),legacyInterceptorReqResOrdering:Ki.transitional(Ki.boolean)},!1),s!=null&&(ie.isFunction(s)?t.paramsSerializer={serialize:s}:Uc.assertOptions(s,{encode:Ki.function,serialize:Ki.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Uc.assertOptions(t,{baseUrl:Ki.spelling("baseURL"),withXsrfToken:Ki.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let l=a&&ie.merge(a.common,a[t.method]);a&&ie.forEach(["delete","get","head","post","put","patch","common"],y=>{delete a[y]}),t.headers=bi.concat(l,a);const c=[];let f=!0;this.interceptors.request.forEach(function(T){if(typeof T.runWhen=="function"&&T.runWhen(t)===!1)return;f=f&&T.synchronous;const x=t.transitional||Tm;x&&x.legacyInterceptorReqResOrdering?c.unshift(T.fulfilled,T.rejected):c.push(T.fulfilled,T.rejected)});const d=[];this.interceptors.response.forEach(function(T){d.push(T.fulfilled,T.rejected)});let h,p=0,g;if(!f){const y=[Uv.bind(this),void 0];for(y.unshift(...c),y.push(...d),g=y.length,h=Promise.resolve(t);p<g;)h=h.then(y[p++],y[p++]);return h}g=c.length;let b=t;for(;p<g;){const y=c[p++],T=c[p++];try{b=y(b)}catch(x){T.call(this,x);break}}try{h=Uv.call(this,b)}catch(y){return Promise.reject(y)}for(p=0,g=d.length;p<g;)h=h.then(d[p++],d[p++]);return h}getUri(e){e=mr(this.defaults,e);const t=rx(e.baseURL,e.url,e.allowAbsoluteUrls);return tx(t,e.params,e.paramsSerializer)}};ie.forEach(["delete","get","head","options"],function(e){ur.prototype[e]=function(t,i){return this.request(mr(i||{},{method:e,url:t,data:(i||{}).data}))}});ie.forEach(["post","put","patch"],function(e){function t(i){return function(a,l,c){return this.request(mr(c||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:l}))}}ur.prototype[e]=t(),ur.prototype[e+"Form"]=t(!0)});let i_=class ux{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(a){t=a});const i=this;this.promise.then(s=>{if(!i._listeners)return;let a=i._listeners.length;for(;a-- >0;)i._listeners[a](s);i._listeners=null}),this.promise.then=s=>{let a;const l=new Promise(c=>{i.subscribe(c),a=c}).then(s);return l.cancel=function(){i.unsubscribe(a)},l},e(function(a,l,c){i.reason||(i.reason=new Yo(a,l,c),t(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=i=>{e.abort(i)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new ux(function(s){e=s}),cancel:e}}};function n_(n){return function(t){return n.apply(null,t)}}function s_(n){return ie.isObject(n)&&n.isAxiosError===!0}const Vh={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Vh).forEach(([n,e])=>{Vh[e]=n});function dx(n){const e=new ur(n),t=zE(ur.prototype.request,e);return ie.extend(t,ur.prototype,e,{allOwnKeys:!0}),ie.extend(t,e,null,{allOwnKeys:!0}),t.create=function(s){return dx(mr(n,s))},t}const ct=dx(Ko);ct.Axios=ur;ct.CanceledError=Yo;ct.CancelToken=i_;ct.isCancel=nx;ct.VERSION=cx;ct.toFormData=Au;ct.AxiosError=Ae;ct.Cancel=ct.CanceledError;ct.all=function(e){return Promise.all(e)};ct.spread=n_;ct.isAxiosError=s_;ct.mergeConfig=mr;ct.AxiosHeaders=bi;ct.formToJSON=n=>ix(ie.isHTMLForm(n)?new FormData(n):n);ct.getAdapter=lx.getAdapter;ct.HttpStatusCode=Vh;ct.default=ct;const{Axios:X3,AxiosError:W3,CanceledError:Q3,isCancel:Z3,CancelToken:J3,VERSION:eN,all:tN,Cancel:iN,isAxiosError:nN,spread:sN,toFormData:rN,AxiosHeaders:aN,HttpStatusCode:oN,formToJSON:lN,getAdapter:cN,mergeConfig:uN}=ct;const fx=(...n)=>n.filter((e,t,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===t).join(" ").trim();const r_=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const a_=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,i)=>i?i.toUpperCase():t.toLowerCase());const jv=n=>{const e=a_(n);return e.charAt(0).toUpperCase()+e.slice(1)};var o_={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const l_=n=>{for(const e in n)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const c_=Y.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:i,className:s="",children:a,iconNode:l,...c},f)=>Y.createElement("svg",{ref:f,...o_,width:e,height:e,stroke:n,strokeWidth:i?Number(t)*24/Number(e):t,className:fx("lucide",s),...!a&&!l_(c)&&{"aria-hidden":"true"},...c},[...l.map(([d,h])=>Y.createElement(d,h)),...Array.isArray(a)?a:[a]]));const Qi=(n,e)=>{const t=Y.forwardRef(({className:i,...s},a)=>Y.createElement(c_,{ref:a,iconNode:e,className:fx(`lucide-${r_(jv(n))}`,`lucide-${n}`,i),...s}));return t.displayName=jv(n),t};const u_=[["path",{d:"M17 3a2 2 0 0 1 2 2v15a1 1 0 0 1-1.496.868l-4.512-2.578a2 2 0 0 0-1.984 0l-4.512 2.578A1 1 0 0 1 5 20V5a2 2 0 0 1 2-2z",key:"oz39mx"}]],d_=Qi("bookmark",u_);const f_=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],h_=Qi("chevron-left",f_);const m_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m12 8-4 4 4 4",key:"15vm53"}],["path",{d:"M16 12H8",key:"1fr5h0"}]],p_=Qi("circle-arrow-left",m_);const g_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m12 16 4-4-4-4",key:"1i9zcv"}],["path",{d:"M8 12h8",key:"1wcyev"}]],y_=Qi("circle-arrow-right",g_);const v_=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],b_=Qi("database",v_);const E_=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],x_=Qi("history",E_);const T_=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]],S_=Qi("house",T_);const w_=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],A_=Qi("info",w_);const R_=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],L_=Qi("play",R_);const __=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],hx=Qi("search",__);const C_=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],I_=Qi("trash-2",C_);const D_=[["path",{d:"m17 2-5 5-5-5",key:"16satq"}],["rect",{width:"20",height:"15",x:"2",y:"7",rx:"2",key:"1e6viu"}]],k_=Qi("tv",D_),O_=()=>{const n=yr(),e=Ps(),[t,i]=Y.useState(!0),[s,a]=Y.useState(!0),l=async()=>{try{(await ct.get("https://ophim1.com/v1/api/home")).status==200?i(!0):i(!1)}catch{i(!1)}},c=()=>{const d=localStorage.getItem("rule_agree");a(d??!1)},f=[{label:"Trang ch",path:"/",icon:S_},{label:"Tm kim",path:"/search",icon:hx},{label:"Lch s",path:"/recents",icon:x_},{label:"Thng tin",path:"/info",icon:A_}];return Y.useEffect(()=>{l(),c()},[]),t?s?U.jsxs(U.Fragment,{children:[U.jsx("header",{className:`
                    h-[65px] 
                    px-5 py-2 
                    fixed top-0 
                    left-0 w-full 
                    flex flex-row 
                    items-center
                    border-b
                    border-gray-300
                    bg-white
                `,style:{zIndex:1e3},children:U.jsxs("div",{className:"flex flex-row justify-between sm:justify-start sm:gap-5 items-center w-full",children:[U.jsxs("div",{className:"hidden sm:flex flex-row items-center gap-2 mr-5",children:[U.jsx("img",{src:"/xineico.png",alt:"AppIcon",draggable:!1,className:"w-8"}),U.jsxs("div",{className:"flex flex-col items-start justify-center",children:[U.jsx("h4",{className:"font-bold text-lg mb-0",children:"Xine"}),U.jsx("span",{className:"text-gray-600 text-xs",children:"Xem phim ch chi"})]})]}),f.map(({label:d,path:h,icon:p})=>{const g=e.pathname===h;return U.jsxs("div",{className:`
                                    group
                                    flex 
                                    flex-col 
                                    sm:flex-row
                                    sm:gap-2
                                    items-center 
                                    justify-center cursor-pointer 
                                    transition-colors duration-200 
                                    w-30
                                    sm:w-auto`,onClick:()=>n(h),children:[U.jsx(p,{size:24,strokeWidth:2,className:g?"text-accent":"text-gray-600"}),U.jsx("span",{className:"text-xs sm:text-sm",children:d})]},h)})]})}),U.jsx("section",{className:"p-3 overflow-y-auto mt-[65px] scrollbar",style:{height:"calc(100vh - 65px)"},children:U.jsx(c2,{})})]}):U.jsx(U.Fragment,{children:U.jsx("div",{className:"top-0 left-0 w-screen h-screen z-10 bg-base-300 py-4 px-6",children:U.jsxs("div",{className:"content mx-auto max-w-md",children:[U.jsxs("div",{className:"flex flex-row items-center justify-start gap-2 mb-5",children:[U.jsx("img",{src:"/xineico.png",alt:"Icon",className:"w-12"}),U.jsx("h4",{className:"font-extrabold text-2xl",children:"Xine"})]}),U.jsx("h5",{className:"font-bold text-xl mb-2",children:"Thn gi qu ngi dng,"}),U.jsxs("div",{className:"mt-3 py-2.5 w-full",children:[U.jsxs("p",{className:"text-base-content mb-4",children:["Tt c ni dung trn ",U.jsx("b",{className:"text-accent",children:"Xine"})," c tng hp t ng t cc ngun chia s cng ng qua API ca OPhim, KKPhim... Chng ti khng trc tip lu tr, ti ln hoc chu trch nhim v tnh bn quyn ca cc tp tin video ny. Nu pht hin ni dung vi phm, vui lng lin h vi n v lu tr gc  yu cu g b; h thng ca chng ti s t ng cp nht theo ngun ."]}),U.jsx("button",{className:"btn btn-accent mx-auto",onClick:()=>{localStorage.setItem("rule_agree",!0),c()},children:"Tip tc xem phim"})]})]})})}):U.jsx(U.Fragment,{children:U.jsx("div",{className:"top-0 left-0 w-screen h-screen z-10 bg-base-300 py-4 px-6",children:U.jsxs("div",{className:"content mx-auto max-w-md",children:[U.jsxs("div",{className:"flex flex-row items-center justify-start gap-2 mb-5",children:[U.jsx("img",{src:"/xineico.png",alt:"Icon",className:"w-12"}),U.jsx("h4",{className:"font-extrabold text-2xl",children:"Xine"})]}),U.jsx("h5",{className:"font-bold text-xl mb-2",children:"Thn gi qu ngi dng,"}),U.jsxs("p",{className:"text-base-content leading-relaxed text-lg mb-1",children:["Do ",U.jsx("span",{className:"text-accent font-bold",children:"Xine"})," ng b d liu trc tip t",U.jsx("span",{className:"text-accent font-semibold",children:" OPhim"}),", nn mt s thi im h thng ngun bo tr c th nh hng n tc  ti phim."]}),U.jsx("span",{className:"italic",children:"Xine s t ng cp nht ngay khi c d liu mi nht."})]})})})},M_=()=>U.jsx(U.Fragment,{children:U.jsxs("div",{className:"max-w-lg mx-auto",children:[U.jsx("h5",{className:"text-xl font-bold mb-1.5 mt-3",children:"Ci t"}),U.jsxs("div",{className:"py-2.5",children:[U.jsx("span",{className:"upper text-sm text-base-content mb-2",children:"CHUNG"}),U.jsx("div",{className:"bg-white border border-gray-300 p-2 rounded-lg",children:U.jsxs("div",{className:"py-1.5 flex flex-row items-center justify-between gap-2",children:[U.jsx("span",{className:"text-base-content",children:"Giao din"}),U.jsx("span",{className:"font-semibold",children:"Sng"})]})})]}),U.jsxs("div",{className:"py-2.5",children:[U.jsx("span",{className:"upper text-sm text-base-content mb-2",children:"THNG TIN"}),U.jsxs("div",{className:"bg-white border border-gray-300 rounded-lg",children:[U.jsxs("div",{className:"p-2 flex flex-row items-center justify-between gap-2",children:[U.jsx("span",{className:"text-base-content",children:"Gp "}),U.jsx("span",{className:"font-semibold",children:"Telegram: @beyiu"})]}),U.jsx("div",{className:"border-b border-gray-300 pb-0.5"}),U.jsxs("div",{className:"p-2 flex flex-row items-center justify-between gap-2",children:[U.jsx("span",{className:"text-base-content",children:"Phin bn"}),U.jsx("span",{className:"font-semibold",children:"1.0.2-PUBLIC"})]}),U.jsx("div",{className:"border-b border-gray-300 pb-0.5"}),U.jsxs("div",{className:"p-2 flex flex-row items-center justify-between gap-2",children:[U.jsx("span",{className:"text-base-content",children:"S bn dng"}),U.jsx("span",{className:"font-semibold",children:"2"})]})]})]}),U.jsxs("div",{className:"py-2.5 text-center",children:[U.jsx("h4",{className:"text-lg font-semibold mb-0",children:"Xine"}),U.jsx("span",{className:"text-gray-600",children:"Phin bn v1.0.2"})]})]})}),Am=({src:n,alt:e,className:t})=>{const[i,s]=Y.useState(!0);return U.jsxs("div",{className:`relative overflow-hidden ${t}`,children:[i&&U.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-800",children:U.jsx("span",{className:"loading loading-spinner loading-lg text-accent"})}),U.jsx("img",{src:n,alt:e,className:`${t} ${i?"opacity-0":"opacity-100 transition-opacity duration-500"}`,onLoad:()=>s(!1),onError:()=>s(!1),draggable:!1})]})},Hv=({title:n,urlCdn:e,dataList:t,navigate:i,loading:s})=>U.jsxs("div",{className:"recent-container my-4",children:[U.jsx("div",{className:"flex flex-row items-center justify-between gap-2 mb-4",children:U.jsxs("div",{className:"flex flex-row items-center gap-2",children:[U.jsx(k_,{size:18}),U.jsx("span",{className:"text-2xl font-bold",children:n})]})}),U.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 xl:grid-cols-6 gap-4",children:s?U.jsx("div",{className:"flex flex-row items-center justify-center py-10 w-full col-span-full",children:U.jsx("span",{className:"loading loading-spinner loading-xl text-accent"})}):t.map(a=>{let l=`${e}/uploads/movies/${a.thumb_url}`;return U.jsxs("div",{className:"group relative rounded-xl overflow-hidden cursor-pointer hover:scale-105 transition-transform duration-300",onClick:()=>{i(`/movies/${a.slug}`)},children:[U.jsx("div",{className:"aspect-[2/3]",children:U.jsx(Am,{src:l,alt:a.name,className:"w-full h-full object-cover rounded-xl shadow-md"})}),U.jsx("span",{className:"absolute top-1 left-1 badge badge-accent mb-1",children:a.episode_current}),U.jsxs("div",{className:"mt-3 text-center",children:[U.jsx("h5",{className:"text-mg text-black font-bold line-clamp-1 group-hover:text-yellow-400 transition-colors",children:a.name}),U.jsx("p",{className:"text-sm text-gray-400 line-clamp-1",children:a.origin_name})]})]},a.slug)})})]}),P_=()=>{const n=yr(),[e,t]=Y.useState(""),[i,s]=Y.useState([]),[a,l]=Y.useState([]),[c,f]=Y.useState(!0),d=async()=>{try{f(!0);const g=await ct.get("https://ophim1.com/v1/api/home?limit=16");t(g.data.data.APP_DOMAIN_CDN_IMAGE??""),s(g.data.data.items??[])}finally{f(!1)}},h=async()=>{try{f(!0);const g=await ct.get("https://ophim1.com/v1/api/quoc-gia/trung-quoc?limit=16");t(g.data.data.APP_DOMAIN_CDN_IMAGE??""),l(g.data.data.items??[])}finally{f(!1)}};return Y.useEffect(()=>{d(),h()},[]),U.jsxs(U.Fragment,{children:[U.jsx(Hv,{title:"PHIM MI CP NHT",urlCdn:e,dataList:i,navigate:n,loading:c}),U.jsx(Hv,{title:"PHIM TRUNG QUC",urlCdn:e,dataList:a,navigate:n,loading:c})]})},N_=()=>U.jsx("div",{className:"sm:px-10 pb-4",children:U.jsx(P_,{})}),B_=({navigate:n,title:e,msg:t})=>U.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-center px-6 gap-2",children:[U.jsx("img",{src:"/empty.png",alt:"Icon",className:"w-36",draggable:!1}),U.jsx("h4",{className:"font-bold text-xl",children:e}),U.jsx("p",{className:"text-gray-600",children:t}),U.jsx("button",{className:"btn btn-accent rounded-2xl",onClick:()=>n("/"),children:"V trang ch"})]}),F_=({slug:n,name:e,thumb_url:t})=>{const i=yr();return U.jsx("div",{className:"px-4 py-2 border-b border-gray-300 top-0 left-0 z-20 sticky bg-white sm:mb-2",children:U.jsxs("div",{className:"flex flex-row justify-between items-center gap-2",children:[U.jsxs("button",{className:"p-1.5 pl-0 cursor-pointer text-blue-500 flex flex-row items-center gap-2",onClick:()=>i("/"),children:[U.jsx(h_,{size:26,strokeWidth:2}),U.jsx("span",{className:"font-semibold",children:"Trang ch"})]}),U.jsxs("button",{className:"p-1.5 pr-0 cursor-pointer text-blue-500 flex flex-row items-center gap-2",children:[U.jsx(d_,{size:26,strokeWidth:2}),U.jsx("span",{className:"font-semibold",children:"Yu thch"})]})]})})},U_=({movieLinkEmbed:n})=>U.jsx(U.Fragment,{children:n!==""&&U.jsx("div",{className:"px-3 py-2",children:U.jsx("iframe",{src:n,className:"w-full aspect-video rounded-xl border border-base-100",allowFullScreen:!0})})}),$_=({epData:n,handleChangeEp:e,svCurrent:t,epCurrent:i})=>U.jsx("div",{className:"px-4 py-2 w-full",children:n.map(s=>U.jsxs("div",{className:"w-full",children:[U.jsxs("div",{className:"flex flex-row items-center gap-2 text-lg font-semibold text-yellow-600 mb-2",children:[U.jsx(b_,{size:18}),"My ch ",s.server_name]}),U.jsx("div",{className:"py-3 grid grid-cols-1 gap-2 w-full snap-x snap-mandatory",children:s.server_data.map(a=>{const l=t===s.server_name&&i===a.slug;return U.jsxs("div",{className:`
                                        w-full 
                                        ep-button
                                        flex flex-row
                                        items-center gap-2 
                                        p-2 rounded-2xl
                                        cursor-pointer
                                        transition-colors duration-500
                                        border whitespace-nowrap snap-center
                                        ${l?"bg-white border-gray-300":"border-transparent"}
                                    `,onClick:()=>{e(a.slug,a.link_embed,s.server_name)},children:[U.jsx("div",{className:"bg-gray-700 py-6 px-12 rounded-xl",children:U.jsx(L_,{size:36,strokeWidth:0,fill:"#ffffff"})}),U.jsxs("div",{className:"ml-4 flex flex-col justify-center items-start",children:[U.jsxs("span",{className:"font-bold mb-1",children:["Tp ",a.name]}),U.jsx("span",{className:"text-sm",children:"ang cp nht m t..."})]})]},`${s.server_name}_${a.slug}`)})})]},s.server_name))}),j_=({name:n,currentEp:e,currentTotal:t,content:i,actor:s,country:a,director:l,category:c,type:f})=>{const[d,h]=Y.useState(!1),p=g=>new DOMParser().parseFromString(g,"text/html").body.textContent||"";return U.jsx("div",{className:"px-4 py-2",children:U.jsxs("div",{className:"info mt-3",children:[U.jsxs("div",{className:"flex flex-row items-center gap-2 justify-between mb-4",children:[U.jsx("h4",{className:"font-extrabold m-0 text-2xl",children:n}),U.jsx("span",{className:"py-3.5 px-4 text-sm badge badge-primary whitespace-nowrap",children:e})]}),i&&U.jsxs("div",{className:"mt-3 bg-white text-md border border-gray-300 rounded-xl p-4",children:[U.jsx("p",{className:"font-semibold mb-2",children:"Thng tin phim"}),d?U.jsxs(U.Fragment,{children:[U.jsx("span",{className:"mt-10",children:p(i)}),U.jsxs("div",{className:"mt-2 flex flex-col sm:flex-row flex-wrap gap-2",children:[U.jsx("span",{className:"text-gray-600 font-bold whitespace-nowrap",children:"Din vin: "}),s.map((g,b)=>U.jsxs("span",{className:"whitespace-nowrap",children:[g,b<s.length-1?", ":""]},g))]}),U.jsxs("div",{className:"mt-2 flex flex-col sm:flex-row gap-2",children:[U.jsx("span",{className:"text-gray-600 font-bold",children:"o din: "}),l.map((g,b)=>U.jsxs("span",{children:[g,b<l.length-1?", ":""]},g))]}),U.jsxs("div",{className:"mt-2 flex flex-col sm:flex-row gap-2",children:[U.jsx("span",{className:"text-gray-600 font-bold",children:"Quc gia: "}),a.map((g,b)=>U.jsxs("span",{children:[g.name,b<a.length-1?", ":""]},g))]})]}):U.jsxs("div",{className:"",children:[p(i).slice(0,100)," ..."]}),U.jsx("button",{className:"mt-3 btn btn-sm border border-gray-300",onClick:()=>h(g=>!g),children:d?"n bt":"Xem thm"})]})]})})},H_=()=>{const{slug:n}=XA(),e=yr(),[t,i]=Y.useState([]),[s,a]=Y.useState(""),[l,c]=Y.useState(""),[f,d]=Y.useState(!0),[h,p]=Y.useState(""),g=(y,T,x)=>{a(y),p(T),c(x)},b=y=>{const T=JSON.parse(localStorage.getItem("recent_movies"))||[];if(T.some(w=>w.slug===y.slug)){const w=T.filter(S=>S.slug!==y.slug);localStorage.setItem("recent_movies",JSON.stringify([y,...w]))}else{const w=[y,...T];w.length>20&&w.pop(),localStorage.setItem("recent_movies",JSON.stringify(w))}};return Y.useEffect(()=>{(async()=>{try{const x=await ct.get(`https://ophim1.com/v1/api/phim/${n}`);x.data.status=="success"&&(i(x.data.data),b({slug:x.data.data.item.slug,name:x.data.data.item.name,origin_name:x.data.data.item.origin_name,thumb_url:`${x.data.data.APP_DOMAIN_CDN_IMAGE}/uploads/movies/${x.data.data.item.thumb_url}`,time:new Date().getTime()}))}finally{d(!1)}})()},[]),f?U.jsx("div",{className:"py-8 flex flex-row justify-center w-full h-screen",children:U.jsx("span",{className:"loading loading-xl loading-spinner text-accent"})}):t.length==0?U.jsx(B_,{navigate:e,title:"Khng tm thy phim",msg:"Ni dung ny hin  b g hoc ng dn khng chnh xc"}):U.jsxs("div",{className:"film-viewer h-full w-full overflow-y-auto pb-8",children:[U.jsx(F_,{slug:t.item.slug,name:t.item.name,thumb_url:`${t.APP_DOMAIN_CDN_IMAGE}/uploads/movies/${t.item.thumb_url}`}),U.jsxs("div",{className:"sm:px-10 grid grid-cols-1 sm:grid-cols-8 gap-3 mx-auto",children:[U.jsxs("div",{className:"sm:col-span-5",children:[U.jsx(U_,{movieLinkEmbed:h}),U.jsx(j_,{name:t.item.name,currentEp:t.item.episode_current,currentTotal:t.item.episode_total,content:t.item.content,actor:t.item.actor,country:t.item.country,director:t.item.director,category:t.item.category,type:t.item.type})]}),U.jsx("div",{className:"sm:col-span-3",children:U.jsx("div",{className:"flex flex-col items-start justify-center gap-2",children:U.jsx($_,{epData:t.item.episodes,handleChangeEp:g,svCurrent:l,epCurrent:s})})})]})]})},G_=({searchContent:n,setSearchContent:e,getDataFilm:t})=>U.jsxs("div",{className:"flex flex-row items-center gap-2 mb-6 sm:mb-4 mx-auto max-w-md",children:[U.jsx("input",{type:"text",className:"input outline-none bg-white w-full sm:w-sm border-gray-300",placeholder:"Tn phim",value:n,onChange:i=>e(i.target.value)}),n&&U.jsxs("button",{className:"flex flex-row items-center gap-2 justify-center p-1.5 rounded-md text-blue-500 font-bold cursor-pointer whitespace-nowrap",onClick:()=>t(),children:[U.jsx(hx,{size:18}),U.jsx("span",{children:"Tm"})]})]}),z_=({page:n,setPage:e,limit:t=48,total:i})=>U.jsxs("div",{className:"pagination mt-4 flex flex-row items-center justify-center gap-2",children:[U.jsx("button",{className:"btn btn-accent rounded-2xl",onClick:()=>e(s=>s-1),disabled:n<=1,children:U.jsx(p_,{size:28,strokeWidth:1.5})}),U.jsx("div",{className:"border border-accent rounded-2xl py-2 px-4",children:n??1}),U.jsx("button",{className:"btn btn-accent rounded-2xl",onClick:()=>e(s=>s+1),disabled:n>=Math.ceil((i??0)/t),children:U.jsx(y_,{size:28,strokeWidth:1.5})})]}),V_=({loading:n,urlCdn:e,filmList:t,filmData:i,setPageFilm:s,pageFilm:a})=>{const l=yr();return U.jsxs(U.Fragment,{children:[U.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 xl:grid-cols-6 gap-4",children:n?U.jsx("div",{className:"flex justify-center col-span-full py-10",children:U.jsx("span",{className:"loading loading-spinner loading-lg text-accent"})}):t.map(c=>U.jsxs("div",{className:"group relative rounded-xl overflow-hidden cursor-pointer hover:scale-105 transition-transform duration-300",onClick:()=>{l(`/movies/${c.slug}`)},children:[U.jsx("div",{className:"aspect-[2/3]",children:U.jsx(Am,{src:`${e}/uploads/movies/${c.thumb_url}`,alt:c.name,className:"w-full h-full object-cover rounded-xl shadow-md"})}),U.jsx("span",{className:"absolute badge badge-accent text-[10px] font-bold rounded-md top-2 left-2 shadow-sm border-none",children:c.episode_current??"HD"}),U.jsxs("div",{className:"mt-3 text-center",children:[U.jsx("h5",{className:"text-mg font-bold text-base-content line-clamp-1 group-hover:text-yellow-400 transition-colors",children:c.name}),U.jsx("p",{className:"text-sm text-gray-400 line-clamp-1",children:c.origin_name})]})]},c._id))}),!n&&t.length===0&&U.jsxs("div",{className:"col-span-2 text-center pt-6",children:[U.jsx("img",{src:"/empty.png",alt:"Icon",draggable:!1,className:"mx-auto w-28"}),U.jsx("h4",{className:"text-xl font-semibold mb-1",children:"Khng tm thy kt qu"}),U.jsx("span",{className:"text-gray-400",children:"Rt tic, chng mnh khng tm thy phim no ph hp vi t kha ca bn."})]}),!n&&t.length>0&&U.jsx(z_,{page:a,setPage:s,total:i.params?.pagination?.totalItems})]})},q_=()=>{const[n,e]=Y.useState(""),[t,i]=Y.useState(!0),[s,a]=Y.useState(""),[l,c]=Y.useState([]),[f,d]=Y.useState([]),[h,p]=Y.useState(1),g=async()=>{try{i(!0);const b="https://ophim1.com";if(n=="")return;const y=await ct.get(`${b}/v1/api/tim-kiem?keyword=${n}&limit=20&page=${h}`);a(y.data.data.APP_DOMAIN_CDN_IMAGE??""),c(y.data.data.items??[]),d(y.data.data??[])}finally{i(!1)}};return Y.useEffect(()=>{g()},[h]),U.jsxs(U.Fragment,{children:[U.jsx(G_,{searchContent:n,setSearchContent:e,getDataFilm:g}),U.jsx(V_,{loading:t,urlCdn:s,filmList:l,filmData:f,setPageFilm:p,pageFilm:h})]})};function mx(n,e,t){if(typeof n=="function"?n===e:n.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function K_(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Gv(n,e){return n.get(mx(n,e))}function Y_(n,e,t){K_(n,e),e.set(n,t)}function X_(n,e,t){return n.set(mx(n,e),t),t}const W_=100,xe={},Q_=()=>{xe.previousActiveElement instanceof HTMLElement?(xe.previousActiveElement.focus(),xe.previousActiveElement=null):document.body&&document.body.focus()},Z_=n=>new Promise(e=>{if(!n)return e();const t=window.scrollX,i=window.scrollY;xe.restoreFocusTimeout=setTimeout(()=>{Q_(),e()},W_),window.scrollTo(t,i)}),px="swal2-",J_=["container","shown","height-auto","iosfix","popup","modal","no-backdrop","no-transition","toast","toast-shown","show","hide","close","title","html-container","actions","confirm","deny","cancel","footer","icon","icon-content","image","input","file","range","select","radio","checkbox","label","textarea","inputerror","input-label","validation-message","progress-steps","active-progress-step","progress-step","progress-step-line","loader","loading","styled","top","top-start","top-end","top-left","top-right","center","center-start","center-end","center-left","center-right","bottom","bottom-start","bottom-end","bottom-left","bottom-right","grow-row","grow-column","grow-fullscreen","rtl","timer-progress-bar","timer-progress-bar-container","scrollbar-measure","icon-success","icon-warning","icon-info","icon-question","icon-error","draggable","dragging"],re=J_.reduce((n,e)=>(n[e]=px+e,n),{}),eC=["success","warning","info","question","error"],Wc=eC.reduce((n,e)=>(n[e]=px+e,n),{}),gx="SweetAlert2:",Rm=n=>n.charAt(0).toUpperCase()+n.slice(1),ai=n=>{console.warn(`${gx} ${typeof n=="object"?n.join(" "):n}`)},vr=n=>{console.error(`${gx} ${n}`)},zv=[],tC=n=>{zv.includes(n)||(zv.push(n),ai(n))},yx=(n,e=null)=>{tC(`"${n}" is deprecated and will be removed in the next major release.${e?` Use "${e}" instead.`:""}`)},Lu=n=>typeof n=="function"?n():n,Lm=n=>n&&typeof n.toPromise=="function",Xo=n=>Lm(n)?n.toPromise():Promise.resolve(n),_m=n=>n&&Promise.resolve(n)===n,oi=()=>document.body.querySelector(`.${re.container}`),Wo=n=>{const e=oi();return e?e.querySelector(n):null},Mi=n=>Wo(`.${n}`),qe=()=>Mi(re.popup),Aa=()=>Mi(re.icon),iC=()=>Mi(re["icon-content"]),vx=()=>Mi(re.title),Cm=()=>Mi(re["html-container"]),bx=()=>Mi(re.image),Im=()=>Mi(re["progress-steps"]),_u=()=>Mi(re["validation-message"]),xn=()=>Wo(`.${re.actions} .${re.confirm}`),Ra=()=>Wo(`.${re.actions} .${re.cancel}`),br=()=>Wo(`.${re.actions} .${re.deny}`),nC=()=>Mi(re["input-label"]),La=()=>Wo(`.${re.loader}`),Qo=()=>Mi(re.actions),Ex=()=>Mi(re.footer),Cu=()=>Mi(re["timer-progress-bar"]),Dm=()=>Mi(re.close),sC=`
  a[href],
  area[href],
  input:not([disabled]),
  select:not([disabled]),
  textarea:not([disabled]),
  button:not([disabled]),
  iframe,
  object,
  embed,
  [tabindex="0"],
  [contenteditable],
  audio[controls],
  video[controls],
  summary
`,km=()=>{const n=qe();if(!n)return[];const e=n.querySelectorAll('[tabindex]:not([tabindex="-1"]):not([tabindex="0"])'),t=Array.from(e).sort((a,l)=>{const c=parseInt(a.getAttribute("tabindex")||"0"),f=parseInt(l.getAttribute("tabindex")||"0");return c>f?1:c<f?-1:0}),i=n.querySelectorAll(sC),s=Array.from(i).filter(a=>a.getAttribute("tabindex")!=="-1");return[...new Set(t.concat(s))].filter(a=>Ei(a))},Om=()=>Wn(document.body,re.shown)&&!Wn(document.body,re["toast-shown"])&&!Wn(document.body,re["no-backdrop"]),Iu=()=>{const n=qe();return n?Wn(n,re.toast):!1},rC=()=>{const n=qe();return n?n.hasAttribute("data-loading"):!1},Pi=(n,e)=>{if(n.textContent="",e){const i=new DOMParser().parseFromString(e,"text/html"),s=i.querySelector("head");s&&Array.from(s.childNodes).forEach(l=>{n.appendChild(l)});const a=i.querySelector("body");a&&Array.from(a.childNodes).forEach(l=>{l instanceof HTMLVideoElement||l instanceof HTMLAudioElement?n.appendChild(l.cloneNode(!0)):n.appendChild(l)})}},Wn=(n,e)=>{if(!e)return!1;const t=e.split(/\s+/);for(let i=0;i<t.length;i++)if(!n.classList.contains(t[i]))return!1;return!0},aC=(n,e)=>{Array.from(n.classList).forEach(t=>{!Object.values(re).includes(t)&&!Object.values(Wc).includes(t)&&!Object.values(e.showClass||{}).includes(t)&&n.classList.remove(t)})},Oi=(n,e,t)=>{if(aC(n,e),!e.customClass)return;const i=e.customClass[t];if(i){if(typeof i!="string"&&!i.forEach){ai(`Invalid type of customClass.${t}! Expected string or iterable object, got "${typeof i}"`);return}Ve(n,i)}},Du=(n,e)=>{if(!e)return null;switch(e){case"select":case"textarea":case"file":return n.querySelector(`.${re.popup} > .${re[e]}`);case"checkbox":return n.querySelector(`.${re.popup} > .${re.checkbox} input`);case"radio":return n.querySelector(`.${re.popup} > .${re.radio} input:checked`)||n.querySelector(`.${re.popup} > .${re.radio} input:first-child`);case"range":return n.querySelector(`.${re.popup} > .${re.range} input`);default:return n.querySelector(`.${re.popup} > .${re.input}`)}},xx=n=>{if(n.focus(),n.type!=="file"){const e=n.value;n.value="",n.value=e}},Tx=(n,e,t)=>{!n||!e||(typeof e=="string"&&(e=e.split(/\s+/).filter(Boolean)),e.forEach(i=>{Array.isArray(n)?n.forEach(s=>{t?s.classList.add(i):s.classList.remove(i)}):t?n.classList.add(i):n.classList.remove(i)}))},Ve=(n,e)=>{Tx(n,e,!0)},Yi=(n,e)=>{Tx(n,e,!1)},Cs=(n,e)=>{const t=Array.from(n.children);for(let i=0;i<t.length;i++){const s=t[i];if(s instanceof HTMLElement&&Wn(s,e))return s}},dr=(n,e,t)=>{t===`${parseInt(`${t}`)}`&&(t=parseInt(t)),t||parseInt(`${t}`)===0?n.style.setProperty(e,typeof t=="number"?`${t}px`:t):n.style.removeProperty(e)},Ut=(n,e="flex")=>{n&&(n.style.display=e)},Jt=n=>{n&&(n.style.display="none")},Mm=(n,e="block")=>{n&&new MutationObserver(()=>{Zo(n,n.innerHTML,e)}).observe(n,{childList:!0,subtree:!0})},Vv=(n,e,t,i)=>{const s=n.querySelector(e);s&&s.style.setProperty(t,i)},Zo=(n,e,t="flex")=>{e?Ut(n,t):Jt(n)},Ei=n=>!!(n&&(n.offsetWidth||n.offsetHeight||n.getClientRects().length)),oC=()=>!Ei(xn())&&!Ei(br())&&!Ei(Ra()),qh=n=>n.scrollHeight>n.clientHeight,lC=(n,e)=>{let t=n;for(;t&&t!==e;){if(qh(t))return!0;t=t.parentElement}return!1},Sx=n=>{const e=window.getComputedStyle(n),t=parseFloat(e.getPropertyValue("animation-duration")||"0"),i=parseFloat(e.getPropertyValue("transition-duration")||"0");return t>0||i>0},Pm=(n,e=!1)=>{const t=Cu();t&&Ei(t)&&(e&&(t.style.transition="none",t.style.width="100%"),setTimeout(()=>{t.style.transition=`width ${n/1e3}s linear`,t.style.width="0%"},10))},cC=()=>{const n=Cu();if(!n)return;const e=parseInt(window.getComputedStyle(n).width);n.style.removeProperty("transition"),n.style.width="100%";const t=parseInt(window.getComputedStyle(n).width),i=e/t*100;n.style.width=`${i}%`},uC=()=>typeof window>"u"||typeof document>"u",dC=`
 <div aria-labelledby="${re.title}" aria-describedby="${re["html-container"]}" class="${re.popup}" tabindex="-1">
   <button type="button" class="${re.close}"></button>
   <ul class="${re["progress-steps"]}"></ul>
   <div class="${re.icon}"></div>
   <img class="${re.image}" />
   <h2 class="${re.title}" id="${re.title}"></h2>
   <div class="${re["html-container"]}" id="${re["html-container"]}"></div>
   <input class="${re.input}" id="${re.input}" />
   <input type="file" class="${re.file}" />
   <div class="${re.range}">
     <input type="range" />
     <output></output>
   </div>
   <select class="${re.select}" id="${re.select}"></select>
   <div class="${re.radio}"></div>
   <label class="${re.checkbox}">
     <input type="checkbox" id="${re.checkbox}" />
     <span class="${re.label}"></span>
   </label>
   <textarea class="${re.textarea}" id="${re.textarea}"></textarea>
   <div class="${re["validation-message"]}" id="${re["validation-message"]}"></div>
   <div class="${re.actions}">
     <div class="${re.loader}"></div>
     <button type="button" class="${re.confirm}"></button>
     <button type="button" class="${re.deny}"></button>
     <button type="button" class="${re.cancel}"></button>
   </div>
   <div class="${re.footer}"></div>
   <div class="${re["timer-progress-bar-container"]}">
     <div class="${re["timer-progress-bar"]}"></div>
   </div>
 </div>
`.replace(/(^|\n)\s*/g,""),fC=()=>{const n=oi();return n?(n.remove(),Yi([document.documentElement,document.body],[re["no-backdrop"],re["toast-shown"],re["has-column"]]),!0):!1},nr=()=>{xe.currentInstance&&xe.currentInstance.resetValidationMessage()},hC=()=>{const n=qe();if(!n)return;const e=Cs(n,re.input),t=Cs(n,re.file),i=n.querySelector(`.${re.range} input`),s=n.querySelector(`.${re.range} output`),a=Cs(n,re.select),l=n.querySelector(`.${re.checkbox} input`),c=Cs(n,re.textarea);e&&(e.oninput=nr),t&&(t.onchange=nr),a&&(a.onchange=nr),l&&(l.onchange=nr),c&&(c.oninput=nr),i&&s&&(i.oninput=()=>{nr(),s.value=i.value},i.onchange=()=>{nr(),s.value=i.value})},mC=n=>{if(typeof n=="string"){const e=document.querySelector(n);if(!e)throw new Error(`Target element "${n}" not found`);return e}return n},pC=n=>{const e=qe();e&&(e.setAttribute("role",n.toast?"alert":"dialog"),e.setAttribute("aria-live",n.toast?"polite":"assertive"),n.toast||e.setAttribute("aria-modal","true"))},gC=n=>{window.getComputedStyle(n).direction==="rtl"&&(Ve(oi(),re.rtl),xe.isRTL=!0)},yC=n=>{const e=fC();if(uC()){vr("SweetAlert2 requires document to initialize");return}const t=document.createElement("div");t.className=re.container,e&&Ve(t,re["no-transition"]),Pi(t,dC),t.dataset.swal2Theme=n.theme;const i=mC(n.target||"body");i.appendChild(t),n.topLayer&&(t.setAttribute("popover",""),t.showPopover()),pC(n),gC(i),hC()},Nm=(n,e)=>{n instanceof HTMLElement?e.appendChild(n):typeof n=="object"?vC(n,e):n&&Pi(e,n)},vC=(n,e)=>{"jquery"in n?bC(e,n):Pi(e,n.toString())},bC=(n,e)=>{if(n.textContent="",0 in e)for(let t=0;t in e;t++)n.appendChild(e[t].cloneNode(!0));else n.appendChild(e.cloneNode(!0))},EC=(n,e)=>{const t=Qo(),i=La();!t||!i||(!e.showConfirmButton&&!e.showDenyButton&&!e.showCancelButton?Jt(t):Ut(t),Oi(t,e,"actions"),xC(t,i,e),Pi(i,e.loaderHtml||""),Oi(i,e,"loader"))};function xC(n,e,t){const i=xn(),s=br(),a=Ra();!i||!s||!a||(uh(i,"confirm",t),uh(s,"deny",t),uh(a,"cancel",t),TC(i,s,a,t),t.reverseButtons&&(t.toast?(n.insertBefore(a,i),n.insertBefore(s,i)):(n.insertBefore(a,e),n.insertBefore(s,e),n.insertBefore(i,e))))}function TC(n,e,t,i){if(!i.buttonsStyling){Yi([n,e,t],re.styled);return}Ve([n,e,t],re.styled),i.confirmButtonColor&&n.style.setProperty("--swal2-confirm-button-background-color",i.confirmButtonColor),i.denyButtonColor&&e.style.setProperty("--swal2-deny-button-background-color",i.denyButtonColor),i.cancelButtonColor&&t.style.setProperty("--swal2-cancel-button-background-color",i.cancelButtonColor),ch(n),ch(e),ch(t)}function ch(n){const e=window.getComputedStyle(n);if(e.getPropertyValue("--swal2-action-button-focus-box-shadow"))return;const t=e.backgroundColor.replace(/rgba?\((\d+), (\d+), (\d+).*/,"rgba($1, $2, $3, 0.5)");n.style.setProperty("--swal2-action-button-focus-box-shadow",e.getPropertyValue("--swal2-outline").replace(/ rgba\(.*/,` ${t}`))}function uh(n,e,t){const i=Rm(e);Zo(n,t[`show${i}Button`],"inline-block"),Pi(n,t[`${e}ButtonText`]||""),n.setAttribute("aria-label",t[`${e}ButtonAriaLabel`]||""),n.className=re[e],Oi(n,t,`${e}Button`)}const SC=(n,e)=>{const t=Dm();t&&(Pi(t,e.closeButtonHtml||""),Oi(t,e,"closeButton"),Zo(t,e.showCloseButton),t.setAttribute("aria-label",e.closeButtonAriaLabel||""))},wC=(n,e)=>{const t=oi();t&&(AC(t,e.backdrop),RC(t,e.position),LC(t,e.grow),Oi(t,e,"container"))};function AC(n,e){typeof e=="string"?n.style.background=e:e||Ve([document.documentElement,document.body],re["no-backdrop"])}function RC(n,e){e&&(e in re?Ve(n,re[e]):(ai('The "position" parameter is not valid, defaulting to "center"'),Ve(n,re.center)))}function LC(n,e){e&&Ve(n,re[`grow-${e}`])}var rt={innerParams:new WeakMap,domCache:new WeakMap};const _C=["input","file","range","select","radio","checkbox","textarea"],CC=(n,e)=>{const t=qe();if(!t)return;const i=rt.innerParams.get(n),s=!i||e.input!==i.input;_C.forEach(a=>{const l=Cs(t,re[a]);l&&(kC(a,e.inputAttributes),l.className=re[a],s&&Jt(l))}),e.input&&(s&&IC(e),OC(e))},IC=n=>{if(!n.input)return;if(!St[n.input]){vr(`Unexpected type of input! Expected ${Object.keys(St).join(" | ")}, got "${n.input}"`);return}const e=wx(n.input);if(!e)return;const t=St[n.input](e,n);Ut(e),n.inputAutoFocus&&setTimeout(()=>{xx(t)})},DC=n=>{for(let e=0;e<n.attributes.length;e++){const t=n.attributes[e].name;["id","type","value","style"].includes(t)||n.removeAttribute(t)}},kC=(n,e)=>{const t=qe();if(!t)return;const i=Du(t,n);if(i){DC(i);for(const s in e)i.setAttribute(s,e[s])}},OC=n=>{if(!n.input)return;const e=wx(n.input);e&&Oi(e,n,"input")},Bm=(n,e)=>{!n.placeholder&&e.inputPlaceholder&&(n.placeholder=e.inputPlaceholder)},Jo=(n,e,t)=>{if(t.inputLabel){const i=document.createElement("label"),s=re["input-label"];i.setAttribute("for",n.id),i.className=s,typeof t.customClass=="object"&&Ve(i,t.customClass.inputLabel),i.innerText=t.inputLabel,e.insertAdjacentElement("beforebegin",i)}},wx=n=>{const e=qe();if(e)return Cs(e,re[n]||re.input)},Qc=(n,e)=>{["string","number"].includes(typeof e)?n.value=`${e}`:_m(e)||ai(`Unexpected type of inputValue! Expected "string", "number" or "Promise", got "${typeof e}"`)},St={};St.text=St.email=St.password=St.number=St.tel=St.url=St.search=St.date=St["datetime-local"]=St.time=St.week=St.month=(n,e)=>{const t=n;return Qc(t,e.inputValue),Jo(t,t,e),Bm(t,e),t.type=e.input,t};St.file=(n,e)=>{const t=n;return Jo(t,t,e),Bm(t,e),t};St.range=(n,e)=>{const t=n,i=t.querySelector("input"),s=t.querySelector("output");return i&&(Qc(i,e.inputValue),i.type=e.input,Jo(i,n,e)),s&&Qc(s,e.inputValue),n};St.select=(n,e)=>{const t=n;if(t.textContent="",e.inputPlaceholder){const i=document.createElement("option");Pi(i,e.inputPlaceholder),i.value="",i.disabled=!0,i.selected=!0,t.appendChild(i)}return Jo(t,t,e),t};St.radio=n=>{const e=n;return e.textContent="",n};St.checkbox=(n,e)=>{const t=qe();if(!t)throw new Error("Popup not found");const i=Du(t,"checkbox");if(!i)throw new Error("Checkbox input not found");i.value="1",i.checked=!!e.inputValue;const a=n.querySelector("span");if(a){const l=e.inputPlaceholder||e.inputLabel;l&&Pi(a,l)}return i};St.textarea=(n,e)=>{const t=n;Qc(t,e.inputValue),Bm(t,e),Jo(t,t,e);const i=s=>parseInt(window.getComputedStyle(s).marginLeft)+parseInt(window.getComputedStyle(s).marginRight);return setTimeout(()=>{if("MutationObserver"in window){const s=qe();if(!s)return;const a=parseInt(window.getComputedStyle(s).width),l=()=>{if(!document.body.contains(t))return;const c=t.offsetWidth+i(t),f=qe();f&&(c>a?f.style.width=`${c}px`:dr(f,"width",e.width))};new MutationObserver(l).observe(t,{attributes:!0,attributeFilter:["style"]})}}),t};const MC=(n,e)=>{const t=Cm();t&&(Mm(t),Oi(t,e,"htmlContainer"),e.html?(Nm(e.html,t),Ut(t,"block")):e.text?(t.textContent=e.text,Ut(t,"block")):Jt(t),CC(n,e))},PC=(n,e)=>{const t=Ex();t&&(Mm(t),Zo(t,!!e.footer,"block"),e.footer&&Nm(e.footer,t),Oi(t,e,"footer"))},NC=(n,e)=>{const t=rt.innerParams.get(n),i=Aa();if(!i)return;if(t&&e.icon===t.icon){Kv(i,e),qv(i,e);return}if(!e.icon&&!e.iconHtml){Jt(i);return}if(e.icon&&Object.keys(Wc).indexOf(e.icon)===-1){vr(`Unknown icon! Expected "success", "error", "warning", "info" or "question", got "${e.icon}"`),Jt(i);return}Ut(i),Kv(i,e),qv(i,e),Ve(i,e.showClass&&e.showClass.icon),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",Ax)},qv=(n,e)=>{for(const[t,i]of Object.entries(Wc))e.icon!==t&&Yi(n,i);Ve(n,e.icon&&Wc[e.icon]),UC(n,e),Ax(),Oi(n,e,"icon")},Ax=()=>{const n=qe();if(!n)return;const e=window.getComputedStyle(n).getPropertyValue("background-color"),t=n.querySelectorAll("[class^=swal2-success-circular-line], .swal2-success-fix");for(let i=0;i<t.length;i++)t[i].style.backgroundColor=e},BC=n=>`
  ${n.animation?'<div class="swal2-success-circular-line-left"></div>':""}
  <span class="swal2-success-line-tip"></span> <span class="swal2-success-line-long"></span>
  <div class="swal2-success-ring"></div>
  ${n.animation?'<div class="swal2-success-fix"></div>':""}
  ${n.animation?'<div class="swal2-success-circular-line-right"></div>':""}
`,FC=`
  <span class="swal2-x-mark">
    <span class="swal2-x-mark-line-left"></span>
    <span class="swal2-x-mark-line-right"></span>
  </span>
`,Kv=(n,e)=>{if(!e.icon&&!e.iconHtml)return;let t=n.innerHTML,i="";e.iconHtml?i=Yv(e.iconHtml):e.icon==="success"?(i=BC(e),t=t.replace(/ style=".*?"/g,"")):e.icon==="error"?i=FC:e.icon&&(i=Yv({question:"?",warning:"!",info:"i"}[e.icon])),t.trim()!==i.trim()&&Pi(n,i)},UC=(n,e)=>{if(e.iconColor){n.style.color=e.iconColor,n.style.borderColor=e.iconColor;for(const t of[".swal2-success-line-tip",".swal2-success-line-long",".swal2-x-mark-line-left",".swal2-x-mark-line-right"])Vv(n,t,"background-color",e.iconColor);Vv(n,".swal2-success-ring","border-color",e.iconColor)}},Yv=n=>`<div class="${re["icon-content"]}">${n}</div>`,$C=(n,e)=>{const t=bx();if(t){if(!e.imageUrl){Jt(t);return}Ut(t,""),t.setAttribute("src",e.imageUrl),t.setAttribute("alt",e.imageAlt||""),dr(t,"width",e.imageWidth),dr(t,"height",e.imageHeight),t.className=re.image,Oi(t,e,"image")}};let Fm=!1,Rx=0,Lx=0,_x=0,Cx=0;const jC=n=>{n.addEventListener("mousedown",Zc),document.body.addEventListener("mousemove",Jc),n.addEventListener("mouseup",eu),n.addEventListener("touchstart",Zc),document.body.addEventListener("touchmove",Jc),n.addEventListener("touchend",eu)},HC=n=>{n.removeEventListener("mousedown",Zc),document.body.removeEventListener("mousemove",Jc),n.removeEventListener("mouseup",eu),n.removeEventListener("touchstart",Zc),document.body.removeEventListener("touchmove",Jc),n.removeEventListener("touchend",eu)},Zc=n=>{const e=qe();if(!e)return;const t=Aa();if(n.target===e||t&&t.contains(n.target)){Fm=!0;const i=Ix(n);Rx=i.clientX,Lx=i.clientY,_x=parseInt(e.style.insetInlineStart)||0,Cx=parseInt(e.style.insetBlockStart)||0,Ve(e,"swal2-dragging")}},Jc=n=>{const e=qe();if(e&&Fm){let{clientX:t,clientY:i}=Ix(n);const s=t-Rx;e.style.insetInlineStart=`${_x+(xe.isRTL?-s:s)}px`,e.style.insetBlockStart=`${Cx+(i-Lx)}px`}},eu=()=>{const n=qe();Fm=!1,Yi(n,"swal2-dragging")},Ix=n=>{let e=0,t=0;return n.type.startsWith("mouse")?(e=n.clientX,t=n.clientY):n.type.startsWith("touch")&&(e=n.touches[0].clientX,t=n.touches[0].clientY),{clientX:e,clientY:t}},GC=(n,e)=>{const t=oi(),i=qe();if(!(!t||!i)){if(e.toast){dr(t,"width",e.width),i.style.width="100%";const s=La();s&&i.insertBefore(s,Aa())}else dr(i,"width",e.width);dr(i,"padding",e.padding),e.color&&(i.style.color=e.color),e.background&&(i.style.background=e.background),Jt(_u()),zC(i,e),e.draggable&&!e.toast?(Ve(i,re.draggable),jC(i)):(Yi(i,re.draggable),HC(i))}},zC=(n,e)=>{const t=e.showClass||{};n.className=`${re.popup} ${Ei(n)?t.popup:""}`,e.toast?(Ve([document.documentElement,document.body],re["toast-shown"]),Ve(n,re.toast)):Ve(n,re.modal),Oi(n,e,"popup"),typeof e.customClass=="string"&&Ve(n,e.customClass),e.icon&&Ve(n,re[`icon-${e.icon}`])},VC=(n,e)=>{const t=Im();if(!t)return;const{progressSteps:i,currentProgressStep:s}=e;if(!i||i.length===0||s===void 0){Jt(t);return}Ut(t),t.textContent="",s>=i.length&&ai("Invalid currentProgressStep parameter, it should be less than progressSteps.length (currentProgressStep like JS arrays starts from 0)"),i.forEach((a,l)=>{const c=qC(a);if(t.appendChild(c),l===s&&Ve(c,re["active-progress-step"]),l!==i.length-1){const f=KC(e);t.appendChild(f)}})},qC=n=>{const e=document.createElement("li");return Ve(e,re["progress-step"]),Pi(e,n),e},KC=n=>{const e=document.createElement("li");return Ve(e,re["progress-step-line"]),n.progressStepsDistance&&dr(e,"width",n.progressStepsDistance),e},YC=(n,e)=>{const t=vx();t&&(Mm(t),Zo(t,!!(e.title||e.titleText),"block"),e.title&&Nm(e.title,t),e.titleText&&(t.innerText=e.titleText),Oi(t,e,"title"))},Dx=(n,e)=>{var t;GC(n,e),wC(n,e),VC(n,e),NC(n,e),$C(n,e),YC(n,e),SC(n,e),MC(n,e),EC(n,e),PC(n,e);const i=qe();typeof e.didRender=="function"&&i&&e.didRender(i),(t=xe.eventEmitter)===null||t===void 0||t.emit("didRender",i)},XC=()=>Ei(qe()),kx=()=>{var n;return(n=xn())===null||n===void 0?void 0:n.click()},WC=()=>{var n;return(n=br())===null||n===void 0?void 0:n.click()},QC=()=>{var n;return(n=Ra())===null||n===void 0?void 0:n.click()},_a=Object.freeze({cancel:"cancel",backdrop:"backdrop",close:"close",esc:"esc",timer:"timer"}),Ox=n=>{if(n.keydownTarget&&n.keydownHandlerAdded&&n.keydownHandler){const e=n.keydownHandler;n.keydownTarget.removeEventListener("keydown",e,{capture:n.keydownListenerCapture}),n.keydownHandlerAdded=!1}},ZC=(n,e,t)=>{if(Ox(n),!e.toast){const i=a=>eI(e,a,t);n.keydownHandler=i;const s=e.keydownListenerCapture?window:qe();if(s){n.keydownTarget=s,n.keydownListenerCapture=e.keydownListenerCapture;const a=i;n.keydownTarget.addEventListener("keydown",a,{capture:n.keydownListenerCapture}),n.keydownHandlerAdded=!0}}},Kh=(n,e)=>{var t;const i=km();if(i.length){n=n+e,n===-2&&(n=i.length-1),n===i.length?n=0:n===-1&&(n=i.length-1),i[n].focus();return}(t=qe())===null||t===void 0||t.focus()},Mx=["ArrowRight","ArrowDown"],JC=["ArrowLeft","ArrowUp"],eI=(n,e,t)=>{n&&(e.isComposing||e.keyCode===229||(n.stopKeydownPropagation&&e.stopPropagation(),e.key==="Enter"?tI(e,n):e.key==="Tab"?iI(e):[...Mx,...JC].includes(e.key)?nI(e.key):e.key==="Escape"&&sI(e,n,t)))},tI=(n,e)=>{if(!Lu(e.allowEnterKey))return;const t=qe();if(!t||!e.input)return;const i=Du(t,e.input);if(n.target&&i&&n.target instanceof HTMLElement&&n.target.outerHTML===i.outerHTML){if(["textarea","file"].includes(e.input))return;kx(),n.preventDefault()}},iI=n=>{const e=n.target,t=km();let i=-1;for(let s=0;s<t.length;s++)if(e===t[s]){i=s;break}n.shiftKey?Kh(i,-1):Kh(i,1),n.stopPropagation(),n.preventDefault()},nI=n=>{const e=Qo(),t=xn(),i=br(),s=Ra();if(!e||!t||!i||!s)return;const a=[t,i,s];if(document.activeElement instanceof HTMLElement&&!a.includes(document.activeElement))return;const l=Mx.includes(n)?"nextElementSibling":"previousElementSibling";let c=document.activeElement;if(c){for(let f=0;f<e.children.length;f++){if(c=c[l],!c)return;if(c instanceof HTMLButtonElement&&Ei(c))break}c instanceof HTMLButtonElement&&c.focus()}},sI=(n,e,t)=>{n.preventDefault(),Lu(e.allowEscapeKey)&&t(_a.esc)};var va={swalPromiseResolve:new WeakMap,swalPromiseReject:new WeakMap};const rI=()=>{const n=oi();Array.from(document.body.children).forEach(t=>{t.contains(n)||(t.hasAttribute("aria-hidden")&&t.setAttribute("data-previous-aria-hidden",t.getAttribute("aria-hidden")||""),t.setAttribute("aria-hidden","true"))})},Px=()=>{Array.from(document.body.children).forEach(e=>{e.hasAttribute("data-previous-aria-hidden")?(e.setAttribute("aria-hidden",e.getAttribute("data-previous-aria-hidden")||""),e.removeAttribute("data-previous-aria-hidden")):e.removeAttribute("aria-hidden")})},Nx=typeof window<"u"&&!!window.GestureEvent,aI=()=>{if(Nx&&!Wn(document.body,re.iosfix)){const n=document.body.scrollTop;document.body.style.top=`${n*-1}px`,Ve(document.body,re.iosfix),oI()}},oI=()=>{const n=oi();if(!n)return;let e;n.ontouchstart=t=>{e=lI(t)},n.ontouchmove=t=>{e&&(t.preventDefault(),t.stopPropagation())}},lI=n=>{const e=n.target,t=oi(),i=Cm();return!t||!i||cI(n)||uI(n)?!1:e===t||!qh(t)&&e instanceof HTMLElement&&!lC(e,i)&&e.tagName!=="INPUT"&&e.tagName!=="TEXTAREA"&&!(qh(i)&&i.contains(e))},cI=n=>!!(n.touches&&n.touches.length&&n.touches[0].touchType==="stylus"),uI=n=>n.touches&&n.touches.length>1,dI=()=>{if(Wn(document.body,re.iosfix)){const n=parseInt(document.body.style.top,10);Yi(document.body,re.iosfix),document.body.style.top="",document.body.scrollTop=n*-1}},fI=()=>{const n=document.createElement("div");n.className=re["scrollbar-measure"],document.body.appendChild(n);const e=n.getBoundingClientRect().width-n.clientWidth;return document.body.removeChild(n),e};let fa=null;const hI=n=>{fa===null&&(document.body.scrollHeight>window.innerHeight||n==="scroll")&&(fa=parseInt(window.getComputedStyle(document.body).getPropertyValue("padding-right")),document.body.style.paddingRight=`${fa+fI()}px`)},mI=()=>{fa!==null&&(document.body.style.paddingRight=`${fa}px`,fa=null)};function Bx(n,e,t,i){Iu()?Xv(n,i):(Z_(t).then(()=>Xv(n,i)),Ox(xe)),Nx?(e.setAttribute("style","display:none !important"),e.removeAttribute("class"),e.innerHTML=""):e.remove(),Om()&&(mI(),dI(),Px()),pI()}function pI(){Yi([document.documentElement,document.body],[re.shown,re["height-auto"],re["no-backdrop"],re["toast-shown"]])}function Is(n){n=yI(n);const e=va.swalPromiseResolve.get(this),t=gI(this);this.isAwaitingPromise?n.isDismissed||(el(this),e(n)):t&&e(n)}const gI=n=>{const e=qe();if(!e)return!1;const t=rt.innerParams.get(n);if(!t||Wn(e,t.hideClass.popup))return!1;Yi(e,t.showClass.popup),Ve(e,t.hideClass.popup);const i=oi();return Yi(i,t.showClass.backdrop),Ve(i,t.hideClass.backdrop),vI(n,e,t),!0};function Fx(n){const e=va.swalPromiseReject.get(this);el(this),e&&e(n)}const el=n=>{n.isAwaitingPromise&&(delete n.isAwaitingPromise,rt.innerParams.get(n)||n._destroy())},yI=n=>typeof n>"u"?{isConfirmed:!1,isDenied:!1,isDismissed:!0}:Object.assign({isConfirmed:!1,isDenied:!1,isDismissed:!1},n),vI=(n,e,t)=>{var i;const s=oi(),a=Sx(e);typeof t.willClose=="function"&&t.willClose(e),(i=xe.eventEmitter)===null||i===void 0||i.emit("willClose",e),a&&s?bI(n,e,s,!!t.returnFocus,t.didClose):s&&Bx(n,s,!!t.returnFocus,t.didClose)},bI=(n,e,t,i,s)=>{xe.swalCloseEventFinishedCallback=Bx.bind(null,n,t,i,s);const a=function(l){if(l.target===e){var c;(c=xe.swalCloseEventFinishedCallback)===null||c===void 0||c.call(xe),delete xe.swalCloseEventFinishedCallback,e.removeEventListener("animationend",a),e.removeEventListener("transitionend",a)}};e.addEventListener("animationend",a),e.addEventListener("transitionend",a)},Xv=(n,e)=>{setTimeout(()=>{var t;typeof e=="function"&&e.bind(n.params)(),(t=xe.eventEmitter)===null||t===void 0||t.emit("didClose"),n._destroy&&n._destroy()})},ba=n=>{let e=qe();if(e||new ru,e=qe(),!e)return;const t=La();Iu()?Jt(Aa()):EI(e,n),Ut(t),e.setAttribute("data-loading","true"),e.setAttribute("aria-busy","true"),e.focus()},EI=(n,e)=>{const t=Qo(),i=La();!t||!i||(!e&&Ei(xn())&&(e=xn()),Ut(t),e&&(Jt(e),i.setAttribute("data-button-to-replace",e.className),t.insertBefore(i,e)),Ve([n,t],re.loading))},xI=(n,e)=>{e.input==="select"||e.input==="radio"?RI(n,e):["text","email","number","tel","textarea"].some(t=>t===e.input)&&(Lm(e.inputValue)||_m(e.inputValue))&&(ba(xn()),LI(n,e))},TI=(n,e)=>{const t=n.getInput();if(!t)return null;switch(e.input){case"checkbox":return SI(t);case"radio":return wI(t);case"file":return AI(t);default:return e.inputAutoTrim?t.value.trim():t.value}},SI=n=>n.checked?1:0,wI=n=>n.checked?n.value:null,AI=n=>n.files&&n.files.length?n.getAttribute("multiple")!==null?n.files:n.files[0]:null,RI=(n,e)=>{const t=qe();if(!t)return;const i=s=>{e.input==="select"?_I(t,tu(s),e):e.input==="radio"&&CI(t,tu(s),e)};Lm(e.inputOptions)||_m(e.inputOptions)?(ba(xn()),Xo(e.inputOptions).then(s=>{n.hideLoading(),i(s)})):typeof e.inputOptions=="object"?i(e.inputOptions):vr(`Unexpected type of inputOptions! Expected object, Map or Promise, got ${typeof e.inputOptions}`)},LI=(n,e)=>{const t=n.getInput();t&&(Jt(t),Xo(e.inputValue).then(i=>{t.value=e.input==="number"?`${parseFloat(i)||0}`:`${i}`,Ut(t),t.focus(),n.hideLoading()}).catch(i=>{vr(`Error in inputValue promise: ${i}`),t.value="",Ut(t),t.focus(),n.hideLoading()}))};function _I(n,e,t){const i=Cs(n,re.select);if(!i)return;const s=(a,l,c)=>{const f=document.createElement("option");f.value=c,Pi(f,l),f.selected=Ux(c,t.inputValue),a.appendChild(f)};e.forEach(a=>{const l=a[0],c=a[1];if(Array.isArray(c)){const f=document.createElement("optgroup");f.label=l,f.disabled=!1,i.appendChild(f),c.forEach(d=>s(f,d[1],d[0]))}else s(i,c,l)}),i.focus()}function CI(n,e,t){const i=Cs(n,re.radio);if(!i)return;e.forEach(a=>{const l=a[0],c=a[1],f=document.createElement("input"),d=document.createElement("label");f.type="radio",f.name=re.radio,f.value=l,Ux(l,t.inputValue)&&(f.checked=!0);const h=document.createElement("span");Pi(h,c),h.className=re.label,d.appendChild(f),d.appendChild(h),i.appendChild(d)});const s=i.querySelectorAll("input");s.length&&s[0].focus()}const tu=n=>{const e=[];return n instanceof Map?n.forEach((t,i)=>{let s=t;typeof s=="object"&&(s=tu(s)),e.push([i,s])}):Object.keys(n).forEach(t=>{let i=n[t];typeof i=="object"&&(i=tu(i)),e.push([t,i])}),e},Ux=(n,e)=>!!e&&e!==null&&e!==void 0&&e.toString()===n.toString(),II=n=>{const e=rt.innerParams.get(n);n.disableButtons(),e.input?$x(n,"confirm"):$m(n,!0)},DI=n=>{const e=rt.innerParams.get(n);n.disableButtons(),e.returnInputValueOnDeny?$x(n,"deny"):Um(n,!1)},kI=(n,e)=>{n.disableButtons(),e(_a.cancel)},$x=(n,e)=>{const t=rt.innerParams.get(n);if(!t.input){vr(`The "input" parameter is needed to be set when using returnInputValueOn${Rm(e)}`);return}const i=n.getInput(),s=TI(n,t);t.inputValidator?OI(n,s,e):i&&!i.checkValidity()?(n.enableButtons(),n.showValidationMessage(t.validationMessage||i.validationMessage)):e==="deny"?Um(n,s):$m(n,s)},OI=(n,e,t)=>{const i=rt.innerParams.get(n);n.disableInput(),Promise.resolve().then(()=>Xo(i.inputValidator(e,i.validationMessage))).then(a=>{n.enableButtons(),n.enableInput(),a?n.showValidationMessage(a):t==="deny"?Um(n,e):$m(n,e)})},Um=(n,e)=>{const t=rt.innerParams.get(n);t.showLoaderOnDeny&&ba(br()),t.preDeny?(n.isAwaitingPromise=!0,Promise.resolve().then(()=>Xo(t.preDeny(e,t.validationMessage))).then(s=>{s===!1?(n.hideLoading(),el(n)):n.close({isDenied:!0,value:typeof s>"u"?e:s})}).catch(s=>jx(n,s))):n.close({isDenied:!0,value:e})},Wv=(n,e)=>{n.close({isConfirmed:!0,value:e})},jx=(n,e)=>{n.rejectPromise(e)},$m=(n,e)=>{const t=rt.innerParams.get(n);t.showLoaderOnConfirm&&ba(),t.preConfirm?(n.resetValidationMessage(),n.isAwaitingPromise=!0,Promise.resolve().then(()=>Xo(t.preConfirm(e,t.validationMessage))).then(s=>{Ei(_u())||s===!1?(n.hideLoading(),el(n)):Wv(n,typeof s>"u"?e:s)}).catch(s=>jx(n,s))):Wv(n,e)};function iu(){const n=rt.innerParams.get(this);if(!n)return;const e=rt.domCache.get(this);Jt(e.loader),Iu()?n.icon&&Ut(Aa()):MI(e),Yi([e.popup,e.actions],re.loading),e.popup.removeAttribute("aria-busy"),e.popup.removeAttribute("data-loading"),e.confirmButton.disabled=!1,e.denyButton.disabled=!1,e.cancelButton.disabled=!1}const MI=n=>{const e=n.loader.getAttribute("data-button-to-replace"),t=e?n.popup.getElementsByClassName(e):[];t.length?Ut(t[0],"inline-block"):oC()&&Jt(n.actions)};function Hx(){const n=rt.innerParams.get(this),e=rt.domCache.get(this);return e?Du(e.popup,n.input):null}function Gx(n,e,t){const i=rt.domCache.get(n);e.forEach(s=>{i[s].disabled=t})}function zx(n,e){const t=qe();if(!(!t||!n))if(n.type==="radio"){const i=t.querySelectorAll(`[name="${re.radio}"]`);for(let s=0;s<i.length;s++)i[s].disabled=e}else n.disabled=e}function Vx(){Gx(this,["confirmButton","denyButton","cancelButton"],!1)}function qx(){Gx(this,["confirmButton","denyButton","cancelButton"],!0)}function Kx(){zx(this.getInput(),!1)}function Yx(){zx(this.getInput(),!0)}function Xx(n){const e=rt.domCache.get(this),t=rt.innerParams.get(this);Pi(e.validationMessage,n),e.validationMessage.className=re["validation-message"],t.customClass&&t.customClass.validationMessage&&Ve(e.validationMessage,t.customClass.validationMessage),Ut(e.validationMessage);const i=this.getInput();i&&(i.setAttribute("aria-invalid","true"),i.setAttribute("aria-describedby",re["validation-message"]),xx(i),Ve(i,re.inputerror))}function Wx(){const n=rt.domCache.get(this);n.validationMessage&&Jt(n.validationMessage);const e=this.getInput();e&&(e.removeAttribute("aria-invalid"),e.removeAttribute("aria-describedby"),Yi(e,re.inputerror))}const Ds={title:"",titleText:"",text:"",html:"",footer:"",icon:void 0,iconColor:void 0,iconHtml:void 0,template:void 0,toast:!1,draggable:!1,animation:!0,theme:"light",showClass:{popup:"swal2-show",backdrop:"swal2-backdrop-show",icon:"swal2-icon-show"},hideClass:{popup:"swal2-hide",backdrop:"swal2-backdrop-hide",icon:"swal2-icon-hide"},customClass:{},target:"body",color:void 0,backdrop:!0,heightAuto:!0,allowOutsideClick:!0,allowEscapeKey:!0,allowEnterKey:!0,stopKeydownPropagation:!0,keydownListenerCapture:!1,showConfirmButton:!0,showDenyButton:!1,showCancelButton:!1,preConfirm:void 0,preDeny:void 0,confirmButtonText:"OK",confirmButtonAriaLabel:"",confirmButtonColor:void 0,denyButtonText:"No",denyButtonAriaLabel:"",denyButtonColor:void 0,cancelButtonText:"Cancel",cancelButtonAriaLabel:"",cancelButtonColor:void 0,buttonsStyling:!0,reverseButtons:!1,focusConfirm:!0,focusDeny:!1,focusCancel:!1,returnFocus:!0,showCloseButton:!1,closeButtonHtml:"&times;",closeButtonAriaLabel:"Close this dialog",loaderHtml:"",showLoaderOnConfirm:!1,showLoaderOnDeny:!1,imageUrl:void 0,imageWidth:void 0,imageHeight:void 0,imageAlt:"",timer:void 0,timerProgressBar:!1,width:void 0,padding:void 0,background:void 0,input:void 0,inputPlaceholder:"",inputLabel:"",inputValue:"",inputOptions:{},inputAutoFocus:!0,inputAutoTrim:!0,inputAttributes:{},inputValidator:void 0,returnInputValueOnDeny:!1,validationMessage:void 0,grow:!1,position:"center",progressSteps:[],currentProgressStep:void 0,progressStepsDistance:void 0,willOpen:void 0,didOpen:void 0,didRender:void 0,willClose:void 0,didClose:void 0,didDestroy:void 0,scrollbarPadding:!0,topLayer:!1},PI=["allowEscapeKey","allowOutsideClick","background","buttonsStyling","cancelButtonAriaLabel","cancelButtonColor","cancelButtonText","closeButtonAriaLabel","closeButtonHtml","color","confirmButtonAriaLabel","confirmButtonColor","confirmButtonText","currentProgressStep","customClass","denyButtonAriaLabel","denyButtonColor","denyButtonText","didClose","didDestroy","draggable","footer","hideClass","html","icon","iconColor","iconHtml","imageAlt","imageHeight","imageUrl","imageWidth","preConfirm","preDeny","progressSteps","returnFocus","reverseButtons","showCancelButton","showCloseButton","showConfirmButton","showDenyButton","text","title","titleText","theme","willClose"],NI={allowEnterKey:void 0},BI=["allowOutsideClick","allowEnterKey","backdrop","draggable","focusConfirm","focusDeny","focusCancel","returnFocus","heightAuto","keydownListenerCapture"],Qx=n=>Object.prototype.hasOwnProperty.call(Ds,n),Zx=n=>PI.indexOf(n)!==-1,Jx=n=>NI[n],FI=n=>{Qx(n)||ai(`Unknown parameter "${n}"`)},UI=n=>{BI.includes(n)&&ai(`The parameter "${n}" is incompatible with toasts`)},$I=n=>{const e=Jx(n);e&&yx(n,e)},eT=n=>{n.backdrop===!1&&n.allowOutsideClick&&ai('"allowOutsideClick" parameter requires `backdrop` parameter to be set to `true`'),n.theme&&!["light","dark","auto","minimal","borderless","bootstrap-4","bootstrap-4-light","bootstrap-4-dark","bootstrap-5","bootstrap-5-light","bootstrap-5-dark","material-ui","material-ui-light","material-ui-dark","embed-iframe","bulma","bulma-light","bulma-dark"].includes(n.theme)&&ai(`Invalid theme "${n.theme}"`);for(const e in n)FI(e),n.toast&&UI(e),$I(e)};function tT(n){const e=oi(),t=qe(),i=rt.innerParams.get(this);if(!t||Wn(t,i.hideClass.popup)){ai("You're trying to update the closed or closing popup, that won't work. Use the update() method in preConfirm parameter or show a new popup.");return}const s=jI(n),a=Object.assign({},i,s);eT(a),e&&(e.dataset.swal2Theme=a.theme),Dx(this,a),rt.innerParams.set(this,a),Object.defineProperties(this,{params:{value:Object.assign({},this.params,n),writable:!1,enumerable:!0}})}const jI=n=>{const e={};return Object.keys(n).forEach(t=>{if(Zx(t)){const i=n;e[t]=i[t]}else ai(`Invalid parameter to update: ${t}`)}),e};function iT(){var n;const e=rt.domCache.get(this),t=rt.innerParams.get(this);if(!t){nT(this);return}e.popup&&xe.swalCloseEventFinishedCallback&&(xe.swalCloseEventFinishedCallback(),delete xe.swalCloseEventFinishedCallback),typeof t.didDestroy=="function"&&t.didDestroy(),(n=xe.eventEmitter)===null||n===void 0||n.emit("didDestroy"),HI(this)}const HI=n=>{nT(n),delete n.params,delete xe.keydownHandler,delete xe.keydownTarget,delete xe.currentInstance},nT=n=>{n.isAwaitingPromise?(dh(rt,n),n.isAwaitingPromise=!0):(dh(va,n),dh(rt,n),delete n.isAwaitingPromise,delete n.disableButtons,delete n.enableButtons,delete n.getInput,delete n.disableInput,delete n.enableInput,delete n.hideLoading,delete n.disableLoading,delete n.showValidationMessage,delete n.resetValidationMessage,delete n.close,delete n.closePopup,delete n.closeModal,delete n.closeToast,delete n.rejectPromise,delete n.update,delete n._destroy)},dh=(n,e)=>{for(const t in n)n[t].delete(e)};var GI=Object.freeze({__proto__:null,_destroy:iT,close:Is,closeModal:Is,closePopup:Is,closeToast:Is,disableButtons:qx,disableInput:Yx,disableLoading:iu,enableButtons:Vx,enableInput:Kx,getInput:Hx,handleAwaitingPromise:el,hideLoading:iu,rejectPromise:Fx,resetValidationMessage:Wx,showValidationMessage:Xx,update:tT});const zI=(n,e,t)=>{n.toast?VI(n,e,t):(KI(e),YI(e),XI(n,e,t))},VI=(n,e,t)=>{e.popup.onclick=()=>{n&&(qI(n)||n.timer||n.input)||t(_a.close)}},qI=n=>!!(n.showConfirmButton||n.showDenyButton||n.showCancelButton||n.showCloseButton);let nu=!1;const KI=n=>{n.popup.onmousedown=()=>{n.container.onmouseup=function(e){n.container.onmouseup=()=>{},e.target===n.container&&(nu=!0)}}},YI=n=>{n.container.onmousedown=e=>{e.target===n.container&&e.preventDefault(),n.popup.onmouseup=function(t){n.popup.onmouseup=()=>{},(t.target===n.popup||t.target instanceof HTMLElement&&n.popup.contains(t.target))&&(nu=!0)}}},XI=(n,e,t)=>{e.container.onclick=i=>{if(nu){nu=!1;return}i.target===e.container&&Lu(n.allowOutsideClick)&&t(_a.backdrop)}},WI=n=>typeof n=="object"&&n!==null&&"jquery"in n,Qv=n=>n instanceof Element||WI(n),QI=n=>{const e={};return typeof n[0]=="object"&&!Qv(n[0])?Object.assign(e,n[0]):["title","html","icon"].forEach((t,i)=>{const s=n[i];typeof s=="string"||Qv(s)?e[t]=s:s!==void 0&&vr(`Unexpected type of ${t}! Expected "string" or "Element", got ${typeof s}`)}),e};function ZI(...n){return new this(...n)}function JI(n){class e extends this{_main(i,s){return super._main(i,Object.assign({},n,s))}}return e}const eD=()=>xe.timeout&&xe.timeout.getTimerLeft(),sT=()=>{if(xe.timeout)return cC(),xe.timeout.stop()},rT=()=>{if(xe.timeout){const n=xe.timeout.start();return Pm(n),n}},tD=()=>{const n=xe.timeout;return n&&(n.running?sT():rT())},iD=n=>{if(xe.timeout){const e=xe.timeout.increase(n);return Pm(e,!0),e}},nD=()=>!!(xe.timeout&&xe.timeout.isRunning());let Zv=!1;const Yh={};function sD(n="data-swal-template"){Yh[n]=this,Zv||(document.body.addEventListener("click",rD),Zv=!0)}const rD=n=>{for(let e=n.target;e&&e!==document;e=e.parentNode)for(const t in Yh){const i=e.getAttribute&&e.getAttribute(t);if(i){Yh[t].fire({template:i});return}}};let aD=class{constructor(){this.events={}}_getHandlersByEventName(e){return typeof this.events[e]>"u"&&(this.events[e]=[]),this.events[e]}on(e,t){const i=this._getHandlersByEventName(e);i.includes(t)||i.push(t)}once(e,t){const i=(...s)=>{this.removeListener(e,i),t.apply(this,s)};this.on(e,i)}emit(e,...t){this._getHandlersByEventName(e).forEach(i=>{try{i.apply(this,t)}catch(s){console.error(s)}})}removeListener(e,t){const i=this._getHandlersByEventName(e),s=i.indexOf(t);s>-1&&i.splice(s,1)}removeAllListeners(e){this.events[e]!==void 0&&(this.events[e].length=0)}reset(){this.events={}}};xe.eventEmitter=new aD;const oD=(n,e)=>{xe.eventEmitter&&xe.eventEmitter.on(n,e)},lD=(n,e)=>{xe.eventEmitter&&xe.eventEmitter.once(n,e)},cD=(n,e)=>{if(xe.eventEmitter){if(!n){xe.eventEmitter.reset();return}e?xe.eventEmitter.removeListener(n,e):xe.eventEmitter.removeAllListeners(n)}};var uD=Object.freeze({__proto__:null,argsToParams:QI,bindClickHandler:sD,clickCancel:QC,clickConfirm:kx,clickDeny:WC,enableLoading:ba,fire:ZI,getActions:Qo,getCancelButton:Ra,getCloseButton:Dm,getConfirmButton:xn,getContainer:oi,getDenyButton:br,getFocusableElements:km,getFooter:Ex,getHtmlContainer:Cm,getIcon:Aa,getIconContent:iC,getImage:bx,getInputLabel:nC,getLoader:La,getPopup:qe,getProgressSteps:Im,getTimerLeft:eD,getTimerProgressBar:Cu,getTitle:vx,getValidationMessage:_u,increaseTimer:iD,isDeprecatedParameter:Jx,isLoading:rC,isTimerRunning:nD,isUpdatableParameter:Zx,isValidParameter:Qx,isVisible:XC,mixin:JI,off:cD,on:oD,once:lD,resumeTimer:rT,showLoading:ba,stopTimer:sT,toggleTimer:tD});class dD{constructor(e,t){this.callback=e,this.remaining=t,this.running=!1,this.start()}start(){return this.running||(this.running=!0,this.started=new Date,this.id=setTimeout(this.callback,this.remaining)),this.remaining}stop(){return this.started&&this.running&&(this.running=!1,clearTimeout(this.id),this.remaining-=new Date().getTime()-this.started.getTime()),this.remaining}increase(e){const t=this.running;return t&&this.stop(),this.remaining+=e,t&&this.start(),this.remaining}getTimerLeft(){return this.running&&(this.stop(),this.start()),this.remaining}isRunning(){return this.running}}const aT=["swal-title","swal-html","swal-footer"],fD=n=>{const e=typeof n.template=="string"?document.querySelector(n.template):n.template;if(!e)return{};const t=e.content;return ED(t),Object.assign(hD(t),mD(t),pD(t),gD(t),yD(t),vD(t),bD(t,aT))},hD=n=>{const e={};return Array.from(n.querySelectorAll("swal-param")).forEach(i=>{pr(i,["name","value"]);const s=i.getAttribute("name"),a=i.getAttribute("value");!s||!a||(s in Ds&&typeof Ds[s]=="boolean"?e[s]=a!=="false":s in Ds&&typeof Ds[s]=="object"?e[s]=JSON.parse(a):e[s]=a)}),e},mD=n=>{const e={};return Array.from(n.querySelectorAll("swal-function-param")).forEach(i=>{const s=i.getAttribute("name"),a=i.getAttribute("value");!s||!a||(e[s]=new Function(`return ${a}`)())}),e},pD=n=>{const e={};return Array.from(n.querySelectorAll("swal-button")).forEach(i=>{pr(i,["type","color","aria-label"]);const s=i.getAttribute("type");if(!(!s||!["confirm","cancel","deny"].includes(s))){if(e[`${s}ButtonText`]=i.innerHTML,e[`show${Rm(s)}Button`]=!0,i.hasAttribute("color")){const a=i.getAttribute("color");a!==null&&(e[`${s}ButtonColor`]=a)}if(i.hasAttribute("aria-label")){const a=i.getAttribute("aria-label");a!==null&&(e[`${s}ButtonAriaLabel`]=a)}}}),e},gD=n=>{const e={},t=n.querySelector("swal-image");return t&&(pr(t,["src","width","height","alt"]),t.hasAttribute("src")&&(e.imageUrl=t.getAttribute("src")||void 0),t.hasAttribute("width")&&(e.imageWidth=t.getAttribute("width")||void 0),t.hasAttribute("height")&&(e.imageHeight=t.getAttribute("height")||void 0),t.hasAttribute("alt")&&(e.imageAlt=t.getAttribute("alt")||void 0)),e},yD=n=>{const e={},t=n.querySelector("swal-icon");return t&&(pr(t,["type","color"]),t.hasAttribute("type")&&(e.icon=t.getAttribute("type")),t.hasAttribute("color")&&(e.iconColor=t.getAttribute("color")),e.iconHtml=t.innerHTML),e},vD=n=>{const e={},t=n.querySelector("swal-input");t&&(pr(t,["type","label","placeholder","value"]),e.input=t.getAttribute("type")||"text",t.hasAttribute("label")&&(e.inputLabel=t.getAttribute("label")),t.hasAttribute("placeholder")&&(e.inputPlaceholder=t.getAttribute("placeholder")),t.hasAttribute("value")&&(e.inputValue=t.getAttribute("value")));const i=Array.from(n.querySelectorAll("swal-input-option"));return i.length&&(e.inputOptions={},i.forEach(s=>{pr(s,["value"]);const a=s.getAttribute("value");if(!a)return;const l=s.innerHTML;e.inputOptions[a]=l})),e},bD=(n,e)=>{const t={};for(const i in e){const s=e[i],a=n.querySelector(s);a&&(pr(a,[]),t[s.replace(/^swal-/,"")]=a.innerHTML.trim())}return t},ED=n=>{const e=aT.concat(["swal-param","swal-function-param","swal-button","swal-image","swal-icon","swal-input","swal-input-option"]);Array.from(n.children).forEach(t=>{const i=t.tagName.toLowerCase();e.includes(i)||ai(`Unrecognized element <${i}>`)})},pr=(n,e)=>{Array.from(n.attributes).forEach(t=>{e.indexOf(t.name)===-1&&ai([`Unrecognized attribute "${t.name}" on <${n.tagName.toLowerCase()}>.`,`${e.length?`Allowed attributes are: ${e.join(", ")}`:"To set the value, use HTML within the element."}`])})},oT=10,xD=n=>{var e,t;const i=oi(),s=qe();if(!i||!s)return;typeof n.willOpen=="function"&&n.willOpen(s),(e=xe.eventEmitter)===null||e===void 0||e.emit("willOpen",s);const l=window.getComputedStyle(document.body).overflowY;if(wD(i,s,n),setTimeout(()=>{TD(i,s)},oT),Om()&&(SD(i,n.scrollbarPadding!==void 0?n.scrollbarPadding:!1,l),rI()),!Iu()&&!xe.previousActiveElement&&(xe.previousActiveElement=document.activeElement),typeof n.didOpen=="function"){const c=n.didOpen;setTimeout(()=>c(s))}(t=xe.eventEmitter)===null||t===void 0||t.emit("didOpen",s)},su=n=>{const e=qe();if(!e||n.target!==e)return;const t=oi();t&&(e.removeEventListener("animationend",su),e.removeEventListener("transitionend",su),t.style.overflowY="auto",Yi(t,re["no-transition"]))},TD=(n,e)=>{Sx(e)?(n.style.overflowY="hidden",e.addEventListener("animationend",su),e.addEventListener("transitionend",su)):n.style.overflowY="auto"},SD=(n,e,t)=>{aI(),e&&t!=="hidden"&&hI(t),setTimeout(()=>{n.scrollTop=0})},wD=(n,e,t)=>{var i;(i=t.showClass)!==null&&i!==void 0&&i.backdrop&&Ve(n,t.showClass.backdrop),t.animation?(e.style.setProperty("opacity","0","important"),Ut(e,"grid"),setTimeout(()=>{var s;(s=t.showClass)!==null&&s!==void 0&&s.popup&&Ve(e,t.showClass.popup),e.style.removeProperty("opacity")},oT)):Ut(e,"grid"),Ve([document.documentElement,document.body],re.shown),t.heightAuto&&t.backdrop&&!t.toast&&Ve([document.documentElement,document.body],re["height-auto"])};var Jv={email:(n,e)=>/^[a-zA-Z0-9.+_'-]+@[a-zA-Z0-9.-]+\.[a-zA-Z0-9-]+$/.test(n)?Promise.resolve():Promise.resolve(e||"Invalid email address"),url:(n,e)=>/^https?:\/\/(www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.[a-z]{2,63}\b([-a-zA-Z0-9@:%_+.~#?&/=]*)$/.test(n)?Promise.resolve():Promise.resolve(e||"Invalid URL")};function AD(n){n.inputValidator||(n.input==="email"&&(n.inputValidator=Jv.email),n.input==="url"&&(n.inputValidator=Jv.url))}function RD(n){(!n.target||typeof n.target=="string"&&!document.querySelector(n.target)||typeof n.target!="string"&&!n.target.appendChild)&&(ai('Target parameter is not valid, defaulting to "body"'),n.target="body")}function LD(n){AD(n),n.showLoaderOnConfirm&&!n.preConfirm&&ai(`showLoaderOnConfirm is set to true, but preConfirm is not defined.
showLoaderOnConfirm should be used together with preConfirm, see usage example:
https://sweetalert2.github.io/#ajax-request`),RD(n),typeof n.title=="string"&&(n.title=n.title.split(`
`).join("<br />")),yC(n)}let gn;var bc=new WeakMap;class At{constructor(...e){if(Y_(this,bc,Promise.resolve({isConfirmed:!1,isDenied:!1,isDismissed:!0})),typeof window>"u")return;gn=this;const t=Object.freeze(this.constructor.argsToParams(e));this.params=t,this.isAwaitingPromise=!1,X_(bc,this,this._main(gn.params))}_main(e,t={}){if(eT(Object.assign({},t,e)),xe.currentInstance){const a=va.swalPromiseResolve.get(xe.currentInstance),{isAwaitingPromise:l}=xe.currentInstance;xe.currentInstance._destroy(),l||a({isDismissed:!0}),Om()&&Px()}xe.currentInstance=gn;const i=CD(e,t);LD(i),Object.freeze(i),xe.timeout&&(xe.timeout.stop(),delete xe.timeout),clearTimeout(xe.restoreFocusTimeout);const s=ID(gn);return Dx(gn,i),rt.innerParams.set(gn,i),_D(gn,s,i)}then(e){return Gv(bc,this).then(e)}finally(e){return Gv(bc,this).finally(e)}}const _D=(n,e,t)=>new Promise((i,s)=>{const a=l=>{n.close({isDismissed:!0,dismiss:l,isConfirmed:!1,isDenied:!1})};va.swalPromiseResolve.set(n,i),va.swalPromiseReject.set(n,s),e.confirmButton.onclick=()=>{II(n)},e.denyButton.onclick=()=>{DI(n)},e.cancelButton.onclick=()=>{kI(n,a)},e.closeButton.onclick=()=>{a(_a.close)},zI(t,e,a),ZC(xe,t,a),xI(n,t),xD(t),DD(xe,t,a),kD(e,t),setTimeout(()=>{e.container.scrollTop=0})}),CD=(n,e)=>{const t=fD(n),i=Object.assign({},Ds,e,t,n);return i.showClass=Object.assign({},Ds.showClass,i.showClass),i.hideClass=Object.assign({},Ds.hideClass,i.hideClass),i.animation===!1&&(i.showClass={backdrop:"swal2-noanimation"},i.hideClass={}),i},ID=n=>{const e={popup:qe(),container:oi(),actions:Qo(),confirmButton:xn(),denyButton:br(),cancelButton:Ra(),loader:La(),closeButton:Dm(),validationMessage:_u(),progressSteps:Im()};return rt.domCache.set(n,e),e},DD=(n,e,t)=>{const i=Cu();Jt(i),e.timer&&(n.timeout=new dD(()=>{t("timer"),delete n.timeout},e.timer),e.timerProgressBar&&i&&(Ut(i),Oi(i,e,"timerProgressBar"),setTimeout(()=>{n.timeout&&n.timeout.running&&Pm(e.timer)})))},kD=(n,e)=>{if(!e.toast){if(!Lu(e.allowEnterKey)){yx("allowEnterKey"),n.popup.focus();return}OD(n)||MD(n,e)||Kh(-1,1)}},OD=n=>{const e=Array.from(n.popup.querySelectorAll("[autofocus]"));for(const t of e)if(t instanceof HTMLElement&&Ei(t))return t.focus(),!0;return!1},MD=(n,e)=>e.focusDeny&&Ei(n.denyButton)?(n.denyButton.focus(),!0):e.focusCancel&&Ei(n.cancelButton)?(n.cancelButton.focus(),!0):e.focusConfirm&&Ei(n.confirmButton)?(n.confirmButton.focus(),!0):!1;At.prototype.disableButtons=qx;At.prototype.enableButtons=Vx;At.prototype.getInput=Hx;At.prototype.disableInput=Yx;At.prototype.enableInput=Kx;At.prototype.hideLoading=iu;At.prototype.disableLoading=iu;At.prototype.showValidationMessage=Xx;At.prototype.resetValidationMessage=Wx;At.prototype.close=Is;At.prototype.closePopup=Is;At.prototype.closeModal=Is;At.prototype.closeToast=Is;At.prototype.rejectPromise=Fx;At.prototype.update=tT;At.prototype._destroy=iT;Object.assign(At,uD);Object.keys(GI).forEach(n=>{At[n]=function(...e){if(gn&&gn[n])return gn[n](...e)}});At.DismissReason=_a;At.version="11.26.19";const ru=At;ru.default=ru;typeof document<"u"&&(function(n,e){var t=n.createElement("style");if(n.getElementsByTagName("head")[0].appendChild(t),t.styleSheet)t.styleSheet.disabled||(t.styleSheet.cssText=e);else try{t.innerHTML=e}catch{t.innerText=e}})(document,':root{--swal2-outline: 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-container-padding: 0.625em;--swal2-backdrop: rgba(0, 0, 0, 0.4);--swal2-backdrop-transition: background-color 0.15s;--swal2-width: 32em;--swal2-padding: 0 0 1.25em;--swal2-border: none;--swal2-border-radius: 0.3125rem;--swal2-background: white;--swal2-color: #545454;--swal2-show-animation: swal2-show 0.3s;--swal2-hide-animation: swal2-hide 0.15s forwards;--swal2-icon-zoom: 1;--swal2-icon-animations: true;--swal2-title-padding: 0.8em 1em 0;--swal2-html-container-padding: 1em 1.6em 0.3em;--swal2-input-border: 1px solid #d9d9d9;--swal2-input-border-radius: 0.1875em;--swal2-input-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-background: transparent;--swal2-input-transition: border-color 0.2s, box-shadow 0.2s;--swal2-input-hover-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px transparent;--swal2-input-focus-border: 1px solid #b4dbed;--swal2-input-focus-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.06), 0 0 0 3px rgba(100, 150, 200, 0.5);--swal2-progress-step-background: #add8e6;--swal2-validation-message-background: #f0f0f0;--swal2-validation-message-color: #666;--swal2-footer-border-color: #eee;--swal2-footer-background: transparent;--swal2-footer-color: inherit;--swal2-timer-progress-bar-background: rgba(0, 0, 0, 0.3);--swal2-close-button-position: initial;--swal2-close-button-inset: auto;--swal2-close-button-font-size: 2.5em;--swal2-close-button-color: #ccc;--swal2-close-button-transition: color 0.2s, box-shadow 0.2s;--swal2-close-button-outline: initial;--swal2-close-button-box-shadow: inset 0 0 0 3px transparent;--swal2-close-button-focus-box-shadow: inset var(--swal2-outline);--swal2-close-button-hover-transform: none;--swal2-actions-justify-content: center;--swal2-actions-width: auto;--swal2-actions-margin: 1.25em auto 0;--swal2-actions-padding: 0;--swal2-actions-border-radius: 0;--swal2-actions-background: transparent;--swal2-action-button-transition: background-color 0.2s, box-shadow 0.2s;--swal2-action-button-hover: black 10%;--swal2-action-button-active: black 10%;--swal2-confirm-button-box-shadow: none;--swal2-confirm-button-border-radius: 0.25em;--swal2-confirm-button-background-color: #7066e0;--swal2-confirm-button-color: #fff;--swal2-deny-button-box-shadow: none;--swal2-deny-button-border-radius: 0.25em;--swal2-deny-button-background-color: #dc3741;--swal2-deny-button-color: #fff;--swal2-cancel-button-box-shadow: none;--swal2-cancel-button-border-radius: 0.25em;--swal2-cancel-button-background-color: #6e7881;--swal2-cancel-button-color: #fff;--swal2-toast-show-animation: swal2-toast-show 0.5s;--swal2-toast-hide-animation: swal2-toast-hide 0.1s forwards;--swal2-toast-border: none;--swal2-toast-box-shadow: 0 0 1px hsl(0deg 0% 0% / 0.075), 0 1px 2px hsl(0deg 0% 0% / 0.075), 1px 2px 4px hsl(0deg 0% 0% / 0.075), 1px 3px 8px hsl(0deg 0% 0% / 0.075), 2px 4px 16px hsl(0deg 0% 0% / 0.075)}[data-swal2-theme=dark]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}@media(prefers-color-scheme: dark){[data-swal2-theme=auto]{--swal2-dark-theme-black: #19191a;--swal2-dark-theme-white: #e1e1e1;--swal2-background: var(--swal2-dark-theme-black);--swal2-color: var(--swal2-dark-theme-white);--swal2-footer-border-color: #555;--swal2-input-background: color-mix(in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10%);--swal2-validation-message-background: color-mix( in srgb, var(--swal2-dark-theme-black), var(--swal2-dark-theme-white) 10% );--swal2-validation-message-color: var(--swal2-dark-theme-white);--swal2-timer-progress-bar-background: rgba(255, 255, 255, 0.7)}}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow:hidden}body.swal2-height-auto{height:auto !important}body.swal2-no-backdrop .swal2-container{background-color:rgba(0,0,0,0) !important;pointer-events:none}body.swal2-no-backdrop .swal2-container .swal2-popup{pointer-events:all}body.swal2-no-backdrop .swal2-container .swal2-modal{box-shadow:0 0 10px var(--swal2-backdrop)}body.swal2-toast-shown .swal2-container{box-sizing:border-box;width:360px;max-width:100%;background-color:rgba(0,0,0,0);pointer-events:none}body.swal2-toast-shown .swal2-container.swal2-top{inset:0 auto auto 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-top-end,body.swal2-toast-shown .swal2-container.swal2-top-right{inset:0 0 auto auto}body.swal2-toast-shown .swal2-container.swal2-top-start,body.swal2-toast-shown .swal2-container.swal2-top-left{inset:0 auto auto 0}body.swal2-toast-shown .swal2-container.swal2-center-start,body.swal2-toast-shown .swal2-container.swal2-center-left{inset:50% auto auto 0;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-center{inset:50% auto auto 50%;transform:translate(-50%, -50%)}body.swal2-toast-shown .swal2-container.swal2-center-end,body.swal2-toast-shown .swal2-container.swal2-center-right{inset:50% 0 auto auto;transform:translateY(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-start,body.swal2-toast-shown .swal2-container.swal2-bottom-left{inset:auto auto 0 0}body.swal2-toast-shown .swal2-container.swal2-bottom{inset:auto auto 0 50%;transform:translateX(-50%)}body.swal2-toast-shown .swal2-container.swal2-bottom-end,body.swal2-toast-shown .swal2-container.swal2-bottom-right{inset:auto 0 0 auto}@media print{body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown){overflow-y:scroll !important}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown)>[aria-hidden=true]{display:none}body.swal2-shown:not(.swal2-no-backdrop,.swal2-toast-shown) .swal2-container{position:static !important}}div:where(.swal2-container){display:grid;position:fixed;z-index:1060;inset:0;box-sizing:border-box;grid-template-areas:"top-start     top            top-end" "center-start  center         center-end" "bottom-start  bottom-center  bottom-end";grid-template-rows:minmax(min-content, auto) minmax(min-content, auto) minmax(min-content, auto);height:100%;padding:var(--swal2-container-padding);overflow-x:hidden;transition:var(--swal2-backdrop-transition);-webkit-overflow-scrolling:touch}div:where(.swal2-container).swal2-backdrop-show,div:where(.swal2-container).swal2-noanimation{background:var(--swal2-backdrop)}div:where(.swal2-container).swal2-backdrop-hide{background:rgba(0,0,0,0) !important}div:where(.swal2-container).swal2-top-start,div:where(.swal2-container).swal2-center-start,div:where(.swal2-container).swal2-bottom-start{grid-template-columns:minmax(0, 1fr) auto auto}div:where(.swal2-container).swal2-top,div:where(.swal2-container).swal2-center,div:where(.swal2-container).swal2-bottom{grid-template-columns:auto minmax(0, 1fr) auto}div:where(.swal2-container).swal2-top-end,div:where(.swal2-container).swal2-center-end,div:where(.swal2-container).swal2-bottom-end{grid-template-columns:auto auto minmax(0, 1fr)}div:where(.swal2-container).swal2-top-start>.swal2-popup{align-self:start}div:where(.swal2-container).swal2-top>.swal2-popup{grid-column:2;place-self:start center}div:where(.swal2-container).swal2-top-end>.swal2-popup,div:where(.swal2-container).swal2-top-right>.swal2-popup{grid-column:3;place-self:start end}div:where(.swal2-container).swal2-center-start>.swal2-popup,div:where(.swal2-container).swal2-center-left>.swal2-popup{grid-row:2;align-self:center}div:where(.swal2-container).swal2-center>.swal2-popup{grid-column:2;grid-row:2;place-self:center center}div:where(.swal2-container).swal2-center-end>.swal2-popup,div:where(.swal2-container).swal2-center-right>.swal2-popup{grid-column:3;grid-row:2;place-self:center end}div:where(.swal2-container).swal2-bottom-start>.swal2-popup,div:where(.swal2-container).swal2-bottom-left>.swal2-popup{grid-column:1;grid-row:3;align-self:end}div:where(.swal2-container).swal2-bottom>.swal2-popup{grid-column:2;grid-row:3;place-self:end center}div:where(.swal2-container).swal2-bottom-end>.swal2-popup,div:where(.swal2-container).swal2-bottom-right>.swal2-popup{grid-column:3;grid-row:3;place-self:end end}div:where(.swal2-container).swal2-grow-row>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-column:1/4;width:100%}div:where(.swal2-container).swal2-grow-column>.swal2-popup,div:where(.swal2-container).swal2-grow-fullscreen>.swal2-popup{grid-row:1/4;align-self:stretch}div:where(.swal2-container).swal2-no-transition{transition:none !important}div:where(.swal2-container)[popover]{width:auto;border:0}div:where(.swal2-container) div:where(.swal2-popup){display:none;position:relative;box-sizing:border-box;grid-template-columns:minmax(0, 100%);width:var(--swal2-width);max-width:100%;padding:var(--swal2-padding);border:var(--swal2-border);border-radius:var(--swal2-border-radius);background:var(--swal2-background);color:var(--swal2-color);font-family:inherit;font-size:1rem;container-name:swal2-popup}div:where(.swal2-container) div:where(.swal2-popup):focus{outline:none}div:where(.swal2-container) div:where(.swal2-popup).swal2-loading{overflow-y:hidden}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable{cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-draggable div:where(.swal2-icon){cursor:grab}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging{cursor:grabbing}div:where(.swal2-container) div:where(.swal2-popup).swal2-dragging div:where(.swal2-icon){cursor:grabbing}div:where(.swal2-container) h2:where(.swal2-title){position:relative;max-width:100%;margin:0;padding:var(--swal2-title-padding);color:inherit;font-size:1.875em;font-weight:600;text-align:center;text-transform:none;overflow-wrap:break-word;cursor:initial}div:where(.swal2-container) div:where(.swal2-actions){display:flex;z-index:1;box-sizing:border-box;flex-wrap:wrap;align-items:center;justify-content:var(--swal2-actions-justify-content);width:var(--swal2-actions-width);margin:var(--swal2-actions-margin);padding:var(--swal2-actions-padding);border-radius:var(--swal2-actions-border-radius);background:var(--swal2-actions-background)}div:where(.swal2-container) div:where(.swal2-loader){display:none;align-items:center;justify-content:center;width:2.2em;height:2.2em;margin:0 1.875em;animation:swal2-rotate-loading 1.5s linear 0s infinite normal;border-width:.25em;border-style:solid;border-radius:100%;border-color:#2778c4 rgba(0,0,0,0) #2778c4 rgba(0,0,0,0)}div:where(.swal2-container) button:where(.swal2-styled){margin:.3125em;padding:.625em 1.1em;transition:var(--swal2-action-button-transition);border:none;box-shadow:0 0 0 3px rgba(0,0,0,0);font-weight:500}div:where(.swal2-container) button:where(.swal2-styled):not([disabled]){cursor:pointer}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm){border-radius:var(--swal2-confirm-button-border-radius);background:initial;background-color:var(--swal2-confirm-button-background-color);box-shadow:var(--swal2-confirm-button-box-shadow);color:var(--swal2-confirm-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):hover{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-confirm):active{background-color:color-mix(in srgb, var(--swal2-confirm-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny){border-radius:var(--swal2-deny-button-border-radius);background:initial;background-color:var(--swal2-deny-button-background-color);box-shadow:var(--swal2-deny-button-box-shadow);color:var(--swal2-deny-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):hover{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-deny):active{background-color:color-mix(in srgb, var(--swal2-deny-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel){border-radius:var(--swal2-cancel-button-border-radius);background:initial;background-color:var(--swal2-cancel-button-background-color);box-shadow:var(--swal2-cancel-button-box-shadow);color:var(--swal2-cancel-button-color);font-size:1em}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):hover{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-hover))}div:where(.swal2-container) button:where(.swal2-styled):where(.swal2-cancel):active{background-color:color-mix(in srgb, var(--swal2-cancel-button-background-color), var(--swal2-action-button-active))}div:where(.swal2-container) button:where(.swal2-styled):focus-visible{outline:none;box-shadow:var(--swal2-action-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-styled)[disabled]:not(.swal2-loading){opacity:.4}div:where(.swal2-container) button:where(.swal2-styled)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-footer){margin:1em 0 0;padding:1em 1em 0;border-top:1px solid var(--swal2-footer-border-color);background:var(--swal2-footer-background);color:var(--swal2-footer-color);font-size:1em;text-align:center;cursor:initial}div:where(.swal2-container) .swal2-timer-progress-bar-container{position:absolute;right:0;bottom:0;left:0;grid-column:auto !important;overflow:hidden;border-bottom-right-radius:var(--swal2-border-radius);border-bottom-left-radius:var(--swal2-border-radius)}div:where(.swal2-container) div:where(.swal2-timer-progress-bar){width:100%;height:.25em;background:var(--swal2-timer-progress-bar-background)}div:where(.swal2-container) img:where(.swal2-image){max-width:100%;margin:2em auto 1em;cursor:initial}div:where(.swal2-container) button:where(.swal2-close){position:var(--swal2-close-button-position);inset:var(--swal2-close-button-inset);z-index:2;align-items:center;justify-content:center;width:1.2em;height:1.2em;margin-top:0;margin-right:0;margin-bottom:-1.2em;padding:0;overflow:hidden;transition:var(--swal2-close-button-transition);border:none;border-radius:var(--swal2-border-radius);outline:var(--swal2-close-button-outline);background:rgba(0,0,0,0);color:var(--swal2-close-button-color);font-family:monospace;font-size:var(--swal2-close-button-font-size);cursor:pointer;justify-self:end}div:where(.swal2-container) button:where(.swal2-close):hover{transform:var(--swal2-close-button-hover-transform);background:rgba(0,0,0,0);color:#f27474}div:where(.swal2-container) button:where(.swal2-close):focus-visible{outline:none;box-shadow:var(--swal2-close-button-focus-box-shadow)}div:where(.swal2-container) button:where(.swal2-close)::-moz-focus-inner{border:0}div:where(.swal2-container) div:where(.swal2-html-container){z-index:1;justify-content:center;margin:0;padding:var(--swal2-html-container-padding);overflow:auto;color:inherit;font-size:1.125em;font-weight:normal;line-height:normal;text-align:center;overflow-wrap:break-word;word-break:break-word;cursor:initial}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea),div:where(.swal2-container) select:where(.swal2-select),div:where(.swal2-container) div:where(.swal2-radio),div:where(.swal2-container) label:where(.swal2-checkbox){margin:1em 2em 3px}div:where(.swal2-container) input:where(.swal2-input),div:where(.swal2-container) input:where(.swal2-file),div:where(.swal2-container) textarea:where(.swal2-textarea){box-sizing:border-box;width:auto;transition:var(--swal2-input-transition);border:var(--swal2-input-border);border-radius:var(--swal2-input-border-radius);background:var(--swal2-input-background);box-shadow:var(--swal2-input-box-shadow);color:inherit;font-size:1.125em}div:where(.swal2-container) input:where(.swal2-input).swal2-inputerror,div:where(.swal2-container) input:where(.swal2-file).swal2-inputerror,div:where(.swal2-container) textarea:where(.swal2-textarea).swal2-inputerror{border-color:#f27474 !important;box-shadow:0 0 2px #f27474 !important}div:where(.swal2-container) input:where(.swal2-input):hover,div:where(.swal2-container) input:where(.swal2-file):hover,div:where(.swal2-container) textarea:where(.swal2-textarea):hover{box-shadow:var(--swal2-input-hover-box-shadow)}div:where(.swal2-container) input:where(.swal2-input):focus,div:where(.swal2-container) input:where(.swal2-file):focus,div:where(.swal2-container) textarea:where(.swal2-textarea):focus{border:var(--swal2-input-focus-border);outline:none;box-shadow:var(--swal2-input-focus-box-shadow)}div:where(.swal2-container) input:where(.swal2-input)::placeholder,div:where(.swal2-container) input:where(.swal2-file)::placeholder,div:where(.swal2-container) textarea:where(.swal2-textarea)::placeholder{color:#ccc}div:where(.swal2-container) .swal2-range{margin:1em 2em 3px;background:var(--swal2-background)}div:where(.swal2-container) .swal2-range input{width:80%}div:where(.swal2-container) .swal2-range output{width:20%;color:inherit;font-weight:600;text-align:center}div:where(.swal2-container) .swal2-range input,div:where(.swal2-container) .swal2-range output{height:2.625em;padding:0;font-size:1.125em;line-height:2.625em}div:where(.swal2-container) .swal2-input{height:2.625em;padding:0 .75em}div:where(.swal2-container) .swal2-file{width:75%;margin-right:auto;margin-left:auto;background:var(--swal2-input-background);font-size:1.125em}div:where(.swal2-container) .swal2-textarea{height:6.75em;padding:.75em}div:where(.swal2-container) .swal2-select{min-width:50%;max-width:100%;padding:.375em .625em;background:var(--swal2-input-background);color:inherit;font-size:1.125em}div:where(.swal2-container) .swal2-radio,div:where(.swal2-container) .swal2-checkbox{align-items:center;justify-content:center;background:var(--swal2-background);color:inherit}div:where(.swal2-container) .swal2-radio label,div:where(.swal2-container) .swal2-checkbox label{margin:0 .6em;font-size:1.125em}div:where(.swal2-container) .swal2-radio input,div:where(.swal2-container) .swal2-checkbox input{flex-shrink:0;margin:0 .4em}div:where(.swal2-container) label:where(.swal2-input-label){display:flex;justify-content:center;margin:1em auto 0}div:where(.swal2-container) div:where(.swal2-validation-message){align-items:center;justify-content:center;margin:1em 0 0;padding:.625em;overflow:hidden;background:var(--swal2-validation-message-background);color:var(--swal2-validation-message-color);font-size:1em;font-weight:300}div:where(.swal2-container) div:where(.swal2-validation-message)::before{content:"!";display:inline-block;width:1.5em;min-width:1.5em;height:1.5em;margin:0 .625em;border-radius:50%;background-color:#f27474;color:#fff;font-weight:600;line-height:1.5em;text-align:center}div:where(.swal2-container) .swal2-progress-steps{flex-wrap:wrap;align-items:center;max-width:100%;margin:1.25em auto;padding:0;background:rgba(0,0,0,0);font-weight:600}div:where(.swal2-container) .swal2-progress-steps li{display:inline-block;position:relative}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step{z-index:20;flex-shrink:0;width:2em;height:2em;border-radius:2em;background:#2778c4;color:#fff;line-height:2em;text-align:center}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step{background:#2778c4}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step{background:var(--swal2-progress-step-background);color:#fff}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step.swal2-active-progress-step~.swal2-progress-step-line{background:var(--swal2-progress-step-background)}div:where(.swal2-container) .swal2-progress-steps .swal2-progress-step-line{z-index:10;flex-shrink:0;width:2.5em;height:.4em;margin:0 -1px;background:#2778c4}div:where(.swal2-icon){position:relative;box-sizing:content-box;justify-content:center;width:5em;height:5em;margin:2.5em auto .6em;zoom:var(--swal2-icon-zoom);border:.25em solid rgba(0,0,0,0);border-radius:50%;border-color:#000;font-family:inherit;line-height:5em;cursor:default;user-select:none}div:where(.swal2-icon) .swal2-icon-content{display:flex;align-items:center;font-size:3.75em}div:where(.swal2-icon).swal2-error{border-color:#f27474;color:#f27474}div:where(.swal2-icon).swal2-error .swal2-x-mark{position:relative;flex-grow:1}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line]{display:block;position:absolute;top:2.3125em;width:2.9375em;height:.3125em;border-radius:.125em;background-color:#f27474}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=left]{left:1.0625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-error [class^=swal2-x-mark-line][class$=right]{right:1em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-error.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-error.swal2-icon-show .swal2-x-mark{animation:swal2-animate-error-x-mark .5s}}div:where(.swal2-icon).swal2-warning{border-color:#f8bb86;color:#f8bb86}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-warning.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-warning.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .5s}}div:where(.swal2-icon).swal2-info{border-color:#3fc3ee;color:#3fc3ee}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-info.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-info.swal2-icon-show .swal2-icon-content{animation:swal2-animate-i-mark .8s}}div:where(.swal2-icon).swal2-question{border-color:#87adbd;color:#87adbd}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-question.swal2-icon-show{animation:swal2-animate-error-icon .5s}div:where(.swal2-icon).swal2-question.swal2-icon-show .swal2-icon-content{animation:swal2-animate-question-mark .8s}}div:where(.swal2-icon).swal2-success{border-color:#a5dc86;color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line]{position:absolute;width:3.75em;height:7.5em;border-radius:50%}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.4375em;left:-2.0635em;transform:rotate(-45deg);transform-origin:3.75em 3.75em;border-radius:7.5em 0 0 7.5em}div:where(.swal2-icon).swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.6875em;left:1.875em;transform:rotate(-45deg);transform-origin:0 3.75em;border-radius:0 7.5em 7.5em 0}div:where(.swal2-icon).swal2-success .swal2-success-ring{position:absolute;z-index:2;top:-0.25em;left:-0.25em;box-sizing:content-box;width:100%;height:100%;border:.25em solid rgba(165,220,134,.3);border-radius:50%}div:where(.swal2-icon).swal2-success .swal2-success-fix{position:absolute;z-index:1;top:.5em;left:1.625em;width:.4375em;height:5.625em;transform:rotate(-45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line]{display:block;position:absolute;z-index:2;height:.3125em;border-radius:.125em;background-color:#a5dc86}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=tip]{top:2.875em;left:.8125em;width:1.5625em;transform:rotate(45deg)}div:where(.swal2-icon).swal2-success [class^=swal2-success-line][class$=long]{top:2.375em;right:.5em;width:2.9375em;transform:rotate(-45deg)}@container swal2-popup style(--swal2-icon-animations:true){div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-animate-success-line-tip .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-animate-success-line-long .75s}div:where(.swal2-icon).swal2-success.swal2-icon-show .swal2-success-circular-line-right{animation:swal2-rotate-success-circular-line 4.25s ease-in}}[class^=swal2]{-webkit-tap-highlight-color:rgba(0,0,0,0)}.swal2-show{animation:var(--swal2-show-animation)}.swal2-hide{animation:var(--swal2-hide-animation)}.swal2-noanimation{transition:none}.swal2-scrollbar-measure{position:absolute;top:-9999px;width:50px;height:50px;overflow:scroll}.swal2-rtl .swal2-close{margin-right:initial;margin-left:0}.swal2-rtl .swal2-timer-progress-bar{right:0;left:auto}.swal2-toast{box-sizing:border-box;grid-column:1/4 !important;grid-row:1/4 !important;grid-template-columns:min-content auto min-content;padding:1em;overflow-y:hidden;border:var(--swal2-toast-border);background:var(--swal2-background);box-shadow:var(--swal2-toast-box-shadow);pointer-events:all}.swal2-toast>*{grid-column:2}.swal2-toast h2:where(.swal2-title){margin:.5em 1em;padding:0;font-size:1em;text-align:initial}.swal2-toast .swal2-loading{justify-content:center}.swal2-toast input:where(.swal2-input){height:2em;margin:.5em;font-size:1em}.swal2-toast .swal2-validation-message{font-size:1em}.swal2-toast div:where(.swal2-footer){margin:.5em 0 0;padding:.5em 0 0;font-size:.8em}.swal2-toast button:where(.swal2-close){grid-column:3/3;grid-row:1/99;align-self:center;width:.8em;height:.8em;margin:0;font-size:2em}.swal2-toast div:where(.swal2-html-container){margin:.5em 1em;padding:0;overflow:initial;font-size:1em;text-align:initial}.swal2-toast div:where(.swal2-html-container):empty{padding:0}.swal2-toast .swal2-loader{grid-column:1;grid-row:1/99;align-self:center;width:2em;height:2em;margin:.25em}.swal2-toast .swal2-icon{grid-column:1;grid-row:1/99;align-self:center;width:2em;min-width:2em;height:2em;margin:0 .5em 0 0}.swal2-toast .swal2-icon .swal2-icon-content{display:flex;align-items:center;font-size:1.8em;font-weight:bold}.swal2-toast .swal2-icon.swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line]{top:.875em;width:1.375em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=left]{left:.3125em}.swal2-toast .swal2-icon.swal2-error [class^=swal2-x-mark-line][class$=right]{right:.3125em}.swal2-toast div:where(.swal2-actions){justify-content:flex-start;height:auto;margin:0;margin-top:.5em;padding:0 .5em}.swal2-toast button:where(.swal2-styled){margin:.25em .5em;padding:.4em .6em;font-size:1em}.swal2-toast .swal2-success{border-color:#a5dc86}.swal2-toast .swal2-success [class^=swal2-success-circular-line]{position:absolute;width:1.6em;height:3em;border-radius:50%}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=left]{top:-0.8em;left:-0.5em;transform:rotate(-45deg);transform-origin:2em 2em;border-radius:4em 0 0 4em}.swal2-toast .swal2-success [class^=swal2-success-circular-line][class$=right]{top:-0.25em;left:.9375em;transform-origin:0 1.5em;border-radius:0 4em 4em 0}.swal2-toast .swal2-success .swal2-success-ring{width:2em;height:2em}.swal2-toast .swal2-success .swal2-success-fix{top:0;left:.4375em;width:.4375em;height:2.6875em}.swal2-toast .swal2-success [class^=swal2-success-line]{height:.3125em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=tip]{top:1.125em;left:.1875em;width:.75em}.swal2-toast .swal2-success [class^=swal2-success-line][class$=long]{top:.9375em;right:.1875em;width:1.375em}@container swal2-popup style(--swal2-icon-animations:true){.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-tip{animation:swal2-toast-animate-success-line-tip .75s}.swal2-toast .swal2-success.swal2-icon-show .swal2-success-line-long{animation:swal2-toast-animate-success-line-long .75s}}.swal2-toast.swal2-show{animation:var(--swal2-toast-show-animation)}.swal2-toast.swal2-hide{animation:var(--swal2-toast-hide-animation)}@keyframes swal2-show{0%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}100%{transform:translate3d(0, 0, 0) scale(1);opacity:1}}@keyframes swal2-hide{0%{transform:translate3d(0, 0, 0) scale(1);opacity:1}100%{transform:translate3d(0, -50px, 0) scale(0.9);opacity:0}}@keyframes swal2-animate-success-line-tip{0%{top:1.1875em;left:.0625em;width:0}54%{top:1.0625em;left:.125em;width:0}70%{top:2.1875em;left:-0.375em;width:3.125em}84%{top:3em;left:1.3125em;width:1.0625em}100%{top:2.8125em;left:.8125em;width:1.5625em}}@keyframes swal2-animate-success-line-long{0%{top:3.375em;right:2.875em;width:0}65%{top:3.375em;right:2.875em;width:0}84%{top:2.1875em;right:0;width:3.4375em}100%{top:2.375em;right:.5em;width:2.9375em}}@keyframes swal2-rotate-success-circular-line{0%{transform:rotate(-45deg)}5%{transform:rotate(-45deg)}12%{transform:rotate(-405deg)}100%{transform:rotate(-405deg)}}@keyframes swal2-animate-error-x-mark{0%{margin-top:1.625em;transform:scale(0.4);opacity:0}50%{margin-top:1.625em;transform:scale(0.4);opacity:0}80%{margin-top:-0.375em;transform:scale(1.15)}100%{margin-top:0;transform:scale(1);opacity:1}}@keyframes swal2-animate-error-icon{0%{transform:rotateX(100deg);opacity:0}100%{transform:rotateX(0deg);opacity:1}}@keyframes swal2-rotate-loading{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}@keyframes swal2-animate-question-mark{0%{transform:rotateY(-360deg)}100%{transform:rotateY(0)}}@keyframes swal2-animate-i-mark{0%{transform:rotateZ(45deg);opacity:0}25%{transform:rotateZ(-25deg);opacity:.4}50%{transform:rotateZ(15deg);opacity:.8}75%{transform:rotateZ(-5deg);opacity:1}100%{transform:rotateX(0);opacity:1}}@keyframes swal2-toast-show{0%{transform:translateY(-0.625em) rotateZ(2deg)}33%{transform:translateY(0) rotateZ(-2deg)}66%{transform:translateY(0.3125em) rotateZ(2deg)}100%{transform:translateY(0) rotateZ(0deg)}}@keyframes swal2-toast-hide{100%{transform:rotateZ(1deg);opacity:0}}@keyframes swal2-toast-animate-success-line-tip{0%{top:.5625em;left:.0625em;width:0}54%{top:.125em;left:.125em;width:0}70%{top:.625em;left:-0.25em;width:1.625em}84%{top:1.0625em;left:.75em;width:.5em}100%{top:1.125em;left:.1875em;width:.75em}}@keyframes swal2-toast-animate-success-line-long{0%{top:1.625em;right:1.375em;width:0}65%{top:1.25em;right:.9375em;width:0}84%{top:.9375em;right:0;width:1.125em}100%{top:.9375em;right:.1875em;width:1.375em}}');const PD=()=>{const n=yr(),[e,t]=Y.useState([]);if(Y.useEffect(()=>{const i=JSON.parse(localStorage.getItem("recent_movies"))||[];t(i)},[]),e.length!==0)return U.jsxs("div",{className:"recent-container my-4",children:[U.jsxs("div",{className:"flex flex-row items-center justify-between gap-2 mb-4",children:[U.jsx("h2",{className:"text-2xl font-bold",children:"PHIM VA XEM"}),U.jsxs("button",{onClick:()=>{ru.fire({title:"Thng bo",text:"Bn c mun xo tt c phim va xem khng?",icon:"question",confirmButtonText:"C",cancelButtonText:"Khng",showCancelButton:!0,reverseButtons:!1,buttonsStyling:!1,customClass:{cancelButton:"cursor-pointer w-90 w-full rounded-xl bg-gray-200 border border-gray-300 py-2 px-3",confirmButton:"cursor-pointer w-90 w-full rounded-xl text-white bg-accent py-2 px-3",title:"pt-3"}}).then(i=>{i.isConfirmed&&(localStorage.removeItem("recent_movies"),t([]))})},className:"text-red-500 font-bold flex flex-row items-center gap-2",children:[U.jsx(I_,{size:20,strokeWidth:1.5}),U.jsx("span",{children:"Xa lch s"})]})]}),U.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 xl:grid-cols-6 gap-4",children:e.map(i=>U.jsxs("div",{className:"group relative rounded-xl overflow-hidden cursor-pointer hover:scale-105 transition-transform duration-300",onClick:()=>{n(`/movies/${i.slug}`)},children:[U.jsx("div",{className:"aspect-[2/3]",children:U.jsx(Am,{src:i.thumb_url,alt:i.name,className:"w-full h-full object-cover rounded-xl shadow-md"})}),U.jsxs("div",{className:"mt-3 text-left",children:[U.jsx("h5",{className:"text-mg font-bold text-base-content line-clamp-1 group-hover:text-yellow-400 transition-colors",children:i.name}),U.jsx("p",{className:"text-sm text-gray-400 line-clamp-1",children:i.origin_name})]})]},i.slug))})]})},ND=()=>U.jsx(U.Fragment,{children:U.jsx(PD,{})});(function(n,e,t,i,s,a,l,c){var f=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{},d=typeof f[i]=="function"&&f[i],h=d.i||{},p=d.cache||{},g=typeof or<"u"&&typeof or.require=="function"&&or.require.bind(or);function b(x,w){if(!p[x]){if(!n[x]){if(s[x])return s[x];var S=typeof f[i]=="function"&&f[i];if(!w&&S)return S(x,!0);if(d)return d(x,!0);if(g&&typeof x=="string")return g(x);var A=Error("Cannot find module '"+x+"'");throw A.code="MODULE_NOT_FOUND",A}I.resolve=function(P){var C=n[x][1][P];return C??P},I.cache={};var _=p[x]=new b.Module(x);n[x][0].call(_.exports,I,_,_.exports,f)}return p[x].exports;function I(P){var C=I.resolve(P);return C===!1?{}:b(C)}}b.isParcelRequire=!0,b.Module=function(x){this.id=x,this.bundle=b,this.require=g,this.exports={}},b.modules=n,b.cache=p,b.parent=d,b.distDir=void 0,b.publicUrl=void 0,b.devServer=void 0,b.i=h,b.register=function(x,w){n[x]=[function(S,A){A.exports=w},{}]},Object.defineProperty(b,"root",{get:function(){return f[i]}}),f[i]=b;for(var y=0;y<e.length;y++)b(e[y]);{var T=b(t);typeof US=="object"&&typeof or<"u"?or.exports=T:typeof define=="function"&&define.amd&&define(function(){return T})}})({esqvp:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t);var a=n("bundle-text:./style/index.less"),l=s.interopDefault(a),c=n("option-validator"),f=s.interopDefault(c),d=n("../package.json"),h=n("./config"),p=s.interopDefault(h),g=n("./contextmenu"),b=s.interopDefault(g),y=n("./control"),T=s.interopDefault(y),x=n("./events"),w=s.interopDefault(x),S=n("./hotkey"),A=s.interopDefault(S),_=n("./i18n"),I=s.interopDefault(_),P=n("./icons"),C=s.interopDefault(P),O=n("./info"),B=s.interopDefault(O),N=n("./layer"),V=s.interopDefault(N),ee=n("./loading"),z=s.interopDefault(ee),H=n("./mask"),W=s.interopDefault(H),k=n("./notice"),G=s.interopDefault(k),K=n("./player"),oe=s.interopDefault(K),fe=n("./plugins"),M=s.interopDefault(fe),$=n("./scheme"),se=s.interopDefault($),de=n("./setting"),he=s.interopDefault(de),me=n("./storage"),Se=s.interopDefault(me),Oe=n("./subtitle"),ke=s.interopDefault(Oe),pt=n("./template"),It=s.interopDefault(pt),Xt=n("./utils"),Ni=n("./utils/emitter"),Pt=s.interopDefault(Ni);let on=0,Le=[];class ye extends Pt.default{constructor(gt,yt){if(super(),!Xt.isBrowser)throw Error("Artplayer can only be used in the browser environment");this.id=++on;let $t=Xt.mergeDeep(ye.option,gt);if($t.container=gt.container,this.option=(0,f.default)($t,se.default),this.isLock=!1,this.isReady=!1,this.isFocus=!1,this.isInput=!1,this.isRotate=!1,this.isDestroy=!1,this.template=new It.default(this),this.events=new w.default(this),this.storage=new Se.default(this),this.icons=new C.default(this),this.i18n=new I.default(this),this.notice=new G.default(this),this.player=new oe.default(this),this.layers=new V.default(this),this.controls=new T.default(this),this.contextmenu=new b.default(this),this.subtitle=new ke.default(this),this.info=new B.default(this),this.loading=new z.default(this),this.hotkey=new A.default(this),this.mask=new W.default(this),this.setting=new he.default(this),this.plugins=new M.default(this),typeof yt=="function"&&this.on("ready",()=>yt.call(this,this)),ye.DEBUG){let Wt=ei=>console.log(`[ART.${this.id}] -> ${ei}`);Wt(`Version@${ye.version}`);for(let ei=0;ei<p.default.events.length;ei++)this.on(`video:${p.default.events[ei]}`,ut=>Wt(`Event@${ut.type}`))}Le.push(this)}static get instances(){return Le}static get version(){return d.version}static get config(){return p.default}static get utils(){return Xt}static get scheme(){return se.default}static get Emitter(){return Pt.default}static get validator(){return f.default}static get kindOf(){return f.default.kindOf}static get html(){return It.default.html}static get option(){return{id:"",container:"#artplayer",url:"",poster:"",type:"",theme:"#f00",volume:.7,isLive:!1,muted:!1,autoplay:!1,autoSize:!1,autoMini:!1,loop:!1,flip:!1,playbackRate:!1,aspectRatio:!1,screenshot:!1,setting:!1,hotkey:!0,pip:!1,mutex:!0,backdrop:!0,fullscreen:!1,fullscreenWeb:!1,subtitleOffset:!1,miniProgressBar:!1,useSSR:!1,playsInline:!0,lock:!1,gesture:!0,fastForward:!1,autoPlayback:!1,autoOrientation:!1,airplay:!1,proxy:void 0,layers:[],contextmenu:[],controls:[],settings:[],quality:[],highlight:[],plugins:[],thumbnails:{url:"",number:60,column:10,width:0,height:0,scale:1},subtitle:{url:"",type:"",style:{},name:"",escape:!0,encoding:"utf-8",onVttLoad:gt=>gt},moreVideoAttr:{controls:!1,preload:Xt.isSafari?"auto":"metadata"},i18n:{},icons:{},cssVar:{},customType:{},lang:navigator?.language.toLowerCase()}}get proxy(){return this.events.proxy}get query(){return this.template.query}get video(){return this.template.$video}destroy(gt=!0){ye.REMOVE_SRC_WHEN_DESTROY&&this.video.removeAttribute("src"),this.events.destroy(),this.template.destroy(gt),Le.splice(Le.indexOf(this),1),this.isDestroy=!0,this.emit("destroy")}}t.default=ye,ye.STYLE=l.default,ye.DEBUG=!1,ye.CONTEXTMENU=!0,ye.NOTICE_TIME=2e3,ye.SETTING_WIDTH=250,ye.SETTING_ITEM_WIDTH=200,ye.SETTING_ITEM_HEIGHT=35,ye.RESIZE_TIME=200,ye.SCROLL_TIME=200,ye.SCROLL_GAP=50,ye.AUTO_PLAYBACK_MAX=10,ye.AUTO_PLAYBACK_MIN=5,ye.AUTO_PLAYBACK_TIMEOUT=3e3,ye.RECONNECT_TIME_MAX=5,ye.RECONNECT_SLEEP_TIME=1e3,ye.CONTROL_HIDE_TIME=3e3,ye.DBCLICK_TIME=300,ye.DBCLICK_FULLSCREEN=!0,ye.MOBILE_DBCLICK_PLAY=!0,ye.MOBILE_CLICK_PLAY=!1,ye.AUTO_ORIENTATION_TIME=200,ye.INFO_LOOP_TIME=1e3,ye.FAST_FORWARD_VALUE=3,ye.FAST_FORWARD_TIME=1e3,ye.TOUCH_MOVE_RATIO=.5,ye.VOLUME_STEP=.1,ye.SEEK_STEP=5,ye.PLAYBACK_RATE=[.5,.75,1,1.25,1.5,2],ye.ASPECT_RATIO=["default","4:3","16:9"],ye.FLIP=["normal","horizontal","vertical"],ye.FULLSCREEN_WEB_IN_BODY=!1,ye.LOG_VERSION=!0,ye.USE_RAF=!1,ye.REMOVE_SRC_WHEN_DESTROY=!0,Xt.isBrowser&&(window.Artplayer=ye,Xt.setStyleText("artplayer-style",l.default),setTimeout(()=>{ye.LOG_VERSION&&console.log(`%c ArtPlayer %c ${ye.version} %c https://artplayer.org`,"color: #fff; background: #5f5f5f","color: #fff; background: #4bc729","")},100))},{"bundle-text:./style/index.less":"2wh8D","option-validator":"g7VGh","../package.json":"lh3R5","./config":"eJfh8","./contextmenu":"9zso8","./control":"dp1yk","./events":"jmVSD","./hotkey":"dswts","./i18n":"d9ktO","./icons":"fFHY0","./info":"kZ0F8","./layer":"j9lbi","./loading":"bMjWd","./mask":"k1nkQ","./notice":"fPVaU","./player":"uR0Sw","./plugins":"cjxJL","./scheme":"biLjm","./setting":"bwLGT","./storage":"kwqbK","./subtitle":"k5613","./template":"fwOA1","./utils":"aBlEo","./utils/emitter":"4NM7P","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"2wh8D":[function(n,e,t,i){e.exports='.art-video-player{--art-theme:red;--art-font-color:#fff;--art-background-color:#000;--art-text-shadow-color:#00000080;--art-transition-duration:.2s;--art-padding:10px;--art-border-radius:3px;--art-progress-height:6px;--art-progress-color:#ffffff40;--art-hover-color:#ffffff40;--art-loaded-color:#ffffff40;--art-state-size:80px;--art-state-opacity:.8;--art-bottom-height:100px;--art-bottom-offset:20px;--art-bottom-gap:5px;--art-highlight-width:8px;--art-highlight-color:#ffffff80;--art-control-height:46px;--art-control-opacity:.75;--art-control-icon-size:36px;--art-control-icon-scale:1.1;--art-volume-height:120px;--art-volume-handle-size:14px;--art-lock-size:36px;--art-indicator-scale:0;--art-indicator-size:16px;--art-fullscreen-web-index:9999;--art-settings-icon-size:24px;--art-settings-max-height:300px;--art-selector-max-height:300px;--art-contextmenus-min-width:250px;--art-subtitle-font-size:20px;--art-subtitle-gap:5px;--art-subtitle-bottom:15px;--art-subtitle-border:#000;--art-widget-background:#000000d9;--art-tip-background:#000000b3;--art-scrollbar-size:4px;--art-scrollbar-background:#ffffff40;--art-scrollbar-background-hover:#ffffff80;--art-mini-progress-height:2px}.art-bg-cover{background-position:50%;background-repeat:no-repeat;background-size:cover}.art-bottom-gradient{background-image:linear-gradient(#0000,#0006,#000);background-position:bottom;background-repeat:repeat-x}.art-backdrop-filter{backdrop-filter:saturate(180%)blur(20px);background-color:#000000bf!important}.art-truncate{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.art-video-player{zoom:1;text-align:left;user-select:none;box-sizing:border-box;width:100%;height:100%;color:var(--art-font-color);background-color:var(--art-background-color);text-shadow:0 0 2px var(--art-text-shadow-color);-webkit-tap-highlight-color:#0000;-ms-touch-action:manipulation;touch-action:manipulation;-ms-high-contrast-adjust:none;direction:ltr;outline:0;margin:0 auto;padding:0;font-family:PingFang SC,Helvetica Neue,Microsoft YaHei,Roboto,Arial,sans-serif;font-size:14px;line-height:1.3;position:relative}.art-video-player *,.art-video-player :before,.art-video-player :after{box-sizing:border-box}.art-video-player ::-webkit-scrollbar{width:var(--art-scrollbar-size);height:var(--art-scrollbar-size)}.art-video-player ::-webkit-scrollbar-thumb{background-color:var(--art-scrollbar-background)}.art-video-player ::-webkit-scrollbar-thumb:hover{background-color:var(--art-scrollbar-background-hover)}.art-video-player img{vertical-align:top;max-width:100%}.art-video-player svg{fill:var(--art-font-color)}.art-video-player a{color:var(--art-font-color);text-decoration:none}.art-icon{justify-content:center;align-items:center;line-height:1;display:flex}.art-video-player.art-backdrop .art-contextmenus,.art-video-player.art-backdrop .art-info,.art-video-player.art-backdrop .art-settings,.art-video-player.art-backdrop .art-layer-auto-playback,.art-video-player.art-backdrop .art-selector-list,.art-video-player.art-backdrop .art-volume-inner{backdrop-filter:saturate(180%)blur(20px);background-color:#000000bf!important}.art-video{z-index:10;cursor:pointer;width:100%;height:100%;position:absolute;inset:0}.art-poster{z-index:11;pointer-events:none;background-position:50%;background-repeat:no-repeat;background-size:cover;width:100%;height:100%;position:absolute;inset:0}.art-video-player .art-subtitle{z-index:20;text-align:center;pointer-events:none;justify-content:center;align-items:center;gap:var(--art-subtitle-gap);width:100%;bottom:var(--art-subtitle-bottom);font-size:var(--art-subtitle-font-size);transition:bottom var(--art-transition-duration)ease;text-shadow:var(--art-subtitle-border)1px 0 1px,var(--art-subtitle-border)0 1px 1px,var(--art-subtitle-border)-1px 0 1px,var(--art-subtitle-border)0 -1px 1px,var(--art-subtitle-border)1px 1px 1px,var(--art-subtitle-border)-1px -1px 1px,var(--art-subtitle-border)1px -1px 1px,var(--art-subtitle-border)-1px 1px 1px;flex-direction:column;padding:0 5%;display:none;position:absolute}.art-video-player.art-subtitle-show .art-subtitle{display:flex}.art-video-player.art-control-show .art-subtitle{bottom:calc(var(--art-control-height) + var(--art-subtitle-bottom))}.art-danmuku{z-index:30;pointer-events:none;width:100%;height:100%;position:absolute;inset:0;overflow:hidden}.art-video-player .art-layers{z-index:40;pointer-events:none;width:100%;height:100%;display:none;position:absolute;inset:0}.art-video-player .art-layers .art-layer{pointer-events:auto}.art-video-player.art-layer-show .art-layers{display:flex}.art-video-player .art-mask{z-index:50;pointer-events:none;justify-content:center;align-items:center;width:100%;height:100%;display:flex;position:absolute;inset:0}.art-video-player .art-mask .art-state{opacity:0;width:var(--art-state-size);height:var(--art-state-size);transition:all var(--art-transition-duration)ease;justify-content:center;align-items:center;display:flex;transform:scale(2)}.art-video-player.art-mask-show .art-state{cursor:pointer;pointer-events:auto;opacity:var(--art-state-opacity);transform:scale(1)}.art-video-player.art-loading-show .art-state{display:none}.art-video-player .art-loading{z-index:70;pointer-events:none;justify-content:center;align-items:center;width:100%;height:100%;display:none;position:absolute;inset:0}.art-video-player.art-loading-show .art-loading{display:flex}.art-video-player .art-bottom{z-index:60;opacity:0;pointer-events:none;width:100%;height:100%;padding:0 var(--art-padding);transition:all var(--art-transition-duration)ease;background-size:100% var(--art-bottom-height);background-image:linear-gradient(#0000,#0006,#000);background-position:bottom;background-repeat:repeat-x;flex-direction:column;justify-content:flex-end;display:flex;position:absolute;inset:0;overflow:hidden}.art-video-player .art-bottom .art-controls,.art-video-player .art-bottom .art-progress{transform:translateY(var(--art-bottom-offset));transition:transform var(--art-transition-duration)ease}.art-video-player.art-control-show .art-bottom,.art-video-player.art-hover .art-bottom{opacity:1}.art-video-player.art-control-show .art-bottom .art-controls,.art-video-player.art-hover .art-bottom .art-controls,.art-video-player.art-control-show .art-bottom .art-progress,.art-video-player.art-hover .art-bottom .art-progress{transform:translateY(0)}.art-bottom .art-progress{z-index:0;pointer-events:auto;padding-bottom:var(--art-bottom-gap);position:relative}.art-bottom .art-progress .art-control-progress{cursor:pointer;height:var(--art-progress-height);justify-content:center;align-items:center;display:flex;position:relative}.art-bottom .art-progress .art-control-progress .art-control-progress-inner{width:100%;height:50%;transition:height var(--art-transition-duration)ease;background-color:var(--art-progress-color);align-items:center;display:flex;position:relative}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-hover{z-index:0;background-color:var(--art-hover-color);width:0%;height:100%;position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-loaded{z-index:10;background-color:var(--art-loaded-color);width:0%;height:100%;position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-played{z-index:20;background-color:var(--art-theme);width:0%;height:100%;position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-highlight{z-index:30;pointer-events:none;width:100%;height:100%;position:absolute;inset:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-highlight span{z-index:0;pointer-events:auto;width:100%;height:100%;transform:translateX(calc(var(--art-highlight-width)/-2));background-color:var(--art-highlight-color);position:absolute;inset:0 auto 0 0;width:var(--art-highlight-width)!important}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator{z-index:40;width:var(--art-indicator-size);height:var(--art-indicator-size);transform:scale(var(--art-indicator-scale));margin-left:calc(var(--art-indicator-size)/-2);transition:transform var(--art-transition-duration)ease;border-radius:50%;justify-content:center;align-items:center;display:flex;position:absolute;left:0}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator .art-icon{pointer-events:none;width:100%;height:100%}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator:hover{transform:scale(1.2)!important}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator:active{transform:scale(1)!important}.art-bottom .art-progress .art-control-progress .art-control-progress-inner .art-progress-tip{z-index:50;border-radius:var(--art-border-radius);white-space:nowrap;background-color:var(--art-tip-background);padding:3px 5px;font-size:12px;line-height:1;display:none;position:absolute;top:-25px;left:0}.art-bottom .art-progress .art-control-progress:hover .art-control-progress-inner{height:100%}.art-bottom .art-progress .art-control-thumbnails{bottom:calc(var(--art-bottom-gap) + 10px);border-radius:var(--art-border-radius);pointer-events:none;background-color:var(--art-widget-background);display:none;position:absolute;left:0;box-shadow:0 1px 3px #0003,0 1px 2px -1px #0003}.art-bottom:hover .art-progress .art-control-progress .art-control-progress-inner .art-progress-indicator{transform:scale(1)}.art-controls{z-index:10;pointer-events:auto;height:var(--art-control-height);justify-content:space-between;align-items:center;display:flex;position:relative}.art-controls .art-controls-left,.art-controls .art-controls-right{height:100%;display:flex}.art-controls .art-controls-center{flex:1;justify-content:center;align-items:center;height:100%;padding:0 10px;display:none}.art-controls .art-controls-right{justify-content:flex-end}.art-controls .art-control{cursor:pointer;white-space:nowrap;opacity:var(--art-control-opacity);min-height:var(--art-control-height);min-width:var(--art-control-height);transition:opacity var(--art-transition-duration)ease;flex-shrink:0;justify-content:center;align-items:center;display:flex}.art-controls .art-control .art-icon{height:var(--art-control-icon-size);width:var(--art-control-icon-size);transform:scale(var(--art-control-icon-scale));transition:transform var(--art-transition-duration)ease}.art-controls .art-control .art-icon:active{transform:scale(calc(var(--art-control-icon-scale)*.8))}.art-controls .art-control:hover{opacity:1}.art-control-volume{position:relative}.art-control-volume .art-volume-panel{text-align:center;cursor:default;opacity:0;pointer-events:none;left:0;right:0;bottom:var(--art-control-height);width:var(--art-control-height);height:var(--art-volume-height);transition:all var(--art-transition-duration)ease;justify-content:center;align-items:center;padding:0 5px;font-size:12px;display:flex;position:absolute;transform:translateY(10px)}.art-control-volume .art-volume-panel .art-volume-inner{border-radius:var(--art-border-radius);background-color:var(--art-widget-background);flex-direction:column;align-items:center;gap:10px;width:100%;height:100%;padding:10px 0 12px;display:flex}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider{cursor:pointer;flex:1;justify-content:center;width:100%;display:flex;position:relative}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider .art-volume-handle{border-radius:var(--art-border-radius);background-color:#ffffff40;justify-content:center;width:2px;display:flex;position:relative;overflow:hidden}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider .art-volume-handle .art-volume-loaded{z-index:0;background-color:var(--art-theme);width:100%;height:100%;position:absolute;inset:0}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider .art-volume-indicator{width:var(--art-volume-handle-size);height:var(--art-volume-handle-size);margin-top:calc(var(--art-volume-handle-size)/-2);background-color:var(--art-theme);transition:transform var(--art-transition-duration)ease;border-radius:100%;flex-shrink:0;position:absolute;transform:scale(1)}.art-control-volume .art-volume-panel .art-volume-inner .art-volume-slider:active .art-volume-indicator{transform:scale(.9)}.art-control-volume:hover .art-volume-panel{opacity:1;pointer-events:auto;transform:translateY(0)}.art-video-player .art-notice{z-index:80;width:100%;height:auto;padding:var(--art-padding);pointer-events:none;display:none;position:absolute;inset:0 0 auto}.art-video-player .art-notice .art-notice-inner{border-radius:var(--art-border-radius);background-color:var(--art-tip-background);padding:5px;line-height:1;display:inline-flex}.art-video-player.art-notice-show .art-notice{display:flex}.art-video-player .art-contextmenus{z-index:120;border-radius:var(--art-border-radius);background-color:var(--art-widget-background);min-width:var(--art-contextmenus-min-width);flex-direction:column;padding:5px 0;font-size:12px;display:none;position:absolute}.art-video-player .art-contextmenus .art-contextmenu{cursor:pointer;border-bottom:1px solid #ffffff1a;padding:10px 15px;display:flex}.art-video-player .art-contextmenus .art-contextmenu span{padding:0 8px}.art-video-player .art-contextmenus .art-contextmenu span:hover,.art-video-player .art-contextmenus .art-contextmenu span.art-current{color:var(--art-theme)}.art-video-player .art-contextmenus .art-contextmenu:hover{background-color:#ffffff1a}.art-video-player .art-contextmenus .art-contextmenu:last-child{border-bottom:none}.art-video-player.art-contextmenu-show .art-contextmenus{display:flex}.art-video-player .art-settings{z-index:90;border-radius:var(--art-border-radius);max-height:var(--art-settings-max-height);left:auto;right:var(--art-padding);bottom:var(--art-control-height);transition:all var(--art-transition-duration)ease;background-color:var(--art-widget-background);flex-direction:column;display:none;position:absolute;overflow:hidden auto}.art-video-player .art-settings .art-setting-panel{flex-direction:column;display:none}.art-video-player .art-settings .art-setting-panel.art-current{display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item{cursor:pointer;transition:background-color var(--art-transition-duration)ease;justify-content:space-between;align-items:center;padding:0 5px;display:flex;overflow:hidden}.art-video-player .art-settings .art-setting-panel .art-setting-item:hover{background-color:#ffffff1a}.art-video-player .art-settings .art-setting-panel .art-setting-item.art-current{color:var(--art-theme)}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-icon-check{visibility:hidden;height:15px}.art-video-player .art-settings .art-setting-panel .art-setting-item.art-current .art-icon-check{visibility:visible}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-left{flex-shrink:0;justify-content:center;align-items:center;gap:5px;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-left .art-setting-item-left-icon{height:var(--art-settings-icon-size);width:var(--art-settings-icon-size);justify-content:center;align-items:center;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right{justify-content:center;align-items:center;gap:5px;font-size:12px;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right .art-setting-item-right-tooltip{white-space:nowrap;color:#ffffff80}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right .art-setting-item-right-icon{justify-content:center;align-items:center;min-width:32px;height:24px;display:flex}.art-video-player .art-settings .art-setting-panel .art-setting-item .art-setting-item-right .art-setting-range{appearance:none;background-color:#fff3;outline:none;width:80px;height:3px}.art-video-player .art-settings .art-setting-panel .art-setting-item-back{border-bottom:1px solid #ffffff1a}.art-video-player.art-setting-show .art-settings{display:flex}.art-video-player .art-info{left:var(--art-padding);top:var(--art-padding);z-index:100;border-radius:var(--art-border-radius);background-color:var(--art-widget-background);padding:10px;font-size:12px;display:none;position:absolute}.art-video-player .art-info .art-info-panel{flex-direction:column;gap:5px;display:flex}.art-video-player .art-info .art-info-panel .art-info-item{align-items:center;gap:5px;display:flex}.art-video-player .art-info .art-info-panel .art-info-item .art-info-title{text-align:right;width:100px}.art-video-player .art-info .art-info-panel .art-info-item .art-info-content{text-overflow:ellipsis;white-space:nowrap;user-select:all;width:250px;overflow:hidden}.art-video-player .art-info .art-info-close{cursor:pointer;position:absolute;top:5px;right:5px}.art-video-player.art-info-show .art-info{display:flex}.art-hide-cursor *{cursor:none!important}.art-video-player[data-aspect-ratio]{overflow:hidden}.art-video-player[data-aspect-ratio] .art-video{object-fit:fill;box-sizing:content-box}.art-fullscreen{--art-progress-height:8px;--art-indicator-size:20px;--art-control-height:60px;--art-control-icon-scale:1.3}.art-fullscreen-web{--art-progress-height:8px;--art-indicator-size:20px;--art-control-height:60px;--art-control-icon-scale:1.3;z-index:var(--art-fullscreen-web-index);width:100%;height:100%;position:fixed;inset:0}.art-mini-popup{z-index:9999;border-radius:var(--art-border-radius);cursor:move;user-select:none;background:#000;width:320px;height:180px;transition:opacity .2s;position:fixed;overflow:hidden;box-shadow:0 0 5px #00000080}.art-mini-popup svg{fill:#fff}.art-mini-popup .art-video{pointer-events:none}.art-mini-popup .art-mini-close{z-index:20;cursor:pointer;opacity:0;transition:opacity .2s;position:absolute;top:10px;right:10px}.art-mini-popup .art-mini-state{z-index:30;pointer-events:none;opacity:0;background-color:#00000040;justify-content:center;align-items:center;width:100%;height:100%;transition:opacity .2s;display:flex;position:absolute;inset:0}.art-mini-popup .art-mini-state .art-icon{opacity:.75;cursor:pointer;pointer-events:auto;transition:transform .2s;transform:scale(3)}.art-mini-popup .art-mini-state .art-icon:active{transform:scale(2.5)}.art-mini-popup.art-mini-dragging{opacity:.9}.art-mini-popup:hover .art-mini-close,.art-mini-popup:hover .art-mini-state{opacity:1}.art-video-player[data-flip=horizontal] .art-video{transform:scaleX(-1)}.art-video-player[data-flip=vertical] .art-video{transform:scaleY(-1)}.art-video-player .art-layer-lock{height:var(--art-lock-size);width:var(--art-lock-size);top:50%;left:var(--art-padding);background-color:var(--art-tip-background);border-radius:50%;justify-content:center;align-items:center;display:none;position:absolute;transform:translateY(-50%)}.art-video-player .art-layer-auto-playback{border-radius:var(--art-border-radius);left:var(--art-padding);bottom:calc(var(--art-control-height) + var(--art-bottom-gap) + 10px);background-color:var(--art-widget-background);align-items:center;gap:10px;padding:10px;line-height:1;display:none;position:absolute}.art-video-player .art-layer-auto-playback .art-auto-playback-close{cursor:pointer;justify-content:center;align-items:center;display:flex}.art-video-player .art-layer-auto-playback .art-auto-playback-close svg{width:15px;height:15px;fill:var(--art-theme)}.art-video-player .art-layer-auto-playback .art-auto-playback-jump{color:var(--art-theme);cursor:pointer}.art-video-player.art-lock .art-subtitle{bottom:var(--art-subtitle-bottom)!important}.art-video-player.art-mini-progress-bar .art-bottom,.art-video-player.art-lock .art-bottom{opacity:1;background-image:none;padding:0}.art-video-player.art-mini-progress-bar .art-bottom .art-controls,.art-video-player.art-lock .art-bottom .art-controls,.art-video-player.art-mini-progress-bar .art-bottom .art-progress,.art-video-player.art-lock .art-bottom .art-progress{transform:translateY(calc(var(--art-control-height) + var(--art-bottom-gap) + var(--art-progress-height)/4))}.art-video-player.art-mini-progress-bar .art-bottom .art-progress-indicator,.art-video-player.art-lock .art-bottom .art-progress-indicator{display:none!important}.art-video-player.art-control-show .art-layer-lock{display:flex}.art-control-selector{justify-content:center;display:flex;position:relative}.art-control-selector .art-selector-list{text-align:center;border-radius:var(--art-border-radius);opacity:0;pointer-events:none;bottom:var(--art-control-height);max-height:var(--art-selector-max-height);background-color:var(--art-widget-background);transition:all var(--art-transition-duration)ease;flex-direction:column;align-items:center;display:flex;position:absolute;overflow:hidden auto;transform:translateY(10px)}.art-control-selector .art-selector-list .art-selector-item{flex-shrink:0;justify-content:center;align-items:center;width:100%;padding:10px 15px;line-height:1;display:flex}.art-control-selector .art-selector-list .art-selector-item:hover{background-color:#ffffff1a}.art-control-selector .art-selector-list .art-selector-item:hover,.art-control-selector .art-selector-list .art-selector-item.art-current{color:var(--art-theme)}.art-control-selector:hover .art-selector-list{opacity:1;pointer-events:auto;transform:translateY(0)}[class*=hint--]{font-style:normal;display:inline-block;position:relative}[class*=hint--]:before,[class*=hint--]:after{visibility:hidden;opacity:0;z-index:1000000;pointer-events:none;transition:all .3s;position:absolute;transform:translate(0,0)}[class*=hint--]:hover:before,[class*=hint--]:hover:after{visibility:visible;opacity:1;transition-delay:.1s}[class*=hint--]:before{content:"";z-index:1000001;background:0 0;border:6px solid #0000;position:absolute}[class*=hint--]:after{color:#fff;white-space:nowrap;background:#000;padding:8px 10px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-size:12px;line-height:12px}[class*=hint--][aria-label]:after{content:attr(aria-label)}[class*=hint--][data-hint]:after{content:attr(data-hint)}[aria-label=""]:before,[aria-label=""]:after,[data-hint=""]:before,[data-hint=""]:after{display:none!important}.hint--top-left:before,.hint--top-right:before,.hint--top:before{border-top-color:#000}.hint--bottom-left:before,.hint--bottom-right:before,.hint--bottom:before{border-bottom-color:#000}.hint--left:before{border-left-color:#000}.hint--right:before{border-right-color:#000}.hint--top:before{margin-bottom:-11px}.hint--top:before,.hint--top:after{bottom:100%;left:50%}.hint--top:before{left:calc(50% - 6px)}.hint--top:after{transform:translate(-50%)}.hint--top:hover:before{transform:translateY(-8px)}.hint--top:hover:after{transform:translate(-50%)translateY(-8px)}.hint--bottom:before{margin-top:-11px}.hint--bottom:before,.hint--bottom:after{top:100%;left:50%}.hint--bottom:before{left:calc(50% - 6px)}.hint--bottom:after{transform:translate(-50%)}.hint--bottom:hover:before{transform:translateY(8px)}.hint--bottom:hover:after{transform:translate(-50%)translateY(8px)}.hint--right:before{margin-bottom:-6px;margin-left:-11px}.hint--right:after{margin-bottom:-14px}.hint--right:before,.hint--right:after{bottom:50%;left:100%}.hint--right:hover:before,.hint--right:hover:after{transform:translate(8px)}.hint--left:before{margin-bottom:-6px;margin-right:-11px}.hint--left:after{margin-bottom:-14px}.hint--left:before,.hint--left:after{bottom:50%;right:100%}.hint--left:hover:before,.hint--left:hover:after{transform:translate(-8px)}.hint--top-left:before{margin-bottom:-11px}.hint--top-left:before,.hint--top-left:after{bottom:100%;left:50%}.hint--top-left:before{left:calc(50% - 6px)}.hint--top-left:after{margin-left:12px;transform:translate(-100%)}.hint--top-left:hover:before{transform:translateY(-8px)}.hint--top-left:hover:after{transform:translate(-100%)translateY(-8px)}.hint--top-right:before{margin-bottom:-11px}.hint--top-right:before,.hint--top-right:after{bottom:100%;left:50%}.hint--top-right:before{left:calc(50% - 6px)}.hint--top-right:after{margin-left:-12px;transform:translate(0)}.hint--top-right:hover:before,.hint--top-right:hover:after{transform:translateY(-8px)}.hint--bottom-left:before{margin-top:-11px}.hint--bottom-left:before,.hint--bottom-left:after{top:100%;left:50%}.hint--bottom-left:before{left:calc(50% - 6px)}.hint--bottom-left:after{margin-left:12px;transform:translate(-100%)}.hint--bottom-left:hover:before{transform:translateY(8px)}.hint--bottom-left:hover:after{transform:translate(-100%)translateY(8px)}.hint--bottom-right:before{margin-top:-11px}.hint--bottom-right:before,.hint--bottom-right:after{top:100%;left:50%}.hint--bottom-right:before{left:calc(50% - 6px)}.hint--bottom-right:after{margin-left:-12px;transform:translate(0)}.hint--bottom-right:hover:before,.hint--bottom-right:hover:after{transform:translateY(8px)}.hint--small:after,.hint--medium:after,.hint--large:after{white-space:normal;word-wrap:break-word;line-height:1.4em}.hint--small:after{width:80px}.hint--medium:after{width:150px}.hint--large:after{width:300px}[class*=hint--]:after{text-shadow:0 -1px #000;box-shadow:4px 4px 8px #0000004d}.hint--error:after{text-shadow:0 -1px #592726;background-color:#b34e4d}.hint--error.hint--top-left:before,.hint--error.hint--top-right:before,.hint--error.hint--top:before{border-top-color:#b34e4d}.hint--error.hint--bottom-left:before,.hint--error.hint--bottom-right:before,.hint--error.hint--bottom:before{border-bottom-color:#b34e4d}.hint--error.hint--left:before{border-left-color:#b34e4d}.hint--error.hint--right:before{border-right-color:#b34e4d}.hint--warning:after{text-shadow:0 -1px #6c5328;background-color:#c09854}.hint--warning.hint--top-left:before,.hint--warning.hint--top-right:before,.hint--warning.hint--top:before{border-top-color:#c09854}.hint--warning.hint--bottom-left:before,.hint--warning.hint--bottom-right:before,.hint--warning.hint--bottom:before{border-bottom-color:#c09854}.hint--warning.hint--left:before{border-left-color:#c09854}.hint--warning.hint--right:before{border-right-color:#c09854}.hint--info:after{text-shadow:0 -1px #1a3c4d;background-color:#3986ac}.hint--info.hint--top-left:before,.hint--info.hint--top-right:before,.hint--info.hint--top:before{border-top-color:#3986ac}.hint--info.hint--bottom-left:before,.hint--info.hint--bottom-right:before,.hint--info.hint--bottom:before{border-bottom-color:#3986ac}.hint--info.hint--left:before{border-left-color:#3986ac}.hint--info.hint--right:before{border-right-color:#3986ac}.hint--success:after{text-shadow:0 -1px #1a321a;background-color:#458746}.hint--success.hint--top-left:before,.hint--success.hint--top-right:before,.hint--success.hint--top:before{border-top-color:#458746}.hint--success.hint--bottom-left:before,.hint--success.hint--bottom-right:before,.hint--success.hint--bottom:before{border-bottom-color:#458746}.hint--success.hint--left:before{border-left-color:#458746}.hint--success.hint--right:before{border-right-color:#458746}.hint--always:after,.hint--always:before{opacity:1;visibility:visible}.hint--always.hint--top:before{transform:translateY(-8px)}.hint--always.hint--top:after{transform:translate(-50%)translateY(-8px)}.hint--always.hint--top-left:before{transform:translateY(-8px)}.hint--always.hint--top-left:after{transform:translate(-100%)translateY(-8px)}.hint--always.hint--top-right:before,.hint--always.hint--top-right:after{transform:translateY(-8px)}.hint--always.hint--bottom:before{transform:translateY(8px)}.hint--always.hint--bottom:after{transform:translate(-50%)translateY(8px)}.hint--always.hint--bottom-left:before{transform:translateY(8px)}.hint--always.hint--bottom-left:after{transform:translate(-100%)translateY(8px)}.hint--always.hint--bottom-right:before,.hint--always.hint--bottom-right:after{transform:translateY(8px)}.hint--always.hint--left:before,.hint--always.hint--left:after{transform:translate(-8px)}.hint--always.hint--right:before,.hint--always.hint--right:after{transform:translate(8px)}.hint--rounded:after{border-radius:4px}.hint--no-animate:before,.hint--no-animate:after{transition-duration:0s}.hint--bounce:before,.hint--bounce:after{-webkit-transition:opacity .3s,visibility .3s,-webkit-transform .3s cubic-bezier(.71,1.7,.77,1.24);-moz-transition:opacity .3s,visibility .3s,-moz-transform .3s cubic-bezier(.71,1.7,.77,1.24);transition:opacity .3s,visibility .3s,transform .3s cubic-bezier(.71,1.7,.77,1.24)}.hint--no-shadow:before,.hint--no-shadow:after{text-shadow:initial;box-shadow:initial}.hint--no-arrow:before{display:none}.art-video-player.art-mobile{--art-bottom-gap:10px;--art-control-height:38px;--art-control-icon-scale:1;--art-state-size:60px;--art-settings-max-height:180px;--art-selector-max-height:180px;--art-indicator-scale:1;--art-control-opacity:1}.art-video-player.art-mobile .art-controls-left{margin-left:calc(var(--art-padding)/-1)}.art-video-player.art-mobile .art-controls-right{margin-right:calc(var(--art-padding)/-1)}'},{}],g7VGh:[function(n,e,t,i){e.exports=(function(){function s(p){return(s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g})(p)}var a=Object.prototype.toString,l=function(p){if(p===void 0)return"undefined";if(p===null)return"null";var g=s(p);if(g==="boolean")return"boolean";if(g==="string")return"string";if(g==="number")return"number";if(g==="symbol")return"symbol";if(g==="function")return c(p)==="GeneratorFunction"?"generatorfunction":"function";if(Array.isArray?Array.isArray(p):p instanceof Array)return"array";if(p.constructor&&typeof p.constructor.isBuffer=="function"&&p.constructor.isBuffer(p))return"buffer";if((function(b){try{if(typeof b.length=="number"&&typeof b.callee=="function")return!0}catch(y){if(y.message.indexOf("callee")!==-1)return!0}return!1})(p))return"arguments";if(p instanceof Date||typeof p.toDateString=="function"&&typeof p.getDate=="function"&&typeof p.setDate=="function")return"date";if(p instanceof Error||typeof p.message=="string"&&p.constructor&&typeof p.constructor.stackTraceLimit=="number")return"error";if(p instanceof RegExp||typeof p.flags=="string"&&typeof p.ignoreCase=="boolean"&&typeof p.multiline=="boolean"&&typeof p.global=="boolean")return"regexp";switch(c(p)){case"Symbol":return"symbol";case"Promise":return"promise";case"WeakMap":return"weakmap";case"WeakSet":return"weakset";case"Map":return"map";case"Set":return"set";case"Int8Array":return"int8array";case"Uint8Array":return"uint8array";case"Uint8ClampedArray":return"uint8clampedarray";case"Int16Array":return"int16array";case"Uint16Array":return"uint16array";case"Int32Array":return"int32array";case"Uint32Array":return"uint32array";case"Float32Array":return"float32array";case"Float64Array":return"float64array"}if(typeof p.throw=="function"&&typeof p.return=="function"&&typeof p.next=="function")return"generator";switch(g=a.call(p)){case"[object Object]":return"object";case"[object Map Iterator]":return"mapiterator";case"[object Set Iterator]":return"setiterator";case"[object String Iterator]":return"stringiterator";case"[object Array Iterator]":return"arrayiterator"}return g.slice(8,-1).toLowerCase().replace(/\s/g,"")};function c(p){return p.constructor?p.constructor.name:null}function f(p,g){var b=2<arguments.length&&arguments[2]!==void 0?arguments[2]:["option"];return d(p,g,b),h(p,g,b),(function(y,T,x){var w=l(T),S=l(y);if(w==="object"){if(S!=="object")throw Error("[Type Error]: '".concat(x.join("."),"' require 'object' type, but got '").concat(S,"'"));Object.keys(T).forEach(function(A){var _=y[A],I=T[A],P=x.slice();P.push(A),d(_,I,P),h(_,I,P),f(_,I,P)})}if(w==="array"){if(S!=="array")throw Error("[Type Error]: '".concat(x.join("."),"' require 'array' type, but got '").concat(S,"'"));y.forEach(function(A,_){var I=y[_],P=T[_]||T[0],C=x.slice();C.push(_),d(I,P,C),h(I,P,C),f(I,P,C)})}})(p,g,b),p}function d(p,g,b){if(l(g)==="string"){var y=l(p);if(g[0]==="?"&&(g=g.slice(1)+"|undefined"),!(-1<g.indexOf("|")?g.split("|").map(function(T){return T.toLowerCase().trim()}).filter(Boolean).some(function(T){return y===T}):g.toLowerCase().trim()===y))throw Error("[Type Error]: '".concat(b.join("."),"' require '").concat(g,"' type, but got '").concat(y,"'"))}}function h(p,g,b){if(l(g)==="function"){var y=g(p,l(p),b);if(y!==!0){var T=l(y);throw T==="string"?Error(y):T==="error"?y:Error("[Validator Error]: The scheme for '".concat(b.join("."),"' validator require return true, but got '").concat(y,"'"))}}}return f.kindOf=l,f})()},{}],lh3R5:[function(n,e,t,i){e.exports=JSON.parse('{"name":"artplayer","version":"5.3.0","description":"ArtPlayer.js is a modern and full featured HTML5 video player","author":"Harvey Zack <laozhaochaguan@gmail.com>","license":"MIT","homepage":"https://artplayer.org","repository":{"type":"git","url":"git+https://github.com/zhw2590582/ArtPlayer.git"},"bugs":{"url":"https://github.com/zhw2590582/ArtPlayer/issues"},"keywords":["html5","video","player"],"exports":{".":{"types":"./types/artplayer.d.ts","import":"./dist/artplayer.mjs","require":"./dist/artplayer.js"},"./legacy":{"types":"./types/artplayer.d.ts","import":"./dist/artplayer.legacy.js","require":"./dist/artplayer.legacy.js"},"./i18n/*":{"types":"./types/i18n.d.ts","import":"./dist/i18n/*.mjs","require":"./dist/i18n/*.js"}},"main":"./dist/artplayer.js","module":"./dist/artplayer.mjs","types":"./types/artplayer.d.ts","typesVersions":{"*":{"i18n/*":["types/i18n.d.ts"],"legacy":["types/artplayer.d.ts"]}},"legacy":"./dist/artplayer.legacy.js","browserslist":"last 1 Chrome version","dependencies":{"option-validator":"^2.0.6"}}')},{}],eJfh8:[function(n,e,t,i){n("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(t),t.default={properties:["audioTracks","autoplay","buffered","controller","controls","crossOrigin","currentSrc","currentTime","defaultMuted","defaultPlaybackRate","duration","ended","error","loop","mediaGroup","muted","networkState","paused","playbackRate","played","preload","readyState","seekable","seeking","src","startDate","textTracks","videoTracks","volume"],methods:["addTextTrack","canPlayType","load","play","pause"],events:["abort","canplay","canplaythrough","durationchange","emptied","ended","error","loadeddata","loadedmetadata","loadstart","pause","play","playing","progress","ratechange","seeked","seeking","stalled","suspend","timeupdate","volumechange","waiting"],prototypes:["width","height","videoWidth","videoHeight","poster","webkitDecodedFrameCount","webkitDroppedFrameCount","playsInline","webkitSupportsFullscreen","webkitDisplayingFullscreen","onenterpictureinpicture","onleavepictureinpicture","disablePictureInPicture","cancelVideoFrameCallback","requestVideoFrameCallback","getVideoPlaybackQuality","requestPictureInPicture","webkitEnterFullScreen","webkitEnterFullscreen","webkitExitFullScreen","webkitExitFullscreen"]}},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],loqXi:[function(n,e,t,i){t.interopDefault=function(s){return s&&s.__esModule?s:{default:s}},t.defineInteropFlag=function(s){Object.defineProperty(s,"__esModule",{value:!0})},t.exportAll=function(s,a){return Object.keys(s).forEach(function(l){l==="default"||l==="__esModule"||Object.prototype.hasOwnProperty.call(a,l)||Object.defineProperty(a,l,{enumerable:!0,get:function(){return s[l]}})}),a},t.export=function(s,a,l){Object.defineProperty(s,a,{enumerable:!0,get:l})}},{}],"9zso8":[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t);var a=n("../utils"),l=n("../utils/component"),c=s.interopDefault(l),f=n("./aspectRatio"),d=s.interopDefault(f),h=n("./close"),p=s.interopDefault(h),g=n("./flip"),b=s.interopDefault(g),y=n("./info"),T=s.interopDefault(y),x=n("./playbackRate"),w=s.interopDefault(x),S=n("./version"),A=s.interopDefault(S);class _ extends c.default{constructor(P){super(P),this.name="contextmenu",this.$parent=P.template.$contextmenu,a.isMobile||this.init()}init(){let{option:P,proxy:C,template:{$player:O,$contextmenu:B}}=this.art;P.playbackRate&&this.add((0,w.default)({name:"playbackRate",index:10})),P.aspectRatio&&this.add((0,d.default)({name:"aspectRatio",index:20})),P.flip&&this.add((0,b.default)({name:"flip",index:30})),this.add((0,T.default)({name:"info",index:40})),this.add((0,A.default)({name:"version",index:50})),this.add((0,p.default)({name:"close",index:60}));for(let N=0;N<P.contextmenu.length;N++)this.add(P.contextmenu[N]);C(O,"contextmenu",N=>{if(!this.art.constructor.CONTEXTMENU)return;N.preventDefault(),this.show=!0;let V=N.clientX,ee=N.clientY,{height:z,width:H,left:W,top:k}=(0,a.getRect)(O),{height:G,width:K}=(0,a.getRect)(B),oe=V-W,fe=ee-k;V+K>W+H&&(oe=H-K),ee+G>k+z&&(fe=z-G),(0,a.setStyles)(B,{top:`${fe}px`,left:`${oe}px`})}),C(O,"click",N=>{(0,a.includeFromEvent)(N,B)||(this.show=!1)}),this.art.on("blur",()=>{this.show=!1})}}t.default=_},{"../utils":"aBlEo","../utils/component":"idCEj","./aspectRatio":"6XHP2","./close":"eF6AX","./flip":"7Wg1P","./info":"fjRnU","./playbackRate":"hm1DY","./version":"aJBeL","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],aBlEo:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t);var a=n("./compatibility");s.exportAll(a,t);var l=n("./dom");s.exportAll(l,t);var c=n("./error");s.exportAll(c,t);var f=n("./file");s.exportAll(f,t);var d=n("./format");s.exportAll(d,t);var h=n("./property");s.exportAll(h,t);var p=n("./subtitle");s.exportAll(p,t);var g=n("./time");s.exportAll(g,t)},{"./compatibility":"jg0yq","./dom":"eANXw","./error":"4FwTI","./file":"i2JbS","./format":"dy9GH","./property":"jY49c","./subtitle":"ke7ox","./time":"f7gsx","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],jg0yq:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"userAgent",()=>a),s.export(t,"isSafari",()=>l),s.export(t,"isIOS",()=>c),s.export(t,"isIOS13",()=>f),s.export(t,"isMobile",()=>d),s.export(t,"isBrowser",()=>h);let a=globalThis?.CUSTOM_USER_AGENT??(typeof navigator<"u"?navigator.userAgent:""),l=/^(?:(?!chrome|android).)*safari/i.test(a),c=/iPad|iPhone|iPod/i.test(a)&&!window.MSStream,f=c||a.includes("Macintosh")&&navigator.maxTouchPoints>=1,d=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(a)||f,h=typeof window<"u"&&typeof document<"u"},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],eANXw:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"query",()=>l),s.export(t,"queryAll",()=>c),s.export(t,"addClass",()=>f),s.export(t,"removeClass",()=>d),s.export(t,"hasClass",()=>h),s.export(t,"append",()=>p),s.export(t,"remove",()=>g),s.export(t,"setStyle",()=>b),s.export(t,"setStyles",()=>y),s.export(t,"getStyle",()=>T),s.export(t,"siblings",()=>x),s.export(t,"inverseClass",()=>w),s.export(t,"tooltip",()=>S),s.export(t,"isInViewport",()=>A),s.export(t,"includeFromEvent",()=>_),s.export(t,"replaceElement",()=>I),s.export(t,"createElement",()=>P),s.export(t,"getIcon",()=>C),s.export(t,"setStyleText",()=>O),s.export(t,"supportsFlex",()=>B),s.export(t,"getRect",()=>N),s.export(t,"loadImg",()=>V),s.export(t,"getComposedPath",()=>ee);var a=n("./compatibility");function l(z,H=document){return H.querySelector(z)}function c(z,H=document){return Array.from(H.querySelectorAll(z))}function f(z,H){return z.classList.add(H)}function d(z,H){return z.classList.remove(H)}function h(z,H){return z.classList.contains(H)}function p(z,H){return H instanceof Element?z.appendChild(H):z.insertAdjacentHTML("beforeend",String(H)),z.lastElementChild||z.lastChild}function g(z){return z.parentNode.removeChild(z)}function b(z,H,W){return z.style[H]=W,z}function y(z,H){for(let W in H)b(z,W,H[W]);return z}function T(z,H,W=!0){let k=window.getComputedStyle(z,null).getPropertyValue(H);return W?Number.parseFloat(k):k}function x(z){return Array.from(z.parentElement.children).filter(H=>H!==z)}function w(z,H){x(z).forEach(W=>d(W,H)),f(z,H)}function S(z,H,W="top"){a.isMobile||(z.setAttribute("aria-label",H),f(z,"hint--rounded"),f(z,`hint--${W}`))}function A(z,H=0){let W=z.getBoundingClientRect(),k=window.innerHeight||document.documentElement.clientHeight,G=window.innerWidth||document.documentElement.clientWidth,K=W.top-H<=k&&W.top+W.height+H>=0,oe=W.left-H<=G+H&&W.left+W.width+H>=0;return K&&oe}function _(z,H){return ee(z).includes(H)}function I(z,H){return H.parentNode.replaceChild(z,H),z}function P(z){return document.createElement(z)}function C(z="",H=""){let W=P("i");return f(W,"art-icon"),f(W,`art-icon-${z}`),p(W,H),W}function O(z,H){let W=document.getElementById(z);W||((W=document.createElement("style")).id=z,document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{document.head.appendChild(W)}):(document.head||document.documentElement).appendChild(W)),W.textContent=H}function B(){let z=document.createElement("div");return z.style.display="flex",z.style.display==="flex"}function N(z){return z.getBoundingClientRect()}function V(z,H){return new Promise((W,k)=>{let G=new Image;G.onload=function(){if(H&&H!==1){let K=document.createElement("canvas"),oe=K.getContext("2d");K.width=G.width*H,K.height=G.height*H,oe.drawImage(G,0,0,K.width,K.height),K.toBlob(fe=>{let M=URL.createObjectURL(fe),$=new Image;$.onload=function(){W($)},$.onerror=function(){URL.revokeObjectURL(M),k(Error(`Image load failed: ${z}`))},$.src=M})}else W(G)},G.onerror=function(){k(Error(`Image load failed: ${z}`))},G.src=z})}function ee(z){if(z.composedPath)return z.composedPath();let H=[],W=z.target;for(;W;)H.push(W),W=W.parentNode;return H.includes(window)||window===void 0||H.push(window),H}},{"./compatibility":"jg0yq","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"4FwTI":[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"ArtPlayerError",()=>a),s.export(t,"errorHandle",()=>l);class a extends Error{constructor(f,d){super(f),typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,d||this.constructor),this.name="ArtPlayerError"}}function l(c,f){if(!c)throw new a(f);return c}},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],i2JbS:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");function a(l,c){let f=document.createElement("a");f.style.display="none",f.href=l,f.download=c,document.body.appendChild(f),f.click(),document.body.removeChild(f)}s.defineInteropFlag(t),s.export(t,"getExt",()=>function l(c){return c.includes("?")?l(c.split("?")[0]):c.includes("#")?l(c.split("#")[0]):c.trim().toLowerCase().split(".").pop()}),s.export(t,"download",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],dy9GH:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");function a(h,p,g){return Math.max(Math.min(h,Math.max(p,g)),Math.min(p,g))}function l(h){return h.charAt(0).toUpperCase()+h.slice(1)}function c(h){if(!h)return"00:00";let p=Math.floor(h/3600),g=Math.floor((h-3600*p)/60),b=Math.floor(h-3600*p-60*g);return(p>0?[p,g,b]:[g,b]).map(y=>y<10?`0${y}`:String(y)).join(":")}function f(h){return h.replace(/[&<>'"]/g,p=>({"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"})[p]||p)}function d(h){let p={"&amp;":"&","&lt;":"<","&gt;":">","&#39;":"'","&quot;":'"'},g=RegExp(`(${Object.keys(p).join("|")})`,"g");return h.replace(g,b=>p[b]||b)}s.defineInteropFlag(t),s.export(t,"clamp",()=>a),s.export(t,"capitalize",()=>l),s.export(t,"secondToTime",()=>c),s.export(t,"escape",()=>f),s.export(t,"unescape",()=>d)},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],jY49c:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"def",()=>a),s.export(t,"has",()=>c),s.export(t,"get",()=>f),s.export(t,"mergeDeep",()=>function d(...h){let p=g=>g&&typeof g=="object"&&!Array.isArray(g);return h.reduce((g,b)=>(Object.keys(b).forEach(y=>{let T=g[y],x=b[y];Array.isArray(T)&&Array.isArray(x)?g[y]=T.concat(...x):p(T)&&p(x)?g[y]=d(T,x):g[y]=x}),g),{})});let a=Object.defineProperty,{hasOwnProperty:l}=Object.prototype;function c(d,h){return l.call(d,h)}function f(d,h){return Object.getOwnPropertyDescriptor(d,h)}},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],ke7ox:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");function a(f){return`WEBVTT \r
\r
`.concat(f.replace(/(\d\d:\d\d:\d\d)[,.](\d+)/g,(d,h,p)=>{let g=p.slice(0,3);return p.length===1&&(g=`${p}00`),p.length===2&&(g=`${p}0`),`${h},${g}`}).replace(/\{\\([ibu])\}/g,"</$1>").replace(/\{\\([ibu])1\}/g,"<$1>").replace(/\{([ibu])\}/g,"<$1>").replace(/\{\/([ibu])\}/g,"</$1>").replace(/(\d\d:\d\d:\d\d),(\d\d\d)/g,"$1.$2").replace(/\{[\s\S]*?\}/g,"").concat(`\r
\r
`))}function l(f){return URL.createObjectURL(new Blob([f],{type:"text/vtt"}))}function c(f){let d=RegExp("Dialogue:\\s\\d,(\\d+:\\d\\d:\\d\\d.\\d\\d),(\\d+:\\d\\d:\\d\\d.\\d\\d),([^,]*),([^,]*),(?:[^,]*,){4}([\\s\\S]*)$","i");function h(p=""){return p.split(/[:.]/).map((g,b,y)=>{if(b===y.length-1){if(g.length===1)return`.${g}00`;if(g.length===2)return`.${g}0`}else if(g.length===1)return(b===0?"0":":0")+g;return b===0?g:b===y.length-1?`.${g}`:`:${g}`}).join("")}return`WEBVTT ${f.split(/\r?\n/).map(p=>{let g=p.match(d);return g?{start:h(g[1].trim()),end:h(g[2].trim()),text:g[5].replace(/\{[\s\S]*?\}/g,"").replace(/(\\N)/g,`
`).trim().split(/\r?\n/).map(b=>b.trim()).join(`
`)}:null}).filter(p=>p).map((p,g)=>p?`${g+1} ${p.start} --> ${p.end} ${p.text}`:"").filter(p=>p.trim()).join(`

`)}`}s.defineInteropFlag(t),s.export(t,"srtToVtt",()=>a),s.export(t,"vttToBlob",()=>l),s.export(t,"assToVtt",()=>c)},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],f7gsx:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");function a(f=0){return new Promise(d=>setTimeout(d,f))}function l(f,d){let h;return function(...p){let g=()=>(h=null,f.apply(this,p));clearTimeout(h),h=setTimeout(g,d)}}function c(f,d){let h=!1;return function(...p){h||(f.apply(this,p),h=!0,setTimeout(()=>{h=!1},d))}}s.defineInteropFlag(t),s.export(t,"sleep",()=>a),s.export(t,"debounce",()=>l),s.export(t,"throttle",()=>c)},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],idCEj:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t);var a=n("option-validator"),l=s.interopDefault(a),c=n("../scheme"),f=n("./dom"),d=n("./error");t.default=class{constructor(h){this.id=0,this.art=h,this.cache=new Map,this.add=this.add.bind(this),this.remove=this.remove.bind(this),this.update=this.update.bind(this)}get show(){return(0,f.hasClass)(this.art.template.$player,`art-${this.name}-show`)}set show(h){let{$player:p}=this.art.template,g=`art-${this.name}-show`;h?(0,f.addClass)(p,g):(0,f.removeClass)(p,g),this.art.emit(this.name,h)}toggle(){this.show=!this.show}add(h){let p=typeof h=="function"?h(this.art):h;if(p.html=p.html||"",(0,l.default)(p,c.ComponentOption),!this.$parent||!this.name||p.disable)return;let g=p.name||`${this.name}${this.id}`,b=this.cache.get(g);(0,d.errorHandle)(!b,`Can't add an existing [${g}] to the [${this.name}]`),this.id+=1;let y=(0,f.createElement)("div");(0,f.addClass)(y,`art-${this.name}`),(0,f.addClass)(y,`art-${this.name}-${g}`);let T=Array.from(this.$parent.children);y.dataset.index=p.index||this.id;let x=T.find(S=>Number(S.dataset.index)>=Number(y.dataset.index));x?x.insertAdjacentElement("beforebegin",y):(0,f.append)(this.$parent,y),p.html&&(0,f.append)(y,p.html),p.style&&(0,f.setStyles)(y,p.style),p.tooltip&&(0,f.tooltip)(y,p.tooltip);let w=[];if(p.click){let S=this.art.events.proxy(y,"click",A=>{A.preventDefault(),p.click.call(this.art,this,A)});w.push(S)}return p.selector&&["left","right"].includes(p.position)&&this.selector(p,y,w),this[g]=y,this.cache.set(g,{$ref:y,events:w,option:p}),p.mounted&&p.mounted.call(this.art,y),y}remove(h){let p=this.cache.get(h);(0,d.errorHandle)(p,`Can't find [${h}] from the [${this.name}]`),p.option.beforeUnmount&&p.option.beforeUnmount.call(this.art,p.$ref);for(let g=0;g<p.events.length;g++)this.art.events.remove(p.events[g]);this.cache.delete(h),delete this[h],(0,f.remove)(p.$ref)}update(h){let p=this.cache.get(h.name);return p&&(h=Object.assign(p.option,h),this.remove(h.name)),this.add(h)}}},{"option-validator":"g7VGh","../scheme":"biLjm","./dom":"eANXw","./error":"4FwTI","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],biLjm:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"ComponentOption",()=>b);var a=n("../utils");let l="array",c="boolean",f="string",d="number",h="object",p="function";function g(y,T,x){return(0,a.errorHandle)(T===f||T===d||y instanceof Element,`${x.join(".")} require '${f}' or 'Element' type`)}let b={html:g,disable:`?${c}`,name:`?${f}`,index:`?${d}`,style:`?${h}`,click:`?${p}`,mounted:`?${p}`,tooltip:`?${f}|${d}`,width:`?${d}`,selector:`?${l}`,onSelect:`?${p}`,switch:`?${c}`,onSwitch:`?${p}`,range:`?${l}`,onRange:`?${p}`,onChange:`?${p}`};t.default={id:f,container:g,url:f,poster:f,type:f,theme:f,lang:f,volume:d,isLive:c,muted:c,autoplay:c,autoSize:c,autoMini:c,loop:c,flip:c,playbackRate:c,aspectRatio:c,screenshot:c,setting:c,hotkey:c,pip:c,mutex:c,backdrop:c,fullscreen:c,fullscreenWeb:c,subtitleOffset:c,miniProgressBar:c,useSSR:c,playsInline:c,lock:c,gesture:c,fastForward:c,autoPlayback:c,autoOrientation:c,airplay:c,proxy:`?${p}`,plugins:[p],layers:[b],contextmenu:[b],settings:[b],controls:[{...b,position:(y,T,x)=>{let w=["top","left","right"];return(0,a.errorHandle)(w.includes(y),`${x.join(".")} only accept ${w.toString()} as parameters`)}}],quality:[{default:`?${c}`,html:f,url:f}],highlight:[{time:d,text:f}],thumbnails:{url:f,number:d,column:d,width:d,height:d,scale:d},subtitle:{url:f,name:f,type:f,style:h,escape:c,encoding:f,onVttLoad:p},moreVideoAttr:h,i18n:h,icons:h,cssVar:h,customType:h}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"6XHP2":[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){return f=>{let{i18n:d,constructor:{ASPECT_RATIO:h}}=f,p=h.map(g=>`<span data-value="${g}">${g==="default"?d.get("Default"):g}</span>`).join("");return{...c,html:`${d.get("Aspect Ratio")}: ${p}`,click:(g,b)=>{let{value:y}=b.target.dataset;y&&(f.aspectRatio=y,g.show=!1)},mounted:g=>{let b=(0,a.query)('[data-value="default"]',g);b&&(0,a.inverseClass)(b,"art-current"),f.on("aspectRatio",y=>{let T=(0,a.queryAll)("span",g).find(x=>x.dataset.value===y);T&&(0,a.inverseClass)(T,"art-current")})}}}}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],eF6AX:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");function a(l){return c=>({...l,html:c.i18n.get("Close"),click:f=>{f.show=!1}})}s.defineInteropFlag(t),s.export(t,"default",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"7Wg1P":[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){return f=>{let{i18n:d,constructor:{FLIP:h}}=f,p=h.map(g=>`<span data-value="${g}">${d.get((0,a.capitalize)(g))}</span>`).join("");return{...c,html:`${d.get("Video Flip")}: ${p}`,click:(g,b)=>{let{value:y}=b.target.dataset;y&&(f.flip=y.toLowerCase(),g.show=!1)},mounted:g=>{let b=(0,a.query)('[data-value="normal"]',g);b&&(0,a.inverseClass)(b,"art-current"),f.on("flip",y=>{let T=(0,a.queryAll)("span",g).find(x=>x.dataset.value===y);T&&(0,a.inverseClass)(T,"art-current")})}}}}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],fjRnU:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");function a(l){return c=>({...l,html:c.i18n.get("Video Info"),click:f=>{c.info.show=!0,f.show=!1}})}s.defineInteropFlag(t),s.export(t,"default",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],hm1DY:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){return f=>{let{i18n:d,constructor:{PLAYBACK_RATE:h}}=f,p=h.map(g=>`<span data-value="${g}">${g===1?d.get("Normal"):g.toFixed(1)}</span>`).join("");return{...c,html:`${d.get("Play Speed")}: ${p}`,click:(g,b)=>{let{value:y}=b.target.dataset;y&&(f.playbackRate=Number(y),g.show=!1)},mounted:g=>{let b=(0,a.query)('[data-value="1"]',g);b&&(0,a.inverseClass)(b,"art-current"),f.on("video:ratechange",()=>{let y=(0,a.queryAll)("span",g).find(T=>Number(T.dataset.value)===f.playbackRate);y&&(0,a.inverseClass)(y,"art-current")})}}}}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],aJBeL:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>function(l){return{...l,html:`<a href="https://artplayer.org" target="_blank">ArtPlayer ${a.version}</a>`}});var a=n("../../package.json")},{"../../package.json":"lh3R5","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],dp1yk:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t);var a=n("../utils"),l=n("../utils/component"),c=s.interopDefault(l),f=n("./airplay"),d=s.interopDefault(f),h=n("./fullscreen"),p=s.interopDefault(h),g=n("./fullscreenWeb"),b=s.interopDefault(g),y=n("./pip"),T=s.interopDefault(y),x=n("./playAndPause"),w=s.interopDefault(x),S=n("./progress"),A=s.interopDefault(S),_=n("./screenshot"),I=s.interopDefault(_),P=n("./setting"),C=s.interopDefault(P),O=n("./time"),B=s.interopDefault(O),N=n("./volume"),V=s.interopDefault(N);class ee extends c.default{constructor(H){super(H),this.isHover=!1,this.name="control",this.timer=Date.now();let{constructor:W}=H,{$player:k,$bottom:G}=this.art.template;H.on("mousemove",()=>{a.isMobile||(this.show=!0)}),H.on("click",()=>{a.isMobile?this.toggle():this.show=!0}),H.on("document:mousemove",K=>{this.isHover=(0,a.includeFromEvent)(K,G)}),H.on("video:timeupdate",()=>{!H.setting.show&&!this.isHover&&!H.isInput&&H.playing&&this.show&&Date.now()-this.timer>=W.CONTROL_HIDE_TIME&&(this.show=!1)}),H.on("control",K=>{K?((0,a.removeClass)(k,"art-hide-cursor"),(0,a.addClass)(k,"art-hover"),this.timer=Date.now()):((0,a.addClass)(k,"art-hide-cursor"),(0,a.removeClass)(k,"art-hover"))}),this.init()}init(){let{option:H}=this.art;H.isLive||this.add((0,A.default)({name:"progress",position:"top",index:10})),this.add({name:"thumbnails",position:"top",index:20}),this.add((0,w.default)({name:"playAndPause",position:"left",index:10})),this.add((0,V.default)({name:"volume",position:"left",index:20})),H.isLive||this.add((0,B.default)({name:"time",position:"left",index:30})),H.quality.length&&(0,a.sleep)().then(()=>{this.art.quality=H.quality}),H.screenshot&&!a.isMobile&&this.add((0,I.default)({name:"screenshot",position:"right",index:20})),H.setting&&this.add((0,C.default)({name:"setting",position:"right",index:30})),H.pip&&this.add((0,T.default)({name:"pip",position:"right",index:40})),H.airplay&&window.WebKitPlaybackTargetAvailabilityEvent&&this.add((0,d.default)({name:"airplay",position:"right",index:50})),H.fullscreenWeb&&this.add((0,b.default)({name:"fullscreenWeb",position:"right",index:60})),H.fullscreen&&this.add((0,p.default)({name:"fullscreen",position:"right",index:70}));for(let W=0;W<H.controls.length;W++)this.add(H.controls[W])}add(H){let W=typeof H=="function"?H(this.art):H,{$progress:k,$controlsLeft:G,$controlsRight:K}=this.art.template;switch(W.position){case"top":this.$parent=k;break;case"left":this.$parent=G;break;case"right":this.$parent=K;break;default:(0,a.errorHandle)(!1,"Control option.position must one of 'top', 'left', 'right'")}super.add(W)}check(H){H.$control_value.innerHTML=H.html;for(let W=0;W<H.$control_option.length;W++){let k=H.$control_option[W];k.default=k===H,k.default&&(0,a.inverseClass)(k.$control_item,"art-current")}}selector(H,W,k){let{proxy:G}=this.art.events;(0,a.addClass)(W,"art-control-selector");let K=(0,a.createElement)("div");(0,a.addClass)(K,"art-selector-value"),(0,a.append)(K,H.html),W.textContent="",(0,a.append)(W,K);let oe=(0,a.createElement)("div");(0,a.addClass)(oe,"art-selector-list"),(0,a.append)(W,oe);for(let M=0;M<H.selector.length;M++){let $=H.selector[M],se=(0,a.createElement)("div");(0,a.addClass)(se,"art-selector-item"),$.default&&(0,a.addClass)(se,"art-current"),se.dataset.index=M,se.dataset.value=$.value,se.innerHTML=$.html,(0,a.append)(oe,se),(0,a.def)($,"$control_option",{get:()=>H.selector}),(0,a.def)($,"$control_item",{get:()=>se}),(0,a.def)($,"$control_value",{get:()=>K})}let fe=G(oe,"click",async M=>{let $=(0,a.getComposedPath)(M),se=H.selector.find(de=>de.$control_item===$.find(he=>de.$control_item===he));this.check(se),H.onSelect&&(K.innerHTML=await H.onSelect.call(this.art,se,se.$control_item,M))});k.push(fe)}}t.default=ee},{"../utils":"aBlEo","../utils/component":"idCEj","./airplay":"amOzz","./fullscreen":"3GuBU","./fullscreenWeb":"jj1KV","./pip":"jMeHN","./playAndPause":"u3h8M","./progress":"1XZSS","./screenshot":"dIscA","./setting":"aqA0g","./time":"ihweO","./volume":"fJVWn","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],amOzz:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){return f=>({...c,tooltip:f.i18n.get("AirPlay"),mounted:d=>{let{proxy:h,icons:p}=f;(0,a.append)(d,p.airplay),h(d,"click",()=>f.airplay())}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"3GuBU":[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){return f=>({...c,tooltip:f.i18n.get("Fullscreen"),mounted:d=>{let{proxy:h,icons:p,i18n:g}=f,b=(0,a.append)(d,p.fullscreenOn),y=(0,a.append)(d,p.fullscreenOff);(0,a.setStyle)(y,"display","none"),h(d,"click",()=>{f.fullscreen=!f.fullscreen}),f.on("fullscreen",T=>{T?((0,a.tooltip)(d,g.get("Exit Fullscreen")),(0,a.setStyle)(b,"display","none"),(0,a.setStyle)(y,"display","inline-flex")):((0,a.tooltip)(d,g.get("Fullscreen")),(0,a.setStyle)(b,"display","inline-flex"),(0,a.setStyle)(y,"display","none"))})}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],jj1KV:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){return f=>({...c,tooltip:f.i18n.get("Web Fullscreen"),mounted:d=>{let{proxy:h,icons:p,i18n:g}=f,b=(0,a.append)(d,p.fullscreenWebOn),y=(0,a.append)(d,p.fullscreenWebOff);(0,a.setStyle)(y,"display","none"),h(d,"click",()=>{f.fullscreenWeb=!f.fullscreenWeb}),f.on("fullscreenWeb",T=>{T?((0,a.tooltip)(d,g.get("Exit Web Fullscreen")),(0,a.setStyle)(b,"display","none"),(0,a.setStyle)(y,"display","inline-flex")):((0,a.tooltip)(d,g.get("Web Fullscreen")),(0,a.setStyle)(b,"display","inline-flex"),(0,a.setStyle)(y,"display","none"))})}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],jMeHN:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){return f=>({...c,tooltip:f.i18n.get("PIP Mode"),mounted:d=>{let{proxy:h,icons:p,i18n:g}=f;(0,a.append)(d,p.pip),h(d,"click",()=>{f.pip=!f.pip}),f.on("pip",b=>{(0,a.tooltip)(d,g.get(b?"Exit PIP Mode":"PIP Mode"))})}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],u3h8M:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){return f=>({...c,mounted:d=>{let{proxy:h,icons:p,i18n:g}=f,b=(0,a.append)(d,p.play),y=(0,a.append)(d,p.pause);function T(){(0,a.setStyle)(b,"display","flex"),(0,a.setStyle)(y,"display","none")}function x(){(0,a.setStyle)(b,"display","none"),(0,a.setStyle)(y,"display","flex")}(0,a.tooltip)(b,g.get("Play")),(0,a.tooltip)(y,g.get("Pause")),h(b,"click",()=>{f.play()}),h(y,"click",()=>{f.pause()}),f.playing?x():T(),f.on("video:playing",()=>{x()}),f.on("video:pause",()=>{T()})}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"1XZSS":[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"getPosFromEvent",()=>l),s.export(t,"setCurrentTime",()=>c),s.export(t,"default",()=>f);var a=n("../utils");function l(d,h){let{$progress:p}=d.template,{left:g}=(0,a.getRect)(p),b=a.isMobile?h.touches[0].clientX:h.clientX,y=(0,a.clamp)(b-g,0,p.clientWidth),T=y/p.clientWidth*d.duration,x=(0,a.secondToTime)(T),w=(0,a.clamp)(y/p.clientWidth,0,1);return{second:T,time:x,width:y,percentage:w}}function c(d,h){if(d.isRotate){let p=h.touches[0].clientY/d.height,g=p*d.duration;d.emit("setBar","played",p,h),d.seek=g}else{let{second:p,percentage:g}=l(d,h);d.emit("setBar","played",g,h),d.seek=p}}function f(d){return h=>{let{icons:p,option:g,proxy:b}=h;return{...d,html:'<div class="art-control-progress-inner"><div class="art-progress-hover"></div><div class="art-progress-loaded"></div><div class="art-progress-played"></div><div class="art-progress-highlight"></div><div class="art-progress-indicator"></div><div class="art-progress-tip"></div></div>',mounted:y=>{let T=null,x=!1,w=(0,a.query)(".art-progress-hover",y),S=(0,a.query)(".art-progress-loaded",y),A=(0,a.query)(".art-progress-played",y),_=(0,a.query)(".art-progress-highlight",y),I=(0,a.query)(".art-progress-indicator",y),P=(0,a.query)(".art-progress-tip",y);function C(O,B){let{width:N,time:V}=B||l(h,O);P.textContent=V;let ee=P.clientWidth;N<=ee/2?(0,a.setStyle)(P,"left",0):N>y.clientWidth-ee/2?(0,a.setStyle)(P,"left",`${y.clientWidth-ee}px`):(0,a.setStyle)(P,"left",`${N-ee/2}px`)}p.indicator?(0,a.append)(I,p.indicator):(0,a.setStyle)(I,"backgroundColor","var(--art-theme)"),h.on("setBar",function(O,B,N){let V=O==="played"&&N&&a.isMobile;O==="loaded"&&(0,a.setStyle)(S,"width",`${100*B}%`),O==="hover"&&(0,a.setStyle)(w,"width",`${100*B}%`),O==="played"&&((0,a.setStyle)(A,"width",`${100*B}%`),(0,a.setStyle)(I,"left",`${100*B}%`)),V&&((0,a.setStyle)(P,"display","flex"),C(N,{width:y.clientWidth*B,time:(0,a.secondToTime)(B*h.duration)}),clearTimeout(T),T=setTimeout(()=>{(0,a.setStyle)(P,"display","none")},500))}),h.on("video:loadedmetadata",function(){_.textContent="";for(let O=0;O<g.highlight.length;O++){let B=g.highlight[O],N=(0,a.clamp)(B.time,0,h.duration)/h.duration*100,V=`<span data-text="${B.text}" data-time="${B.time}" style="left: ${N}%"></span>`;(0,a.append)(_,V)}}),h.constructor.USE_RAF?h.on("raf",()=>{h.emit("setBar","played",h.played),h.emit("setBar","loaded",h.loaded)}):(h.on("video:timeupdate",()=>{h.emit("setBar","played",h.played)}),h.on("video:progress",()=>{h.emit("setBar","loaded",h.loaded)}),h.on("video:ended",()=>{h.emit("setBar","played",1)})),h.emit("setBar","loaded",h.loaded||0),a.isMobile||(b(y,"click",O=>{O.target!==I&&c(h,O)}),b(y,"mousemove",O=>{let{percentage:B}=l(h,O);if(h.emit("setBar","hover",B,O),(0,a.setStyle)(P,"display","flex"),(0,a.includeFromEvent)(O,_)){let{width:N}=l(h,O),{text:V}=O.target.dataset;P.textContent=V;let ee=P.clientWidth;N<=ee/2?(0,a.setStyle)(P,"left",0):N>y.clientWidth-ee/2?(0,a.setStyle)(P,"left",`${y.clientWidth-ee}px`):(0,a.setStyle)(P,"left",`${N-ee/2}px`)}else C(O)}),b(y,"mouseleave",O=>{(0,a.setStyle)(P,"display","none"),h.emit("setBar","hover",0,O)}),b(y,"mousedown",O=>{x=O.button===0}),h.on("document:mousemove",O=>{if(x){let{second:B,percentage:N}=l(h,O);h.emit("setBar","played",N,O),h.seek=B}}),h.on("document:mouseup",()=>{x&&(x=!1)}))}}}}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],dIscA:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){return f=>({...c,tooltip:f.i18n.get("Screenshot"),mounted:d=>{let{proxy:h,icons:p}=f;(0,a.append)(d,p.screenshot),h(d,"click",()=>{f.screenshot()})}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],aqA0g:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){return f=>({...c,tooltip:f.i18n.get("Show Setting"),mounted:d=>{let{proxy:h,icons:p,i18n:g}=f;(0,a.append)(d,p.setting),h(d,"click",()=>{f.setting.toggle(),f.setting.resize()}),f.on("setting",b=>{(0,a.tooltip)(d,g.get(b?"Hide Setting":"Show Setting"))})}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],ihweO:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){return f=>({...c,style:a.isMobile?{fontSize:"12px",padding:"0 5px"}:{cursor:"auto",padding:"0 10px"},mounted:d=>{function h(){let g=`${(0,a.secondToTime)(f.currentTime)} / ${(0,a.secondToTime)(f.duration)}`;g!==d.textContent&&(d.textContent=g)}h();let p=["video:loadedmetadata","video:timeupdate","video:progress"];for(let g=0;g<p.length;g++)f.on(p[g],h)}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],fJVWn:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){return f=>({...c,mounted:d=>{let{proxy:h,icons:p}=f,g=(0,a.append)(d,p.volume),b=(0,a.append)(d,p.volumeClose),y=(0,a.append)(d,'<div class="art-volume-panel"></div>'),T=(0,a.append)(y,'<div class="art-volume-inner"></div>'),x=(0,a.append)(T,'<div class="art-volume-val"></div>'),w=(0,a.append)(T,'<div class="art-volume-slider"></div>'),S=(0,a.append)(w,'<div class="art-volume-handle"></div>'),A=(0,a.append)(S,'<div class="art-volume-loaded"></div>'),_=(0,a.append)(w,'<div class="art-volume-indicator"></div>');function I(C){let{top:O,height:B}=(0,a.getRect)(w);return 1-(C.clientY-O)/B}function P(){if(f.muted||f.volume===0)(0,a.setStyle)(g,"display","none"),(0,a.setStyle)(b,"display","flex"),(0,a.setStyle)(_,"top","100%"),(0,a.setStyle)(A,"top","100%"),x.textContent=0;else{let C=100*f.volume;(0,a.setStyle)(g,"display","flex"),(0,a.setStyle)(b,"display","none"),(0,a.setStyle)(_,"top",`${100-C}%`),(0,a.setStyle)(A,"top",`${100-C}%`),x.textContent=Math.floor(C)}}if(P(),f.on("video:volumechange",P),h(g,"click",()=>{f.muted=!0}),h(b,"click",()=>{f.muted=!1}),a.isMobile)(0,a.setStyle)(y,"display","none");else{let C=!1;h(w,"mousedown",O=>{C=O.button===0,f.volume=I(O)}),f.on("document:mousemove",O=>{C&&(f.muted=!1,f.volume=I(O))}),f.on("document:mouseup",()=>{C&&(C=!1)})}}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],jmVSD:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t);var a=n("./clickInit"),l=s.interopDefault(a),c=n("./gestureInit"),f=s.interopDefault(c),d=n("./globalInit"),h=s.interopDefault(d),p=n("./hoverInit"),g=s.interopDefault(p),b=n("./moveInit"),y=s.interopDefault(b),T=n("./resizeInit"),x=s.interopDefault(T),w=n("./updateInit"),S=s.interopDefault(w),A=n("./viewInit"),_=s.interopDefault(A);t.default=class{constructor(I){this.destroyEvents=[],this.proxy=this.proxy.bind(this),this.hover=this.hover.bind(this),(0,l.default)(I,this),(0,g.default)(I,this),(0,y.default)(I,this),(0,x.default)(I,this),(0,f.default)(I,this),(0,_.default)(I,this),(0,h.default)(I,this),(0,S.default)(I,this)}proxy(I,P,C,O={}){if(Array.isArray(P))return P.map(N=>this.proxy(I,N,C,O));I.addEventListener(P,C,O);let B=()=>I.removeEventListener(P,C,O);return this.destroyEvents.push(B),B}hover(I,P,C){P&&this.proxy(I,"mouseenter",P),C&&this.proxy(I,"mouseleave",C)}remove(I){let P=this.destroyEvents.indexOf(I);P>-1&&(I(),this.destroyEvents.splice(P,1))}destroy(){for(let I=0;I<this.destroyEvents.length;I++)this.destroyEvents[I]()}}},{"./clickInit":"i8G6V","./gestureInit":"9wEzB","./globalInit":"ikBrS","./hoverInit":"jwNq0","./moveInit":"eqSsP","./resizeInit":"42JNz","./updateInit":"7kM1M","./viewInit":"2IW9m","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],i8G6V:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c,f){let{constructor:d,template:{$player:h,$video:p}}=c;function g(y){(0,a.includeFromEvent)(y,h)?(c.isInput=y.target.tagName==="INPUT",c.isFocus=!0,c.emit("focus",y)):(c.isInput=!1,c.isFocus=!1,c.emit("blur",y))}c.on("document:click",g),c.on("document:contextmenu",g);let b=[];f.proxy(p,"click",y=>{let T=Date.now();b.push(T);let{MOBILE_CLICK_PLAY:x,DBCLICK_TIME:w,MOBILE_DBCLICK_PLAY:S,DBCLICK_FULLSCREEN:A}=d,_=b.filter(I=>T-I<=w);switch(_.length){case 1:c.emit("click",y),a.isMobile?!c.isLock&&x&&c.toggle():c.toggle(),b=_;break;case 2:c.emit("dblclick",y),a.isMobile?!c.isLock&&S&&c.toggle():A&&(c.fullscreen=!c.fullscreen),b=[];break;default:b=[]}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"9wEzB":[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>c);var a=n("../control/progress"),l=n("../utils");function c(f,d){if(l.isMobile&&!f.option.isLive){let{$video:h,$progress:p}=f.template,g=null,b=!1,y=0,T=0,x=0,w=A=>{if(A.touches.length===1&&!f.isLock){g===p&&(0,a.setCurrentTime)(f,A),b=!0;let{pageX:_,pageY:I}=A.touches[0];y=_,T=I,x=f.currentTime}},S=A=>{if(A.touches.length===1&&b&&f.duration){let{pageX:_,pageY:I}=A.touches[0],P=(function(B,N,V,ee){let z=N-ee,H=V-B,W=0;if(2>Math.abs(H)&&2>Math.abs(z))return W;let k=180*Math.atan2(z,H)/Math.PI;return k>=-45&&k<45?W=4:k>=45&&k<135?W=1:k>=-135&&k<-45?W=2:(k>=135&&k<=180||k>=-180&&k<-135)&&(W=3),W})(y,T,_,I),C=[3,4].includes(P),O=[1,2].includes(P);if(C&&!f.isRotate||O&&f.isRotate){let B=(0,l.clamp)((_-y)/f.width,-1,1),N=(0,l.clamp)((I-T)/f.height,-1,1),V=f.isRotate?N:B,ee=g===h?f.constructor.TOUCH_MOVE_RATIO:1,z=(0,l.clamp)(x+f.duration*V*ee,0,f.duration);f.seek=z,f.emit("setBar","played",(0,l.clamp)(z/f.duration,0,1),A),f.notice.show=`${(0,l.secondToTime)(z)} / ${(0,l.secondToTime)(f.duration)}`}}};f.option.gesture&&(d.proxy(h,"touchstart",A=>{g=h,w(A)}),d.proxy(h,"touchmove",S)),d.proxy(p,"touchstart",A=>{g=p,w(A)}),d.proxy(p,"touchmove",S),f.on("document:touchend",()=>{b&&(y=0,T=0,x=0,b=!1,g=null)})}}},{"../control/progress":"1XZSS","../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],ikBrS:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");function a(l,c){let f=["click","mouseup","keydown","touchend","touchmove","mousemove","pointerup","contextmenu","pointermove","visibilitychange","webkitfullscreenchange"],d=["resize","scroll","orientationchange"],h=[];function p(g={}){for(let y=0;y<h.length;y++)c.remove(h[y]);h.length=0;let{$player:b}=l.template;f.forEach(y=>{let T=g.document||b.ownerDocument||document,x=c.proxy(T,y,w=>{l.emit(`document:${y}`,w)});h.push(x)}),d.forEach(y=>{let T=g.window||b.ownerDocument?.defaultView||window,x=c.proxy(T,y,w=>{l.emit(`window:${y}`,w)});h.push(x)})}p(),c.bindGlobalEvents=p}s.defineInteropFlag(t),s.export(t,"default",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],jwNq0:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c,f){let{$player:d}=c.template;f.hover(d,h=>{(0,a.addClass)(d,"art-hover"),c.emit("hover",!0,h)},h=>{(0,a.removeClass)(d,"art-hover"),c.emit("hover",!1,h)})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],eqSsP:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");function a(l,c){let{$player:f}=l.template;c.proxy(f,"mousemove",d=>{l.emit("mousemove",d)})}s.defineInteropFlag(t),s.export(t,"default",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"42JNz":[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c,f){let{option:d,constructor:h}=c;c.on("resize",()=>{let{aspectRatio:g,notice:b}=c;c.state==="standard"&&d.autoSize&&c.autoSize(),c.aspectRatio=g,b.show=""});let p=(0,a.debounce)(()=>c.emit("resize"),h.RESIZE_TIME);c.on("window:orientationchange",()=>p()),c.on("window:resize",()=>p()),screen&&screen.orientation&&screen.orientation.onchange&&f.proxy(screen.orientation,"change",()=>p())}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"7kM1M":[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");function a(l){if(l.constructor.USE_RAF){let c=null;(function f(){l.playing&&l.emit("raf"),l.isDestroy||(c=requestAnimationFrame(f))})(),l.on("destroy",()=>{cancelAnimationFrame(c)})}}s.defineInteropFlag(t),s.export(t,"default",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"2IW9m":[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){let{option:f,constructor:d,template:{$container:h}}=c,p=(0,a.throttle)(()=>{c.emit("view",(0,a.isInViewport)(h,d.SCROLL_GAP))},d.SCROLL_TIME);c.on("window:scroll",()=>p()),c.on("view",g=>{f.autoMini&&(c.mini=!g)})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],dswts:[function(n,e,t,i){n("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(t);var s=n("./utils");t.default=class{constructor(a){this.art=a,this.keys={},a.option.hotkey&&!s.isMobile&&this.init()}init(){let{constructor:a}=this.art;this.add("Escape",()=>{this.art.fullscreenWeb&&(this.art.fullscreenWeb=!1)}),this.add("Space",()=>{this.art.toggle()}),this.add("ArrowLeft",()=>{this.art.backward=a.SEEK_STEP}),this.add("ArrowUp",()=>{this.art.volume+=a.VOLUME_STEP}),this.add("ArrowRight",()=>{this.art.forward=a.SEEK_STEP}),this.add("ArrowDown",()=>{this.art.volume-=a.VOLUME_STEP}),this.art.on("document:keydown",l=>{if(this.art.isFocus){let c=document.activeElement.tagName.toUpperCase(),f=document.activeElement.getAttribute("contenteditable");if(c!=="INPUT"&&c!=="TEXTAREA"&&f!==""&&f!=="true"&&!l.altKey&&!l.ctrlKey&&!l.metaKey&&!l.shiftKey){let d=this.keys[l.code];if(d){l.preventDefault();for(let h=0;h<d.length;h++)d[h].call(this.art,l);this.art.emit("hotkey",l)}}}this.art.emit("keydown",l)})}add(a,l){return this.keys[a]?this.keys[a].push(l):this.keys[a]=[l],this}remove(a,l){if(this.keys[a]){let c=this.keys[a].indexOf(l);c!==-1&&this.keys[a].splice(c,1)}return this}}},{"./utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],d9ktO:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t);var a=n("../utils"),l=n("./zh-cn"),c=s.interopDefault(l);t.default=class{constructor(f){this.art=f,this.languages={"zh-cn":c.default},this.language={},this.update(f.option.i18n)}init(){let f=this.art.option.lang.toLowerCase();this.language=this.languages[f]||{}}get(f){return this.language[f]||f}update(f){this.languages=(0,a.mergeDeep)(this.languages,f),this.init()}}},{"../utils":"aBlEo","./zh-cn":"3hyaR","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"3hyaR":[function(n,e,t,i){n("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(t);let s={"Video Info":"",Close:"","Video Load Failed":"",Volume:"",Play:"",Pause:"",Rate:"",Mute:"","Video Flip":"",Horizontal:"",Vertical:"",Reconnect:"","Show Setting":"","Hide Setting":"",Screenshot:"","Play Speed":"","Aspect Ratio":"",Default:"",Normal:"",Open:"","Switch Video":"","Switch Subtitle":"",Fullscreen:"","Exit Fullscreen":"","Web Fullscreen":"","Exit Web Fullscreen":"","Mini Player":"","PIP Mode":"","Exit PIP Mode":"","PIP Not Supported":"","Fullscreen Not Supported":"","Subtitle Offset":"","Last Seen":"","Jump Play":"",AirPlay:"","AirPlay Not Available":""};t.default=s,typeof window<"u"&&(window["artplayer-i18n-zh-cn"]=s)},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],fFHY0:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t);var a=n("bundle-text:./airplay.svg"),l=s.interopDefault(a),c=n("bundle-text:./arrow-left.svg"),f=s.interopDefault(c),d=n("bundle-text:./arrow-right.svg"),h=s.interopDefault(d),p=n("bundle-text:./aspect-ratio.svg"),g=s.interopDefault(p),b=n("bundle-text:./check.svg"),y=s.interopDefault(b),T=n("bundle-text:./close.svg"),x=s.interopDefault(T),w=n("bundle-text:./config.svg"),S=s.interopDefault(w),A=n("bundle-text:./error.svg"),_=s.interopDefault(A),I=n("bundle-text:./flip.svg"),P=s.interopDefault(I),C=n("bundle-text:./fullscreen-off.svg"),O=s.interopDefault(C),B=n("bundle-text:./fullscreen-on.svg"),N=s.interopDefault(B),V=n("bundle-text:./fullscreen-web-off.svg"),ee=s.interopDefault(V),z=n("bundle-text:./fullscreen-web-on.svg"),H=s.interopDefault(z),W=n("bundle-text:./loading.svg"),k=s.interopDefault(W),G=n("bundle-text:./lock.svg"),K=s.interopDefault(G),oe=n("bundle-text:./pause.svg"),fe=s.interopDefault(oe),M=n("bundle-text:./pip.svg"),$=s.interopDefault(M),se=n("bundle-text:./play.svg"),de=s.interopDefault(se),he=n("bundle-text:./playback-rate.svg"),me=s.interopDefault(he),Se=n("bundle-text:./screenshot.svg"),Oe=s.interopDefault(Se),ke=n("bundle-text:./setting.svg"),pt=s.interopDefault(ke),It=n("bundle-text:./state.svg"),Xt=s.interopDefault(It),Ni=n("bundle-text:./switch-off.svg"),Pt=s.interopDefault(Ni),on=n("bundle-text:./switch-on.svg"),Le=s.interopDefault(on),ye=n("bundle-text:./unlock.svg"),Dt=s.interopDefault(ye),gt=n("bundle-text:./volume-close.svg"),yt=s.interopDefault(gt),$t=n("bundle-text:./volume.svg"),Wt=s.interopDefault($t),ei=n("../utils");t.default=class{constructor(ut){let wn={loading:k.default,state:Xt.default,play:de.default,pause:fe.default,check:y.default,volume:Wt.default,volumeClose:yt.default,screenshot:Oe.default,setting:pt.default,pip:$.default,arrowLeft:f.default,arrowRight:h.default,playbackRate:me.default,aspectRatio:g.default,config:S.default,lock:K.default,flip:P.default,unlock:Dt.default,fullscreenOff:O.default,fullscreenOn:N.default,fullscreenWebOff:ee.default,fullscreenWebOn:H.default,switchOn:Le.default,switchOff:Pt.default,error:_.default,close:x.default,airplay:l.default,...ut.option.icons};for(let li in wn)(0,ei.def)(this,li,{get:()=>(0,ei.getIcon)(li,wn[li])})}}},{"bundle-text:./airplay.svg":"gkZgZ","bundle-text:./arrow-left.svg":"kQyD4","bundle-text:./arrow-right.svg":"64ztm","bundle-text:./aspect-ratio.svg":"72LvA","bundle-text:./check.svg":"4QmBo","bundle-text:./close.svg":"j1hoe","bundle-text:./config.svg":"hNZaT","bundle-text:./error.svg":"dKh4l","bundle-text:./flip.svg":"lIEIE","bundle-text:./fullscreen-off.svg":"1533e","bundle-text:./fullscreen-on.svg":"76ut3","bundle-text:./fullscreen-web-off.svg":"3NzMk","bundle-text:./fullscreen-web-on.svg":"12xHc","bundle-text:./loading.svg":"iVcUF","bundle-text:./lock.svg":"1J4so","bundle-text:./pause.svg":"1KgkK","bundle-text:./pip.svg":"4h4tM","bundle-text:./play.svg":"jecAY","bundle-text:./playback-rate.svg":"anPe9","bundle-text:./screenshot.svg":"9BPYQ","bundle-text:./setting.svg":"hsI9k","bundle-text:./state.svg":"gr1ZU","bundle-text:./switch-off.svg":"6kdAr","bundle-text:./switch-on.svg":"ksdMo","bundle-text:./unlock.svg":"iz5Qc","bundle-text:./volume-close.svg":"3OZoa","bundle-text:./volume.svg":"hRYA4","../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],gkZgZ:[function(n,e,t,i){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 18 18"><path d="M16 1H2a1 1 0 0 0-1 1v10a1 1 0 0 0 1 1h3v-2H3V3h12v8h-2v2h3a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1"/><path d="M4 17h10l-5-6Z"/></svg>'},{}],kQyD4:[function(n,e,t,i){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path d="m19.41 20.09-4.58-4.59 4.58-4.59L18 9.5l-6 6 6 6Z"/></svg>'},{}],"64ztm":[function(n,e,t,i){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32"><path d="m12.59 20.34 4.58-4.59-4.58-4.59L14 9.75l6 6-6 6Z"/></svg>'},{}],"72LvA":[function(n,e,t,i){e.exports='<svg xmlns="http://www.w3.org/2000/svg" style="width:100%;height:100%;transform:translate(0)" viewBox="0 0 88 88"><defs><clipPath id="__lottie_element_216"><path d="M0 0h88v88H0Z"/></clipPath></defs><g clip-path="url(#__lottie_element_216)"><g style="display:block"><path d="m12.438-12.702-2.82 2.82c-.79.79-.79 2.05 0 2.83l7.07 7.07-7.07 7.07c-.79.79-.79 2.05 0 2.83l2.82 2.83c.79.78 2.05.78 2.83 1.4495849676166017e-7l11.32-11.31c.78-.78.78-2.05 0-2.83l-11.32-11.31C14.488-13.492 13.228-13.492 12.438-12.702m-24.88 0c-.74-.74-1.92-.78-2.7-.12l-.13.12-11.31 11.31a2 2 0 0 0-.12 2.7l.12.13 11.31 11.31a2 2 0 0 0 2.7.12l.13-.12 2.83-2.83c.74-.74.78-1.91.11-2.7l-.11-.13-7.07-7.07 7.07-7.07c.74-.74.78-1.91.11-2.7l-.11-.13ZM28-28c4.42 0 8 3.58 8 8v40c0 4.42-3.58 8-8 8h-56c-4.42 0-8-3.58-8-8v-40c0-4.42 3.58-8 8-8Z" style="--darkreader-inline-fill:#a8a6a4" transform="translate(44 44)"/></g></g></svg>'},{}],"4QmBo":[function(n,e,t,i){e.exports='<svg xmlns="http://www.w3.org/2000/svg" style="width:100%;height:100%" viewBox="0 0 24 24"><path d="M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4Z"/></svg>'},{}],j1hoe:[function(n,e,t,i){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" class="icon" viewBox="0 0 1024 1024"><path d="m571.733 512 268.8-268.8c17.067-17.067 17.067-42.667 0-59.733C823.467 166.4 797.867 166.4 780.8 183.466L512 452.267l-268.8-268.8C226.133 166.4 200.533 166.4 183.467 183.466c-17.067 17.066-17.067 42.666 0 59.733l268.8 268.8-268.8 268.8c-17.067 17.067-17.067 42.667 0 59.733 8.533 8.534 19.2 12.8 29.866 12.8s21.334-4.266 29.867-12.8l268.8-268.8 268.8 268.8c8.533 8.534 19.2 12.8 29.867 12.8s21.333-4.266 29.866-12.8c17.067-17.066 17.067-42.666 0-59.733Z"/></svg>'},{}],hNZaT:[function(n,e,t,i){e.exports='<svg width="24" height="24" viewBox="0 0 24 24"><path d="M15 17h6v1h-6Zm-4 0H3v1h8v2h1v-5h-1Zm3-9h1V3h-1v2H3v1h11Zm4-3v1h3V5ZM6 14h1V9H6v2H3v1h3Zm4-2h11v-1H10Z" style="--darkreader-inline-fill:#a8a6a4"/></svg>'},{}],dKh4l:[function(n,e,t,i){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="0 0 1024 1024"><path d="M593.818 168.55 949.82 763.76c26.153 43.746 10.732 99.738-34.447 125.052-14.397 8.069-30.72 12.308-47.37 12.308H155.976c-52.224 0-94.536-40.96-94.536-91.505 0-16.097 4.383-31.928 12.718-45.875l356.004-595.19c26.173-43.724 84.009-58.654 129.208-33.341a93.1 93.1 0 0 1 34.447 33.341M512 819.2a61.44 61.44 0 1 0 0-122.88 61.44 61.44 0 0 0 0 122.88m0-512a72.315 72.315 0 0 0-71.762 81.306l25.723 205.721a46.408 46.408 0 0 0 92.078 0l25.723-205.742A72.315 72.315 0 0 0 512 307.2"/></svg>'},{}],lIEIE:[function(n,e,t,i){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="icon" viewBox="0 0 1024 1024"><path d="M554.667 810.667V896h-85.333v-85.333Zm-384-632.662a42.67 42.67 0 0 1 34.987 18.219l203.903 291.328a42.67 42.67 0 0 1 0 48.896L205.611 827.776A42.667 42.667 0 0 1 128 803.328V220.672a42.667 42.667 0 0 1 42.667-42.667m682.666 0a42.667 42.667 0 0 1 42.368 37.717l.299 4.95v582.656a42.667 42.667 0 0 1-74.24 28.63l-3.413-4.182-203.904-291.328a42.67 42.67 0 0 1-3.03-43.861l3.03-5.035 203.946-291.328a42.67 42.67 0 0 1 34.944-18.219M554.667 640v85.333h-85.333V640Zm-358.4-320.896V716.8L335.957 512 196.31 319.104Zm358.4 150.23v85.333h-85.333v-85.333Zm0-170.667V384h-85.333v-85.333Zm0-170.667v85.333h-85.333V128Z"/></svg>'},{}],"1533e":[function(n,e,t,i){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" class="icon" viewBox="0 0 1024 1024"><path d="M768 298.667h170.667V384h-256V128H768ZM341.333 384h-256v-85.333H256V128h85.333ZM768 725.333V896h-85.333V640h256v85.333ZM341.333 640v256H256V725.333H85.333V640Z"/></svg>'},{}],"76ut3":[function(n,e,t,i){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" class="icon" viewBox="0 0 1024 1024"><path d="M625.778 256H768v142.222h113.778v-256h-256ZM256 398.222V256h142.222V142.222h-256v256Zm512 227.556V768H625.778v113.778h256v-256ZM398.222 768H256V625.778H142.222v256h256Z"/></svg>'},{}],"3NzMk":[function(n,e,t,i){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" class="icon" viewBox="0 0 1152 1024"><path d="M1075.2 0H76.8A76.8 76.8 0 0 0 0 76.8v870.4a76.8 76.8 0 0 0 76.8 76.8h998.4a76.8 76.8 0 0 0 76.8-76.8V76.8A76.8 76.8 0 0 0 1075.2 0M1024 128v768H128V128ZM896 512a64 64 0 0 1 7.488 127.552L896 640H768v128a64 64 0 0 1-56.512 63.552L704 832a64 64 0 0 1-63.552-56.512L640 768V582.592c0-34.496 25.024-66.112 61.632-70.208l8-.384Zm-640 0a64 64 0 0 1-7.488-127.552L256 384h128V256a64 64 0 0 1 56.512-63.552L448 192a64 64 0 0 1 63.552 56.512L512 256v185.408c0 34.432-25.024 66.112-61.632 70.144l-8 .448Z"/></svg>'},{}],"12xHc":[function(n,e,t,i){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" class="icon" viewBox="0 0 1152 1024"><path d="M1075.2 0H76.8A76.8 76.8 0 0 0 0 76.8v870.4a76.8 76.8 0 0 0 76.8 76.8h998.4a76.8 76.8 0 0 0 76.8-76.8V76.8A76.8 76.8 0 0 0 1075.2 0M1024 128v768H128V128Zm-576 64a64 64 0 0 1 7.488 127.552L448 320H320v128a64 64 0 0 1-56.512 63.552L256 512a64 64 0 0 1-63.552-56.512L192 448V262.592c0-34.432 25.024-66.112 61.632-70.144l8-.448Zm256 640a64 64 0 0 1-7.488-127.552L704 704h128V576a64 64 0 0 1 56.512-63.552L896 512a64 64 0 0 1 63.552 56.512L960 576v185.408c0 34.496-25.024 66.112-61.632 70.208l-8 .384Z"/></svg>'},{}],iVcUF:[function(n,e,t,i){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" class="uil-default" preserveAspectRatio="xMidYMid" viewBox="0 0 100 100"><path fill="none" d="M0 0h100v100H0Z" class="bk"/><rect width="6" height="20" x="47" y="40" rx="5" ry="5" transform="translate(0 -30)"><animate attributeName="opacity" begin="-1s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect><rect width="6" height="20" x="47" y="40" rx="5" ry="5" transform="rotate(30 105.98 65)"><animate attributeName="opacity" begin="-0.9166666666666666s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect><rect width="6" height="20" x="47" y="40" rx="5" ry="5" transform="rotate(60 75.98 65)"><animate attributeName="opacity" begin="-0.8333333333333334s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect><rect width="6" height="20" x="47" y="40" rx="5" ry="5" transform="rotate(90 65 65)"><animate attributeName="opacity" begin="-0.75s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect><rect width="6" height="20" x="47" y="40" rx="5" ry="5" transform="rotate(120 58.66 65)"><animate attributeName="opacity" begin="-0.6666666666666666s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect><rect width="6" height="20" x="47" y="40" rx="5" ry="5" transform="rotate(150 54.02 65)"><animate attributeName="opacity" begin="-0.5833333333333334s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect><rect width="6" height="20" x="47" y="40" rx="5" ry="5" transform="matrix(-1 0 0 -1 100 130)"><animate attributeName="opacity" begin="-0.5s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect><rect width="6" height="20" x="47" y="40" rx="5" ry="5" transform="rotate(210 45.98 65)"><animate attributeName="opacity" begin="-0.4166666666666667s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect><rect width="6" height="20" x="47" y="40" rx="5" ry="5" transform="rotate(240 41.34 65)"><animate attributeName="opacity" begin="-0.3333333333333333s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect><rect width="6" height="20" x="47" y="40" rx="5" ry="5" transform="rotate(-90 35 65)"><animate attributeName="opacity" begin="-0.25s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect><rect width="6" height="20" x="47" y="40" rx="5" ry="5" transform="rotate(-60 24.02 65)"><animate attributeName="opacity" begin="-0.16666666666666666s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect><rect width="6" height="20" x="47" y="40" rx="5" ry="5" transform="rotate(-30 -5.98 65)"><animate attributeName="opacity" begin="-0.08333333333333333s" dur="1s" from="1" repeatCount="indefinite" to="0"/></rect></svg>'},{}],"1J4so":[function(n,e,t,i){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" class="icon" viewBox="0 0 1024 1024"><path d="M298.667 426.667v-85.333a213.333 213.333 0 1 1 426.667 0v85.333H768A85.333 85.333 0 0 1 853.333 512v256A85.333 85.333 0 0 1 768 853.333H256A85.333 85.333 0 0 1 170.667 768V512A85.333 85.333 0 0 1 256 426.667ZM512 213.333a128 128 0 0 0-128 128v85.333h256v-85.333a128 128 0 0 0-128-128"/></svg>'},{}],"1KgkK":[function(n,e,t,i){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"><path d="M7 3a2 2 0 0 0-2 2v12a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2m8 0a2 2 0 0 0-2 2v12a2 2 0 1 0 4 0V5a2 2 0 0 0-2-2"/></svg>'},{}],"4h4tM":[function(n,e,t,i){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 1024 1024"><path d="M844.8 219.648H179.2c-6.144 0-10.24 4.608-10.24 10.752v563.2c0 5.632 4.096 10.24 10.24 10.24h256V896h-256A102.4 102.4 0 0 1 76.8 793.6V230.4c0-56.832 45.568-102.4 102.4-102.4h665.6a102.4 102.4 0 0 1 102.4 102.4v204.8h-92.16V230.4c0-6.144-4.608-10.752-10.24-10.752M614.4 588.8c-28.672 0-51.2 22.528-51.2 51.2v204.8c0 28.16 22.528 51.2 51.2 51.2H896c28.16 0 51.2-23.04 51.2-51.2V640c0-28.672-23.04-51.2-51.2-51.2Z"/></svg>'},{}],jecAY:[function(n,e,t,i){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"><path d="M17.982 9.275 8.06 3.27A2.013 2.013 0 0 0 5 4.994v12.011a2.017 2.017 0 0 0 3.06 1.725l9.922-6.005a2.017 2.017 0 0 0 0-3.45"/></svg>'},{}],anPe9:[function(n,e,t,i){e.exports='<svg width="24" height="24" viewBox="0 0 24 24"><path d="M10 8v8l6-4ZM6.3 5l-.6-.8C7.2 3 9 2.2 11 2l.1 1c-1.8.2-3.4.9-4.8 2M5 6.3l-.8-.6C3 7.2 2.2 9 2 11l1 .1c.2-1.8.9-3.4 2-4.8m0 11.4c-1.1-1.4-1.8-3.1-2-4.8L2 13c.2 2 1 3.8 2.2 5.4Zm6.1 3.3c-1.8-.2-3.4-.9-4.8-2l-.6.8C7.2 21 9 21.8 11 22ZM22 12c0-5.2-3.9-9.4-9-10l-.1 1c4.6.5 8.1 4.3 8.1 9s-3.5 8.5-8.1 9l.1 1c5.2-.5 9-4.8 9-10" style="--darkreader-inline-fill:#a8a6a4"/></svg>'},{}],"9BPYQ":[function(n,e,t,i){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 50 50"><path d="M19.402 6a5 5 0 0 0-4.902 4.012L14.098 12H9a5 5 0 0 0-5 5v21a5 5 0 0 0 5 5h32a5 5 0 0 0 5-5V17a5 5 0 0 0-5-5h-5.098l-.402-1.988A5 5 0 0 0 30.598 6ZM25 17c5.52 0 10 4.48 10 10s-4.48 10-10 10-10-4.48-10-10 4.48-10 10-10m0 2c-4.41 0-8 3.59-8 8s3.59 8 8 8 8-3.59 8-8-3.59-8-8-8"/></svg>'},{}],hsI9k:[function(n,e,t,i){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"><circle cx="11" cy="11" r="2"/><path d="M19.164 8.861 17.6 8.6a7 7 0 0 0-1.186-2.099l.574-1.533a1 1 0 0 0-.436-1.217l-1.997-1.153a1 1 0 0 0-1.272.23l-1.008 1.225a7 7 0 0 0-2.55.001L8.716 2.829a1 1 0 0 0-1.272-.23L5.447 3.751a1 1 0 0 0-.436 1.217l.574 1.533A7 7 0 0 0 4.4 8.6l-1.564.261A1 1 0 0 0 2 9.847v2.306c0 .489.353.906.836.986l1.613.269a7 7 0 0 0 1.228 2.075l-.558 1.487a1 1 0 0 0 .436 1.217l1.997 1.153c.423.244.961.147 1.272-.23l1.04-1.263a7.1 7.1 0 0 0 2.272 0l1.04 1.263a1 1 0 0 0 1.272.23l1.997-1.153a1 1 0 0 0 .436-1.217l-.557-1.487c.521-.61.94-1.31 1.228-2.075l1.613-.269a1 1 0 0 0 .835-.986V9.847a1 1 0 0 0-.836-.986M11 15a4 4 0 1 1 0-8 4 4 0 0 1 0 8"/></svg>'},{}],gr1ZU:[function(n,e,t,i){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="80" height="80" viewBox="0 0 24 24"><path d="M9.5 9.325v5.35q0 .575.525.875t1.025-.05l4.15-2.65q.475-.3.475-.85t-.475-.85L11.05 8.5q-.5-.35-1.025-.05t-.525.875M12 22q-2.075 0-3.9-.788t-3.175-2.137q-1.35-1.35-2.137-3.175T2 12t.788-3.9 2.137-3.175q1.35-1.35 3.175-2.137T12 2t3.9.788 3.175 2.137q1.35 1.35 2.138 3.175T22 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T12 22"/></svg>'},{}],"6kdAr":[function(n,e,t,i){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" class="icon" viewBox="0 0 1740 1024"><path d="M511.898 1024h670.515c282.419-.41 511.18-229.478 511.18-511.898 0-282.419-228.761-511.488-511.18-511.897H511.898C229.478.615.717 229.683.717 512.102c0 282.42 228.761 511.488 511.18 511.898m-.564-975.36A464.589 464.589 0 1 1 48.025 513.024 463.87 463.87 0 0 1 511.335 48.435Z"/></svg>'},{}],ksdMo:[function(n,e,t,i){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" class="icon" viewBox="0 0 1664 1024"><path fill="#648ffc" d="M1152 0H512a512 512 0 0 0 0 1024h640a512 512 0 0 0 0-1024m0 960a448 448 0 1 1 448-448 448 448 0 0 1-448 448"/></svg>'},{}],iz5Qc:[function(n,e,t,i){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" class="icon" viewBox="0 0 1024 1024"><path d="m666.752 194.517-49.365 74.112A128 128 0 0 0 384 341.333l.043 85.334h384A85.333 85.333 0 0 1 853.376 512v256a85.333 85.333 0 0 1-85.333 85.333H256A85.333 85.333 0 0 1 170.667 768V512A85.333 85.333 0 0 1 256 426.667h42.667v-85.333a213.333 213.333 0 0 1 368.085-146.816"/></svg>'},{}],"3OZoa":[function(n,e,t,i){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"><path d="M15 11a4 4 0 0 0-2-3.465v2.636l1.865 1.865A4 4 0 0 0 15 11"/><path d="M13.583 5.583A6 6 0 0 1 17 11a6 6 0 0 1-.585 2.587l1.477 1.477a8 8 0 0 0-3.446-11.286 1 1 0 0 0-.863 1.805m5.195 13.195-2.121-2.121-1.414-1.414-1.415-1.415L13 13l-2-2-3.889-3.889-3.889-3.889a.999.999 0 1 0-1.414 1.414L5.172 8H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h1l4.188 3.35a.5.5 0 0 0 .812-.39v-3.131l2.587 2.587-.01.005a1 1 0 0 0 .86 1.806q.322-.154.627-.333l2.3 2.3a1.001 1.001 0 0 0 1.414-1.416M11 5.04a.5.5 0 0 0-.813-.39L8.682 5.854 11 8.172Z"/></svg>'},{}],hRYA4:[function(n,e,t,i){e.exports='<svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22"><path d="M10.188 4.65 6 8H5a2 2 0 0 0-2 2v2a2 2 0 0 0 2 2h1l4.188 3.35a.5.5 0 0 0 .812-.39V5.04a.498.498 0 0 0-.812-.39m4.258-.872a1 1 0 0 0-.862 1.804 6.002 6.002 0 0 1-.007 10.838 1 1 0 0 0 .86 1.806A8 8 0 0 0 19 11a8 8 0 0 0-4.554-7.222"/><path d="M15 11a4 4 0 0 0-2-3.465v6.93A4 4 0 0 0 15 11"/></svg>'},{}],kZ0F8:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t);var a=n("./utils"),l=n("./utils/component"),c=s.interopDefault(l);class f extends c.default{constructor(h){super(h),this.name="info",a.isMobile||this.init()}init(){let{proxy:h,constructor:p,template:{$infoPanel:g,$infoClose:b,$video:y}}=this.art;h(b,"click",()=>{this.show=!1});let T=null,x=(0,a.queryAll)("[data-video]",g)||[];this.art.on("destroy",()=>clearTimeout(T)),(function w(){for(let S=0;S<x.length;S++){let A=x[S],_=y[A.dataset.video],I=typeof _=="number"?_.toFixed(2):_;A.textContent!==I&&(A.textContent=I)}T=setTimeout(w,p.INFO_LOOP_TIME)})()}}t.default=f},{"./utils":"aBlEo","./utils/component":"idCEj","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],j9lbi:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t);var a=n("./utils/component"),l=s.interopDefault(a);class c extends l.default{constructor(d){super(d);let{option:h,template:{$layer:p}}=d;this.name="layer",this.$parent=p;for(let g=0;g<h.layers.length;g++)this.add(h.layers[g])}}t.default=c},{"./utils/component":"idCEj","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],bMjWd:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t);var a=n("./utils"),l=n("./utils/component"),c=s.interopDefault(l);class f extends c.default{constructor(h){super(h),this.name="loading",(0,a.append)(h.template.$loading,h.icons.loading)}}t.default=f},{"./utils":"aBlEo","./utils/component":"idCEj","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],k1nkQ:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t);var a=n("./utils"),l=n("./utils/component"),c=s.interopDefault(l);class f extends c.default{constructor(h){super(h),this.name="mask";let{template:p,icons:g,events:b}=h,y=(0,a.append)(p.$state,g.state),T=(0,a.append)(p.$state,g.error);(0,a.setStyle)(T,"display","none"),h.on("destroy",()=>{(0,a.setStyle)(y,"display","none"),(0,a.setStyle)(T,"display",null)}),b.proxy(p.$state,"click",()=>h.play())}}t.default=f},{"./utils":"aBlEo","./utils/component":"idCEj","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],fPVaU:[function(n,e,t,i){n("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(t);var s=n("./utils");t.default=class{constructor(a){this.art=a,this.timer=null}set show(a){let{constructor:l,template:{$player:c,$noticeInner:f}}=this.art;a?(f.textContent=a instanceof Error?a.message.trim():a,(0,s.addClass)(c,"art-notice-show"),clearTimeout(this.timer),this.timer=setTimeout(()=>{f.textContent="",(0,s.removeClass)(c,"art-notice-show")},l.NOTICE_TIME)):(0,s.removeClass)(c,"art-notice-show")}get show(){let{template:{$player:a}}=this.art;return a.classList.contains("art-notice-show")}}},{"./utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],uR0Sw:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t);var a=n("./airplayMix"),l=s.interopDefault(a),c=n("./aspectRatioMix"),f=s.interopDefault(c),d=n("./attrMix"),h=s.interopDefault(d),p=n("./autoHeightMix"),g=s.interopDefault(p),b=n("./autoSizeMix"),y=s.interopDefault(b),T=n("./cssVarMix"),x=s.interopDefault(T),w=n("./currentTimeMix"),S=s.interopDefault(w),A=n("./durationMix"),_=s.interopDefault(A),I=n("./eventInit"),P=s.interopDefault(I),C=n("./flipMix"),O=s.interopDefault(C),B=n("./fullscreenMix"),N=s.interopDefault(B),V=n("./fullscreenWebMix"),ee=s.interopDefault(V),z=n("./loadedMix"),H=s.interopDefault(z),W=n("./miniMix"),k=s.interopDefault(W),G=n("./optionInit"),K=s.interopDefault(G),oe=n("./pauseMix"),fe=s.interopDefault(oe),M=n("./pipMix"),$=s.interopDefault(M),se=n("./playbackRateMix"),de=s.interopDefault(se),he=n("./playedMix"),me=s.interopDefault(he),Se=n("./playingMix"),Oe=s.interopDefault(Se),ke=n("./playMix"),pt=s.interopDefault(ke),It=n("./posterMix"),Xt=s.interopDefault(It),Ni=n("./qualityMix"),Pt=s.interopDefault(Ni),on=n("./rectMix"),Le=s.interopDefault(on),ye=n("./screenshotMix"),Dt=s.interopDefault(ye),gt=n("./seekMix"),yt=s.interopDefault(gt),$t=n("./stateMix"),Wt=s.interopDefault($t),ei=n("./subtitleOffsetMix"),ut=s.interopDefault(ei),wn=n("./switchMix"),li=s.interopDefault(wn),Ns=n("./themeMix"),Jn=s.interopDefault(Ns),Er=n("./thumbnailsMix"),Bs=s.interopDefault(Er),An=n("./toggleMix"),Pu=s.interopDefault(An),Fs=n("./typeMix"),ti=s.interopDefault(Fs),ln=n("./urlMix"),ii=s.interopDefault(ln),Nu=n("./volumeMix"),Bu=s.interopDefault(Nu);t.default=class{constructor(Ne){(0,ii.default)(Ne),(0,h.default)(Ne),(0,pt.default)(Ne),(0,fe.default)(Ne),(0,Pu.default)(Ne),(0,yt.default)(Ne),(0,Bu.default)(Ne),(0,S.default)(Ne),(0,_.default)(Ne),(0,li.default)(Ne),(0,de.default)(Ne),(0,f.default)(Ne),(0,Dt.default)(Ne),(0,N.default)(Ne),(0,ee.default)(Ne),(0,$.default)(Ne),(0,H.default)(Ne),(0,me.default)(Ne),(0,Oe.default)(Ne),(0,y.default)(Ne),(0,Le.default)(Ne),(0,O.default)(Ne),(0,k.default)(Ne),(0,Xt.default)(Ne),(0,g.default)(Ne),(0,x.default)(Ne),(0,Jn.default)(Ne),(0,ti.default)(Ne),(0,Wt.default)(Ne),(0,ut.default)(Ne),(0,l.default)(Ne),(0,Pt.default)(Ne),(0,Bs.default)(Ne),(0,P.default)(Ne),(0,K.default)(Ne)}}},{"./airplayMix":"d8BTB","./aspectRatioMix":"aQNJl","./attrMix":"5DA9e","./autoHeightMix":"1swKn","./autoSizeMix":"lSbiD","./cssVarMix":"32Hp1","./currentTimeMix":"kfZbu","./durationMix":"eV1ag","./eventInit":"f8NQq","./flipMix":"ea3Qm","./fullscreenMix":"ffXE3","./fullscreenWebMix":"8tarF","./loadedMix":"f9syH","./miniMix":"dLuS7","./optionInit":"d1F69","./pauseMix":"kewk9","./pipMix":"4XzDs","./playbackRateMix":"jphfi","./playedMix":"iNpeS","./playingMix":"aBIWL","./playMix":"hRBri","./posterMix":"fgfXC","./qualityMix":"17rUP","./rectMix":"55qzI","./screenshotMix":"bC6TG","./seekMix":"j8GRO","./stateMix":"cn7iR","./subtitleOffsetMix":"2k4nP","./switchMix":"6SU6j","./themeMix":"7iMuh","./thumbnailsMix":"6P0RS","./toggleMix":"eNi78","./typeMix":"7AUBD","./urlMix":"cnlLL","./volumeMix":"iX66j","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],d8BTB:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){let{i18n:f,notice:d,proxy:h,template:{$video:p}}=c,g=!0;window.WebKitPlaybackTargetAvailabilityEvent&&p.webkitShowPlaybackTargetPicker?h(p,"webkitplaybacktargetavailabilitychanged",b=>{switch(b.availability){case"available":g=!0;break;case"not-available":g=!1}}):g=!1,(0,a.def)(c,"airplay",{value(){g?(p.webkitShowPlaybackTargetPicker(),c.emit("airplay")):d.show=f.get("AirPlay Not Available")}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],aQNJl:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){let{i18n:f,notice:d,template:{$video:h,$player:p}}=c;(0,a.def)(c,"aspectRatio",{get:()=>p.dataset.aspectRatio||"default",set(g){if(g||(g="default"),g==="default")(0,a.setStyle)(h,"width",null),(0,a.setStyle)(h,"height",null),(0,a.setStyle)(h,"margin",null),delete p.dataset.aspectRatio;else{let b=g.split(":").map(Number),{clientWidth:y,clientHeight:T}=p,x=b[0]/b[1];y/T>x?((0,a.setStyle)(h,"width",`${x*T}px`),(0,a.setStyle)(h,"height","100%"),(0,a.setStyle)(h,"margin","0 auto")):((0,a.setStyle)(h,"width","100%"),(0,a.setStyle)(h,"height",`${y/x}px`),(0,a.setStyle)(h,"margin","auto 0")),p.dataset.aspectRatio=g}d.show=`${f.get("Aspect Ratio")}: ${g==="default"?f.get("Default"):g}`,c.emit("aspectRatio",g)}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"5DA9e":[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){let{template:{$video:f}}=c;(0,a.def)(c,"attr",{value(d,h){if(h===void 0)return f[d];f[d]=h}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"1swKn":[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){let{template:{$container:f,$video:d}}=c;(0,a.def)(c,"autoHeight",{value(){let{clientWidth:h}=f,{videoHeight:p,videoWidth:g}=d,b=h/g*p;(0,a.setStyle)(f,"height",`${b}px`),c.emit("autoHeight",b)}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],lSbiD:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){let{$container:f,$player:d,$video:h}=c.template;(0,a.def)(c,"autoSize",{value(){let{videoWidth:p,videoHeight:g}=h,{width:b,height:y}=(0,a.getRect)(f),T=p/g;b/y>T?((0,a.setStyle)(d,"width",`${y*T/b*100}%`),(0,a.setStyle)(d,"height","100%")):((0,a.setStyle)(d,"width","100%"),(0,a.setStyle)(d,"height",`${b/T/y*100}%`)),c.emit("autoSize",{width:c.width,height:c.height})}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"32Hp1":[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){let{$player:f}=c.template;(0,a.def)(c,"cssVar",{value:(d,h)=>h?f.style.setProperty(d,h):getComputedStyle(f).getPropertyValue(d)})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],kfZbu:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){let{$video:f}=c.template;(0,a.def)(c,"currentTime",{get:()=>f.currentTime||0,set:d=>{Number.isNaN(d=Number.parseFloat(d))||(f.currentTime=(0,a.clamp)(d,0,c.duration))}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],eV1ag:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){(0,a.def)(c,"duration",{get:()=>{let{duration:f}=c.template.$video;return f===1/0?0:f||0}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],f8NQq:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>f);var a=n("../config"),l=s.interopDefault(a),c=n("../utils");function f(d){let{i18n:h,notice:p,option:g,constructor:b,proxy:y,template:{$player:T,$video:x,$poster:w}}=d,S=0;for(let A=0;A<l.default.events.length;A++)y(x,l.default.events[A],_=>{d.emit(`video:${_.type}`,_)});d.on("video:canplay",()=>{S=0,d.loading.show=!1}),d.once("video:canplay",()=>{d.loading.show=!1,d.controls.show=!0,d.mask.show=!0,d.isReady=!0,d.emit("ready")}),d.on("video:ended",()=>{g.loop?(d.seek=0,d.play(),d.controls.show=!1,d.mask.show=!1):(d.controls.show=!0,d.mask.show=!0)}),d.on("video:error",async A=>{S<b.RECONNECT_TIME_MAX?(await(0,c.sleep)(b.RECONNECT_SLEEP_TIME),S+=1,d.url=g.url,p.show=`${h.get("Reconnect")}: ${S}`,d.emit("error",A,S)):(d.mask.show=!0,d.loading.show=!1,d.controls.show=!0,(0,c.addClass)(T,"art-error"),await(0,c.sleep)(b.RECONNECT_SLEEP_TIME),p.show=h.get("Video Load Failed"))}),d.on("video:loadedmetadata",()=>{d.emit("resize"),c.isMobile&&(d.loading.show=!1,d.controls.show=!0,d.mask.show=!0)}),d.on("video:loadstart",()=>{d.loading.show=!0,d.mask.show=!1,d.controls.show=!0}),d.on("video:pause",()=>{d.controls.show=!0,d.mask.show=!0}),d.on("video:play",()=>{d.mask.show=!1,(0,c.setStyle)(w,"display","none")}),d.on("video:playing",()=>{d.mask.show=!1}),d.on("video:progress",()=>{d.playing&&(d.loading.show=!1)}),d.on("video:seeked",()=>{d.loading.show=!1,d.mask.show=!0}),d.on("video:seeking",()=>{d.loading.show=!0,d.mask.show=!1}),d.on("video:timeupdate",()=>{d.mask.show=!1}),d.on("video:waiting",()=>{d.loading.show=!0,d.mask.show=!1})}},{"../config":"eJfh8","../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],ea3Qm:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){let{template:{$player:f},i18n:d,notice:h}=c;(0,a.def)(c,"flip",{get:()=>f.dataset.flip||"normal",set(p){p||(p="normal"),p==="normal"?delete f.dataset.flip:f.dataset.flip=p,h.show=`${d.get("Video Flip")}: ${d.get((0,a.capitalize)(p))}`,c.emit("flip",p)}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],ffXE3:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>f);var a=n("../libs/screenfull"),l=s.interopDefault(a),c=n("../utils");function f(d){let{i18n:h,notice:p,template:{$video:g,$player:b}}=d;d.once("video:loadedmetadata",()=>{l.default.isEnabled?(l.default.on("change",()=>{d.emit("fullscreen",l.default.isFullscreen),l.default.isFullscreen?(d.state="fullscreen",(0,c.addClass)(b,"art-fullscreen")):(0,c.removeClass)(b,"art-fullscreen"),d.emit("resize")}),l.default.on("error",y=>{d.emit("fullscreenError",y)}),(0,c.def)(d,"fullscreen",{get:()=>l.default.isFullscreen,async set(y){y?await l.default.request(b):await l.default.exit()}})):g.webkitSupportsFullscreen?(d.on("document:webkitfullscreenchange",()=>{d.emit("fullscreen",d.fullscreen),d.emit("resize")}),(0,c.def)(d,"fullscreen",{get:()=>document.fullscreenElement===g,set(y){y?(d.state="fullscreen",g.webkitEnterFullscreen()):g.webkitExitFullscreen()}})):(0,c.def)(d,"fullscreen",{get:()=>!1,set(){p.show=h.get("Fullscreen Not Supported")}}),(0,c.def)(d,"fullscreen",(0,c.get)(d,"fullscreen"))})}},{"../libs/screenfull":"iSPAQ","../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],iSPAQ:[function(n,e,t,i){n("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(t);let s=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],a=(()=>{if(typeof document>"u")return!1;let f=s[0],d={};for(let h of s)if(h[1]in document){for(let[p,g]of h.entries())d[f[p]]=g;return d}return!1})(),l={change:a.fullscreenchange,error:a.fullscreenerror},c={request:(f=document.documentElement,d)=>new Promise((h,p)=>{let g=()=>{c.off("change",g),h()};c.on("change",g);let b=f[a.requestFullscreen](d);b instanceof Promise&&b.then(g).catch(p)}),exit:()=>new Promise((f,d)=>{if(!c.isFullscreen)return void f();let h=()=>{c.off("change",h),f()};c.on("change",h);let p=document[a.exitFullscreen]();p instanceof Promise&&p.then(h).catch(d)}),toggle:(f,d)=>c.isFullscreen?c.exit():c.request(f,d),onchange(f){c.on("change",f)},onerror(f){c.on("error",f)},on(f,d){let h=l[f];h&&document.addEventListener(h,d,!1)},off(f,d){let h=l[f];h&&document.removeEventListener(h,d,!1)},raw:a};Object.defineProperties(c,{isFullscreen:{get:()=>!!document[a.fullscreenElement]},element:{enumerable:!0,get:()=>document[a.fullscreenElement]},isEnabled:{enumerable:!0,get:()=>!!document[a.fullscreenEnabled]}}),t.default=c},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"8tarF":[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){let{constructor:f,template:{$container:d,$player:h}}=c,p="";(0,a.def)(c,"fullscreenWeb",{get:()=>(0,a.hasClass)(h,"art-fullscreen-web"),set(g){g?(p=h.style.cssText,f.FULLSCREEN_WEB_IN_BODY&&(0,a.append)(document.body,h),c.state="fullscreenWeb",(0,a.setStyle)(h,"width","100%"),(0,a.setStyle)(h,"height","100%"),(0,a.addClass)(h,"art-fullscreen-web"),c.emit("fullscreenWeb",!0)):(f.FULLSCREEN_WEB_IN_BODY&&(0,a.append)(d,h),p&&(h.style.cssText=p,p=""),(0,a.removeClass)(h,"art-fullscreen-web"),c.emit("fullscreenWeb",!1)),c.emit("resize")}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],f9syH:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){let{$video:f}=c.template;(0,a.def)(c,"loaded",{get:()=>c.loadedTime/f.duration}),(0,a.def)(c,"loadedTime",{get:()=>f.buffered.length?f.buffered.end(f.buffered.length-1):0})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],dLuS7:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){let{icons:f,proxy:d,storage:h,template:{$player:p,$video:g}}=c,b=!1,y=0,T=0;function x(){let{$mini:A}=c.template;A&&((0,a.removeClass)(p,"art-mini"),(0,a.setStyle)(A,"display","none"),p.prepend(g),c.emit("mini",!1))}function w(A,_){c.playing?((0,a.setStyle)(A,"display","none"),(0,a.setStyle)(_,"display","flex")):((0,a.setStyle)(A,"display","flex"),(0,a.setStyle)(_,"display","none"))}function S(){let{$mini:A}=c.template,_=(0,a.getRect)(A),I=window.innerHeight-_.height-50,P=window.innerWidth-_.width-50;h.set("top",I),h.set("left",P),(0,a.setStyle)(A,"top",`${I}px`),(0,a.setStyle)(A,"left",`${P}px`)}(0,a.def)(c,"mini",{get:()=>(0,a.hasClass)(p,"art-mini"),set(A){if(A){c.state="mini",(0,a.addClass)(p,"art-mini");let _=(function(){let{$mini:C}=c.template;if(C)return(0,a.append)(C,g),(0,a.setStyle)(C,"display","flex");{let O=(0,a.createElement)("div");(0,a.addClass)(O,"art-mini-popup"),(0,a.append)(document.body,O),c.template.$mini=O,(0,a.append)(O,g);let B=(0,a.append)(O,'<div class="art-mini-close"></div>');(0,a.append)(B,f.close),d(B,"click",x);let N=(0,a.append)(O,'<div class="art-mini-state"></div>'),V=(0,a.append)(N,f.play),ee=(0,a.append)(N,f.pause);return d(V,"click",()=>c.play()),d(ee,"click",()=>c.pause()),w(V,ee),c.on("video:playing",()=>w(V,ee)),c.on("video:pause",()=>w(V,ee)),c.on("video:timeupdate",()=>w(V,ee)),d(O,"mousedown",z=>{b=z.button===0,y=z.pageX,T=z.pageY}),c.on("document:mousemove",z=>{if(b){(0,a.addClass)(O,"art-mini-dragging");let H=z.pageX-y,W=z.pageY-T;(0,a.setStyle)(O,"transform",`translate(${H}px, ${W}px)`)}}),c.on("document:mouseup",()=>{if(b){b=!1,(0,a.removeClass)(O,"art-mini-dragging");let z=(0,a.getRect)(O);h.set("left",z.left),h.set("top",z.top),(0,a.setStyle)(O,"left",`${z.left}px`),(0,a.setStyle)(O,"top",`${z.top}px`),(0,a.setStyle)(O,"transform",null)}}),O}})(),I=h.get("top"),P=h.get("left");typeof I=="number"&&typeof P=="number"?((0,a.setStyle)(_,"top",`${I}px`),(0,a.setStyle)(_,"left",`${P}px`),(0,a.isInViewport)(_)||S()):S(),c.emit("mini",!0)}else x()}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],d1F69:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){let{option:f,storage:d,template:{$video:h,$poster:p}}=c;for(let b in f.moreVideoAttr)c.attr(b,f.moreVideoAttr[b]);f.muted&&(c.muted=f.muted),f.volume&&(h.volume=(0,a.clamp)(f.volume,0,1));let g=d.get("volume");for(let b in typeof g=="number"&&(h.volume=(0,a.clamp)(g,0,1)),f.poster&&(0,a.setStyle)(p,"backgroundImage",`url(${f.poster})`),f.autoplay&&(h.autoplay=f.autoplay),f.playsInline&&(h.playsInline=!0,h["webkit-playsinline"]=!0),f.theme&&(f.cssVar["--art-theme"]=f.theme),f.cssVar)c.cssVar(b,f.cssVar[b]);c.url=f.url}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],kewk9:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){let{template:{$video:f},i18n:d,notice:h}=c;(0,a.def)(c,"pause",{value(){let p=f.pause();return h.show=d.get("Pause"),c.emit("pause"),p}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"4XzDs":[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){let{i18n:f,notice:d,template:{$video:h}}=c;if(document.pictureInPictureEnabled){let{template:{$video:p},proxy:g,notice:b}=c;p.disablePictureInPicture=!1,(0,a.def)(c,"pip",{get:()=>document.pictureInPictureElement,set(y){y?(c.state="pip",p.requestPictureInPicture().catch(T=>{throw b.show=T,T})):document.exitPictureInPicture().catch(T=>{throw b.show=T,T})}}),g(p,"enterpictureinpicture",()=>{c.emit("pip",!0)}),g(p,"leavepictureinpicture",()=>{c.emit("pip",!1)})}else if(h.webkitSupportsPresentationMode){let{$video:p}=c.template;p.webkitSetPresentationMode("inline"),(0,a.def)(c,"pip",{get:()=>p.webkitPresentationMode==="picture-in-picture",set(g){g?(c.state="pip",p.webkitSetPresentationMode("picture-in-picture"),c.emit("pip",!0)):(p.webkitSetPresentationMode("inline"),c.emit("pip",!1))}})}else(0,a.def)(c,"pip",{get:()=>!1,set(){d.show=f.get("PIP Not Supported")}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],jphfi:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){let{template:{$video:f},i18n:d,notice:h}=c;(0,a.def)(c,"playbackRate",{get:()=>f.playbackRate,set(p){p?p!==f.playbackRate&&(f.playbackRate=p,h.show=`${d.get("Rate")}: ${p===1?d.get("Normal"):`${p}x`}`):c.playbackRate=1}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],iNpeS:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){(0,a.def)(c,"played",{get:()=>c.currentTime/c.duration})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],aBIWL:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){let{$video:f}=c.template;(0,a.def)(c,"playing",{get:()=>typeof f.playing=="boolean"?f.playing:f.currentTime>0&&!f.paused&&!f.ended&&f.readyState>2})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],hRBri:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){let{i18n:f,notice:d,option:h,constructor:{instances:p},template:{$video:g}}=c;(0,a.def)(c,"play",{async value(){let b=await g.play();if(d.show=f.get("Play"),c.emit("play"),h.mutex)for(let y=0;y<p.length;y++){let T=p[y];T!==c&&T.pause()}return b}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],fgfXC:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){let{template:{$poster:f}}=c;(0,a.def)(c,"poster",{get:()=>{try{return f.style.backgroundImage.match(/"(.*)"/)[1]}catch{return""}},set(d){(0,a.setStyle)(f,"backgroundImage",`url(${d})`)}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"17rUP":[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){(0,a.def)(c,"quality",{set(f){let{controls:d,notice:h,i18n:p}=c,g=f.find(b=>b.default)||f[0];d.update({name:"quality",position:"right",index:10,style:{marginRight:"10px"},html:g?.html||"",selector:f,onSelect:async b=>(await c.switchQuality(b.url),h.show=`${p.get("Switch Video")}: ${b.html}`,b.html)})}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"55qzI":[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){(0,a.def)(c,"rect",{get:()=>(0,a.getRect)(c.template.$player)});let f=["bottom","height","left","right","top","width"];for(let d=0;d<f.length;d++){let h=f[d];(0,a.def)(c,h,{get:()=>c.rect[h]})}(0,a.def)(c,"x",{get:()=>c.left+window.pageXOffset}),(0,a.def)(c,"y",{get:()=>c.top+window.pageYOffset})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],bC6TG:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){let{notice:f,template:{$video:d}}=c,h=(0,a.createElement)("canvas");(0,a.def)(c,"getDataURL",{value:()=>new Promise((p,g)=>{try{h.width=d.videoWidth,h.height=d.videoHeight,h.getContext("2d").drawImage(d,0,0),p(h.toDataURL("image/png"))}catch(b){f.show=b,g(b)}})}),(0,a.def)(c,"getBlobUrl",{value:()=>new Promise((p,g)=>{try{h.width=d.videoWidth,h.height=d.videoHeight,h.getContext("2d").drawImage(d,0,0),h.toBlob(b=>{p(URL.createObjectURL(b))})}catch(b){f.show=b,g(b)}})}),(0,a.def)(c,"screenshot",{value:async p=>{let g=await c.getDataURL(),b=p||`artplayer_${(0,a.secondToTime)(d.currentTime)}`;return(0,a.download)(g,`${b}.png`),c.emit("screenshot",g),g}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],j8GRO:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){let{notice:f}=c;(0,a.def)(c,"seek",{set(d){c.currentTime=d,c.duration&&(f.show=`${(0,a.secondToTime)(c.currentTime)} / ${(0,a.secondToTime)(c.duration)}`),c.emit("seek",c.currentTime)}}),(0,a.def)(c,"forward",{set(d){c.seek=c.currentTime+d}}),(0,a.def)(c,"backward",{set(d){c.seek=c.currentTime-d}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],cn7iR:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){let f=["mini","pip","fullscreen","fullscreenWeb"];(0,a.def)(c,"state",{get:()=>f.find(d=>c[d])||"standard",set(d){for(let h=0;h<f.length;h++){let p=f[h];p!==d&&c[p]&&(c[p]=!1)}}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"2k4nP":[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){let{notice:f,i18n:d,template:h}=c;(0,a.def)(c,"subtitleOffset",{get:()=>h.$track?.offset||0,set(p){let{cues:g}=c.subtitle;if(!h.$track||g.length===0)return;let b=(0,a.clamp)(p,-10,10);h.$track.offset=b;for(let y=0;y<g.length;y++){let T=g[y];T.originalStartTime=T.originalStartTime??T.startTime,T.originalEndTime=T.originalEndTime??T.endTime,T.startTime=(0,a.clamp)(T.originalStartTime+b,0,c.duration),T.endTime=(0,a.clamp)(T.originalEndTime+b,0,c.duration)}c.subtitle.update(),f.show=`${d.get("Subtitle Offset")}: ${p}s`,c.emit("subtitleOffset",p)}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"6SU6j":[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){function f(d,h){return new Promise((p,g)=>{if(d===c.url)return;let{playing:b,aspectRatio:y,playbackRate:T}=c;c.pause(),c.url=d,c.notice.show="",c.once("video:error",g),c.once("video:loadedmetadata",()=>{c.currentTime=h}),c.once("video:canplay",async()=>{c.playbackRate=T,c.aspectRatio=y,b&&await c.play(),c.notice.show="",p()})})}(0,a.def)(c,"switchQuality",{value:d=>f(d,c.currentTime)}),(0,a.def)(c,"switchUrl",{value:d=>f(d,0)}),(0,a.def)(c,"switch",{set:c.switchUrl})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"7iMuh":[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){(0,a.def)(c,"theme",{get:()=>c.cssVar("--art-theme"),set(f){c.cssVar("--art-theme",f)}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"6P0RS":[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){let{events:f,option:d,template:{$progress:h,$video:p}}=c,g=null,b=null,y=!1,T=!1,x=!1;f.hover(h,()=>{x=!0},()=>{x=!1}),c.on("setBar",async(w,S,A)=>{let _=c.controls?.thumbnails,{url:I,scale:P}=d.thumbnails;if(!_||!I)return;let C=w==="played"&&A&&a.isMobile;if(w==="hover"||C){if(y||(y=!0,b=await(0,a.loadImg)(I,P),T=!0),!T||!x)return;let O=h.clientWidth*S;(0,a.setStyle)(_,"display","flex"),O>0&&O<h.clientWidth?(function(B){let N=c.controls?.thumbnails;if(!N)return;let{number:V,column:ee,width:z,height:H,scale:W}=d.thumbnails,k=z*W||b.naturalWidth/ee,G=H*W||k/(p.videoWidth/p.videoHeight),K=Math.floor(B/(h.clientWidth/V)),oe=Math.ceil(K/ee)-1;(0,a.setStyle)(N,"backgroundImage",`url(${b.src})`),(0,a.setStyle)(N,"height",`${G}px`),(0,a.setStyle)(N,"width",`${k}px`),(0,a.setStyle)(N,"backgroundPosition",`-${(K%ee||ee-1)*k}px -${oe*G}px`),B<=k/2?(0,a.setStyle)(N,"left",0):B>h.clientWidth-k/2?(0,a.setStyle)(N,"left",`${h.clientWidth-k}px`):(0,a.setStyle)(N,"left",`${B-k/2}px`)})(O):a.isMobile||(0,a.setStyle)(_,"display","none"),C&&(clearTimeout(g),g=setTimeout(()=>{(0,a.setStyle)(_,"display","none")},500))}}),(0,a.def)(c,"thumbnails",{get:()=>c.option.thumbnails,set(w){w.url&&!c.option.isLive&&(c.option.thumbnails=w,clearTimeout(g),g=null,b=null,y=!1,T=!1)}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],eNi78:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){(0,a.def)(c,"toggle",{value:()=>c.playing?c.pause():c.play()})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"7AUBD":[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){(0,a.def)(c,"type",{get:()=>c.option.type,set(f){c.option.type=f}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],cnlLL:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){let{option:f,template:{$video:d}}=c;(0,a.def)(c,"url",{get:()=>d.src,async set(h){if(h){let p=c.url,g=f.type||(0,a.getExt)(h),b=f.customType[g];g&&b?(await(0,a.sleep)(),c.loading.show=!0,b.call(c,d,h,c)):(URL.revokeObjectURL(p),d.src=h),p!==c.url&&(c.option.url=h,c.isReady&&p&&c.once("video:canplay",()=>{c.emit("restart",h)}))}else await(0,a.sleep)(),c.loading.show=!0}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],iX66j:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){let{template:{$video:f},i18n:d,notice:h,storage:p}=c;(0,a.def)(c,"volume",{get:()=>f.volume||0,set:g=>{f.volume=(0,a.clamp)(g,0,1),h.show=`${d.get("Volume")}: ${Number.parseInt(100*f.volume,10)}`,f.volume!==0&&p.set("volume",f.volume)}}),(0,a.def)(c,"muted",{get:()=>f.muted,set:g=>{f.muted=g,c.emit("muted",g)}})}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],cjxJL:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t);var a=n("../utils"),l=n("./autoOrientation"),c=s.interopDefault(l),f=n("./autoPlayback"),d=s.interopDefault(f),h=n("./fastForward"),p=s.interopDefault(h),g=n("./lock"),b=s.interopDefault(g),y=n("./miniProgressBar"),T=s.interopDefault(y);t.default=class{constructor(x){this.art=x,this.id=0;let{option:w}=x;w.miniProgressBar&&!w.isLive&&this.add(T.default),w.lock&&a.isMobile&&this.add(b.default),w.autoPlayback&&!w.isLive&&this.add(d.default),w.autoOrientation&&a.isMobile&&this.add(c.default),w.fastForward&&a.isMobile&&!w.isLive&&this.add(p.default);for(let S=0;S<w.plugins.length;S++)this.add(w.plugins[S])}add(x){this.id+=1;let w=x.call(this.art,this.art);return w instanceof Promise?w.then(S=>this.next(x,S)):this.next(x,w)}next(x,w){let S=w&&w.name||x.name||`plugin${this.id}`;return(0,a.errorHandle)(!(0,a.has)(this,S),`Cannot add a plugin that already has the same name: ${S}`),(0,a.def)(this,S,{value:w}),this}}},{"../utils":"aBlEo","./autoOrientation":"jb9jb","./autoPlayback":"21HWM","./fastForward":"4sxBO","./lock":"fjy9V","./miniProgressBar":"d0xRp","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],jb9jb:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){let{notice:f,constructor:d,template:{$player:h,$video:p}}=c,g="art-auto-orientation",b="art-auto-orientation-fullscreen",y=!1;function T(){let{videoWidth:x,videoHeight:w}=p,S=document.documentElement.clientWidth,A=document.documentElement.clientHeight;return x>w&&S<A||x<w&&S>A}return c.on("fullscreenWeb",x=>{x?T()&&setTimeout(()=>{c.fullscreenWeb&&!(0,a.hasClass)(h,g)&&(function(){let w=document.documentElement.clientWidth,S=document.documentElement.clientHeight;(0,a.setStyle)(h,"width",`${S}px`),(0,a.setStyle)(h,"height",`${w}px`),(0,a.setStyle)(h,"transform-origin","0 0"),(0,a.setStyle)(h,"transform",`rotate(90deg) translate(0, -${w}px)`),(0,a.addClass)(h,g),c.isRotate=!0,c.emit("resize")})()},Number(d.AUTO_ORIENTATION_TIME??0)):(0,a.hasClass)(h,g)&&((0,a.setStyle)(h,"width",""),(0,a.setStyle)(h,"height",""),(0,a.setStyle)(h,"transform-origin",""),(0,a.setStyle)(h,"transform",""),(0,a.removeClass)(h,g),c.isRotate=!1,c.emit("resize"))}),c.on("fullscreen",async x=>{let w=!!screen?.orientation?.lock;if(x){if(w&&T())try{let S=screen.orientation.type.startsWith("portrait")?"landscape":"portrait";await screen.orientation.lock(S),y=!0,(0,a.addClass)(h,b)}catch(S){y=!1,f.show=S}}else if((0,a.hasClass)(h,b)&&(0,a.removeClass)(h,b),w&&y){try{screen.orientation.unlock()}catch{}y=!1}}),{name:"autoOrientation",get state(){return(0,a.hasClass)(h,g)}}}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"21HWM":[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){let{i18n:f,icons:d,storage:h,constructor:p,proxy:g,template:{$poster:b}}=c,y=c.layers.add({name:"auto-playback",html:'<div class="art-auto-playback-close"></div><div class="art-auto-playback-last"></div><div class="art-auto-playback-jump"></div>'}),T=(0,a.query)(".art-auto-playback-last",y),x=(0,a.query)(".art-auto-playback-jump",y),w=(0,a.query)(".art-auto-playback-close",y);(0,a.append)(w,d.close);let S=null;function A(){let _=(h.get("times")||{})[c.option.id||c.option.url];clearTimeout(S),(0,a.setStyle)(y,"display","none"),_&&_>=p.AUTO_PLAYBACK_MIN&&((0,a.setStyle)(y,"display","flex"),T.textContent=`${f.get("Last Seen")} ${(0,a.secondToTime)(_)}`,x.textContent=f.get("Jump Play"),g(w,"click",()=>{(0,a.setStyle)(y,"display","none")}),g(x,"click",()=>{c.seek=_,c.play(),(0,a.setStyle)(b,"display","none"),(0,a.setStyle)(y,"display","none")}),c.once("video:timeupdate",()=>{S=setTimeout(()=>{(0,a.setStyle)(y,"display","none")},p.AUTO_PLAYBACK_TIMEOUT)}))}return c.on("video:timeupdate",()=>{if(c.playing){let _=h.get("times")||{},I=Object.keys(_);I.length>p.AUTO_PLAYBACK_MAX&&delete _[I[0]],_[c.option.id||c.option.url]=c.currentTime,h.set("times",_)}}),c.on("ready",A),c.on("restart",A),{name:"auto-playback",get times(){return h.get("times")||{}},clear:()=>h.del("times"),delete(_){let I=h.get("times")||{};return delete I[_],h.set("times",I),I}}}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"4sxBO":[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){let{constructor:f,proxy:d,template:{$player:h,$video:p}}=c,g=null,b=!1,y=1,T=()=>{clearTimeout(g),b&&(b=!1,c.playbackRate=y,(0,a.removeClass)(h,"art-fast-forward"))};return d(p,"touchstart",x=>{x.touches.length===1&&c.playing&&!c.isLock&&(g=setTimeout(()=>{b=!0,y=c.playbackRate,c.playbackRate=f.FAST_FORWARD_VALUE,(0,a.addClass)(h,"art-fast-forward")},f.FAST_FORWARD_TIME))}),c.on("document:touchmove",T),c.on("document:touchend",T),{name:"fastForward",get state(){return(0,a.hasClass)(h,"art-fast-forward")}}}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],fjy9V:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){let{layers:f,icons:d,template:{$player:h}}=c;function p(){return(0,a.hasClass)(h,"art-lock")}function g(){(0,a.addClass)(h,"art-lock"),c.isLock=!0,c.emit("lock",!0)}function b(){(0,a.removeClass)(h,"art-lock"),c.isLock=!1,c.emit("lock",!1)}return f.add({name:"lock",mounted(y){let T=(0,a.append)(y,d.lock),x=(0,a.append)(y,d.unlock);(0,a.setStyle)(T,"display","none"),c.on("lock",w=>{w?((0,a.setStyle)(T,"display","inline-flex"),(0,a.setStyle)(x,"display","none")):((0,a.setStyle)(T,"display","none"),(0,a.setStyle)(x,"display","inline-flex"))})},click(){p()?b():g()}}),{name:"lock",get state(){return p()},set state(y){y?g():b()}}}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],d0xRp:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){return c.on("control",f=>{f?(0,a.removeClass)(c.template.$player,"art-mini-progress-bar"):(0,a.addClass)(c.template.$player,"art-mini-progress-bar")}),{name:"mini-progress-bar"}}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],bwLGT:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t);var a=n("../utils"),l=n("../utils/component"),c=s.interopDefault(l),f=n("./aspectRatio"),d=s.interopDefault(f),h=n("./flip"),p=s.interopDefault(h),g=n("./playbackRate"),b=s.interopDefault(g),y=n("./subtitleOffset"),T=s.interopDefault(y);class x extends c.default{constructor(S){super(S);let{option:A,controls:_,template:{$setting:I}}=S;this.name="setting",this.$parent=I,this.id=0,this.active=null,this.cache=new Map,this.option=[...this.builtin,...A.settings],A.setting&&(this.format(),this.render(),S.on("blur",()=>{this.show&&(this.show=!1,this.render())}),S.on("focus",P=>{let C=(0,a.includeFromEvent)(P,_.setting),O=(0,a.includeFromEvent)(P,this.$parent);!this.show||C||O||(this.show=!1,this.render())}),S.on("resize",()=>this.resize()))}get builtin(){let S=[],{option:A}=this.art;return A.playbackRate&&S.push((0,b.default)(this.art)),A.aspectRatio&&S.push((0,d.default)(this.art)),A.flip&&S.push((0,p.default)(this.art)),A.subtitleOffset&&S.push((0,T.default)(this.art)),S}traverse(S,A=this.option){for(let _=0;_<A.length;_++){let I=A[_];S(I),I.selector?.length&&this.traverse(S,I.selector)}}check(S){S.$parent.tooltip=S.html,this.traverse(A=>{A.default=A===S,A.default&&A.$item&&(0,a.inverseClass)(A.$item,"art-current")},S.$option),this.render(S.$parents)}format(S=this.option,A,_,I=[]){for(let P=0;P<S.length;P++){let C=S[P];if(C?.name?((0,a.errorHandle)(!I.includes(C.name),`The [${C.name}] already exists in [setting]`),I.push(C.name)):C.name=`setting-${this.id++}`,!C.$formatted){(0,a.def)(C,"$parent",{get:()=>A}),(0,a.def)(C,"$parents",{get:()=>_}),(0,a.def)(C,"$option",{get:()=>S});let O=[];(0,a.def)(C,"$events",{get:()=>O}),(0,a.def)(C,"$formatted",{get:()=>!0})}this.format(C.selector||[],C,S,I)}this.option=S}find(S=""){let A=null;return this.traverse(_=>{_.name===S&&(A=_)}),A}resize(){let{controls:S,constructor:{SETTING_WIDTH:A,SETTING_ITEM_HEIGHT:_},template:{$player:I,$setting:P}}=this.art;if(S.setting&&this.show){let C=this.active[0]?.$parent?.width||A,{left:O,width:B}=(0,a.getRect)(S.setting),{left:N,width:V}=(0,a.getRect)(I),ee=O-N+B/2-C/2,z=this.active===this.option?this.active.length*_:(this.active.length+1)*_;if((0,a.setStyle)(P,"height",`${z}px`),(0,a.setStyle)(P,"width",`${C}px`),this.art.isRotate||a.isMobile)return;ee+C>V?((0,a.setStyle)(P,"left",null),(0,a.setStyle)(P,"right",null)):((0,a.setStyle)(P,"left",`${ee}px`),(0,a.setStyle)(P,"right","auto"))}}inactivate(S){for(let A=0;A<S.$events.length;A++)this.art.events.remove(S.$events[A]);S.$events.length=0}remove(S){let A=this.find(S);(0,a.errorHandle)(A,`Can't find [${S}] in the [setting]`);let _=A.$option.indexOf(A);A.$option.splice(_,1),this.inactivate(A),A.$item&&(0,a.remove)(A.$item),this.render()}update(S){let A=this.find(S.name);return A?(this.inactivate(A),Object.assign(A,S),this.format(),this.createItem(A,!0),this.render(),A):this.add(S)}add(S,A=this.option){return A.push(S),this.format(),this.createItem(S),this.render(),S}createHeader(S){if(!this.cache.has(S.$option))return;let A=this.cache.get(S.$option),{proxy:_,icons:{arrowLeft:I},constructor:{SETTING_ITEM_HEIGHT:P}}=this.art,C=(0,a.createElement)("div");(0,a.setStyle)(C,"height",`${P}px`),(0,a.addClass)(C,"art-setting-item"),(0,a.addClass)(C,"art-setting-item-back");let O=(0,a.append)(C,'<div class="art-setting-item-left"></div>'),B=(0,a.createElement)("div");(0,a.addClass)(B,"art-setting-item-left-icon"),(0,a.append)(B,I),(0,a.append)(O,B),(0,a.append)(O,S.$parent.html);let N=_(C,"click",()=>this.render(S.$parents));S.$parent.$events.push(N),(0,a.append)(A,C)}createItem(S,A=!1){if(!this.cache.has(S.$option))return;let _=this.cache.get(S.$option),I=S.$item,P="selector";(0,a.has)(S,"switch")&&(P="switch"),(0,a.has)(S,"range")&&(P="range"),(0,a.has)(S,"onClick")&&(P="button");let{icons:C,proxy:O,constructor:B}=this.art,N=(0,a.createElement)("div");(0,a.addClass)(N,"art-setting-item"),(0,a.setStyle)(N,"height",`${B.SETTING_ITEM_HEIGHT}px`),N.dataset.name=S.name||"",N.dataset.value=S.value||"";let V=(0,a.append)(N,'<div class="art-setting-item-left"></div>'),ee=(0,a.append)(N,'<div class="art-setting-item-right"></div>'),z=(0,a.createElement)("div");switch((0,a.addClass)(z,"art-setting-item-left-icon"),P){case"button":case"switch":case"range":(0,a.append)(z,S.icon||C.config);break;case"selector":S.selector?.length?(0,a.append)(z,S.icon||C.config):(0,a.append)(z,C.check)}(0,a.append)(V,z),(0,a.def)(S,"$icon",{configurable:!0,get:()=>z}),(0,a.def)(S,"icon",{configurable:!0,get:()=>z.innerHTML,set(k){z.innerHTML="",(0,a.append)(z,k)}});let H=(0,a.createElement)("div");(0,a.addClass)(H,"art-setting-item-left-text"),(0,a.append)(H,S.html||""),(0,a.append)(V,H),(0,a.def)(S,"$html",{configurable:!0,get:()=>H}),(0,a.def)(S,"html",{configurable:!0,get:()=>H.innerHTML,set(k){H.innerHTML="",(0,a.append)(H,k)}});let W=(0,a.createElement)("div");switch((0,a.addClass)(W,"art-setting-item-right-tooltip"),(0,a.append)(W,S.tooltip||""),(0,a.append)(ee,W),(0,a.def)(S,"$tooltip",{configurable:!0,get:()=>W}),(0,a.def)(S,"tooltip",{configurable:!0,get:()=>W.innerHTML,set(k){W.innerHTML="",(0,a.append)(W,k)}}),P){case"switch":{let k=(0,a.createElement)("div");(0,a.addClass)(k,"art-setting-item-right-icon");let G=(0,a.append)(k,C.switchOn),K=(0,a.append)(k,C.switchOff);(0,a.setStyle)(S.switch?K:G,"display","none"),(0,a.append)(ee,k),(0,a.def)(S,"$switch",{configurable:!0,get:()=>k});let oe=S.switch;(0,a.def)(S,"switch",{configurable:!0,get:()=>oe,set(fe){oe=fe,fe?((0,a.setStyle)(K,"display","none"),(0,a.setStyle)(G,"display",null)):((0,a.setStyle)(K,"display",null),(0,a.setStyle)(G,"display","none"))}});break}case"range":{let k=(0,a.createElement)("div");(0,a.addClass)(k,"art-setting-item-right-icon");let G=(0,a.append)(k,'<input type="range">');G.value=S.range[0],G.min=S.range[1],G.max=S.range[2],G.step=S.range[3],(0,a.addClass)(G,"art-setting-range"),(0,a.append)(ee,k),(0,a.def)(S,"$range",{configurable:!0,get:()=>G});let K=[...S.range];(0,a.def)(S,"range",{configurable:!0,get:()=>K,set(oe){K=[...oe],G.value=oe[0],G.min=oe[1],G.max=oe[2],G.step=oe[3]}})}break;case"selector":if(S.selector?.length){let k=(0,a.createElement)("div");(0,a.addClass)(k,"art-setting-item-right-icon"),(0,a.append)(k,C.arrowRight),(0,a.append)(ee,k)}}switch(P){case"switch":if(S.onSwitch){let k=O(N,"click",async G=>{S.switch=await S.onSwitch.call(this.art,S,N,G)});S.$events.push(k)}break;case"range":if(S.$range){if(S.onRange){let k=O(S.$range,"change",async G=>{S.range[0]=S.$range.valueAsNumber,S.tooltip=await S.onRange.call(this.art,S,N,G)});S.$events.push(k)}if(S.onChange){let k=O(S.$range,"input",async G=>{S.range[0]=S.$range.valueAsNumber,S.tooltip=await S.onChange.call(this.art,S,N,G)});S.$events.push(k)}}break;case"selector":{let k=O(N,"click",async G=>{S.selector?.length?this.render(S.selector):(this.check(S),S.$parent.onSelect&&(S.$parent.tooltip=await S.$parent.onSelect.call(this.art,S,N,G)))});S.$events.push(k),S.default&&(0,a.addClass)(N,"art-current")}break;case"button":if(S.onClick){let k=O(N,"click",async G=>{S.tooltip=await S.onClick.call(this.art,S,N,G)});S.$events.push(k)}}(0,a.def)(S,"$item",{configurable:!0,get:()=>N}),A?(0,a.replaceElement)(N,I):(0,a.append)(_,N),S.mounted&&setTimeout(()=>S.mounted.call(this.art,S.$item,S),0)}render(S=this.option){if(this.active=S,this.cache.has(S)){let A=this.cache.get(S);(0,a.inverseClass)(A,"art-current")}else{let A=(0,a.createElement)("div");this.cache.set(S,A),(0,a.addClass)(A,"art-setting-panel"),(0,a.append)(this.$parent,A),(0,a.inverseClass)(A,"art-current"),S[0]?.$parent&&this.createHeader(S[0]);for(let _=0;_<S.length;_++)this.createItem(S[_])}this.resize()}}t.default=x},{"../utils":"aBlEo","../utils/component":"idCEj","./aspectRatio":"cb8VK","./flip":"ljJTO","./playbackRate":"3QcSQ","./subtitleOffset":"eB5hg","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],cb8VK:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");function a(l){let{i18n:c,icons:f,constructor:{SETTING_ITEM_WIDTH:d,ASPECT_RATIO:h}}=l;function p(b){return b==="default"?c.get("Default"):b}function g(){let b=l.setting.find(`aspect-ratio-${l.aspectRatio}`);l.setting.check(b)}return{width:d,name:"aspect-ratio",html:c.get("Aspect Ratio"),icon:f.aspectRatio,tooltip:p(l.aspectRatio),selector:h.map(b=>({value:b,name:`aspect-ratio-${b}`,default:b===l.aspectRatio,html:p(b)})),onSelect:b=>(l.aspectRatio=b.value,b.html),mounted:()=>{g(),l.on("aspectRatio",()=>g())}}}s.defineInteropFlag(t),s.export(t,"default",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],ljJTO:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t),s.export(t,"default",()=>l);var a=n("../utils");function l(c){let{i18n:f,icons:d,constructor:{SETTING_ITEM_WIDTH:h,FLIP:p}}=c;function g(y){return f.get((0,a.capitalize)(y))}function b(){let y=c.setting.find(`flip-${c.flip}`);c.setting.check(y)}return{width:h,name:"flip",html:f.get("Video Flip"),tooltip:g(c.flip),icon:d.flip,selector:p.map(y=>({value:y,name:`flip-${y}`,default:y===c.flip,html:g(y)})),onSelect:y=>(c.flip=y.value,y.html),mounted:()=>{b(),c.on("flip",()=>b())}}}},{"../utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"3QcSQ":[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");function a(l){let{i18n:c,icons:f,constructor:{SETTING_ITEM_WIDTH:d,PLAYBACK_RATE:h}}=l;function p(b){return b===1?c.get("Normal"):b.toFixed(1)}function g(){let b=l.setting.find(`playback-rate-${l.playbackRate}`);l.setting.check(b)}return{width:d,name:"playback-rate",html:c.get("Play Speed"),tooltip:p(l.playbackRate),icon:f.playbackRate,selector:h.map(b=>({value:b,name:`playback-rate-${b}`,default:b===l.playbackRate,html:p(b)})),onSelect:b=>(l.playbackRate=b.value,b.html),mounted:()=>{g(),l.on("video:ratechange",()=>g())}}}s.defineInteropFlag(t),s.export(t,"default",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],eB5hg:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");function a(l){let{i18n:c,icons:f,constructor:d}=l;return{width:d.SETTING_ITEM_WIDTH,name:"subtitle-offset",html:c.get("Subtitle Offset"),icon:f.subtitle,tooltip:"0s",range:[0,-10,10,.1],onChange:h=>(l.subtitleOffset=h.range[0],`${h.range[0]}s`),mounted:(h,p)=>{l.on("subtitleOffset",g=>{p.$range.value=g,p.tooltip=`${g}s`})}}}s.defineInteropFlag(t),s.export(t,"default",()=>a)},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],kwqbK:[function(n,e,t,i){n("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(t),t.default=class{constructor(){this.name="artplayer_settings",this.settings={}}get(s){try{let a=JSON.parse(window.localStorage.getItem(this.name))||{};return s?a[s]:a}catch{return s?this.settings[s]:this.settings}}set(s,a){try{let l=Object.assign({},this.get(),{[s]:a});window.localStorage.setItem(this.name,JSON.stringify(l))}catch{this.settings[s]=a}}del(s){try{let a=this.get();delete a[s],window.localStorage.setItem(this.name,JSON.stringify(a))}catch{delete this.settings[s]}}clear(){try{window.localStorage.removeItem(this.name)}catch{this.settings={}}}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],k5613:[function(n,e,t,i){var s=n("@parcel/transformer-js/src/esmodule-helpers.js");s.defineInteropFlag(t);var a=n("option-validator"),l=s.interopDefault(a),c=n("./scheme"),f=s.interopDefault(c),d=n("./utils"),h=n("./utils/component"),p=s.interopDefault(h);class g extends p.default{constructor(y){super(y),this.name="subtitle",this.option=null,this.destroyEvent=()=>null,this.init(y.option.subtitle);let T=!1;y.on("video:timeupdate",()=>{if(!this.url)return;let x=this.art.template.$video.webkitDisplayingFullscreen;typeof x=="boolean"&&x!==T&&(T=x,this.createTrack(x?"subtitles":"metadata",this.url))})}get url(){return this.art.template.$track.src}set url(y){this.switch(y)}get textTrack(){return this.art.template.$video?.textTracks?.[0]}get activeCues(){return this.textTrack?Array.from(this.textTrack.activeCues):[]}get cues(){return this.textTrack?Array.from(this.textTrack.cues):[]}style(y,T){let{$subtitle:x}=this.art.template;return typeof y=="object"?(0,d.setStyles)(x,y):(0,d.setStyle)(x,y,T)}update(){let{option:{subtitle:y},template:{$subtitle:T}}=this.art;T.innerHTML="",this.activeCues.length&&(this.art.emit("subtitleBeforeUpdate",this.activeCues),T.innerHTML=this.activeCues.map((x,w)=>x.text.split(/\r?\n/).filter(S=>S.trim()).map(S=>`<div class="art-subtitle-line" data-group="${w}">${y.escape?(0,d.escape)(S):S}</div>`).join("")).join(""),this.art.emit("subtitleAfterUpdate",this.activeCues))}async switch(y,T={}){let{i18n:x,notice:w,option:S}=this.art,A={...S.subtitle,...T,url:y},_=await this.init(A);return T.name&&(w.show=`${x.get("Switch Subtitle")}: ${T.name}`),_}createTrack(y,T){let{template:x,proxy:w,option:S}=this.art,{$video:A,$track:_}=x,I=(0,d.createElement)("track");I.default=!0,I.kind=y,I.src=T,I.label=S.subtitle.name||"Artplayer",I.track.mode="hidden",I.onload=()=>{this.art.emit("subtitleLoad",this.cues,this.option)},this.art.events.remove(this.destroyEvent),_.onload=null,(0,d.remove)(_),(0,d.append)(A,I),x.$track=I,this.destroyEvent=w(this.textTrack,"cuechange",()=>this.update())}async init(y){let{notice:T,template:{$subtitle:x}}=this.art;return this.textTrack?((0,l.default)(y,f.default.subtitle),y.url?(this.option=y,this.style(y.style),fetch(y.url).then(w=>w.arrayBuffer()).then(w=>{let S=new TextDecoder(y.encoding).decode(w);switch(y.type||(0,d.getExt)(y.url)){case"srt":{let A=(0,d.srtToVtt)(S),_=y.onVttLoad(A);return(0,d.vttToBlob)(_)}case"ass":{let A=(0,d.assToVtt)(S),_=y.onVttLoad(A);return(0,d.vttToBlob)(_)}case"vtt":{let A=y.onVttLoad(S);return(0,d.vttToBlob)(A)}default:return y.url}}).then(w=>(x.innerHTML="",this.url===w||(URL.revokeObjectURL(this.url),this.createTrack("metadata",w)),w)).catch(w=>{throw x.innerHTML="",T.show=w,w})):void 0):null}}t.default=g},{"option-validator":"g7VGh","./scheme":"biLjm","./utils":"aBlEo","./utils/component":"idCEj","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],fwOA1:[function(n,e,t,i){n("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(t);var s=n("../package.json"),a=n("./utils");class l{constructor(f){this.art=f;let{option:d,constructor:h}=f;d.container instanceof Element?this.$container=d.container:(this.$container=(0,a.query)(d.container),(0,a.errorHandle)(this.$container,`No container element found by ${d.container}`)),(0,a.errorHandle)((0,a.supportsFlex)(),"The current browser does not support flex layout");let p=this.$container.tagName.toLowerCase();(0,a.errorHandle)(p==="div",`Unsupported container element type, only support 'div' but got '${p}'`),(0,a.errorHandle)(h.instances.every(g=>g.template.$container!==this.$container),"Cannot mount multiple instances on the same dom element"),this.query=this.query.bind(this),this.$container.dataset.artId=f.id,this.init()}static get html(){return`<div class="art-video-player art-subtitle-show art-layer-show art-control-show art-mask-show"><video class="art-video"><track default kind="metadata" src=""></track></video><div class="art-poster"></div><div class="art-subtitle"></div><div class="art-danmuku"></div><div class="art-layers"></div><div class="art-mask"><div class="art-state"></div></div><div class="art-bottom"><div class="art-progress"></div><div class="art-controls"><div class="art-controls-left"></div><div class="art-controls-center"></div><div class="art-controls-right"></div></div></div><div class="art-loading"></div><div class="art-notice"><div class="art-notice-inner"></div></div><div class="art-settings"></div><div class="art-info"><div class="art-info-panel"><div class="art-info-item"><div class="art-info-title">Player version:</div><div class="art-info-content">${s.version}</div></div><div class="art-info-item"><div class="art-info-title">Video url:</div><div class="art-info-content" data-video="src"></div></div><div class="art-info-item"><div class="art-info-title">Video volume:</div><div class="art-info-content" data-video="volume"></div></div><div class="art-info-item"><div class="art-info-title">Video time:</div><div class="art-info-content" data-video="currentTime"></div></div><div class="art-info-item"><div class="art-info-title">Video duration:</div><div class="art-info-content" data-video="duration"></div></div><div class="art-info-item"><div class="art-info-title">Video resolution:</div><div class="art-info-content"><span data-video="videoWidth"></span>x<span data-video="videoHeight"></span></div></div></div><div class="art-info-close">[x]</div></div><div class="art-contextmenus"></div></div>`}query(f){return(0,a.query)(f,this.$container)}init(){let{option:f}=this.art;if(f.useSSR||(this.$container.innerHTML=l.html),this.$player=this.query(".art-video-player"),this.$video=this.query(".art-video"),this.$track=this.query("track"),this.$poster=this.query(".art-poster"),this.$subtitle=this.query(".art-subtitle"),this.$danmuku=this.query(".art-danmuku"),this.$bottom=this.query(".art-bottom"),this.$progress=this.query(".art-progress"),this.$controls=this.query(".art-controls"),this.$controlsLeft=this.query(".art-controls-left"),this.$controlsCenter=this.query(".art-controls-center"),this.$controlsRight=this.query(".art-controls-right"),this.$layer=this.query(".art-layers"),this.$loading=this.query(".art-loading"),this.$notice=this.query(".art-notice"),this.$noticeInner=this.query(".art-notice-inner"),this.$mask=this.query(".art-mask"),this.$state=this.query(".art-state"),this.$setting=this.query(".art-settings"),this.$info=this.query(".art-info"),this.$infoPanel=this.query(".art-info-panel"),this.$infoClose=this.query(".art-info-close"),this.$contextmenu=this.query(".art-contextmenus"),f.proxy){let d=f.proxy.call(this.art,this.art);(0,a.errorHandle)(d instanceof HTMLVideoElement||d instanceof HTMLCanvasElement,"Function 'option.proxy' needs to return 'HTMLVideoElement' or 'HTMLCanvasElement'"),(0,a.replaceElement)(d,this.$video),d.className="art-video",this.$video=d}f.backdrop&&(0,a.addClass)(this.$player,"art-backdrop"),a.isMobile&&(0,a.addClass)(this.$player,"art-mobile")}destroy(f){f?this.$container.innerHTML="":(0,a.addClass)(this.$player,"art-destroy")}}t.default=l},{"../package.json":"lh3R5","./utils":"aBlEo","@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}],"4NM7P":[function(n,e,t,i){n("@parcel/transformer-js/src/esmodule-helpers.js").defineInteropFlag(t),t.default=class{on(s,a,l){let c=this.e||(this.e={});return(c[s]||(c[s]=[])).push({fn:a,ctx:l}),this}once(s,a,l){let c=this;function f(...d){c.off(s,f),a.apply(l,d)}return f._=a,this.on(s,f,l)}emit(s,...a){let l=((this.e||(this.e={}))[s]||[]).slice();for(let c=0;c<l.length;c+=1)l[c].fn.apply(l[c].ctx,a);return this}off(s,a){let l=this.e||(this.e={}),c=l[s],f=[];if(c&&a)for(let d=0,h=c.length;d<h;d+=1)c[d].fn!==a&&c[d].fn._!==a&&f.push(c[d]);return f.length?l[s]=f:delete l[s],this}}},{"@parcel/transformer-js/src/esmodule-helpers.js":"loqXi"}]},["esqvp"],"esqvp","parcelRequire4dc0",{});let{default:BD}=parcelRequire4dc0("esqvp");const pe=Number.isFinite||function(n){return typeof n=="number"&&isFinite(n)},FD=Number.isSafeInteger||function(n){return typeof n=="number"&&Math.abs(n)<=UD},UD=Number.MAX_SAFE_INTEGER||9007199254740991;let Ee=(function(n){return n.NETWORK_ERROR="networkError",n.MEDIA_ERROR="mediaError",n.KEY_SYSTEM_ERROR="keySystemError",n.MUX_ERROR="muxError",n.OTHER_ERROR="otherError",n})({}),Q=(function(n){return n.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",n.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",n.KEY_SYSTEM_NO_SESSION="keySystemNoSession",n.KEY_SYSTEM_NO_CONFIGURED_LICENSE="keySystemNoConfiguredLicense",n.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",n.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED="keySystemServerCertificateRequestFailed",n.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED="keySystemServerCertificateUpdateFailed",n.KEY_SYSTEM_SESSION_UPDATE_FAILED="keySystemSessionUpdateFailed",n.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED="keySystemStatusOutputRestricted",n.KEY_SYSTEM_STATUS_INTERNAL_ERROR="keySystemStatusInternalError",n.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR="keySystemDestroyMediaKeysError",n.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR="keySystemDestroyCloseSessionError",n.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR="keySystemDestroyRemoveSessionError",n.MANIFEST_LOAD_ERROR="manifestLoadError",n.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",n.MANIFEST_PARSING_ERROR="manifestParsingError",n.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",n.LEVEL_EMPTY_ERROR="levelEmptyError",n.LEVEL_LOAD_ERROR="levelLoadError",n.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",n.LEVEL_PARSING_ERROR="levelParsingError",n.LEVEL_SWITCH_ERROR="levelSwitchError",n.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",n.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",n.SUBTITLE_LOAD_ERROR="subtitleTrackLoadError",n.SUBTITLE_TRACK_LOAD_TIMEOUT="subtitleTrackLoadTimeOut",n.FRAG_LOAD_ERROR="fragLoadError",n.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",n.FRAG_DECRYPT_ERROR="fragDecryptError",n.FRAG_PARSING_ERROR="fragParsingError",n.FRAG_GAP="fragGap",n.REMUX_ALLOC_ERROR="remuxAllocError",n.KEY_LOAD_ERROR="keyLoadError",n.KEY_LOAD_TIMEOUT="keyLoadTimeOut",n.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",n.BUFFER_INCOMPATIBLE_CODECS_ERROR="bufferIncompatibleCodecsError",n.BUFFER_APPEND_ERROR="bufferAppendError",n.BUFFER_APPENDING_ERROR="bufferAppendingError",n.BUFFER_STALLED_ERROR="bufferStalledError",n.BUFFER_FULL_ERROR="bufferFullError",n.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",n.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",n.ASSET_LIST_LOAD_ERROR="assetListLoadError",n.ASSET_LIST_LOAD_TIMEOUT="assetListLoadTimeout",n.ASSET_LIST_PARSING_ERROR="assetListParsingError",n.INTERSTITIAL_ASSET_ITEM_ERROR="interstitialAssetItemError",n.INTERNAL_EXCEPTION="internalException",n.INTERNAL_ABORTED="aborted",n.ATTACH_MEDIA_ERROR="attachMediaError",n.UNKNOWN="unknown",n})({}),L=(function(n){return n.MEDIA_ATTACHING="hlsMediaAttaching",n.MEDIA_ATTACHED="hlsMediaAttached",n.MEDIA_DETACHING="hlsMediaDetaching",n.MEDIA_DETACHED="hlsMediaDetached",n.MEDIA_ENDED="hlsMediaEnded",n.STALL_RESOLVED="hlsStallResolved",n.BUFFER_RESET="hlsBufferReset",n.BUFFER_CODECS="hlsBufferCodecs",n.BUFFER_CREATED="hlsBufferCreated",n.BUFFER_APPENDING="hlsBufferAppending",n.BUFFER_APPENDED="hlsBufferAppended",n.BUFFER_EOS="hlsBufferEos",n.BUFFERED_TO_END="hlsBufferedToEnd",n.BUFFER_FLUSHING="hlsBufferFlushing",n.BUFFER_FLUSHED="hlsBufferFlushed",n.MANIFEST_LOADING="hlsManifestLoading",n.MANIFEST_LOADED="hlsManifestLoaded",n.MANIFEST_PARSED="hlsManifestParsed",n.LEVEL_SWITCHING="hlsLevelSwitching",n.LEVEL_SWITCHED="hlsLevelSwitched",n.LEVEL_LOADING="hlsLevelLoading",n.LEVEL_LOADED="hlsLevelLoaded",n.LEVEL_UPDATED="hlsLevelUpdated",n.LEVEL_PTS_UPDATED="hlsLevelPtsUpdated",n.LEVELS_UPDATED="hlsLevelsUpdated",n.AUDIO_TRACKS_UPDATED="hlsAudioTracksUpdated",n.AUDIO_TRACK_SWITCHING="hlsAudioTrackSwitching",n.AUDIO_TRACK_SWITCHED="hlsAudioTrackSwitched",n.AUDIO_TRACK_LOADING="hlsAudioTrackLoading",n.AUDIO_TRACK_LOADED="hlsAudioTrackLoaded",n.AUDIO_TRACK_UPDATED="hlsAudioTrackUpdated",n.SUBTITLE_TRACKS_UPDATED="hlsSubtitleTracksUpdated",n.SUBTITLE_TRACKS_CLEARED="hlsSubtitleTracksCleared",n.SUBTITLE_TRACK_SWITCH="hlsSubtitleTrackSwitch",n.SUBTITLE_TRACK_LOADING="hlsSubtitleTrackLoading",n.SUBTITLE_TRACK_LOADED="hlsSubtitleTrackLoaded",n.SUBTITLE_TRACK_UPDATED="hlsSubtitleTrackUpdated",n.SUBTITLE_FRAG_PROCESSED="hlsSubtitleFragProcessed",n.CUES_PARSED="hlsCuesParsed",n.NON_NATIVE_TEXT_TRACKS_FOUND="hlsNonNativeTextTracksFound",n.INIT_PTS_FOUND="hlsInitPtsFound",n.FRAG_LOADING="hlsFragLoading",n.FRAG_LOAD_EMERGENCY_ABORTED="hlsFragLoadEmergencyAborted",n.FRAG_LOADED="hlsFragLoaded",n.FRAG_DECRYPTED="hlsFragDecrypted",n.FRAG_PARSING_INIT_SEGMENT="hlsFragParsingInitSegment",n.FRAG_PARSING_USERDATA="hlsFragParsingUserdata",n.FRAG_PARSING_METADATA="hlsFragParsingMetadata",n.FRAG_PARSED="hlsFragParsed",n.FRAG_BUFFERED="hlsFragBuffered",n.FRAG_CHANGED="hlsFragChanged",n.FPS_DROP="hlsFpsDrop",n.FPS_DROP_LEVEL_CAPPING="hlsFpsDropLevelCapping",n.MAX_AUTO_LEVEL_UPDATED="hlsMaxAutoLevelUpdated",n.ERROR="hlsError",n.DESTROYING="hlsDestroying",n.KEY_LOADING="hlsKeyLoading",n.KEY_LOADED="hlsKeyLoaded",n.LIVE_BACK_BUFFER_REACHED="hlsLiveBackBufferReached",n.BACK_BUFFER_REACHED="hlsBackBufferReached",n.STEERING_MANIFEST_LOADED="hlsSteeringManifestLoaded",n.ASSET_LIST_LOADING="hlsAssetListLoading",n.ASSET_LIST_LOADED="hlsAssetListLoaded",n.INTERSTITIALS_UPDATED="hlsInterstitialsUpdated",n.INTERSTITIALS_BUFFERED_TO_BOUNDARY="hlsInterstitialsBufferedToBoundary",n.INTERSTITIAL_ASSET_PLAYER_CREATED="hlsInterstitialAssetPlayerCreated",n.INTERSTITIAL_STARTED="hlsInterstitialStarted",n.INTERSTITIAL_ASSET_STARTED="hlsInterstitialAssetStarted",n.INTERSTITIAL_ASSET_ENDED="hlsInterstitialAssetEnded",n.INTERSTITIAL_ASSET_ERROR="hlsInterstitialAssetError",n.INTERSTITIAL_ENDED="hlsInterstitialEnded",n.INTERSTITIALS_PRIMARY_RESUMED="hlsInterstitialsPrimaryResumed",n.PLAYOUT_LIMIT_REACHED="hlsPlayoutLimitReached",n.EVENT_CUE_ENTER="hlsEventCueEnter",n})({});var Pe={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},ge={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"};class ra{constructor(e,t=0,i=0){this.halfLife=void 0,this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.halfLife=e,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=t,this.totalWeight_=i}sample(e,t){const i=Math.pow(this.alpha_,e);this.estimate_=t*(1-i)+i*this.estimate_,this.totalWeight_+=e}getTotalWeight(){return this.totalWeight_}getEstimate(){if(this.alpha_){const e=1-Math.pow(this.alpha_,this.totalWeight_);if(e)return this.estimate_/e}return this.estimate_}}class $D{constructor(e,t,i,s=100){this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.defaultTTFB_=void 0,this.ttfb_=void 0,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new ra(e),this.fast_=new ra(t),this.defaultTTFB_=s,this.ttfb_=new ra(e)}update(e,t){const{slow_:i,fast_:s,ttfb_:a}=this;i.halfLife!==e&&(this.slow_=new ra(e,i.getEstimate(),i.getTotalWeight())),s.halfLife!==t&&(this.fast_=new ra(t,s.getEstimate(),s.getTotalWeight())),a.halfLife!==e&&(this.ttfb_=new ra(e,a.getEstimate(),a.getTotalWeight()))}sample(e,t){e=Math.max(e,this.minDelayMs_);const i=8*t,s=e/1e3,a=i/s;this.fast_.sample(s,a),this.slow_.sample(s,a)}sampleTTFB(e){const t=e/1e3,i=Math.sqrt(2)*Math.exp(-Math.pow(t,2)/2);this.ttfb_.sample(i,Math.max(e,5))}canEstimate(){return this.fast_.getTotalWeight()>=this.minWeight_}getEstimate(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_}getEstimateTTFB(){return this.ttfb_.getTotalWeight()>=this.minWeight_?this.ttfb_.getEstimate():this.defaultTTFB_}get defaultEstimate(){return this.defaultEstimate_}destroy(){}}function jD(n,e,t){return(e=GD(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function et(){return et=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},et.apply(null,arguments)}function eb(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,i)}return t}function Xe(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?eb(Object(t),!0).forEach(function(i){jD(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):eb(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function HD(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function GD(n){var e=HD(n,"string");return typeof e=="symbol"?e:e+""}class Zi{constructor(e,t){this.trace=void 0,this.debug=void 0,this.log=void 0,this.warn=void 0,this.info=void 0,this.error=void 0;const i=`[${e}]:`;this.trace=Ls,this.debug=t.debug.bind(null,i),this.log=t.log.bind(null,i),this.warn=t.warn.bind(null,i),this.info=t.info.bind(null,i),this.error=t.error.bind(null,i)}}const Ls=function(){},zD={trace:Ls,debug:Ls,log:Ls,warn:Ls,info:Ls,error:Ls};function Xh(){return et({},zD)}function VD(n,e){const t=self.console[n];return t?t.bind(self.console,`${e?"["+e+"] ":""}[${n}] >`):Ls}function tb(n,e,t){return e[n]?e[n].bind(e):VD(n,t)}const Wh=Xh();function qD(n,e,t){const i=Xh();if(typeof console=="object"&&n===!0||typeof n=="object"){const s=["debug","log","info","warn","error"];s.forEach(a=>{i[a]=tb(a,n,t)});try{i.log(`Debug logs enabled for "${e}" in hls.js version 1.6.15`)}catch{return Xh()}s.forEach(a=>{Wh[a]=tb(a,n)})}else et(Wh,i);return i}const We=Wh;function Os(n=!0){return typeof self>"u"?void 0:(n||!self.MediaSource)&&self.ManagedMediaSource||self.MediaSource||self.WebKitMediaSource}function KD(n){return typeof self<"u"&&n===self.ManagedMediaSource}function lT(n,e){const t=Object.keys(n),i=Object.keys(e),s=t.length,a=i.length;return!s||!a||s===a&&!t.some(l=>i.indexOf(l)===-1)}function ki(n,e=!1){if(typeof TextDecoder<"u"){const d=new TextDecoder("utf-8").decode(n);if(e){const h=d.indexOf("\0");return h!==-1?d.substring(0,h):d}return d.replace(/\0/g,"")}const t=n.length;let i,s,a,l="",c=0;for(;c<t;){if(i=n[c++],i===0&&e)return l;if(i===0||i===3)continue;switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:l+=String.fromCharCode(i);break;case 12:case 13:s=n[c++],l+=String.fromCharCode((i&31)<<6|s&63);break;case 14:s=n[c++],a=n[c++],l+=String.fromCharCode((i&15)<<12|(s&63)<<6|(a&63)<<0);break}}return l}function Kt(n){let e="";for(let t=0;t<n.length;t++){let i=n[t].toString(16);i.length<2&&(i="0"+i),e+=i}return e}function cT(n){return Uint8Array.from(n.replace(/^0x/,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")).buffer}function YD(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var fh={exports:{}},ib;function XD(){return ib||(ib=1,(function(n,e){(function(t){var i=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,s=/^(?=([^\/?#]*))\1([^]*)$/,a=/(?:\/|^)\.(?=\/)/g,l=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,c={buildAbsoluteURL:function(f,d,h){if(h=h||{},f=f.trim(),d=d.trim(),!d){if(!h.alwaysNormalize)return f;var p=c.parseURL(f);if(!p)throw new Error("Error trying to parse base URL.");return p.path=c.normalizePath(p.path),c.buildURLFromParts(p)}var g=c.parseURL(d);if(!g)throw new Error("Error trying to parse relative URL.");if(g.scheme)return h.alwaysNormalize?(g.path=c.normalizePath(g.path),c.buildURLFromParts(g)):d;var b=c.parseURL(f);if(!b)throw new Error("Error trying to parse base URL.");if(!b.netLoc&&b.path&&b.path[0]!=="/"){var y=s.exec(b.path);b.netLoc=y[1],b.path=y[2]}b.netLoc&&!b.path&&(b.path="/");var T={scheme:b.scheme,netLoc:g.netLoc,path:null,params:g.params,query:g.query,fragment:g.fragment};if(!g.netLoc&&(T.netLoc=b.netLoc,g.path[0]!=="/"))if(!g.path)T.path=b.path,g.params||(T.params=b.params,g.query||(T.query=b.query));else{var x=b.path,w=x.substring(0,x.lastIndexOf("/")+1)+g.path;T.path=c.normalizePath(w)}return T.path===null&&(T.path=h.alwaysNormalize?c.normalizePath(g.path):g.path),c.buildURLFromParts(T)},parseURL:function(f){var d=i.exec(f);return d?{scheme:d[1]||"",netLoc:d[2]||"",path:d[3]||"",params:d[4]||"",query:d[5]||"",fragment:d[6]||""}:null},normalizePath:function(f){for(f=f.split("").reverse().join("").replace(a,"");f.length!==(f=f.replace(l,"")).length;);return f.split("").reverse().join("")},buildURLFromParts:function(f){return f.scheme+f.netLoc+f.path+f.params+f.query+f.fragment}};n.exports=c})()})(fh)),fh.exports}var jm=XD();class Hm{constructor(){this.aborted=!1,this.loaded=0,this.retry=0,this.total=0,this.chunkCount=0,this.bwEstimate=0,this.loading={start:0,first:0,end:0},this.parsing={start:0,end:0},this.buffering={start:0,first:0,end:0}}}var it={AUDIO:"audio",VIDEO:"video",AUDIOVIDEO:"audiovideo"};class uT{constructor(e){this._byteRange=null,this._url=null,this._stats=null,this._streams=null,this.base=void 0,this.relurl=void 0,typeof e=="string"&&(e={url:e}),this.base=e,QD(this,"stats")}setByteRange(e,t){const i=e.split("@",2);let s;i.length===1?s=t?.byteRangeEndOffset||0:s=parseInt(i[1]),this._byteRange=[s,parseInt(i[0])+s]}get baseurl(){return this.base.url}get byteRange(){return this._byteRange===null?[]:this._byteRange}get byteRangeStartOffset(){return this.byteRange[0]}get byteRangeEndOffset(){return this.byteRange[1]}get elementaryStreams(){return this._streams===null&&(this._streams={[it.AUDIO]:null,[it.VIDEO]:null,[it.AUDIOVIDEO]:null}),this._streams}set elementaryStreams(e){this._streams=e}get hasStats(){return this._stats!==null}get hasStreams(){return this._streams!==null}get stats(){return this._stats===null&&(this._stats=new Hm),this._stats}set stats(e){this._stats=e}get url(){return!this._url&&this.baseurl&&this.relurl&&(this._url=jm.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url||""}set url(e){this._url=e}clearElementaryStreamInfo(){const{elementaryStreams:e}=this;e[it.AUDIO]=null,e[it.VIDEO]=null,e[it.AUDIOVIDEO]=null}}function wt(n){return n.sn!=="initSegment"}class hh extends uT{constructor(e,t){super(t),this._decryptdata=null,this._programDateTime=null,this._ref=null,this._bitrate=void 0,this.rawProgramDateTime=null,this.tagList=[],this.duration=0,this.sn=0,this.levelkeys=void 0,this.type=void 0,this.loader=null,this.keyLoader=null,this.level=-1,this.cc=0,this.startPTS=void 0,this.endPTS=void 0,this.startDTS=void 0,this.endDTS=void 0,this.start=0,this.playlistOffset=0,this.deltaPTS=void 0,this.maxStartPTS=void 0,this.minEndPTS=void 0,this.data=void 0,this.bitrateTest=!1,this.title=null,this.initSegment=null,this.endList=void 0,this.gap=void 0,this.urlId=0,this.type=e}get byteLength(){if(this.hasStats){const e=this.stats.total;if(e)return e}if(this.byteRange.length){const e=this.byteRange[0],t=this.byteRange[1];if(pe(e)&&pe(t))return t-e}return null}get bitrate(){return this.byteLength?this.byteLength*8/this.duration:this._bitrate?this._bitrate:null}set bitrate(e){this._bitrate=e}get decryptdata(){var e;const{levelkeys:t}=this;if(!t||t.NONE)return null;if(t.identity)this._decryptdata||(this._decryptdata=t.identity.getDecryptData(this.sn));else if(!((e=this._decryptdata)!=null&&e.keyId)){const i=Object.keys(t);if(i.length===1){const s=this._decryptdata=t[i[0]]||null;s&&(this._decryptdata=s.getDecryptData(this.sn,t))}}return this._decryptdata}get end(){return this.start+this.duration}get endProgramDateTime(){if(this.programDateTime===null)return null;const e=pe(this.duration)?this.duration:0;return this.programDateTime+e*1e3}get encrypted(){var e;if((e=this._decryptdata)!=null&&e.encrypted)return!0;if(this.levelkeys){var t;const i=Object.keys(this.levelkeys),s=i.length;if(s>1||s===1&&(t=this.levelkeys[i[0]])!=null&&t.encrypted)return!0}return!1}get programDateTime(){return this._programDateTime===null&&this.rawProgramDateTime&&(this.programDateTime=Date.parse(this.rawProgramDateTime)),this._programDateTime}set programDateTime(e){if(!pe(e)){this._programDateTime=this.rawProgramDateTime=null;return}this._programDateTime=e}get ref(){return wt(this)?(this._ref||(this._ref={base:this.base,start:this.start,duration:this.duration,sn:this.sn,programDateTime:this.programDateTime}),this._ref):null}addStart(e){this.setStart(this.start+e)}setStart(e){this.start=e,this._ref&&(this._ref.start=e)}setDuration(e){this.duration=e,this._ref&&(this._ref.duration=e)}setKeyFormat(e){const t=this.levelkeys;if(t){var i;const s=t[e];s&&!((i=this._decryptdata)!=null&&i.keyId)&&(this._decryptdata=s.getDecryptData(this.sn,t))}}abortRequests(){var e,t;(e=this.loader)==null||e.abort(),(t=this.keyLoader)==null||t.abort()}setElementaryStreamInfo(e,t,i,s,a,l=!1){const{elementaryStreams:c}=this,f=c[e];if(!f){c[e]={startPTS:t,endPTS:i,startDTS:s,endDTS:a,partial:l};return}f.startPTS=Math.min(f.startPTS,t),f.endPTS=Math.max(f.endPTS,i),f.startDTS=Math.min(f.startDTS,s),f.endDTS=Math.max(f.endDTS,a)}}class WD extends uT{constructor(e,t,i,s,a){super(i),this.fragOffset=0,this.duration=0,this.gap=!1,this.independent=!1,this.relurl=void 0,this.fragment=void 0,this.index=void 0,this.duration=e.decimalFloatingPoint("DURATION"),this.gap=e.bool("GAP"),this.independent=e.bool("INDEPENDENT"),this.relurl=e.enumeratedString("URI"),this.fragment=t,this.index=s;const l=e.enumeratedString("BYTERANGE");l&&this.setByteRange(l,a),a&&(this.fragOffset=a.fragOffset+a.duration)}get start(){return this.fragment.start+this.fragOffset}get end(){return this.start+this.duration}get loaded(){const{elementaryStreams:e}=this;return!!(e.audio||e.video||e.audiovideo)}}function dT(n,e){const t=Object.getPrototypeOf(n);if(t){const i=Object.getOwnPropertyDescriptor(t,e);return i||dT(t,e)}}function QD(n,e){const t=dT(n,e);t&&(t.enumerable=!0,Object.defineProperty(n,e,t))}const nb=Math.pow(2,32)-1,ZD=[].push,fT={video:1,audio:2,id3:3,text:4};function Ot(n){return String.fromCharCode.apply(null,n)}function hT(n,e){const t=n[e]<<8|n[e+1];return t<0?65536+t:t}function Re(n,e){const t=mT(n,e);return t<0?4294967296+t:t}function sb(n,e){let t=Re(n,e);return t*=Math.pow(2,32),t+=Re(n,e+4),t}function mT(n,e){return n[e]<<24|n[e+1]<<16|n[e+2]<<8|n[e+3]}function JD(n){const e=n.byteLength;for(let t=0;t<e;){const i=Re(n,t);if(i>8&&n[t+4]===109&&n[t+5]===111&&n[t+6]===111&&n[t+7]===102)return!0;t=i>1?t+i:e}return!1}function Me(n,e){const t=[];if(!e.length)return t;const i=n.byteLength;for(let s=0;s<i;){const a=Re(n,s),l=Ot(n.subarray(s+4,s+8)),c=a>1?s+a:i;if(l===e[0])if(e.length===1)t.push(n.subarray(s+8,c));else{const f=Me(n.subarray(s+8,c),e.slice(1));f.length&&ZD.apply(t,f)}s=c}return t}function ek(n){const e=[],t=n[0];let i=8;const s=Re(n,i);i+=4;let a=0,l=0;t===0?(a=Re(n,i),l=Re(n,i+4),i+=8):(a=sb(n,i),l=sb(n,i+8),i+=16),i+=2;let c=n.length+l;const f=hT(n,i);i+=2;for(let d=0;d<f;d++){let h=i;const p=Re(n,h);h+=4;const g=p&2147483647;if((p&2147483648)>>>31===1)return We.warn("SIDX has hierarchical references (not supported)"),null;const y=Re(n,h);h+=4,e.push({referenceSize:g,subsegmentDuration:y,info:{duration:y/s,start:c,end:c+g-1}}),c+=g,h+=4,i=h}return{earliestPresentationTime:a,timescale:s,version:t,referencesCount:f,references:e}}function pT(n){const e=[],t=Me(n,["moov","trak"]);for(let s=0;s<t.length;s++){const a=t[s],l=Me(a,["tkhd"])[0];if(l){let c=l[0];const f=Re(l,c===0?12:20),d=Me(a,["mdia","mdhd"])[0];if(d){c=d[0];const h=Re(d,c===0?12:20),p=Me(a,["mdia","hdlr"])[0];if(p){const g=Ot(p.subarray(8,12)),b={soun:it.AUDIO,vide:it.VIDEO}[g],y=Me(a,["mdia","minf","stbl","stsd"])[0],T=tk(y);b?(e[f]={timescale:h,type:b,stsd:T},e[b]=Xe({timescale:h,id:f},T)):e[f]={timescale:h,type:g,stsd:T}}}}}return Me(n,["moov","mvex","trex"]).forEach(s=>{const a=Re(s,4),l=e[a];l&&(l.default={duration:Re(s,12),flags:Re(s,20)})}),e}function tk(n){const e=n.subarray(8),t=e.subarray(86),i=Ot(e.subarray(4,8));let s=i,a;const l=i==="enca"||i==="encv";if(l){const d=Me(e,[i])[0].subarray(i==="enca"?28:78);Me(d,["sinf"]).forEach(p=>{const g=Me(p,["schm"])[0];if(g){const b=Ot(g.subarray(4,8));if(b==="cbcs"||b==="cenc"){const y=Me(p,["frma"])[0];y&&(s=Ot(y))}}})}const c=s;switch(s){case"avc1":case"avc2":case"avc3":case"avc4":{const f=Me(t,["avcC"])[0];f&&f.length>3&&(s+="."+xc(f[1])+xc(f[2])+xc(f[3]),a=Ec(c==="avc1"?"dva1":"dvav",t));break}case"mp4a":{const f=Me(e,[i])[0],d=Me(f.subarray(28),["esds"])[0];if(d&&d.length>7){let h=4;if(d[h++]!==3)break;h=mh(d,h),h+=2;const p=d[h++];if(p&128&&(h+=2),p&64&&(h+=d[h++]),d[h++]!==4)break;h=mh(d,h);const g=d[h++];if(g===64)s+="."+xc(g);else break;if(h+=12,d[h++]!==5)break;h=mh(d,h);const b=d[h++];let y=(b&248)>>3;y===31&&(y+=1+((b&7)<<3)+((d[h]&224)>>5)),s+="."+y}break}case"hvc1":case"hev1":{const f=Me(t,["hvcC"])[0];if(f&&f.length>12){const d=f[1],h=["","A","B","C"][d>>6],p=d&31,g=Re(f,2),b=(d&32)>>5?"H":"L",y=f[12],T=f.subarray(6,12);s+="."+h+p,s+="."+ik(g).toString(16).toUpperCase(),s+="."+b+y;let x="";for(let w=T.length;w--;){const S=T[w];(S||x)&&(x="."+S.toString(16).toUpperCase()+x)}s+=x}a=Ec(c=="hev1"?"dvhe":"dvh1",t);break}case"dvh1":case"dvhe":case"dvav":case"dva1":case"dav1":{s=Ec(s,t)||s;break}case"vp09":{const f=Me(t,["vpcC"])[0];if(f&&f.length>6){const d=f[4],h=f[5],p=f[6]>>4&15;s+="."+pn(d)+"."+pn(h)+"."+pn(p)}break}case"av01":{const f=Me(t,["av1C"])[0];if(f&&f.length>2){const d=f[1]>>>5,h=f[1]&31,p=f[2]>>>7?"H":"M",g=(f[2]&64)>>6,b=(f[2]&32)>>5,y=d===2&&g?b?12:10:g?10:8,T=(f[2]&16)>>4,x=(f[2]&8)>>3,w=(f[2]&4)>>2,S=f[2]&3;s+="."+d+"."+pn(h)+p+"."+pn(y)+"."+T+"."+x+w+S+"."+pn(1)+"."+pn(1)+"."+pn(1)+"."+0,a=Ec("dav1",t)}break}}return{codec:s,encrypted:l,supplemental:a}}function Ec(n,e){const t=Me(e,["dvvC"]),i=t.length?t[0]:Me(e,["dvcC"])[0];if(i){const s=i[2]>>1&127,a=i[2]<<5&32|i[3]>>3&31;return n+"."+pn(s)+"."+pn(a)}}function ik(n){let e=0;for(let t=0;t<32;t++)e|=(n>>t&1)<<31-t;return e>>>0}function mh(n,e){const t=e+5;for(;n[e++]&128&&e<t;);return e}function xc(n){return("0"+n.toString(16).toUpperCase()).slice(-2)}function pn(n){return(n<10?"0":"")+n}function nk(n,e){if(!n||!e)return;const t=e.keyId;t&&e.isCommonEncryption&&gT(n,(i,s)=>{const a=i.subarray(8,24);a.some(l=>l!==0)||(We.log(`[eme] Patching keyId in 'enc${s?"a":"v"}>sinf>>tenc' box: ${Kt(a)} -> ${Kt(t)}`),i.set(t,8))})}function sk(n){const e=[];return gT(n,t=>e.push(t.subarray(8,24))),e}function gT(n,e){Me(n,["moov","trak"]).forEach(i=>{const s=Me(i,["mdia","minf","stbl","stsd"])[0];if(!s)return;const a=s.subarray(8);let l=Me(a,["enca"]);const c=l.length>0;c||(l=Me(a,["encv"])),l.forEach(f=>{const d=c?f.subarray(28):f.subarray(78);Me(d,["sinf"]).forEach(p=>{const g=yT(p);g&&e(g,c)})})})}function yT(n){const e=Me(n,["schm"])[0];if(e){const t=Ot(e.subarray(4,8));if(t==="cbcs"||t==="cenc"){const i=Me(n,["schi","tenc"])[0];if(i)return i}}}function rk(n,e,t){const i={},s=Me(n,["moof","traf"]);for(let a=0;a<s.length;a++){const l=s[a],c=Me(l,["tfhd"])[0],f=Re(c,4),d=e[f];if(!d)continue;i[f]||(i[f]={start:NaN,duration:0,sampleCount:0,timescale:d.timescale,type:d.type});const h=i[f],p=Me(l,["tfdt"])[0];if(p){const A=p[0];let _=Re(p,4);A===1&&(_===nb?t.warn("[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time"):(_*=nb+1,_+=Re(p,8))),pe(_)&&(!pe(h.start)||_<h.start)&&(h.start=_)}const g=d.default,b=Re(c,0)|g?.flags;let y=g?.duration||0;b&8&&(b&2?y=Re(c,12):y=Re(c,8));const T=Me(l,["trun"]);let x=h.start||0,w=0,S=y;for(let A=0;A<T.length;A++){const _=T[A],I=Re(_,4),P=h.sampleCount;h.sampleCount+=I;const C=_[3]&1,O=_[3]&4,B=_[2]&1,N=_[2]&2,V=_[2]&4,ee=_[2]&8;let z=8,H=I;for(C&&(z+=4),O&&I&&(!(_[z+1]&1)&&h.keyFrameIndex===void 0&&(h.keyFrameIndex=P),z+=4,B?(S=Re(_,z),z+=4):S=y,N&&(z+=4),ee&&(z+=4),x+=S,w+=S,H--);H--;)B?(S=Re(_,z),z+=4):S=y,N&&(z+=4),V&&(_[z+1]&1||h.keyFrameIndex===void 0&&(h.keyFrameIndex=h.sampleCount-(H+1),h.keyFrameStart=x),z+=4),ee&&(z+=4),x+=S,w+=S;!w&&y&&(w+=y*I)}h.duration+=w}if(!Object.keys(i).some(a=>i[a].duration)){let a=1/0,l=0;const c=Me(n,["sidx"]);for(let f=0;f<c.length;f++){const d=ek(c[f]);if(d!=null&&d.references){a=Math.min(a,d.earliestPresentationTime/d.timescale);const h=d.references.reduce((p,g)=>p+g.info.duration||0,0);l=Math.max(l,h+d.earliestPresentationTime/d.timescale)}}l&&pe(l)&&Object.keys(i).forEach(f=>{i[f].duration||(i[f].duration=l*i[f].timescale-i[f].start)})}return i}function ak(n){const e={valid:null,remainder:null},t=Me(n,["moof"]);if(t.length<2)return e.remainder=n,e;const i=t[t.length-1];return e.valid=n.slice(0,i.byteOffset-8),e.remainder=n.slice(i.byteOffset-8),e}function Xi(n,e){const t=new Uint8Array(n.length+e.length);return t.set(n),t.set(e,n.length),t}function rb(n,e){const t=[],i=e.samples,s=e.timescale,a=e.id;let l=!1;return Me(i,["moof"]).map(f=>{const d=f.byteOffset-8;Me(f,["traf"]).map(p=>{const g=Me(p,["tfdt"]).map(b=>{const y=b[0];let T=Re(b,4);return y===1&&(T*=Math.pow(2,32),T+=Re(b,8)),T/s})[0];return g!==void 0&&(n=g),Me(p,["tfhd"]).map(b=>{const y=Re(b,4),T=Re(b,0)&16777215,x=(T&1)!==0,w=(T&2)!==0,S=(T&8)!==0;let A=0;const _=(T&16)!==0;let I=0;const P=(T&32)!==0;let C=8;y===a&&(x&&(C+=8),w&&(C+=4),S&&(A=Re(b,C),C+=4),_&&(I=Re(b,C),C+=4),P&&(C+=4),e.type==="video"&&(l=ku(e.codec)),Me(p,["trun"]).map(O=>{const B=O[0],N=Re(O,0)&16777215,V=(N&1)!==0;let ee=0;const z=(N&4)!==0,H=(N&256)!==0;let W=0;const k=(N&512)!==0;let G=0;const K=(N&1024)!==0,oe=(N&2048)!==0;let fe=0;const M=Re(O,4);let $=8;V&&(ee=Re(O,$),$+=4),z&&($+=4);let se=ee+d;for(let de=0;de<M;de++){if(H?(W=Re(O,$),$+=4):W=A,k?(G=Re(O,$),$+=4):G=I,K&&($+=4),oe&&(B===0?fe=Re(O,$):fe=mT(O,$),$+=4),e.type===it.VIDEO){let he=0;for(;he<G;){const me=Re(i,se);if(se+=4,ok(l,i[se])){const Se=i.subarray(se,se+me);Gm(Se,l?2:1,n+fe/s,t)}se+=me,he+=me+4}}n+=W/s}}))})})}),t}function ku(n){if(!n)return!1;const e=n.substring(0,4);return e==="hvc1"||e==="hev1"||e==="dvh1"||e==="dvhe"}function ok(n,e){if(n){const t=e>>1&63;return t===39||t===40}else return(e&31)===6}function Gm(n,e,t,i){const s=vT(n);let a=0;a+=e;let l=0,c=0,f=0;for(;a<s.length;){l=0;do{if(a>=s.length)break;f=s[a++],l+=f}while(f===255);c=0;do{if(a>=s.length)break;f=s[a++],c+=f}while(f===255);const d=s.length-a;let h=a;if(c<d)a+=c;else if(c>d){We.error(`Malformed SEI payload. ${c} is too small, only ${d} bytes left to parse.`);break}if(l===4){if(s[h++]===181){const g=hT(s,h);if(h+=2,g===49){const b=Re(s,h);if(h+=4,b===1195456820){const y=s[h++];if(y===3){const T=s[h++],x=31&T,w=64&T,S=w?2+x*3:0,A=new Uint8Array(S);if(w){A[0]=T;for(let _=1;_<S;_++)A[_]=s[h++]}i.push({type:y,payloadType:l,pts:t,bytes:A})}}}}}else if(l===5&&c>16){const p=[];for(let y=0;y<16;y++){const T=s[h++].toString(16);p.push(T.length==1?"0"+T:T),(y===3||y===5||y===7||y===9)&&p.push("-")}const g=c-16,b=new Uint8Array(g);for(let y=0;y<g;y++)b[y]=s[h++];i.push({payloadType:l,pts:t,uuid:p.join(""),userData:ki(b),userDataBytes:b})}}}function vT(n){const e=n.byteLength,t=[];let i=1;for(;i<e-2;)n[i]===0&&n[i+1]===0&&n[i+2]===3?(t.push(i+2),i+=2):i++;if(t.length===0)return n;const s=e-t.length,a=new Uint8Array(s);let l=0;for(i=0;i<s;l++,i++)l===t[0]&&(l++,t.shift()),a[i]=n[l];return a}function lk(n){const e=n[0];let t="",i="",s=0,a=0,l=0,c=0,f=0,d=0;if(e===0){for(;Ot(n.subarray(d,d+1))!=="\0";)t+=Ot(n.subarray(d,d+1)),d+=1;for(t+=Ot(n.subarray(d,d+1)),d+=1;Ot(n.subarray(d,d+1))!=="\0";)i+=Ot(n.subarray(d,d+1)),d+=1;i+=Ot(n.subarray(d,d+1)),d+=1,s=Re(n,12),a=Re(n,16),c=Re(n,20),f=Re(n,24),d=28}else if(e===1){d+=4,s=Re(n,d),d+=4;const p=Re(n,d);d+=4;const g=Re(n,d);for(d+=4,l=2**32*p+g,FD(l)||(l=Number.MAX_SAFE_INTEGER,We.warn("Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box")),c=Re(n,d),d+=4,f=Re(n,d),d+=4;Ot(n.subarray(d,d+1))!=="\0";)t+=Ot(n.subarray(d,d+1)),d+=1;for(t+=Ot(n.subarray(d,d+1)),d+=1;Ot(n.subarray(d,d+1))!=="\0";)i+=Ot(n.subarray(d,d+1)),d+=1;i+=Ot(n.subarray(d,d+1)),d+=1}const h=n.subarray(d,n.byteLength);return{schemeIdUri:t,value:i,timeScale:s,presentationTime:l,presentationTimeDelta:a,eventDuration:c,id:f,payload:h}}function ck(n,...e){const t=e.length;let i=8,s=t;for(;s--;)i+=e[s].byteLength;const a=new Uint8Array(i);for(a[0]=i>>24&255,a[1]=i>>16&255,a[2]=i>>8&255,a[3]=i&255,a.set(n,4),s=0,i=8;s<t;s++)a.set(e[s],i),i+=e[s].byteLength;return a}function uk(n,e,t){if(n.byteLength!==16)throw new RangeError("Invalid system id");let i,s;i=0,s=new Uint8Array;let a;i>0?(a=new Uint8Array(4),e.length>0&&new DataView(a.buffer).setUint32(0,e.length,!1)):a=new Uint8Array;const l=new Uint8Array(4);return t.byteLength>0&&new DataView(l.buffer).setUint32(0,t.byteLength,!1),ck([112,115,115,104],new Uint8Array([i,0,0,0]),n,a,s,l,t)}function dk(n){const e=[];if(n instanceof ArrayBuffer){const t=n.byteLength;let i=0;for(;i+32<t;){const s=new DataView(n,i),a=fk(s);e.push(a),i+=a.size}}return e}function fk(n){const e=n.getUint32(0),t=n.byteOffset,i=n.byteLength;if(i<e)return{offset:t,size:i};if(n.getUint32(4)!==1886614376)return{offset:t,size:e};const a=n.getUint32(8)>>>24;if(a!==0&&a!==1)return{offset:t,size:e};const l=n.buffer,c=Kt(new Uint8Array(l,t+12,16));let f=null,d=null,h=0;if(a===0)h=28;else{const g=n.getUint32(28);if(!g||i<32+g*16)return{offset:t,size:e};f=[];for(let b=0;b<g;b++)f.push(new Uint8Array(l,t+32+b*16,16));h=32+g*16}if(!h)return{offset:t,size:e};const p=n.getUint32(h);return e-32<p?{offset:t,size:e}:(d=new Uint8Array(l,t+h+4,p),{version:a,systemId:c,kids:f,data:d,offset:t,size:e})}const bT=()=>/\(Windows.+Firefox\//i.test(navigator.userAgent),Ea={audio:{a3ds:1,"ac-3":.95,"ac-4":1,alac:.9,alaw:1,dra1:1,"dts+":1,"dts-":1,dtsc:1,dtse:1,dtsh:1,"ec-3":.9,enca:1,fLaC:.9,flac:.9,FLAC:.9,g719:1,g726:1,m4ae:1,mha1:1,mha2:1,mhm1:1,mhm2:1,mlpa:1,mp4a:1,"raw ":1,Opus:1,opus:1,samr:1,sawb:1,sawp:1,sevc:1,sqcp:1,ssmv:1,twos:1,ulaw:1},video:{avc1:1,avc2:1,avc3:1,avc4:1,avcp:1,av01:.8,dav1:.8,drac:1,dva1:1,dvav:1,dvh1:.7,dvhe:.7,encv:1,hev1:.75,hvc1:.75,mjp2:1,mp4v:1,mvc1:1,mvc2:1,mvc3:1,mvc4:1,resv:1,rv60:1,s263:1,svc1:1,svc2:1,"vc-1":1,vp08:1,vp09:.9},text:{stpp:1,wvtt:1}};function zm(n,e){const t=Ea[e];return!!t&&!!t[n.slice(0,4)]}function ko(n,e,t=!0){return!n.split(",").some(i=>!Vm(i,e,t))}function Vm(n,e,t=!0){var i;const s=Os(t);return(i=s?.isTypeSupported(Oo(n,e)))!=null?i:!1}function Oo(n,e){return`${e}/mp4;codecs=${n}`}function ab(n){if(n){const e=n.substring(0,4);return Ea.video[e]}return 2}function au(n){const e=bT();return n.split(",").reduce((t,i)=>{const a=e&&ku(i)?9:Ea.video[i];return a?(a*2+t)/(t?3:2):(Ea.audio[i]+t)/(t?2:1)},0)}const ph={};function hk(n,e=!0){if(ph[n])return ph[n];const t={flac:["flac","fLaC","FLAC"],opus:["opus","Opus"],"mp4a.40.34":["mp3"]}[n];for(let s=0;s<t.length;s++){var i;if(Vm(t[s],"audio",e))return ph[n]=t[s],t[s];if(t[s]==="mp3"&&(i=Os(e))!=null&&i.isTypeSupported("audio/mpeg"))return""}return n}const mk=/flac|opus|mp4a\.40\.34/i;function ou(n,e=!0){return n.replace(mk,t=>hk(t.toLowerCase(),e))}function pk(n,e){const t=[];if(n){const i=n.split(",");for(let s=0;s<i.length;s++)zm(i[s],"video")||t.push(i[s])}return e&&t.push(e),t.join(",")}function $c(n,e){if(n&&(n.length>4||["ac-3","ec-3","alac","fLaC","Opus"].indexOf(n)!==-1)&&(ob(n,"audio")||ob(n,"video")))return n;if(e){const t=e.split(",");if(t.length>1){if(n){for(let i=t.length;i--;)if(t[i].substring(0,4)===n.substring(0,4))return t[i]}return t[0]}}return e||n}function ob(n,e){return zm(n,e)&&Vm(n,e)}function gk(n){const e=n.split(",");for(let t=0;t<e.length;t++){const i=e[t].split(".");i.length>2&&i[0]==="avc1"&&(e[t]=`avc1.${parseInt(i[1]).toString(16)}${("000"+parseInt(i[2]).toString(16)).slice(-4)}`)}return e.join(",")}function yk(n){if(n.startsWith("av01.")){const e=n.split("."),t=["0","111","01","01","01","0"];for(let i=e.length;i>4&&i<10;i++)e[i]=t[i-4];return e.join(".")}return n}function lb(n){const e=Os(n)||{isTypeSupported:()=>!1};return{mpeg:e.isTypeSupported("audio/mpeg"),mp3:e.isTypeSupported('audio/mp4; codecs="mp3"'),ac3:e.isTypeSupported('audio/mp4; codecs="ac-3"')}}function Qh(n){return n.replace(/^.+codecs=["']?([^"']+).*$/,"$1")}const vk={supported:!0,powerEfficient:!0,smooth:!0},bk={supported:!1,smooth:!1,powerEfficient:!1},ET={supported:!0,configurations:[],decodingInfoResults:[vk]};function xT(n,e){return{supported:!1,configurations:e,decodingInfoResults:[bk],error:n}}function Ek(n,e,t,i,s,a){const l=n.videoCodec,c=n.audioCodec?n.audioGroups:null,f=a?.audioCodec,d=a?.channels,h=d?parseInt(d):f?1/0:2;let p=null;if(c!=null&&c.length)try{c.length===1&&c[0]?p=e.groups[c[0]].channels:p=c.reduce((g,b)=>{if(b){const y=e.groups[b];if(!y)throw new Error(`Audio track group ${b} not found`);Object.keys(y.channels).forEach(T=>{g[T]=(g[T]||0)+y.channels[T]})}return g},{2:0})}catch{return!0}return l!==void 0&&(l.split(",").some(g=>ku(g))||n.width>1920&&n.height>1088||n.height>1920&&n.width>1088||n.frameRate>Math.max(i,30)||n.videoRange!=="SDR"&&n.videoRange!==t||n.bitrate>Math.max(s,8e6))||!!p&&pe(h)&&Object.keys(p).some(g=>parseInt(g)>h)}function TT(n,e,t,i={}){const s=n.videoCodec;if(!s&&!n.audioCodec||!t)return Promise.resolve(ET);const a=[],l=xk(n),c=l.length,f=Tk(n,e,c>0),d=f.length;for(let h=c||1*d||1;h--;){const p={type:"media-source"};if(c&&(p.video=l[h%c]),d){p.audio=f[h%d];const g=p.audio.bitrate;p.video&&g&&(p.video.bitrate-=g)}a.push(p)}if(s){const h=navigator.userAgent;if(s.split(",").some(p=>ku(p))&&bT())return Promise.resolve(xT(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${h})`),a))}return Promise.all(a.map(h=>{const p=wk(h);return i[p]||(i[p]=t.decodingInfo(h))})).then(h=>({supported:!h.some(p=>!p.supported),configurations:a,decodingInfoResults:h})).catch(h=>({supported:!1,configurations:a,decodingInfoResults:[],error:h}))}function xk(n){var e;const t=(e=n.videoCodec)==null?void 0:e.split(","),i=ST(n),s=n.width||640,a=n.height||480,l=n.frameRate||30,c=n.videoRange.toLowerCase();return t?t.map(f=>{const d={contentType:Oo(yk(f),"video"),width:s,height:a,bitrate:i,framerate:l};return c!=="sdr"&&(d.transferFunction=c),d}):[]}function Tk(n,e,t){var i;const s=(i=n.audioCodec)==null?void 0:i.split(","),a=ST(n);return s&&n.audioGroups?n.audioGroups.reduce((l,c)=>{var f;const d=c?(f=e.groups[c])==null?void 0:f.tracks:null;return d?d.reduce((h,p)=>{if(p.groupId===c){const g=parseFloat(p.channels||"");s.forEach(b=>{const y={contentType:Oo(b,"audio"),bitrate:t?Sk(b,a):a};g&&(y.channels=""+g),h.push(y)})}return h},l):l},[]):[]}function Sk(n,e){if(e<=1)return 1;let t=128e3;return n==="ec-3"?t=768e3:n==="ac-3"&&(t=64e4),Math.min(e/2,t)}function ST(n){return Math.ceil(Math.max(n.bitrate*.9,n.averageBitrate)/1e3)*1e3||1}function wk(n){let e="";const{audio:t,video:i}=n;if(i){const s=Qh(i.contentType);e+=`${s}_r${i.height}x${i.width}f${Math.ceil(i.framerate)}${i.transferFunction||"sd"}_${Math.ceil(i.bitrate/1e5)}`}if(t){const s=Qh(t.contentType);e+=`${i?"_":""}${s}_c${t.channels}`}return e}const Zh=["NONE","TYPE-0","TYPE-1",null];function Ak(n){return Zh.indexOf(n)>-1}const lu=["SDR","PQ","HLG"];function Rk(n){return!!n&&lu.indexOf(n)>-1}var jc={No:"",Yes:"YES",v2:"v2"};function cb(n){const{canSkipUntil:e,canSkipDateRanges:t,age:i}=n,s=i<e/2;return e&&s?t?jc.v2:jc.Yes:jc.No}class ub{constructor(e,t,i){this.msn=void 0,this.part=void 0,this.skip=void 0,this.msn=e,this.part=t,this.skip=i}addDirectives(e){const t=new self.URL(e);return this.msn!==void 0&&t.searchParams.set("_HLS_msn",this.msn.toString()),this.part!==void 0&&t.searchParams.set("_HLS_part",this.part.toString()),this.skip&&t.searchParams.set("_HLS_skip",this.skip),t.href}}class Mo{constructor(e){if(this._attrs=void 0,this.audioCodec=void 0,this.bitrate=void 0,this.codecSet=void 0,this.url=void 0,this.frameRate=void 0,this.height=void 0,this.id=void 0,this.name=void 0,this.supplemental=void 0,this.videoCodec=void 0,this.width=void 0,this.details=void 0,this.fragmentError=0,this.loadError=0,this.loaded=void 0,this.realBitrate=0,this.supportedPromise=void 0,this.supportedResult=void 0,this._avgBitrate=0,this._audioGroups=void 0,this._subtitleGroups=void 0,this._urlId=0,this.url=[e.url],this._attrs=[e.attrs],this.bitrate=e.bitrate,e.details&&(this.details=e.details),this.id=e.id||0,this.name=e.name,this.width=e.width||0,this.height=e.height||0,this.frameRate=e.attrs.optionalFloat("FRAME-RATE",0),this._avgBitrate=e.attrs.decimalInteger("AVERAGE-BANDWIDTH"),this.audioCodec=e.audioCodec,this.videoCodec=e.videoCodec,this.codecSet=[e.videoCodec,e.audioCodec].filter(i=>!!i).map(i=>i.substring(0,4)).join(","),"supplemental"in e){var t;this.supplemental=e.supplemental;const i=(t=e.supplemental)==null?void 0:t.videoCodec;i&&i!==e.videoCodec&&(this.codecSet+=`,${i.substring(0,4)}`)}this.addGroupId("audio",e.attrs.AUDIO),this.addGroupId("text",e.attrs.SUBTITLES)}get maxBitrate(){return Math.max(this.realBitrate,this.bitrate)}get averageBitrate(){return this._avgBitrate||this.realBitrate||this.bitrate}get attrs(){return this._attrs[0]}get codecs(){return this.attrs.CODECS||""}get pathwayId(){return this.attrs["PATHWAY-ID"]||"."}get videoRange(){return this.attrs["VIDEO-RANGE"]||"SDR"}get score(){return this.attrs.optionalFloat("SCORE",0)}get uri(){return this.url[0]||""}hasAudioGroup(e){return db(this._audioGroups,e)}hasSubtitleGroup(e){return db(this._subtitleGroups,e)}get audioGroups(){return this._audioGroups}get subtitleGroups(){return this._subtitleGroups}addGroupId(e,t){if(t){if(e==="audio"){let i=this._audioGroups;i||(i=this._audioGroups=[]),i.indexOf(t)===-1&&i.push(t)}else if(e==="text"){let i=this._subtitleGroups;i||(i=this._subtitleGroups=[]),i.indexOf(t)===-1&&i.push(t)}}}get urlId(){return 0}set urlId(e){}get audioGroupIds(){return this.audioGroups?[this.audioGroupId]:void 0}get textGroupIds(){return this.subtitleGroups?[this.textGroupId]:void 0}get audioGroupId(){var e;return(e=this.audioGroups)==null?void 0:e[0]}get textGroupId(){var e;return(e=this.subtitleGroups)==null?void 0:e[0]}addFallback(){}}function db(n,e){return!e||!n?!1:n.indexOf(e)!==-1}function Lk(){if(typeof matchMedia=="function"){const n=matchMedia("(dynamic-range: high)"),e=matchMedia("bad query");if(n.media!==e.media)return n.matches===!0}return!1}function _k(n,e){let t=!1,i=[];if(n&&(t=n!=="SDR",i=[n]),e){i=e.allowedVideoRanges||lu.slice(0);const s=i.join("")!=="SDR"&&!e.videoCodec;t=e.preferHDR!==void 0?e.preferHDR:s&&Lk(),t||(i=["SDR"])}return{preferHDR:t,allowedVideoRanges:i}}const Ck=n=>{const e=new WeakSet;return(t,i)=>{if(n&&(i=n(t,i)),typeof i=="object"&&i!==null){if(e.has(i))return;e.add(i)}return i}},st=(n,e)=>JSON.stringify(n,Ck(e));function Ik(n,e,t,i,s){const a=Object.keys(n),l=i?.channels,c=i?.audioCodec,f=s?.videoCodec,d=l&&parseInt(l)===2;let h=!1,p=!1,g=1/0,b=1/0,y=1/0,T=1/0,x=0,w=[];const{preferHDR:S,allowedVideoRanges:A}=_k(e,s);for(let O=a.length;O--;){const B=n[a[O]];h||(h=B.channels[2]>0),g=Math.min(g,B.minHeight),b=Math.min(b,B.minFramerate),y=Math.min(y,B.minBitrate),A.filter(V=>B.videoRanges[V]>0).length>0&&(p=!0)}g=pe(g)?g:0,b=pe(b)?b:0;const _=Math.max(1080,g),I=Math.max(30,b);y=pe(y)?y:t,t=Math.max(y,t),p||(e=void 0);const P=a.length>1;return{codecSet:a.reduce((O,B)=>{const N=n[B];if(B===O)return O;if(w=p?A.filter(V=>N.videoRanges[V]>0):[],P){if(N.minBitrate>t)return hn(B,`min bitrate of ${N.minBitrate} > current estimate of ${t}`),O;if(!N.hasDefaultAudio)return hn(B,"no renditions with default or auto-select sound found"),O;if(c&&B.indexOf(c.substring(0,4))%5!==0)return hn(B,`audio codec preference "${c}" not found`),O;if(l&&!d){if(!N.channels[l])return hn(B,`no renditions with ${l} channel sound found (channels options: ${Object.keys(N.channels)})`),O}else if((!c||d)&&h&&N.channels[2]===0)return hn(B,"no renditions with stereo sound found"),O;if(N.minHeight>_)return hn(B,`min resolution of ${N.minHeight} > maximum of ${_}`),O;if(N.minFramerate>I)return hn(B,`min framerate of ${N.minFramerate} > maximum of ${I}`),O;if(!w.some(V=>N.videoRanges[V]>0))return hn(B,`no variants with VIDEO-RANGE of ${st(w)} found`),O;if(f&&B.indexOf(f.substring(0,4))%5!==0)return hn(B,`video codec preference "${f}" not found`),O;if(N.maxScore<x)return hn(B,`max score of ${N.maxScore} < selected max of ${x}`),O}return O&&(au(B)>=au(O)||N.fragmentError>n[O].fragmentError)?O:(T=N.minIndex,x=N.maxScore,B)},void 0),videoRanges:w,preferHDR:S,minFramerate:b,minBitrate:y,minIndex:T}}function hn(n,e){We.log(`[abr] start candidates with "${n}" ignored because ${e}`)}function wT(n){return n.reduce((e,t)=>{let i=e.groups[t.groupId];i||(i=e.groups[t.groupId]={tracks:[],channels:{2:0},hasDefault:!1,hasAutoSelect:!1}),i.tracks.push(t);const s=t.channels||"2";return i.channels[s]=(i.channels[s]||0)+1,i.hasDefault=i.hasDefault||t.default,i.hasAutoSelect=i.hasAutoSelect||t.autoselect,i.hasDefault&&(e.hasDefaultAudio=!0),i.hasAutoSelect&&(e.hasAutoSelectAudio=!0),e},{hasDefaultAudio:!1,hasAutoSelectAudio:!1,groups:{}})}function Dk(n,e,t,i){return n.slice(t,i+1).reduce((s,a,l)=>{if(!a.codecSet)return s;const c=a.audioGroups;let f=s[a.codecSet];f||(s[a.codecSet]=f={minBitrate:1/0,minHeight:1/0,minFramerate:1/0,minIndex:l,maxScore:0,videoRanges:{SDR:0},channels:{2:0},hasDefaultAudio:!c,fragmentError:0}),f.minBitrate=Math.min(f.minBitrate,a.bitrate);const d=Math.min(a.height,a.width);return f.minHeight=Math.min(f.minHeight,d),f.minFramerate=Math.min(f.minFramerate,a.frameRate),f.minIndex=Math.min(f.minIndex,l),f.maxScore=Math.max(f.maxScore,a.score),f.fragmentError+=a.fragmentError,f.videoRanges[a.videoRange]=(f.videoRanges[a.videoRange]||0)+1,c&&c.forEach(h=>{if(!h)return;const p=e.groups[h];p&&(f.hasDefaultAudio=f.hasDefaultAudio||e.hasDefaultAudio?p.hasDefault:p.hasAutoSelect||!e.hasDefaultAudio&&!e.hasAutoSelectAudio,Object.keys(p.channels).forEach(g=>{f.channels[g]=(f.channels[g]||0)+p.channels[g]}))}),s},{})}function fb(n){if(!n)return n;const{lang:e,assocLang:t,characteristics:i,channels:s,audioCodec:a}=n;return{lang:e,assocLang:t,characteristics:i,channels:s,audioCodec:a}}function vn(n,e,t){if("attrs"in n){const i=e.indexOf(n);if(i!==-1)return i}for(let i=0;i<e.length;i++){const s=e[i];if(fr(n,s,t))return i}return-1}function fr(n,e,t){const{groupId:i,name:s,lang:a,assocLang:l,default:c}=n,f=n.forced;return(i===void 0||e.groupId===i)&&(s===void 0||e.name===s)&&(a===void 0||kk(a,e.lang))&&(a===void 0||e.assocLang===l)&&(c===void 0||e.default===c)&&(f===void 0||e.forced===f)&&(!("characteristics"in n)||Ok(n.characteristics||"",e.characteristics))&&(t===void 0||t(n,e))}function kk(n,e="--"){return n.length===e.length?n===e:n.startsWith(e)||e.startsWith(n)}function Ok(n,e=""){const t=n.split(","),i=e.split(",");return t.length===i.length&&!t.some(s=>i.indexOf(s)===-1)}function ar(n,e){const{audioCodec:t,channels:i}=n;return(t===void 0||(e.audioCodec||"").substring(0,4)===t.substring(0,4))&&(i===void 0||i===(e.channels||"2"))}function Mk(n,e,t,i,s){const a=e[i],c=e.reduce((g,b,y)=>{const T=b.uri;return(g[T]||(g[T]=[])).push(y),g},{})[a.uri];c.length>1&&(i=Math.max.apply(Math,c));const f=a.videoRange,d=a.frameRate,h=a.codecSet.substring(0,4),p=hb(e,i,g=>{if(g.videoRange!==f||g.frameRate!==d||g.codecSet.substring(0,4)!==h)return!1;const b=g.audioGroups,y=t.filter(T=>!b||b.indexOf(T.groupId)!==-1);return vn(n,y,s)>-1});return p>-1?p:hb(e,i,g=>{const b=g.audioGroups,y=t.filter(T=>!b||b.indexOf(T.groupId)!==-1);return vn(n,y,s)>-1})}function hb(n,e,t){for(let i=e;i>-1;i--)if(t(n[i]))return i;for(let i=e+1;i<n.length;i++)if(t(n[i]))return i;return-1}function cu(n,e){var t;return!!n&&n!==((t=e.loadLevelObj)==null?void 0:t.uri)}class Pk extends Zi{constructor(e){super("abr",e.logger),this.hls=void 0,this.lastLevelLoadSec=0,this.lastLoadedFragLevel=-1,this.firstSelection=-1,this._nextAutoLevel=-1,this.nextAutoLevelKey="",this.audioTracksByGroup=null,this.codecTiers=null,this.timer=-1,this.fragCurrent=null,this.partCurrent=null,this.bitrateTestDelay=0,this.rebufferNotice=-1,this.supportedCache={},this.bwEstimator=void 0,this._abandonRulesCheck=t=>{var i;const{fragCurrent:s,partCurrent:a,hls:l}=this,{autoLevelEnabled:c,media:f}=l;if(!s||!f)return;const d=performance.now(),h=a?a.stats:s.stats,p=a?a.duration:s.duration,g=d-h.loading.start,b=l.minAutoLevel,y=s.level,T=this._nextAutoLevel;if(h.aborted||h.loaded&&h.loaded===h.total||y<=b){this.clearTimer(),this._nextAutoLevel=-1;return}if(!c)return;const x=T>-1&&T!==y,w=!!t||x;if(!w&&(f.paused||!f.playbackRate||!f.readyState))return;const S=l.mainForwardBufferInfo;if(!w&&S===null)return;const A=this.bwEstimator.getEstimateTTFB(),_=Math.abs(f.playbackRate);if(g<=Math.max(A,1e3*(p/(_*2))))return;const I=S?S.len/_:0,P=h.loading.first?h.loading.first-h.loading.start:-1,C=h.loaded&&P>-1,O=this.getBwEstimate(),B=l.levels,N=B[y],V=Math.max(h.loaded,Math.round(p*(s.bitrate||N.averageBitrate)/8));let ee=C?g-P:g;ee<1&&C&&(ee=Math.min(g,h.loaded*8/O));const z=C?h.loaded*1e3/ee:0,H=A/1e3,W=z?(V-h.loaded)/z:V*8/O+H;if(W<=I)return;const k=z?z*8:O,G=((i=t?.details||this.hls.latestLevelDetails)==null?void 0:i.live)===!0,K=this.hls.config.abrBandWidthUpFactor;let oe=Number.POSITIVE_INFINITY,fe;for(fe=y-1;fe>b;fe--){const de=B[fe].maxBitrate,he=!B[fe].details||G;if(oe=this.getTimeToLoadFrag(H,k,p*de,he),oe<Math.min(I,p+H))break}if(oe>=W||oe>p*10)return;C?this.bwEstimator.sample(g-Math.min(A,P),h.loaded):this.bwEstimator.sampleTTFB(g);const M=B[fe].maxBitrate;this.getBwEstimate()*K>M&&this.resetEstimator(M);const $=this.findBestLevel(M,b,fe,0,I,1,1);$>-1&&(fe=$),this.warn(`Fragment ${s.sn}${a?" part "+a.index:""} of level ${y} is loading too slowly;
      Fragment duration: ${s.duration.toFixed(3)}
      Time to underbuffer: ${I.toFixed(3)} s
      Estimated load time for current fragment: ${W.toFixed(3)} s
      Estimated load time for down switch fragment: ${oe.toFixed(3)} s
      TTFB estimate: ${P|0} ms
      Current BW estimate: ${pe(O)?O|0:"Unknown"} bps
      New BW estimate: ${this.getBwEstimate()|0} bps
      Switching to level ${fe} @ ${M|0} bps`),l.nextLoadLevel=l.nextAutoLevel=fe,this.clearTimer();const se=()=>{if(this.clearTimer(),this.fragCurrent===s&&this.hls.loadLevel===fe&&fe>0){const de=this.getStarvationDelay();if(this.warn(`Aborting inflight request ${fe>0?"and switching down":""}
      Fragment duration: ${s.duration.toFixed(3)} s
      Time to underbuffer: ${de.toFixed(3)} s`),s.abortRequests(),this.fragCurrent=this.partCurrent=null,fe>b){let he=this.findBestLevel(this.hls.levels[b].bitrate,b,fe,0,de,1,1);he===-1&&(he=b),this.hls.nextLoadLevel=this.hls.nextAutoLevel=he,this.resetEstimator(this.hls.levels[he].bitrate)}}};x||W>oe*2?se():this.timer=self.setInterval(se,oe*1e3),l.trigger(L.FRAG_LOAD_EMERGENCY_ABORTED,{frag:s,part:a,stats:h})},this.hls=e,this.bwEstimator=this.initEstimator(),this.registerListeners()}resetEstimator(e){e&&(this.log(`setting initial bwe to ${e}`),this.hls.config.abrEwmaDefaultEstimate=e),this.firstSelection=-1,this.bwEstimator=this.initEstimator()}initEstimator(){const e=this.hls.config;return new $D(e.abrEwmaSlowVoD,e.abrEwmaFastVoD,e.abrEwmaDefaultEstimate)}registerListeners(){const{hls:e}=this;e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.FRAG_LOADING,this.onFragLoading,this),e.on(L.FRAG_LOADED,this.onFragLoaded,this),e.on(L.FRAG_BUFFERED,this.onFragBuffered,this),e.on(L.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(L.LEVEL_LOADED,this.onLevelLoaded,this),e.on(L.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(L.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.on(L.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e&&(e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.FRAG_LOADING,this.onFragLoading,this),e.off(L.FRAG_LOADED,this.onFragLoaded,this),e.off(L.FRAG_BUFFERED,this.onFragBuffered,this),e.off(L.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(L.LEVEL_LOADED,this.onLevelLoaded,this),e.off(L.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(L.MAX_AUTO_LEVEL_UPDATED,this.onMaxAutoLevelUpdated,this),e.off(L.ERROR,this.onError,this))}destroy(){this.unregisterListeners(),this.clearTimer(),this.hls=this._abandonRulesCheck=this.supportedCache=null,this.fragCurrent=this.partCurrent=null}onManifestLoading(e,t){this.lastLoadedFragLevel=-1,this.firstSelection=-1,this.lastLevelLoadSec=0,this.supportedCache={},this.fragCurrent=this.partCurrent=null,this.onLevelsUpdated(),this.clearTimer()}onLevelsUpdated(){this.lastLoadedFragLevel>-1&&this.fragCurrent&&(this.lastLoadedFragLevel=this.fragCurrent.level),this._nextAutoLevel=-1,this.onMaxAutoLevelUpdated(),this.codecTiers=null,this.audioTracksByGroup=null}onMaxAutoLevelUpdated(){this.firstSelection=-1,this.nextAutoLevelKey=""}onFragLoading(e,t){const i=t.frag;if(!this.ignoreFragment(i)){if(!i.bitrateTest){var s;this.fragCurrent=i,this.partCurrent=(s=t.part)!=null?s:null}this.clearTimer(),this.timer=self.setInterval(this._abandonRulesCheck,100)}}onLevelSwitching(e,t){this.clearTimer()}onError(e,t){if(!t.fatal)switch(t.details){case Q.BUFFER_ADD_CODEC_ERROR:case Q.BUFFER_APPEND_ERROR:this.lastLoadedFragLevel=-1,this.firstSelection=-1;break;case Q.FRAG_LOAD_TIMEOUT:{const i=t.frag,{fragCurrent:s,partCurrent:a}=this;if(i&&s&&i.sn===s.sn&&i.level===s.level){const l=performance.now(),c=a?a.stats:i.stats,f=l-c.loading.start,d=c.loading.first?c.loading.first-c.loading.start:-1;if(c.loaded&&d>-1){const p=this.bwEstimator.getEstimateTTFB();this.bwEstimator.sample(f-Math.min(p,d),c.loaded)}else this.bwEstimator.sampleTTFB(f)}break}}}getTimeToLoadFrag(e,t,i,s){const a=e+i/t,l=s?e+this.lastLevelLoadSec:0;return a+l}onLevelLoaded(e,t){const i=this.hls.config,{loading:s}=t.stats,a=s.end-s.first;pe(a)&&(this.lastLevelLoadSec=a/1e3),t.details.live?this.bwEstimator.update(i.abrEwmaSlowLive,i.abrEwmaFastLive):this.bwEstimator.update(i.abrEwmaSlowVoD,i.abrEwmaFastVoD),this.timer>-1&&this._abandonRulesCheck(t.levelInfo)}onFragLoaded(e,{frag:t,part:i}){const s=i?i.stats:t.stats;if(t.type===ge.MAIN&&this.bwEstimator.sampleTTFB(s.loading.first-s.loading.start),!this.ignoreFragment(t)){if(this.clearTimer(),t.level===this._nextAutoLevel&&(this._nextAutoLevel=-1),this.firstSelection=-1,this.hls.config.abrMaxWithRealBitrate){const a=i?i.duration:t.duration,l=this.hls.levels[t.level],c=(l.loaded?l.loaded.bytes:0)+s.loaded,f=(l.loaded?l.loaded.duration:0)+a;l.loaded={bytes:c,duration:f},l.realBitrate=Math.round(8*c/f)}if(t.bitrateTest){const a={stats:s,frag:t,part:i,id:t.type};this.onFragBuffered(L.FRAG_BUFFERED,a),t.bitrateTest=!1}else this.lastLoadedFragLevel=t.level}}onFragBuffered(e,t){const{frag:i,part:s}=t,a=s!=null&&s.stats.loaded?s.stats:i.stats;if(a.aborted||this.ignoreFragment(i))return;const l=a.parsing.end-a.loading.start-Math.min(a.loading.first-a.loading.start,this.bwEstimator.getEstimateTTFB());this.bwEstimator.sample(l,a.loaded),a.bwEstimate=this.getBwEstimate(),i.bitrateTest?this.bitrateTestDelay=l/1e3:this.bitrateTestDelay=0}ignoreFragment(e){return e.type!==ge.MAIN||e.sn==="initSegment"}clearTimer(){this.timer>-1&&(self.clearInterval(this.timer),this.timer=-1)}get firstAutoLevel(){const{maxAutoLevel:e,minAutoLevel:t}=this.hls,i=this.getBwEstimate(),s=this.hls.config.maxStarvationDelay,a=this.findBestLevel(i,t,e,0,s,1,1);if(a>-1)return a;const l=this.hls.firstLevel,c=Math.min(Math.max(l,t),e);return this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${l} clamped to ${c}`),c}get forcedAutoLevel(){return this.nextAutoLevelKey?-1:this._nextAutoLevel}get nextAutoLevel(){const e=this.forcedAutoLevel,i=this.bwEstimator.canEstimate(),s=this.lastLoadedFragLevel>-1;if(e!==-1&&(!i||!s||this.nextAutoLevelKey===this.getAutoLevelKey()))return e;const a=i&&s?this.getNextABRAutoLevel():this.firstAutoLevel;if(e!==-1){const l=this.hls.levels;if(l.length>Math.max(e,a)&&l[e].loadError<=l[a].loadError)return e}return this._nextAutoLevel=a,this.nextAutoLevelKey=this.getAutoLevelKey(),a}getAutoLevelKey(){return`${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`}getNextABRAutoLevel(){const{fragCurrent:e,partCurrent:t,hls:i}=this;if(i.levels.length<=1)return i.loadLevel;const{maxAutoLevel:s,config:a,minAutoLevel:l}=i,c=t?t.duration:e?e.duration:0,f=this.getBwEstimate(),d=this.getStarvationDelay();let h=a.abrBandWidthFactor,p=a.abrBandWidthUpFactor;if(d){const x=this.findBestLevel(f,l,s,d,0,h,p);if(x>=0)return this.rebufferNotice=-1,x}let g=c?Math.min(c,a.maxStarvationDelay):a.maxStarvationDelay;if(!d){const x=this.bitrateTestDelay;x&&(g=(c?Math.min(c,a.maxLoadingDelay):a.maxLoadingDelay)-x,this.info(`bitrate test took ${Math.round(1e3*x)}ms, set first fragment max fetchDuration to ${Math.round(1e3*g)} ms`),h=p=1)}const b=this.findBestLevel(f,l,s,d,g,h,p);if(this.rebufferNotice!==b&&(this.rebufferNotice=b,this.info(`${d?"rebuffering expected":"buffer is empty"}, optimal quality level ${b}`)),b>-1)return b;const y=i.levels[l],T=i.loadLevelObj;return T&&y?.bitrate<T.bitrate?l:i.loadLevel}getStarvationDelay(){const e=this.hls,t=e.media;if(!t)return 1/0;const i=t&&t.playbackRate!==0?Math.abs(t.playbackRate):1,s=e.mainForwardBufferInfo;return(s?s.len:0)/i}getBwEstimate(){return this.bwEstimator.canEstimate()?this.bwEstimator.getEstimate():this.hls.config.abrEwmaDefaultEstimate}findBestLevel(e,t,i,s,a,l,c){var f;const d=s+a,h=this.lastLoadedFragLevel,p=h===-1?this.hls.firstLevel:h,{fragCurrent:g,partCurrent:b}=this,{levels:y,allAudioTracks:T,loadLevel:x,config:w}=this.hls;if(y.length===1)return 0;const S=y[p],A=!!((f=this.hls.latestLevelDetails)!=null&&f.live),_=x===-1||h===-1;let I,P="SDR",C=S?.frameRate||0;const{audioPreference:O,videoPreference:B}=w,N=this.audioTracksByGroup||(this.audioTracksByGroup=wT(T));let V=-1;if(_){if(this.firstSelection!==-1)return this.firstSelection;const k=this.codecTiers||(this.codecTiers=Dk(y,N,t,i)),G=Ik(k,P,e,O,B),{codecSet:K,videoRanges:oe,minFramerate:fe,minBitrate:M,minIndex:$,preferHDR:se}=G;V=$,I=K,P=se?oe[oe.length-1]:oe[0],C=fe,e=Math.max(e,M),this.log(`picked start tier ${st(G)}`)}else I=S?.codecSet,P=S?.videoRange;const ee=b?b.duration:g?g.duration:0,z=this.bwEstimator.getEstimateTTFB()/1e3,H=[];for(let k=i;k>=t;k--){var W;const G=y[k],K=k>p;if(!G)continue;if(w.useMediaCapabilities&&!G.supportedResult&&!G.supportedPromise){const he=navigator.mediaCapabilities;typeof he?.decodingInfo=="function"&&Ek(G,N,P,C,e,O)?(G.supportedPromise=TT(G,N,he,this.supportedCache),G.supportedPromise.then(me=>{if(!this.hls)return;G.supportedResult=me;const Se=this.hls.levels,Oe=Se.indexOf(G);me.error?this.warn(`MediaCapabilities decodingInfo error: "${me.error}" for level ${Oe} ${st(me)}`):me.supported?me.decodingInfoResults.some(ke=>ke.smooth===!1||ke.powerEfficient===!1)&&this.log(`MediaCapabilities decodingInfo for level ${Oe} not smooth or powerEfficient: ${st(me)}`):(this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${Oe} ${st(me)}`),Oe>-1&&Se.length>1&&(this.log(`Removing unsupported level ${Oe}`),this.hls.removeLevel(Oe),this.hls.loadLevel===-1&&(this.hls.nextLoadLevel=0)))}).catch(me=>{this.warn(`Error handling MediaCapabilities decodingInfo: ${me}`)})):G.supportedResult=ET}if((I&&G.codecSet!==I||P&&G.videoRange!==P||K&&C>G.frameRate||!K&&C>0&&C<G.frameRate||(W=G.supportedResult)!=null&&(W=W.decodingInfoResults)!=null&&W.some(he=>he.smooth===!1))&&(!_||k!==V)){H.push(k);continue}const oe=G.details,fe=(b?oe?.partTarget:oe?.averagetargetduration)||ee;let M;K?M=c*e:M=l*e;const $=ee&&s>=ee*2&&a===0?G.averageBitrate:G.maxBitrate,se=this.getTimeToLoadFrag(z,M,$*fe,oe===void 0);if(M>=$&&(k===h||G.loadError===0&&G.fragmentError===0)&&(se<=z||!pe(se)||A&&!this.bitrateTestDelay||se<d)){const he=this.forcedAutoLevel;return k!==x&&(he===-1||he!==x)&&(H.length&&this.trace(`Skipped level(s) ${H.join(",")} of ${i} max with CODECS and VIDEO-RANGE:"${y[H[0]].codecs}" ${y[H[0]].videoRange}; not compatible with "${I}" ${P}`),this.info(`switch candidate:${p}->${k} adjustedbw(${Math.round(M)})-bitrate=${Math.round(M-$)} ttfb:${z.toFixed(1)} avgDuration:${fe.toFixed(1)} maxFetchDuration:${d.toFixed(1)} fetchDuration:${se.toFixed(1)} firstSelection:${_} codecSet:${G.codecSet} videoRange:${G.videoRange} hls.loadLevel:${x}`)),_&&(this.firstSelection=k),k}}return-1}set nextAutoLevel(e){const t=this.deriveNextAutoLevel(e);this._nextAutoLevel!==t&&(this.nextAutoLevelKey="",this._nextAutoLevel=t)}deriveNextAutoLevel(e){const{maxAutoLevel:t,minAutoLevel:i}=this.hls;return Math.min(Math.max(e,i),t)}}const AT={search:function(n,e){let t=0,i=n.length-1,s=null,a=null;for(;t<=i;){s=(t+i)/2|0,a=n[s];const l=e(a);if(l>0)t=s+1;else if(l<0)i=s-1;else return a}return null}};function Nk(n,e,t){if(e===null||!Array.isArray(n)||!n.length||!pe(e))return null;const i=n[0].programDateTime;if(e<(i||0))return null;const s=n[n.length-1].endProgramDateTime;if(e>=(s||0))return null;for(let a=0;a<n.length;++a){const l=n[a];if(Fk(e,t,l))return l}return null}function gr(n,e,t=0,i=0,s=.005){let a=null;if(n){a=e[1+n.sn-e[0].sn]||null;const c=n.endDTS-t;c>0&&c<15e-7&&(t+=15e-7),a&&n.level!==a.level&&a.end<=n.end&&(a=e[2+n.sn-e[0].sn]||null)}else t===0&&e[0].start===0&&(a=e[0]);if(a&&((!n||n.level===a.level)&&mb(t,i,a)===0||Bk(a,n,Math.min(s,i))))return a;const l=AT.search(e,mb.bind(null,t,i));return l&&(l!==n||!a)?l:a}function Bk(n,e,t){if(e&&e.start===0&&e.level<n.level&&(e.endPTS||0)>0){const i=e.tagList.reduce((s,a)=>(a[0]==="INF"&&(s+=parseFloat(a[1])),s),t);return n.start<=i}return!1}function mb(n=0,e=0,t){if(t.start<=n&&t.start+t.duration>n)return 0;const i=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0));return t.start+t.duration-i<=n?1:t.start-i>n&&t.start?-1:0}function Fk(n,e,t){const i=Math.min(e,t.duration+(t.deltaPTS?t.deltaPTS:0))*1e3;return(t.endProgramDateTime||0)-i>n}function RT(n,e,t){if(n&&n.startCC<=e&&n.endCC>=e){let i=n.fragments;const{fragmentHint:s}=n;s&&(i=i.concat(s));let a;return AT.search(i,l=>l.cc<e?1:l.cc>e?-1:(a=l,l.end<=t?1:l.start>t?-1:0)),a||null}return null}function uu(n){switch(n.details){case Q.FRAG_LOAD_TIMEOUT:case Q.KEY_LOAD_TIMEOUT:case Q.LEVEL_LOAD_TIMEOUT:case Q.MANIFEST_LOAD_TIMEOUT:return!0}return!1}function LT(n){return n.details.startsWith("key")}function _T(n){return LT(n)&&!!n.frag&&!n.frag.decryptdata}function pb(n,e){const t=uu(e);return n.default[`${t?"timeout":"error"}Retry`]}function qm(n,e){const t=n.backoff==="linear"?1:Math.pow(2,e);return Math.min(t*n.retryDelayMs,n.maxRetryDelayMs)}function gb(n){return Xe(Xe({},n),{errorRetry:null,timeoutRetry:null})}function du(n,e,t,i){if(!n)return!1;const s=i?.code,a=e<n.maxNumRetry&&(Uk(s)||!!t);return n.shouldRetry?n.shouldRetry(n,e,t,i,a):a}function Uk(n){return Jh(n)||!!n&&(n<400||n>499)}function Jh(n){return n===0&&navigator.onLine===!1}var qt={DoNothing:0,SendAlternateToPenaltyBox:2,RemoveAlternatePermanently:3,RetryRequest:5},Ci={None:0,MoveAllAlternatesMatchingHost:1,MoveAllAlternatesMatchingHDCP:2,MoveAllAlternatesMatchingKey:4};class $k extends Zi{constructor(e){super("error-controller",e.logger),this.hls=void 0,this.playlistError=0,this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(L.ERROR,this.onError,this),e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.LEVEL_UPDATED,this.onLevelUpdated,this)}unregisterListeners(){const e=this.hls;e&&(e.off(L.ERROR,this.onError,this),e.off(L.ERROR,this.onErrorOut,this),e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.LEVEL_UPDATED,this.onLevelUpdated,this))}destroy(){this.unregisterListeners(),this.hls=null}startLoad(e){}stopLoad(){this.playlistError=0}getVariantLevelIndex(e){return e?.type===ge.MAIN?e.level:this.getVariantIndex()}getVariantIndex(){var e;const t=this.hls,i=t.currentLevel;return(e=t.loadLevelObj)!=null&&e.details||i===-1?t.loadLevel:i}variantHasKey(e,t){if(e){var i;if((i=e.details)!=null&&i.hasKey(t))return!0;const s=e.audioGroups;if(s)return this.hls.allAudioTracks.filter(l=>s.indexOf(l.groupId)>=0).some(l=>{var c;return(c=l.details)==null?void 0:c.hasKey(t)})}return!1}onManifestLoading(){this.playlistError=0}onLevelUpdated(){this.playlistError=0}onError(e,t){var i;if(t.fatal)return;const s=this.hls,a=t.context;switch(t.details){case Q.FRAG_LOAD_ERROR:case Q.FRAG_LOAD_TIMEOUT:case Q.KEY_LOAD_ERROR:case Q.KEY_LOAD_TIMEOUT:t.errorAction=this.getFragRetryOrSwitchAction(t);return;case Q.FRAG_PARSING_ERROR:if((i=t.frag)!=null&&i.gap){t.errorAction=ha();return}case Q.FRAG_GAP:case Q.FRAG_DECRYPT_ERROR:{t.errorAction=this.getFragRetryOrSwitchAction(t),t.errorAction.action=qt.SendAlternateToPenaltyBox;return}case Q.LEVEL_EMPTY_ERROR:case Q.LEVEL_PARSING_ERROR:{var l;const f=t.parent===ge.MAIN?t.level:s.loadLevel;t.details===Q.LEVEL_EMPTY_ERROR&&((l=t.context)!=null&&(l=l.levelDetails)!=null&&l.live)?t.errorAction=this.getPlaylistRetryOrSwitchAction(t,f):(t.levelRetry=!1,t.errorAction=this.getLevelSwitchAction(t,f))}return;case Q.LEVEL_LOAD_ERROR:case Q.LEVEL_LOAD_TIMEOUT:typeof a?.level=="number"&&(t.errorAction=this.getPlaylistRetryOrSwitchAction(t,a.level));return;case Q.AUDIO_TRACK_LOAD_ERROR:case Q.AUDIO_TRACK_LOAD_TIMEOUT:case Q.SUBTITLE_LOAD_ERROR:case Q.SUBTITLE_TRACK_LOAD_TIMEOUT:if(a){const f=s.loadLevelObj;if(f&&(a.type===Pe.AUDIO_TRACK&&f.hasAudioGroup(a.groupId)||a.type===Pe.SUBTITLE_TRACK&&f.hasSubtitleGroup(a.groupId))){t.errorAction=this.getPlaylistRetryOrSwitchAction(t,s.loadLevel),t.errorAction.action=qt.SendAlternateToPenaltyBox,t.errorAction.flags=Ci.MoveAllAlternatesMatchingHost;return}}return;case Q.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:t.errorAction={action:qt.SendAlternateToPenaltyBox,flags:Ci.MoveAllAlternatesMatchingHDCP};return;case Q.KEY_SYSTEM_SESSION_UPDATE_FAILED:case Q.KEY_SYSTEM_STATUS_INTERNAL_ERROR:case Q.KEY_SYSTEM_NO_SESSION:t.errorAction={action:qt.SendAlternateToPenaltyBox,flags:Ci.MoveAllAlternatesMatchingKey};return;case Q.BUFFER_ADD_CODEC_ERROR:case Q.REMUX_ALLOC_ERROR:case Q.BUFFER_APPEND_ERROR:if(!t.errorAction){var c;t.errorAction=this.getLevelSwitchAction(t,(c=t.level)!=null?c:s.loadLevel)}return;case Q.INTERNAL_EXCEPTION:case Q.BUFFER_APPENDING_ERROR:case Q.BUFFER_FULL_ERROR:case Q.LEVEL_SWITCH_ERROR:case Q.BUFFER_STALLED_ERROR:case Q.BUFFER_SEEK_OVER_HOLE:case Q.BUFFER_NUDGE_ON_STALL:t.errorAction=ha();return}t.type===Ee.KEY_SYSTEM_ERROR&&(t.levelRetry=!1,t.errorAction=ha())}getPlaylistRetryOrSwitchAction(e,t){const i=this.hls,s=pb(i.config.playlistLoadPolicy,e),a=this.playlistError++;if(du(s,a,uu(e),e.response))return{action:qt.RetryRequest,flags:Ci.None,retryConfig:s,retryCount:a};const c=this.getLevelSwitchAction(e,t);return s&&(c.retryConfig=s,c.retryCount=a),c}getFragRetryOrSwitchAction(e){const t=this.hls,i=this.getVariantLevelIndex(e.frag),s=t.levels[i],{fragLoadPolicy:a,keyLoadPolicy:l}=t.config,c=pb(LT(e)?l:a,e),f=t.levels.reduce((h,p)=>h+p.fragmentError,0);if(s&&(e.details!==Q.FRAG_GAP&&s.fragmentError++,!_T(e)&&du(c,f,uu(e),e.response)))return{action:qt.RetryRequest,flags:Ci.None,retryConfig:c,retryCount:f};const d=this.getLevelSwitchAction(e,i);return c&&(d.retryConfig=c,d.retryCount=f),d}getLevelSwitchAction(e,t){const i=this.hls;t==null&&(t=i.loadLevel);const s=this.hls.levels[t];if(s){var a,l;const d=e.details;s.loadError++,d===Q.BUFFER_APPEND_ERROR&&s.fragmentError++;let h=-1;const{levels:p,loadLevel:g,minAutoLevel:b,maxAutoLevel:y}=i;!i.autoLevelEnabled&&!i.config.preserveManualLevelOnError&&(i.loadLevel=-1);const T=(a=e.frag)==null?void 0:a.type,w=(T===ge.AUDIO&&d===Q.FRAG_PARSING_ERROR||e.sourceBufferName==="audio"&&(d===Q.BUFFER_ADD_CODEC_ERROR||d===Q.BUFFER_APPEND_ERROR))&&p.some(({audioCodec:P})=>s.audioCodec!==P),A=e.sourceBufferName==="video"&&(d===Q.BUFFER_ADD_CODEC_ERROR||d===Q.BUFFER_APPEND_ERROR)&&p.some(({codecSet:P,audioCodec:C})=>s.codecSet!==P&&s.audioCodec===C),{type:_,groupId:I}=(l=e.context)!=null?l:{};for(let P=p.length;P--;){const C=(P+g)%p.length;if(C!==g&&C>=b&&C<=y&&p[C].loadError===0){var c,f;const O=p[C];if(d===Q.FRAG_GAP&&T===ge.MAIN&&e.frag){const B=p[C].details;if(B){const N=gr(e.frag,B.fragments,e.frag.start);if(N!=null&&N.gap)continue}}else{if(_===Pe.AUDIO_TRACK&&O.hasAudioGroup(I)||_===Pe.SUBTITLE_TRACK&&O.hasSubtitleGroup(I))continue;if(T===ge.AUDIO&&(c=s.audioGroups)!=null&&c.some(B=>O.hasAudioGroup(B))||T===ge.SUBTITLE&&(f=s.subtitleGroups)!=null&&f.some(B=>O.hasSubtitleGroup(B))||w&&s.audioCodec===O.audioCodec||A&&s.codecSet===O.codecSet||!w&&s.codecSet!==O.codecSet)continue}h=C;break}}if(h>-1&&i.loadLevel!==h)return e.levelRetry=!0,this.playlistError=0,{action:qt.SendAlternateToPenaltyBox,flags:Ci.None,nextAutoLevel:h}}return{action:qt.SendAlternateToPenaltyBox,flags:Ci.MoveAllAlternatesMatchingHost}}onErrorOut(e,t){var i;switch((i=t.errorAction)==null?void 0:i.action){case qt.DoNothing:break;case qt.SendAlternateToPenaltyBox:this.sendAlternateToPenaltyBox(t),!t.errorAction.resolved&&t.details!==Q.FRAG_GAP?t.fatal=!0:/MediaSource readyState: ended/.test(t.error.message)&&(this.warn(`MediaSource ended after "${t.sourceBufferName}" sourceBuffer append error. Attempting to recover from media error.`),this.hls.recoverMediaError());break}if(t.fatal){this.hls.stopLoad();return}}sendAlternateToPenaltyBox(e){const t=this.hls,i=e.errorAction;if(!i)return;const{flags:s}=i,a=i.nextAutoLevel;switch(s){case Ci.None:this.switchLevel(e,a);break;case Ci.MoveAllAlternatesMatchingHDCP:{const f=this.getVariantLevelIndex(e.frag),d=t.levels[f],h=d?.attrs["HDCP-LEVEL"];if(i.hdcpLevel=h,h==="NONE")this.warn("HDCP policy resticted output with HDCP-LEVEL=NONE");else if(h){t.maxHdcpLevel=Zh[Zh.indexOf(h)-1],i.resolved=!0,this.warn(`Restricting playback to HDCP-LEVEL of "${t.maxHdcpLevel}" or lower`);break}}case Ci.MoveAllAlternatesMatchingKey:{const f=e.decryptdata;if(f){const d=this.hls.levels,h=d.length;for(let g=h;g--;)if(this.variantHasKey(d[g],f)){var l,c;this.log(`Banned key found in level ${g} (${d[g].bitrate}bps) or audio group "${(l=d[g].audioGroups)==null?void 0:l.join(",")}" (${(c=e.frag)==null?void 0:c.type} fragment) ${Kt(f.keyId||[])}`),d[g].fragmentError++,d[g].loadError++,this.log(`Removing level ${g} with key error (${e.error})`),this.hls.removeLevel(g)}const p=e.frag;if(this.hls.levels.length<h)i.resolved=!0;else if(p&&p.type!==ge.MAIN){const g=p.decryptdata;g&&!f.matches(g)&&(i.resolved=!0)}}break}}i.resolved||this.switchLevel(e,a)}switchLevel(e,t){if(t!==void 0&&e.errorAction&&(this.warn(`switching to level ${t} after ${e.details}`),this.hls.nextAutoLevel=t,e.errorAction.resolved=!0,this.hls.nextLoadLevel=this.hls.nextAutoLevel,e.details===Q.BUFFER_ADD_CODEC_ERROR&&e.mimeType&&e.sourceBufferName!=="audiovideo")){const i=Qh(e.mimeType),s=this.hls.levels;for(let a=s.length;a--;)s[a][`${e.sourceBufferName}Codec`]===i&&(this.log(`Removing level ${a} for ${e.details} ("${i}" not supported)`),this.hls.removeLevel(a))}}}function ha(n){const e={action:qt.DoNothing,flags:Ci.None};return n&&(e.resolved=!0),e}var Mt={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};class jk{constructor(e){this.activePartLists=Object.create(null),this.endListFragments=Object.create(null),this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.bufferPadding=.2,this.hls=void 0,this.hasGaps=!1,this.hls=e,this._registerListeners()}_registerListeners(){const{hls:e}=this;e&&(e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.BUFFER_APPENDED,this.onBufferAppended,this),e.on(L.FRAG_BUFFERED,this.onFragBuffered,this),e.on(L.FRAG_LOADED,this.onFragLoaded,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.BUFFER_APPENDED,this.onBufferAppended,this),e.off(L.FRAG_BUFFERED,this.onFragBuffered,this),e.off(L.FRAG_LOADED,this.onFragLoaded,this))}destroy(){this._unregisterListeners(),this.hls=this.fragments=this.activePartLists=this.endListFragments=this.timeRanges=null}getAppendedFrag(e,t){const i=this.activePartLists[t];if(i)for(let s=i.length;s--;){const a=i[s];if(!a)break;if(a.start<=e&&e<=a.end&&a.loaded)return a}return this.getBufferedFrag(e,t)}getBufferedFrag(e,t){return this.getFragAtPos(e,t,!0)}getFragAtPos(e,t,i){const{fragments:s}=this,a=Object.keys(s);for(let l=a.length;l--;){const c=s[a[l]];if(c?.body.type===t&&(!i||c.buffered)){const f=c.body;if(f.start<=e&&e<=f.end)return f}}return null}detectEvictedFragments(e,t,i,s,a){this.timeRanges&&(this.timeRanges[e]=t);const l=s?.fragment.sn||-1;Object.keys(this.fragments).forEach(c=>{const f=this.fragments[c];if(!f||l>=f.body.sn)return;if(!f.buffered&&(!f.loaded||a)){f.body.type===i&&this.removeFragment(f.body);return}const d=f.range[e];if(d){if(d.time.length===0){this.removeFragment(f.body);return}d.time.some(h=>{const p=!this.isTimeBuffered(h.startPTS,h.endPTS,t);return p&&this.removeFragment(f.body),p})}})}detectPartialFragments(e){const t=this.timeRanges;if(!t||e.frag.sn==="initSegment")return;const i=e.frag,s=aa(i),a=this.fragments[s];if(!a||a.buffered&&i.gap)return;const l=!i.relurl;Object.keys(t).forEach(c=>{const f=i.elementaryStreams[c];if(!f)return;const d=t[c],h=l||f.partial===!0;a.range[c]=this.getBufferedTimes(i,e.part,h,d)}),a.loaded=null,Object.keys(a.range).length?(this.bufferedEnd(a,i),Tc(a)||this.removeParts(i.sn-1,i.type)):this.removeFragment(a.body)}bufferedEnd(e,t){e.buffered=!0,(e.body.endList=t.endList||e.body.endList)&&(this.endListFragments[e.body.type]=e)}removeParts(e,t){const i=this.activePartLists[t];i&&(this.activePartLists[t]=yb(i,s=>s.fragment.sn>=e))}fragBuffered(e,t){const i=aa(e);let s=this.fragments[i];!s&&t&&(s=this.fragments[i]={body:e,appendedPTS:null,loaded:null,buffered:!1,range:Object.create(null)},e.gap&&(this.hasGaps=!0)),s&&(s.loaded=null,this.bufferedEnd(s,e))}getBufferedTimes(e,t,i,s){const a={time:[],partial:i},l=e.start,c=e.end,f=e.minEndPTS||c,d=e.maxStartPTS||l;for(let h=0;h<s.length;h++){const p=s.start(h)-this.bufferPadding,g=s.end(h)+this.bufferPadding;if(d>=p&&f<=g){a.time.push({startPTS:Math.max(l,s.start(h)),endPTS:Math.min(c,s.end(h))});break}else if(l<g&&c>p){const b=Math.max(l,s.start(h)),y=Math.min(c,s.end(h));y>b&&(a.partial=!0,a.time.push({startPTS:b,endPTS:y}))}else if(c<=p)break}return a}getPartialFragment(e){let t=null,i,s,a,l=0;const{bufferPadding:c,fragments:f}=this;return Object.keys(f).forEach(d=>{const h=f[d];h&&Tc(h)&&(s=h.body.start-c,a=h.body.end+c,e>=s&&e<=a&&(i=Math.min(e-s,a-e),l<=i&&(t=h.body,l=i)))}),t}isEndListAppended(e){const t=this.endListFragments[e];return t!==void 0&&(t.buffered||Tc(t))}getState(e){const t=aa(e),i=this.fragments[t];return i?i.buffered?Tc(i)?Mt.PARTIAL:Mt.OK:Mt.APPENDING:Mt.NOT_LOADED}isTimeBuffered(e,t,i){let s,a;for(let l=0;l<i.length;l++){if(s=i.start(l)-this.bufferPadding,a=i.end(l)+this.bufferPadding,e>=s&&t<=a)return!0;if(t<=s)return!1}return!1}onManifestLoading(){this.removeAllFragments()}onFragLoaded(e,t){if(t.frag.sn==="initSegment"||t.frag.bitrateTest)return;const i=t.frag,s=t.part?null:t,a=aa(i);this.fragments[a]={body:i,appendedPTS:null,loaded:s,buffered:!1,range:Object.create(null)}}onBufferAppended(e,t){const{frag:i,part:s,timeRanges:a,type:l}=t;if(i.sn==="initSegment")return;const c=i.type;if(s){let d=this.activePartLists[c];d||(this.activePartLists[c]=d=[]),d.push(s)}this.timeRanges=a;const f=a[l];this.detectEvictedFragments(l,f,c,s)}onFragBuffered(e,t){this.detectPartialFragments(t)}hasFragment(e){const t=aa(e);return!!this.fragments[t]}hasFragments(e){const{fragments:t}=this,i=Object.keys(t);if(!e)return i.length>0;for(let s=i.length;s--;){const a=t[i[s]];if(a?.body.type===e)return!0}return!1}hasParts(e){var t;return!!((t=this.activePartLists[e])!=null&&t.length)}removeFragmentsInRange(e,t,i,s,a){s&&!this.hasGaps||Object.keys(this.fragments).forEach(l=>{const c=this.fragments[l];if(!c)return;const f=c.body;f.type!==i||s&&!f.gap||f.start<t&&f.end>e&&(c.buffered||a)&&this.removeFragment(f)})}removeFragment(e){const t=aa(e);e.clearElementaryStreamInfo();const i=this.activePartLists[e.type];if(i){const s=e.sn;this.activePartLists[e.type]=yb(i,a=>a.fragment.sn!==s)}delete this.fragments[t],e.endList&&delete this.endListFragments[e.type]}removeAllFragments(){var e;this.fragments=Object.create(null),this.endListFragments=Object.create(null),this.activePartLists=Object.create(null),this.hasGaps=!1;const t=(e=this.hls)==null||(e=e.latestLevelDetails)==null?void 0:e.partList;t&&t.forEach(i=>i.clearElementaryStreamInfo())}}function Tc(n){var e,t,i;return n.buffered&&!!(n.body.gap||(e=n.range.video)!=null&&e.partial||(t=n.range.audio)!=null&&t.partial||(i=n.range.audiovideo)!=null&&i.partial)}function aa(n){return`${n.type}_${n.level}_${n.sn}`}function yb(n,e){return n.filter(t=>{const i=e(t);return i||t.clearElementaryStreamInfo(),i})}var Ms={cbc:0,ctr:1};class Hk{constructor(e,t,i){this.subtle=void 0,this.aesIV=void 0,this.aesMode=void 0,this.subtle=e,this.aesIV=t,this.aesMode=i}decrypt(e,t){switch(this.aesMode){case Ms.cbc:return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e);case Ms.ctr:return this.subtle.decrypt({name:"AES-CTR",counter:this.aesIV,length:64},t,e);default:throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`)}}}function Gk(n){const e=n.byteLength,t=e&&new DataView(n.buffer).getUint8(e-1);return t?n.slice(0,e-t):n}class zk{constructor(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.ksRows=0,this.keySize=0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.initTable()}uint8ArrayToUint32Array_(e){const t=new DataView(e),i=new Uint32Array(4);for(let s=0;s<4;s++)i[s]=t.getUint32(s*4);return i}initTable(){const e=this.sBox,t=this.invSBox,i=this.subMix,s=i[0],a=i[1],l=i[2],c=i[3],f=this.invSubMix,d=f[0],h=f[1],p=f[2],g=f[3],b=new Uint32Array(256);let y=0,T=0,x=0;for(x=0;x<256;x++)x<128?b[x]=x<<1:b[x]=x<<1^283;for(x=0;x<256;x++){let w=T^T<<1^T<<2^T<<3^T<<4;w=w>>>8^w&255^99,e[y]=w,t[w]=y;const S=b[y],A=b[S],_=b[A];let I=b[w]*257^w*16843008;s[y]=I<<24|I>>>8,a[y]=I<<16|I>>>16,l[y]=I<<8|I>>>24,c[y]=I,I=_*16843009^A*65537^S*257^y*16843008,d[w]=I<<24|I>>>8,h[w]=I<<16|I>>>16,p[w]=I<<8|I>>>24,g[w]=I,y?(y=S^b[b[b[_^S]]],T^=b[b[T]]):y=T=1}}expandKey(e){const t=this.uint8ArrayToUint32Array_(e);let i=!0,s=0;for(;s<t.length&&i;)i=t[s]===this.key[s],s++;if(i)return;this.key=t;const a=this.keySize=t.length;if(a!==4&&a!==6&&a!==8)throw new Error("Invalid aes key size="+a);const l=this.ksRows=(a+6+1)*4;let c,f;const d=this.keySchedule=new Uint32Array(l),h=this.invKeySchedule=new Uint32Array(l),p=this.sBox,g=this.rcon,b=this.invSubMix,y=b[0],T=b[1],x=b[2],w=b[3];let S,A;for(c=0;c<l;c++){if(c<a){S=d[c]=t[c];continue}A=S,c%a===0?(A=A<<8|A>>>24,A=p[A>>>24]<<24|p[A>>>16&255]<<16|p[A>>>8&255]<<8|p[A&255],A^=g[c/a|0]<<24):a>6&&c%a===4&&(A=p[A>>>24]<<24|p[A>>>16&255]<<16|p[A>>>8&255]<<8|p[A&255]),d[c]=S=(d[c-a]^A)>>>0}for(f=0;f<l;f++)c=l-f,f&3?A=d[c]:A=d[c-4],f<4||c<=4?h[f]=A:h[f]=y[p[A>>>24]]^T[p[A>>>16&255]]^x[p[A>>>8&255]]^w[p[A&255]],h[f]=h[f]>>>0}networkToHostOrderSwap(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24}decrypt(e,t,i){const s=this.keySize+6,a=this.invKeySchedule,l=this.invSBox,c=this.invSubMix,f=c[0],d=c[1],h=c[2],p=c[3],g=this.uint8ArrayToUint32Array_(i);let b=g[0],y=g[1],T=g[2],x=g[3];const w=new Int32Array(e),S=new Int32Array(w.length);let A,_,I,P,C,O,B,N,V,ee,z,H,W,k;const G=this.networkToHostOrderSwap;for(;t<w.length;){for(V=G(w[t]),ee=G(w[t+1]),z=G(w[t+2]),H=G(w[t+3]),C=V^a[0],O=H^a[1],B=z^a[2],N=ee^a[3],W=4,k=1;k<s;k++)A=f[C>>>24]^d[O>>16&255]^h[B>>8&255]^p[N&255]^a[W],_=f[O>>>24]^d[B>>16&255]^h[N>>8&255]^p[C&255]^a[W+1],I=f[B>>>24]^d[N>>16&255]^h[C>>8&255]^p[O&255]^a[W+2],P=f[N>>>24]^d[C>>16&255]^h[O>>8&255]^p[B&255]^a[W+3],C=A,O=_,B=I,N=P,W=W+4;A=l[C>>>24]<<24^l[O>>16&255]<<16^l[B>>8&255]<<8^l[N&255]^a[W],_=l[O>>>24]<<24^l[B>>16&255]<<16^l[N>>8&255]<<8^l[C&255]^a[W+1],I=l[B>>>24]<<24^l[N>>16&255]<<16^l[C>>8&255]<<8^l[O&255]^a[W+2],P=l[N>>>24]<<24^l[C>>16&255]<<16^l[O>>8&255]<<8^l[B&255]^a[W+3],S[t]=G(A^b),S[t+1]=G(P^y),S[t+2]=G(I^T),S[t+3]=G(_^x),b=V,y=ee,T=z,x=H,t=t+4}return S.buffer}}class Vk{constructor(e,t,i){this.subtle=void 0,this.key=void 0,this.aesMode=void 0,this.subtle=e,this.key=t,this.aesMode=i}expandKey(){const e=qk(this.aesMode);return this.subtle.importKey("raw",this.key,{name:e},!1,["encrypt","decrypt"])}}function qk(n){switch(n){case Ms.cbc:return"AES-CBC";case Ms.ctr:return"AES-CTR";default:throw new Error(`[FastAESKey] invalid aes mode ${n}`)}}const Kk=16;class Km{constructor(e,{removePKCS7Padding:t=!0}={}){if(this.logEnabled=!0,this.removePKCS7Padding=void 0,this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null,this.useSoftware=void 0,this.enableSoftwareAES=void 0,this.enableSoftwareAES=e.enableSoftwareAES,this.removePKCS7Padding=t,t)try{const i=self.crypto;i&&(this.subtle=i.subtle||i.webkitSubtle)}catch{}this.useSoftware=!this.subtle}destroy(){this.subtle=null,this.softwareDecrypter=null,this.key=null,this.fastAesKey=null,this.remainderData=null,this.currentIV=null,this.currentResult=null}isSync(){return this.useSoftware}flush(){const{currentResult:e,remainderData:t}=this;if(!e||t)return this.reset(),null;const i=new Uint8Array(e);return this.reset(),this.removePKCS7Padding?Gk(i):i}reset(){this.currentResult=null,this.currentIV=null,this.remainderData=null,this.softwareDecrypter&&(this.softwareDecrypter=null)}decrypt(e,t,i,s){return this.useSoftware?new Promise((a,l)=>{const c=ArrayBuffer.isView(e)?e:new Uint8Array(e);this.softwareDecrypt(c,t,i,s);const f=this.flush();f?a(f.buffer):l(new Error("[softwareDecrypt] Failed to decrypt data"))}):this.webCryptoDecrypt(new Uint8Array(e),t,i,s)}softwareDecrypt(e,t,i,s){const{currentIV:a,currentResult:l,remainderData:c}=this;if(s!==Ms.cbc||t.byteLength!==16)return We.warn("SoftwareDecrypt: can only handle AES-128-CBC"),null;this.logOnce("JS AES decrypt"),c&&(e=Xi(c,e),this.remainderData=null);const f=this.getValidChunk(e);if(!f.length)return null;a&&(i=a);let d=this.softwareDecrypter;d||(d=this.softwareDecrypter=new zk),d.expandKey(t);const h=l;return this.currentResult=d.decrypt(f.buffer,0,i),this.currentIV=f.slice(-16).buffer,h||null}webCryptoDecrypt(e,t,i,s){if(this.key!==t||!this.fastAesKey){if(!this.subtle)return Promise.resolve(this.onWebCryptoError(e,t,i,s));this.key=t,this.fastAesKey=new Vk(this.subtle,t,s)}return this.fastAesKey.expandKey().then(a=>this.subtle?(this.logOnce("WebCrypto AES decrypt"),new Hk(this.subtle,new Uint8Array(i),s).decrypt(e.buffer,a)):Promise.reject(new Error("web crypto not initialized"))).catch(a=>(We.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${a.name}: ${a.message}`),this.onWebCryptoError(e,t,i,s)))}onWebCryptoError(e,t,i,s){const a=this.enableSoftwareAES;if(a){this.useSoftware=!0,this.logEnabled=!0,this.softwareDecrypt(e,t,i,s);const l=this.flush();if(l)return l.buffer}throw new Error("WebCrypto"+(a?" and softwareDecrypt":"")+": failed to decrypt data")}getValidChunk(e){let t=e;const i=e.length-e.length%Kk;return i!==e.length&&(t=e.slice(0,i),this.remainderData=e.slice(i)),t}logOnce(e){this.logEnabled&&(We.log(`[decrypter]: ${e}`),this.logEnabled=!1)}}const vb=Math.pow(2,17);class Yk{constructor(e){this.config=void 0,this.loader=null,this.partLoadTimeout=-1,this.config=e}destroy(){this.loader&&(this.loader.destroy(),this.loader=null)}abort(){this.loader&&this.loader.abort()}load(e,t){const i=e.url;if(!i)return Promise.reject(new qn({type:Ee.NETWORK_ERROR,details:Q.FRAG_LOAD_ERROR,fatal:!1,frag:e,error:new Error(`Fragment does not have a ${i?"part list":"url"}`),networkDetails:null}));this.abort();const s=this.config,a=s.fLoader,l=s.loader;return new Promise((c,f)=>{if(this.loader&&this.loader.destroy(),e.gap)if(e.tagList.some(y=>y[0]==="GAP")){f(Eb(e));return}else e.gap=!1;const d=this.loader=a?new a(s):new l(s),h=bb(e);e.loader=d;const p=gb(s.fragLoadPolicy.default),g={loadPolicy:p,timeout:p.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:e.sn==="initSegment"?1/0:vb};e.stats=d.stats;const b={onSuccess:(y,T,x,w)=>{this.resetLoader(e,d);let S=y.data;x.resetIV&&e.decryptdata&&(e.decryptdata.iv=new Uint8Array(S.slice(0,16)),S=S.slice(16)),c({frag:e,part:null,payload:S,networkDetails:w})},onError:(y,T,x,w)=>{this.resetLoader(e,d),f(new qn({type:Ee.NETWORK_ERROR,details:Q.FRAG_LOAD_ERROR,fatal:!1,frag:e,response:Xe({url:i,data:void 0},y),error:new Error(`HTTP Error ${y.code} ${y.text}`),networkDetails:x,stats:w}))},onAbort:(y,T,x)=>{this.resetLoader(e,d),f(new qn({type:Ee.NETWORK_ERROR,details:Q.INTERNAL_ABORTED,fatal:!1,frag:e,error:new Error("Aborted"),networkDetails:x,stats:y}))},onTimeout:(y,T,x)=>{this.resetLoader(e,d),f(new qn({type:Ee.NETWORK_ERROR,details:Q.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,error:new Error(`Timeout after ${g.timeout}ms`),networkDetails:x,stats:y}))}};t&&(b.onProgress=(y,T,x,w)=>t({frag:e,part:null,payload:x,networkDetails:w})),d.load(h,g,b)})}loadPart(e,t,i){this.abort();const s=this.config,a=s.fLoader,l=s.loader;return new Promise((c,f)=>{if(this.loader&&this.loader.destroy(),e.gap||t.gap){f(Eb(e,t));return}const d=this.loader=a?new a(s):new l(s),h=bb(e,t);e.loader=d;const p=gb(s.fragLoadPolicy.default),g={loadPolicy:p,timeout:p.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0,highWaterMark:vb};t.stats=d.stats,d.load(h,g,{onSuccess:(b,y,T,x)=>{this.resetLoader(e,d),this.updateStatsFromPart(e,t);const w={frag:e,part:t,payload:b.data,networkDetails:x};i(w),c(w)},onError:(b,y,T,x)=>{this.resetLoader(e,d),f(new qn({type:Ee.NETWORK_ERROR,details:Q.FRAG_LOAD_ERROR,fatal:!1,frag:e,part:t,response:Xe({url:h.url,data:void 0},b),error:new Error(`HTTP Error ${b.code} ${b.text}`),networkDetails:T,stats:x}))},onAbort:(b,y,T)=>{e.stats.aborted=t.stats.aborted,this.resetLoader(e,d),f(new qn({type:Ee.NETWORK_ERROR,details:Q.INTERNAL_ABORTED,fatal:!1,frag:e,part:t,error:new Error("Aborted"),networkDetails:T,stats:b}))},onTimeout:(b,y,T)=>{this.resetLoader(e,d),f(new qn({type:Ee.NETWORK_ERROR,details:Q.FRAG_LOAD_TIMEOUT,fatal:!1,frag:e,part:t,error:new Error(`Timeout after ${g.timeout}ms`),networkDetails:T,stats:b}))}})})}updateStatsFromPart(e,t){const i=e.stats,s=t.stats,a=s.total;if(i.loaded+=s.loaded,a){const f=Math.round(e.duration/t.duration),d=Math.min(Math.round(i.loaded/a),f),p=(f-d)*Math.round(i.loaded/d);i.total=i.loaded+p}else i.total=Math.max(i.loaded,i.total);const l=i.loading,c=s.loading;l.start?l.first+=c.first-c.start:(l.start=c.start,l.first=c.first),l.end=c.end}resetLoader(e,t){e.loader=null,this.loader===t&&(self.clearTimeout(this.partLoadTimeout),this.loader=null),t.destroy()}}function bb(n,e=null){const t=e||n,i={frag:n,part:e,responseType:"arraybuffer",url:t.url,headers:{},rangeStart:0,rangeEnd:0},s=t.byteRangeStartOffset,a=t.byteRangeEndOffset;if(pe(s)&&pe(a)){var l;let c=s,f=a;if(n.sn==="initSegment"&&Xk((l=n.decryptdata)==null?void 0:l.method)){const d=a-s;d%16&&(f=a+(16-d%16)),s!==0&&(i.resetIV=!0,c=s-16)}i.rangeStart=c,i.rangeEnd=f}return i}function Eb(n,e){const t=new Error(`GAP ${n.gap?"tag":"attribute"} found`),i={type:Ee.MEDIA_ERROR,details:Q.FRAG_GAP,fatal:!1,frag:n,error:t,networkDetails:null};return e&&(i.part=e),(e||n).stats.aborted=!0,new qn(i)}function Xk(n){return n==="AES-128"||n==="AES-256"}class qn extends Error{constructor(e){super(e.error.message),this.data=void 0,this.data=e}}class CT extends Zi{constructor(e,t){super(e,t),this._boundTick=void 0,this._tickTimer=null,this._tickInterval=null,this._tickCallCount=0,this._boundTick=this.tick.bind(this)}destroy(){this.onHandlerDestroying(),this.onHandlerDestroyed()}onHandlerDestroying(){this.clearNextTick(),this.clearInterval()}onHandlerDestroyed(){}hasInterval(){return!!this._tickInterval}hasNextTick(){return!!this._tickTimer}setInterval(e){return this._tickInterval?!1:(this._tickCallCount=0,this._tickInterval=self.setInterval(this._boundTick,e),!0)}clearInterval(){return this._tickInterval?(self.clearInterval(this._tickInterval),this._tickInterval=null,!0):!1}clearNextTick(){return this._tickTimer?(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0):!1}tick(){this._tickCallCount++,this._tickCallCount===1&&(this.doTick(),this._tickCallCount>1&&this.tickImmediate(),this._tickCallCount=0)}tickImmediate(){this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)}doTick(){}}class Ym{constructor(e,t,i,s=0,a=-1,l=!1){this.level=void 0,this.sn=void 0,this.part=void 0,this.id=void 0,this.size=void 0,this.partial=void 0,this.transmuxing=Sc(),this.buffering={audio:Sc(),video:Sc(),audiovideo:Sc()},this.level=e,this.sn=t,this.id=i,this.size=s,this.part=a,this.partial=l}}function Sc(){return{start:0,executeStart:0,executeEnd:0,end:0}}const xb={length:0,start:()=>0,end:()=>0};class _e{static isBuffered(e,t){if(e){const i=_e.getBuffered(e);for(let s=i.length;s--;)if(t>=i.start(s)&&t<=i.end(s))return!0}return!1}static bufferedRanges(e){if(e){const t=_e.getBuffered(e);return _e.timeRangesToArray(t)}return[]}static timeRangesToArray(e){const t=[];for(let i=0;i<e.length;i++)t.push({start:e.start(i),end:e.end(i)});return t}static bufferInfo(e,t,i){if(e){const s=_e.bufferedRanges(e);if(s.length)return _e.bufferedInfo(s,t,i)}return{len:0,start:t,end:t,bufferedIndex:-1}}static bufferedInfo(e,t,i){t=Math.max(0,t),e.length>1&&e.sort((h,p)=>h.start-p.start||p.end-h.end);let s=-1,a=[];if(i)for(let h=0;h<e.length;h++){t>=e[h].start&&t<=e[h].end&&(s=h);const p=a.length;if(p){const g=a[p-1].end;e[h].start-g<i?e[h].end>g&&(a[p-1].end=e[h].end):a.push(e[h])}else a.push(e[h])}else a=e;let l=0,c,f=t,d=t;for(let h=0;h<a.length;h++){const p=a[h].start,g=a[h].end;if(s===-1&&t>=p&&t<=g&&(s=h),t+i>=p&&t<g)f=p,d=g,l=d-t;else if(t+i<p){c=p;break}}return{len:l,start:f||0,end:d||0,nextStart:c,buffered:e,bufferedIndex:s}}static getBuffered(e){try{return e.buffered||xb}catch(t){return We.log("failed to get media.buffered",t),xb}}}const IT=/\{\$([a-zA-Z0-9-_]+)\}/g;function Tb(n){return IT.test(n)}function em(n,e){if(n.variableList!==null||n.hasVariableRefs){const t=n.variableList;return e.replace(IT,i=>{const s=i.substring(2,i.length-1),a=t?.[s];return a===void 0?(n.playlistParsingError||(n.playlistParsingError=new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: "${s}"`)),i):a})}return e}function Sb(n,e,t){let i=n.variableList;i||(n.variableList=i={});let s,a;if("QUERYPARAM"in e){s=e.QUERYPARAM;try{const l=new self.URL(t).searchParams;if(l.has(s))a=l.get(s);else throw new Error(`"${s}" does not match any query parameter in URI: "${t}"`)}catch(l){n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE QUERYPARAM: ${l.message}`))}}else s=e.NAME,a=e.VALUE;s in i?n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE duplicate Variable Name declarations: "${s}"`)):i[s]=a||""}function Wk(n,e,t){const i=e.IMPORT;if(t&&i in t){let s=n.variableList;s||(n.variableList=s={}),s[i]=t[i]}else n.playlistParsingError||(n.playlistParsingError=new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: "${i}"`))}const Qk=/^(\d+)x(\d+)$/,wb=/(.+?)=(".*?"|.*?)(?:,|$)/g;class ft{constructor(e,t){typeof e=="string"&&(e=ft.parseAttrList(e,t)),et(this,e)}get clientAttrs(){return Object.keys(this).filter(e=>e.substring(0,2)==="X-")}decimalInteger(e){const t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t}hexadecimalInteger(e){if(this[e]){let t=(this[e]||"0x").slice(2);t=(t.length&1?"0":"")+t;const i=new Uint8Array(t.length/2);for(let s=0;s<t.length/2;s++)i[s]=parseInt(t.slice(s*2,s*2+2),16);return i}return null}hexadecimalIntegerAsNumber(e){const t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t}decimalFloatingPoint(e){return parseFloat(this[e])}optionalFloat(e,t){const i=this[e];return i?parseFloat(i):t}enumeratedString(e){return this[e]}enumeratedStringList(e,t){const i=this[e];return(i?i.split(/[ ,]+/):[]).reduce((s,a)=>(s[a.toLowerCase()]=!0,s),t)}bool(e){return this[e]==="YES"}decimalResolution(e){const t=Qk.exec(this[e]);if(t!==null)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}}static parseAttrList(e,t){let i;const s={};for(wb.lastIndex=0;(i=wb.exec(e))!==null;){const l=i[1].trim();let c=i[2];const f=c.indexOf('"')===0&&c.lastIndexOf('"')===c.length-1;let d=!1;if(f)c=c.slice(1,-1);else switch(l){case"IV":case"SCTE35-CMD":case"SCTE35-IN":case"SCTE35-OUT":d=!0}if(t&&(f||d))c=em(t,c);else if(!d&&!f)switch(l){case"CLOSED-CAPTIONS":if(c==="NONE")break;case"ALLOWED-CPC":case"CLASS":case"ASSOC-LANGUAGE":case"AUDIO":case"BYTERANGE":case"CHANNELS":case"CHARACTERISTICS":case"CODECS":case"DATA-ID":case"END-DATE":case"GROUP-ID":case"ID":case"IMPORT":case"INSTREAM-ID":case"KEYFORMAT":case"KEYFORMATVERSIONS":case"LANGUAGE":case"NAME":case"PATHWAY-ID":case"QUERYPARAM":case"RECENTLY-REMOVED-DATERANGES":case"SERVER-URI":case"STABLE-RENDITION-ID":case"STABLE-VARIANT-ID":case"START-DATE":case"SUBTITLES":case"SUPPLEMENTAL-CODECS":case"URI":case"VALUE":case"VIDEO":case"X-ASSET-LIST":case"X-ASSET-URI":We.warn(`${e}: attribute ${l} is missing quotes`)}s[l]=c}return s}}const Zk="com.apple.hls.interstitial";function Jk(n){return n!=="ID"&&n!=="CLASS"&&n!=="CUE"&&n!=="START-DATE"&&n!=="DURATION"&&n!=="END-DATE"&&n!=="END-ON-NEXT"}function eO(n){return n==="SCTE35-OUT"||n==="SCTE35-IN"||n==="SCTE35-CMD"}class DT{constructor(e,t,i=0){var s;if(this.attr=void 0,this.tagAnchor=void 0,this.tagOrder=void 0,this._startDate=void 0,this._endDate=void 0,this._dateAtEnd=void 0,this._cue=void 0,this._badValueForSameId=void 0,this.tagAnchor=t?.tagAnchor||null,this.tagOrder=(s=t?.tagOrder)!=null?s:i,t){const a=t.attr;for(const l in a)if(Object.prototype.hasOwnProperty.call(e,l)&&e[l]!==a[l]){We.warn(`DATERANGE tag attribute: "${l}" does not match for tags with ID: "${e.ID}"`),this._badValueForSameId=l;break}e=et(new ft({}),a,e)}if(this.attr=e,t?(this._startDate=t._startDate,this._cue=t._cue,this._endDate=t._endDate,this._dateAtEnd=t._dateAtEnd):this._startDate=new Date(e["START-DATE"]),"END-DATE"in this.attr){const a=t?.endDate||new Date(this.attr["END-DATE"]);pe(a.getTime())&&(this._endDate=a)}}get id(){return this.attr.ID}get class(){return this.attr.CLASS}get cue(){const e=this._cue;return e===void 0?this._cue=this.attr.enumeratedStringList(this.attr.CUE?"CUE":"X-CUE",{pre:!1,post:!1,once:!1}):e}get startTime(){const{tagAnchor:e}=this;return e===null||e.programDateTime===null?(We.warn(`Expected tagAnchor Fragment with PDT set for DateRange "${this.id}": ${e}`),NaN):e.start+(this.startDate.getTime()-e.programDateTime)/1e3}get startDate(){return this._startDate}get endDate(){const e=this._endDate||this._dateAtEnd;if(e)return e;const t=this.duration;return t!==null?this._dateAtEnd=new Date(this._startDate.getTime()+t*1e3):null}get duration(){if("DURATION"in this.attr){const e=this.attr.decimalFloatingPoint("DURATION");if(pe(e))return e}else if(this._endDate)return(this._endDate.getTime()-this._startDate.getTime())/1e3;return null}get plannedDuration(){return"PLANNED-DURATION"in this.attr?this.attr.decimalFloatingPoint("PLANNED-DURATION"):null}get endOnNext(){return this.attr.bool("END-ON-NEXT")}get isInterstitial(){return this.class===Zk}get isValid(){return!!this.id&&!this._badValueForSameId&&pe(this.startDate.getTime())&&(this.duration===null||this.duration>=0)&&(!this.endOnNext||!!this.class)&&(!this.attr.CUE||!this.cue.pre&&!this.cue.post||this.cue.pre!==this.cue.post)&&(!this.isInterstitial||"X-ASSET-URI"in this.attr||"X-ASSET-LIST"in this.attr)}}const tO=10;class iO{constructor(e){this.PTSKnown=!1,this.alignedSliding=!1,this.averagetargetduration=void 0,this.endCC=0,this.endSN=0,this.fragments=void 0,this.fragmentHint=void 0,this.partList=null,this.dateRanges=void 0,this.dateRangeTagCount=0,this.live=!0,this.requestScheduled=-1,this.ageHeader=0,this.advancedDateTime=void 0,this.updated=!0,this.advanced=!0,this.misses=0,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=void 0,this.m3u8="",this.version=null,this.canBlockReload=!1,this.canSkipUntil=0,this.canSkipDateRanges=!1,this.skippedSegments=0,this.recentlyRemovedDateranges=void 0,this.partHoldBack=0,this.holdBack=0,this.partTarget=0,this.preloadHint=void 0,this.renditionReports=void 0,this.tuneInGoal=0,this.deltaUpdateFailed=void 0,this.driftStartTime=0,this.driftEndTime=0,this.driftStart=0,this.driftEnd=0,this.encryptedFragments=void 0,this.playlistParsingError=null,this.variableList=null,this.hasVariableRefs=!1,this.appliedTimelineOffset=void 0,this.fragments=[],this.encryptedFragments=[],this.dateRanges={},this.url=e}reloaded(e){if(!e){this.advanced=!0,this.updated=!0;return}const t=this.lastPartSn-e.lastPartSn,i=this.lastPartIndex-e.lastPartIndex;this.updated=this.endSN!==e.endSN||!!i||!!t||!this.live,this.advanced=this.endSN>e.endSN||t>0||t===0&&i>0,this.updated||this.advanced?this.misses=Math.floor(e.misses*.6):this.misses=e.misses+1}hasKey(e){return this.encryptedFragments.some(t=>{let i=t.decryptdata;return i||(t.setKeyFormat(e.keyFormat),i=t.decryptdata),!!i&&e.matches(i)})}get hasProgramDateTime(){return this.fragments.length?pe(this.fragments[this.fragments.length-1].programDateTime):!1}get levelTargetDuration(){return this.averagetargetduration||this.targetduration||tO}get drift(){const e=this.driftEndTime-this.driftStartTime;return e>0?(this.driftEnd-this.driftStart)*1e3/e:1}get edge(){return this.partEnd||this.fragmentEnd}get partEnd(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].end:this.fragmentEnd}get fragmentEnd(){return this.fragments.length?this.fragments[this.fragments.length-1].end:0}get fragmentStart(){return this.fragments.length?this.fragments[0].start:0}get age(){return this.advancedDateTime?Math.max(Date.now()-this.advancedDateTime,0)/1e3:0}get lastPartIndex(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].index:-1}get maxPartIndex(){const e=this.partList;if(e){const t=this.lastPartIndex;if(t!==-1){for(let i=e.length;i--;)if(e[i].index>t)return e[i].index;return t}}return 0}get lastPartSn(){var e;return(e=this.partList)!=null&&e.length?this.partList[this.partList.length-1].fragment.sn:this.endSN}get expired(){if(this.live&&this.age&&this.misses<3){const e=this.partEnd-this.fragmentStart;return this.age>Math.max(e,this.totalduration)+this.levelTargetDuration}return!1}}function fu(n,e){return n.length===e.length?!n.some((t,i)=>t!==e[i]):!1}function Ab(n,e){return!n&&!e?!0:!n||!e?!1:fu(n,e)}function ma(n){return n==="AES-128"||n==="AES-256"||n==="AES-256-CTR"}function Xm(n){switch(n){case"AES-128":case"AES-256":return Ms.cbc;case"AES-256-CTR":return Ms.ctr;default:throw new Error(`invalid full segment method ${n}`)}}function Wm(n){return Uint8Array.from(atob(n),e=>e.charCodeAt(0))}function tm(n){return Uint8Array.from(unescape(encodeURIComponent(n)),e=>e.charCodeAt(0))}function nO(n){const e=tm(n).subarray(0,16),t=new Uint8Array(16);return t.set(e,16-e.length),t}function kT(n){const e=function(i,s,a){const l=i[s];i[s]=i[a],i[a]=l};e(n,0,3),e(n,1,2),e(n,4,5),e(n,6,7)}function OT(n){const e=n.split(":");let t=null;if(e[0]==="data"&&e.length===2){const i=e[1].split(";"),s=i[i.length-1].split(",");if(s.length===2){const a=s[0]==="base64",l=s[1];a?(i.splice(-1,1),t=Wm(l)):t=nO(l)}}return t}const hu=typeof self<"u"?self:void 0;var ht={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.fps",PLAYREADY:"com.microsoft.playready",WIDEVINE:"com.widevine.alpha"},Yt={CLEARKEY:"org.w3.clearkey",FAIRPLAY:"com.apple.streamingkeydelivery",PLAYREADY:"com.microsoft.playready",WIDEVINE:"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed"};function Hc(n){switch(n){case Yt.FAIRPLAY:return ht.FAIRPLAY;case Yt.PLAYREADY:return ht.PLAYREADY;case Yt.WIDEVINE:return ht.WIDEVINE;case Yt.CLEARKEY:return ht.CLEARKEY}}function gh(n){switch(n){case ht.FAIRPLAY:return Yt.FAIRPLAY;case ht.PLAYREADY:return Yt.PLAYREADY;case ht.WIDEVINE:return Yt.WIDEVINE;case ht.CLEARKEY:return Yt.CLEARKEY}}function Ro(n){const{drmSystems:e,widevineLicenseUrl:t}=n,i=e?[ht.FAIRPLAY,ht.WIDEVINE,ht.PLAYREADY,ht.CLEARKEY].filter(s=>!!e[s]):[];return!i[ht.WIDEVINE]&&t&&i.push(ht.WIDEVINE),i}const MT=(function(n){return hu!=null&&(n=hu.navigator)!=null&&n.requestMediaKeySystemAccess?self.navigator.requestMediaKeySystemAccess.bind(self.navigator):null})();function sO(n,e,t,i){let s;switch(n){case ht.FAIRPLAY:s=["cenc","sinf"];break;case ht.WIDEVINE:case ht.PLAYREADY:s=["cenc"];break;case ht.CLEARKEY:s=["cenc","keyids"];break;default:throw new Error(`Unknown key-system: ${n}`)}return rO(s,e,t,i)}function rO(n,e,t,i){return[{initDataTypes:n,persistentState:i.persistentState||"optional",distinctiveIdentifier:i.distinctiveIdentifier||"optional",sessionTypes:i.sessionTypes||[i.sessionType||"temporary"],audioCapabilities:e.map(a=>({contentType:`audio/mp4; codecs=${a}`,robustness:i.audioRobustness||"",encryptionScheme:i.audioEncryptionScheme||null})),videoCapabilities:t.map(a=>({contentType:`video/mp4; codecs=${a}`,robustness:i.videoRobustness||"",encryptionScheme:i.videoEncryptionScheme||null}))}]}function aO(n){var e;return!!n&&(n.sessionType==="persistent-license"||!!((e=n.sessionTypes)!=null&&e.some(t=>t==="persistent-license")))}function PT(n){const e=new Uint16Array(n.buffer,n.byteOffset,n.byteLength/2),t=String.fromCharCode.apply(null,Array.from(e)),i=t.substring(t.indexOf("<"),t.length),l=new DOMParser().parseFromString(i,"text/xml").getElementsByTagName("KID")[0];if(l){const c=l.childNodes[0]?l.childNodes[0].nodeValue:l.getAttribute("VALUE");if(c){const f=Wm(c).subarray(0,16);return kT(f),f}}return null}let oa={};class ks{static clearKeyUriToKeyIdMap(){oa={}}static setKeyIdForUri(e,t){oa[e]=t}static addKeyIdForUri(e){const t=Object.keys(oa).length%Number.MAX_SAFE_INTEGER,i=new Uint8Array(16);return new DataView(i.buffer,12,4).setUint32(0,t),oa[e]=i,i}constructor(e,t,i,s=[1],a=null,l){this.uri=void 0,this.method=void 0,this.keyFormat=void 0,this.keyFormatVersions=void 0,this.encrypted=void 0,this.isCommonEncryption=void 0,this.iv=null,this.key=null,this.keyId=null,this.pssh=null,this.method=e,this.uri=t,this.keyFormat=i,this.keyFormatVersions=s,this.iv=a,this.encrypted=e?e!=="NONE":!1,this.isCommonEncryption=this.encrypted&&!ma(e),l!=null&&l.startsWith("0x")&&(this.keyId=new Uint8Array(cT(l)))}matches(e){return e.uri===this.uri&&e.method===this.method&&e.encrypted===this.encrypted&&e.keyFormat===this.keyFormat&&fu(e.keyFormatVersions,this.keyFormatVersions)&&Ab(e.iv,this.iv)&&Ab(e.keyId,this.keyId)}isSupported(){if(this.method){if(ma(this.method)||this.method==="NONE")return!0;if(this.keyFormat==="identity")return this.method==="SAMPLE-AES";switch(this.keyFormat){case Yt.FAIRPLAY:case Yt.WIDEVINE:case Yt.PLAYREADY:case Yt.CLEARKEY:return["SAMPLE-AES","SAMPLE-AES-CENC","SAMPLE-AES-CTR"].indexOf(this.method)!==-1}}return!1}getDecryptData(e,t){if(!this.encrypted||!this.uri)return null;if(ma(this.method)){let a=this.iv;return a||(typeof e!="number"&&(We.warn(`missing IV for initialization segment with method="${this.method}" - compliance issue`),e=0),a=lO(e)),new ks(this.method,this.uri,"identity",this.keyFormatVersions,a)}if(this.keyId){const a=oa[this.uri];if(a&&!fu(this.keyId,a)&&ks.setKeyIdForUri(this.uri,this.keyId),this.pssh)return this}const i=OT(this.uri);if(i)switch(this.keyFormat){case Yt.WIDEVINE:if(this.pssh=i,!this.keyId){const a=dk(i.buffer);if(a.length){var s;const l=a[0];this.keyId=(s=l.kids)!=null&&s.length?l.kids[0]:null}}this.keyId||(this.keyId=Rb(t));break;case Yt.PLAYREADY:{const a=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);this.pssh=uk(a,null,i),this.keyId=PT(i);break}default:{let a=i.subarray(0,16);if(a.length!==16){const l=new Uint8Array(16);l.set(a,16-a.length),a=l}this.keyId=a;break}}if(!this.keyId||this.keyId.byteLength!==16){let a;a=oO(t),a||(a=Rb(t),a||(a=oa[this.uri])),a&&(this.keyId=a,ks.setKeyIdForUri(this.uri,a))}return this}}function oO(n){const e=n?.[Yt.WIDEVINE];return e?e.keyId:null}function Rb(n){const e=n?.[Yt.PLAYREADY];if(e){const t=OT(e.uri);if(t)return PT(t)}return null}function lO(n){const e=new Uint8Array(16);for(let t=12;t<16;t++)e[t]=n>>8*(15-t)&255;return e}const Lb=/#EXT-X-STREAM-INF:([^\r\n]*)(?:[\r\n](?:#[^\r\n]*)?)*([^\r\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\r\n]*)[\r\n]+/g,_b=/#EXT-X-MEDIA:(.*)/g,cO=/^#EXT(?:INF|-X-TARGETDURATION):/m,yh=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/(?!#) *(\S[^\r\n]*)/.source,/#.*/.source].join("|"),"g"),uO=new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source,/#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\d+)/.source,/#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source,/(#)([^:]*):(.*)/.source,/(#)(.*)(?:.*)\r?\n?/.source].join("|"));class bn{static findGroup(e,t){for(let i=0;i<e.length;i++){const s=e[i];if(s.id===t)return s}}static resolve(e,t){return jm.buildAbsoluteURL(t,e,{alwaysNormalize:!0})}static isMediaPlaylist(e){return cO.test(e)}static parseMasterPlaylist(e,t){const i=Tb(e),s={contentSteering:null,levels:[],playlistParsingError:null,sessionData:null,sessionKeys:null,startTimeOffset:null,variableList:null,hasVariableRefs:i},a=[];if(Lb.lastIndex=0,!e.startsWith("#EXTM3U"))return s.playlistParsingError=new Error("no EXTM3U delimiter"),s;let l;for(;(l=Lb.exec(e))!=null;)if(l[1]){var c;const d=new ft(l[1],s),h=em(s,l[2]),p={attrs:d,bitrate:d.decimalInteger("BANDWIDTH")||d.decimalInteger("AVERAGE-BANDWIDTH"),name:d.NAME,url:bn.resolve(h,t)},g=d.decimalResolution("RESOLUTION");g&&(p.width=g.width,p.height=g.height),Db(d.CODECS,p);const b=d["SUPPLEMENTAL-CODECS"];b&&(p.supplemental={},Db(b,p.supplemental)),(c=p.unknownCodecs)!=null&&c.length||a.push(p),s.levels.push(p)}else if(l[3]){const d=l[3],h=l[4];switch(d){case"SESSION-DATA":{const p=new ft(h,s),g=p["DATA-ID"];g&&(s.sessionData===null&&(s.sessionData={}),s.sessionData[g]=p);break}case"SESSION-KEY":{const p=Cb(h,t,s);p.encrypted&&p.isSupported()?(s.sessionKeys===null&&(s.sessionKeys=[]),s.sessionKeys.push(p)):We.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: "${h}"`);break}case"DEFINE":{{const p=new ft(h,s);Sb(s,p,t)}break}case"CONTENT-STEERING":{const p=new ft(h,s);s.contentSteering={uri:bn.resolve(p["SERVER-URI"],t),pathwayId:p["PATHWAY-ID"]||"."};break}case"START":{s.startTimeOffset=Ib(h);break}}}const f=a.length>0&&a.length<s.levels.length;return s.levels=f?a:s.levels,s.levels.length===0&&(s.playlistParsingError=new Error("no levels found in manifest")),s}static parseMasterPlaylistMedia(e,t,i){let s;const a={},l=i.levels,c={AUDIO:l.map(d=>({id:d.attrs.AUDIO,audioCodec:d.audioCodec})),SUBTITLES:l.map(d=>({id:d.attrs.SUBTITLES,textCodec:d.textCodec})),"CLOSED-CAPTIONS":[]};let f=0;for(_b.lastIndex=0;(s=_b.exec(e))!==null;){const d=new ft(s[1],i),h=d.TYPE;if(h){const p=c[h],g=a[h]||[];a[h]=g;const b=d.LANGUAGE,y=d["ASSOC-LANGUAGE"],T=d.CHANNELS,x=d.CHARACTERISTICS,w=d["INSTREAM-ID"],S={attrs:d,bitrate:0,id:f++,groupId:d["GROUP-ID"]||"",name:d.NAME||b||"",type:h,default:d.bool("DEFAULT"),autoselect:d.bool("AUTOSELECT"),forced:d.bool("FORCED"),lang:b,url:d.URI?bn.resolve(d.URI,t):""};if(y&&(S.assocLang=y),T&&(S.channels=T),x&&(S.characteristics=x),w&&(S.instreamId=w),p!=null&&p.length){const A=bn.findGroup(p,S.groupId)||p[0];kb(S,A,"audioCodec"),kb(S,A,"textCodec")}g.push(S)}}return a}static parseLevelPlaylist(e,t,i,s,a,l){var c;const f={url:t},d=new iO(t),h=d.fragments,p=[];let g=null,b=0,y=0,T=0,x=0,w=0,S=null,A=new hh(s,f),_,I,P,C=-1,O=!1,B=null,N;if(yh.lastIndex=0,d.m3u8=e,d.hasVariableRefs=Tb(e),((c=yh.exec(e))==null?void 0:c[0])!=="#EXTM3U")return d.playlistParsingError=new Error("Missing format identifier #EXTM3U"),d;for(;(_=yh.exec(e))!==null;){O&&(O=!1,A=new hh(s,f),A.playlistOffset=T,A.setStart(T),A.sn=b,A.cc=x,w&&(A.bitrate=w),A.level=i,g&&(A.initSegment=g,g.rawProgramDateTime&&(A.rawProgramDateTime=g.rawProgramDateTime,g.rawProgramDateTime=null),B&&(A.setByteRange(B),B=null)));const H=_[1];if(H){A.duration=parseFloat(H);const W=(" "+_[2]).slice(1);A.title=W||null,A.tagList.push(W?["INF",H,W]:["INF",H])}else if(_[3]){if(pe(A.duration)){A.playlistOffset=T,A.setStart(T),P&&Mb(A,P,d),A.sn=b,A.level=i,A.cc=x,h.push(A);const W=(" "+_[3]).slice(1);A.relurl=em(d,W),im(A,S,p),S=A,T+=A.duration,b++,y=0,O=!0}}else{if(_=_[0].match(uO),!_){We.warn("No matches on slow regex match for level playlist!");continue}for(I=1;I<_.length&&_[I]===void 0;I++);const W=(" "+_[I]).slice(1),k=(" "+_[I+1]).slice(1),G=_[I+2]?(" "+_[I+2]).slice(1):null;switch(W){case"BYTERANGE":S?A.setByteRange(k,S):A.setByteRange(k);break;case"PROGRAM-DATE-TIME":A.rawProgramDateTime=k,A.tagList.push(["PROGRAM-DATE-TIME",k]),C===-1&&(C=h.length);break;case"PLAYLIST-TYPE":d.type&&zn(d,W,_),d.type=k.toUpperCase();break;case"MEDIA-SEQUENCE":d.startSN!==0?zn(d,W,_):h.length>0&&Pb(d,W,_),b=d.startSN=parseInt(k);break;case"SKIP":{d.skippedSegments&&zn(d,W,_);const K=new ft(k,d),oe=K.decimalInteger("SKIPPED-SEGMENTS");if(pe(oe)){d.skippedSegments+=oe;for(let M=oe;M--;)h.push(null);b+=oe}const fe=K.enumeratedString("RECENTLY-REMOVED-DATERANGES");fe&&(d.recentlyRemovedDateranges=(d.recentlyRemovedDateranges||[]).concat(fe.split("	")));break}case"TARGETDURATION":d.targetduration!==0&&zn(d,W,_),d.targetduration=Math.max(parseInt(k),1);break;case"VERSION":d.version!==null&&zn(d,W,_),d.version=parseInt(k);break;case"INDEPENDENT-SEGMENTS":break;case"ENDLIST":d.live||zn(d,W,_),d.live=!1;break;case"#":(k||G)&&A.tagList.push(G?[k,G]:[k]);break;case"DISCONTINUITY":x++,A.tagList.push(["DIS"]);break;case"GAP":A.gap=!0,A.tagList.push([W]);break;case"BITRATE":A.tagList.push([W,k]),w=parseInt(k)*1e3,pe(w)?A.bitrate=w:w=0;break;case"DATERANGE":{const K=new ft(k,d),oe=new DT(K,d.dateRanges[K.ID],d.dateRangeTagCount);d.dateRangeTagCount++,oe.isValid||d.skippedSegments?d.dateRanges[oe.id]=oe:We.warn(`Ignoring invalid DATERANGE tag: "${k}"`),A.tagList.push(["EXT-X-DATERANGE",k]);break}case"DEFINE":{{const K=new ft(k,d);"IMPORT"in K?Wk(d,K,l):Sb(d,K,t)}break}case"DISCONTINUITY-SEQUENCE":d.startCC!==0?zn(d,W,_):h.length>0&&Pb(d,W,_),d.startCC=x=parseInt(k);break;case"KEY":{const K=Cb(k,t,d);if(K.isSupported()){if(K.method==="NONE"){P=void 0;break}P||(P={});const oe=P[K.keyFormat];oe!=null&&oe.matches(K)||(oe&&(P=et({},P)),P[K.keyFormat]=K)}else We.warn(`[Keys] Ignoring unsupported EXT-X-KEY tag: "${k}"`);break}case"START":d.startTimeOffset=Ib(k);break;case"MAP":{const K=new ft(k,d);if(A.duration){const oe=new hh(s,f);Ob(oe,K,i,P),g=oe,A.initSegment=g,g.rawProgramDateTime&&!A.rawProgramDateTime&&(A.rawProgramDateTime=g.rawProgramDateTime)}else{const oe=A.byteRangeEndOffset;if(oe){const fe=A.byteRangeStartOffset;B=`${oe-fe}@${fe}`}else B=null;Ob(A,K,i,P),g=A,O=!0}g.cc=x;break}case"SERVER-CONTROL":{N&&zn(d,W,_),N=new ft(k),d.canBlockReload=N.bool("CAN-BLOCK-RELOAD"),d.canSkipUntil=N.optionalFloat("CAN-SKIP-UNTIL",0),d.canSkipDateRanges=d.canSkipUntil>0&&N.bool("CAN-SKIP-DATERANGES"),d.partHoldBack=N.optionalFloat("PART-HOLD-BACK",0),d.holdBack=N.optionalFloat("HOLD-BACK",0);break}case"PART-INF":{d.partTarget&&zn(d,W,_);const K=new ft(k);d.partTarget=K.decimalFloatingPoint("PART-TARGET");break}case"PART":{let K=d.partList;K||(K=d.partList=[]);const oe=y>0?K[K.length-1]:void 0,fe=y++,M=new ft(k,d),$=new WD(M,A,f,fe,oe);K.push($),A.duration+=$.duration;break}case"PRELOAD-HINT":{const K=new ft(k,d);d.preloadHint=K;break}case"RENDITION-REPORT":{const K=new ft(k,d);d.renditionReports=d.renditionReports||[],d.renditionReports.push(K);break}default:We.warn(`line parsed but not handled: ${_}`);break}}}S&&!S.relurl?(h.pop(),T-=S.duration,d.partList&&(d.fragmentHint=S)):d.partList&&(im(A,S,p),A.cc=x,d.fragmentHint=A,P&&Mb(A,P,d)),d.targetduration||(d.playlistParsingError=new Error("Missing Target Duration"));const V=h.length,ee=h[0],z=h[V-1];if(T+=d.skippedSegments*d.targetduration,T>0&&V&&z){d.averagetargetduration=T/V;const H=z.sn;d.endSN=H!=="initSegment"?H:0,d.live||(z.endList=!0),C>0&&(fO(h,C),ee&&p.unshift(ee))}return d.fragmentHint&&(T+=d.fragmentHint.duration),d.totalduration=T,p.length&&d.dateRangeTagCount&&ee&&NT(p,d),d.endCC=x,d}}function NT(n,e){let t=n.length;if(!t)if(e.hasProgramDateTime){const c=e.fragments[e.fragments.length-1];n.push(c),t++}else return;const i=n[t-1],s=e.live?1/0:e.totalduration,a=Object.keys(e.dateRanges);for(let c=a.length;c--;){const f=e.dateRanges[a[c]],d=f.startDate.getTime();f.tagAnchor=i.ref;for(let h=t;h--;){var l;if(((l=n[h])==null?void 0:l.sn)<e.startSN)break;const p=dO(e,d,n,h,s);if(p!==-1){f.tagAnchor=e.fragments[p].ref;break}}}}function dO(n,e,t,i,s){const a=t[i];if(a){const c=a.programDateTime;if(e>=c||i===0){var l;const f=(((l=t[i+1])==null?void 0:l.start)||s)-a.start;if(e<=c+f*1e3){const d=t[i].sn-n.startSN;if(d<0)return-1;const h=n.fragments;if(h.length>t.length){const g=(t[i+1]||h[h.length-1]).sn-n.startSN;for(let b=g;b>d;b--){const y=h[b].programDateTime;if(e>=y&&e<y+h[b].duration*1e3)return b}}return d}}}return-1}function Cb(n,e,t){var i,s;const a=new ft(n,t),l=(i=a.METHOD)!=null?i:"",c=a.URI,f=a.hexadecimalInteger("IV"),d=a.KEYFORMATVERSIONS,h=(s=a.KEYFORMAT)!=null?s:"identity";c&&a.IV&&!f&&We.error(`Invalid IV: ${a.IV}`);const p=c?bn.resolve(c,e):"",g=(d||"1").split("/").map(Number).filter(Number.isFinite);return new ks(l,p,h,g,f,a.KEYID)}function Ib(n){const t=new ft(n).decimalFloatingPoint("TIME-OFFSET");return pe(t)?t:null}function Db(n,e){let t=(n||"").split(/[ ,]+/).filter(i=>i);["video","audio","text"].forEach(i=>{const s=t.filter(a=>zm(a,i));s.length&&(e[`${i}Codec`]=s.map(a=>a.split("/")[0]).join(","),t=t.filter(a=>s.indexOf(a)===-1))}),e.unknownCodecs=t}function kb(n,e,t){const i=e[t];i&&(n[t]=i)}function fO(n,e){let t=n[e];for(let i=e;i--;){const s=n[i];if(!s)return;s.programDateTime=t.programDateTime-s.duration*1e3,t=s}}function im(n,e,t){n.rawProgramDateTime?t.push(n):e!=null&&e.programDateTime&&(n.programDateTime=e.endProgramDateTime)}function Ob(n,e,t,i){n.relurl=e.URI,e.BYTERANGE&&n.setByteRange(e.BYTERANGE),n.level=t,n.sn="initSegment",i&&(n.levelkeys=i),n.initSegment=null}function Mb(n,e,t){n.levelkeys=e;const{encryptedFragments:i}=t;(!i.length||i[i.length-1].levelkeys!==e)&&Object.keys(e).some(s=>e[s].isCommonEncryption)&&i.push(n)}function zn(n,e,t){n.playlistParsingError=new Error(`#EXT-X-${e} must not appear more than once (${t[0]})`)}function Pb(n,e,t){n.playlistParsingError=new Error(`#EXT-X-${e} must appear before the first Media Segment (${t[0]})`)}function vh(n,e){const t=e.startPTS;if(pe(t)){let i=0,s;e.sn>n.sn?(i=t-n.start,s=n):(i=n.start-t,s=e),s.duration!==i&&s.setDuration(i)}else e.sn>n.sn?n.cc===e.cc&&n.minEndPTS?e.setStart(n.start+(n.minEndPTS-n.start)):e.setStart(n.start+n.duration):e.setStart(Math.max(n.start-e.duration,0))}function BT(n,e,t,i,s,a,l){i-t<=0&&(l.warn("Fragment should have a positive duration",e),i=t+e.duration,a=s+e.duration);let f=t,d=i;const h=e.startPTS,p=e.endPTS;if(pe(h)){const w=Math.abs(h-t);n&&w>n.totalduration?l.warn(`media timestamps and playlist times differ by ${w}s for level ${e.level} ${n.url}`):pe(e.deltaPTS)?e.deltaPTS=Math.max(w,e.deltaPTS):e.deltaPTS=w,f=Math.max(t,h),t=Math.min(t,h),s=e.startDTS!==void 0?Math.min(s,e.startDTS):s,d=Math.min(i,p),i=Math.max(i,p),a=e.endDTS!==void 0?Math.max(a,e.endDTS):a}const g=t-e.start;e.start!==0&&e.setStart(t),e.setDuration(i-e.start),e.startPTS=t,e.maxStartPTS=f,e.startDTS=s,e.endPTS=i,e.minEndPTS=d,e.endDTS=a;const b=e.sn;if(!n||b<n.startSN||b>n.endSN)return 0;let y;const T=b-n.startSN,x=n.fragments;for(x[T]=e,y=T;y>0;y--)vh(x[y],x[y-1]);for(y=T;y<x.length-1;y++)vh(x[y],x[y+1]);return n.fragmentHint&&vh(x[x.length-1],n.fragmentHint),n.PTSKnown=n.alignedSliding=!0,g}function hO(n,e,t){if(n===e)return;let i=null;const s=n.fragments;for(let h=s.length-1;h>=0;h--){const p=s[h].initSegment;if(p){i=p;break}}n.fragmentHint&&delete n.fragmentHint.endPTS;let a;gO(n,e,(h,p,g,b)=>{if((!e.startCC||e.skippedSegments)&&p.cc!==h.cc){const y=h.cc-p.cc;for(let T=g;T<b.length;T++)b[T].cc+=y;e.endCC=b[b.length-1].cc}pe(h.startPTS)&&pe(h.endPTS)&&(p.setStart(p.startPTS=h.startPTS),p.startDTS=h.startDTS,p.maxStartPTS=h.maxStartPTS,p.endPTS=h.endPTS,p.endDTS=h.endDTS,p.minEndPTS=h.minEndPTS,p.setDuration(h.endPTS-h.startPTS),p.duration&&(a=p),e.PTSKnown=e.alignedSliding=!0),h.hasStreams&&(p.elementaryStreams=h.elementaryStreams),p.loader=h.loader,h.hasStats&&(p.stats=h.stats),h.initSegment&&(p.initSegment=h.initSegment,i=h.initSegment)});const l=e.fragments,c=e.fragmentHint?l.concat(e.fragmentHint):l;if(i&&c.forEach(h=>{var p;h&&(!h.initSegment||h.initSegment.relurl===((p=i)==null?void 0:p.relurl))&&(h.initSegment=i)}),e.skippedSegments){if(e.deltaUpdateFailed=l.some(h=>!h),e.deltaUpdateFailed){t.warn("[level-helper] Previous playlist missing segments skipped in delta playlist");for(let h=e.skippedSegments;h--;)l.shift();e.startSN=l[0].sn}else{e.canSkipDateRanges&&(e.dateRanges=mO(n.dateRanges,e,t));const h=n.fragments.filter(p=>p.rawProgramDateTime);if(n.hasProgramDateTime&&!e.hasProgramDateTime)for(let p=1;p<c.length;p++)c[p].programDateTime===null&&im(c[p],c[p-1],h);NT(h,e)}e.endCC=l[l.length-1].cc}if(!e.startCC){var f;const h=$T(n,e.startSN-1);e.startCC=(f=h?.cc)!=null?f:l[0].cc}pO(n.partList,e.partList,(h,p)=>{p.elementaryStreams=h.elementaryStreams,p.stats=h.stats}),a?BT(e,a,a.startPTS,a.endPTS,a.startDTS,a.endDTS,t):FT(n,e),l.length&&(e.totalduration=e.edge-l[0].start),e.driftStartTime=n.driftStartTime,e.driftStart=n.driftStart;const d=e.advancedDateTime;if(e.advanced&&d){const h=e.edge;e.driftStart||(e.driftStartTime=d,e.driftStart=h),e.driftEndTime=d,e.driftEnd=h}else e.driftEndTime=n.driftEndTime,e.driftEnd=n.driftEnd,e.advancedDateTime=n.advancedDateTime;e.requestScheduled===-1&&(e.requestScheduled=n.requestScheduled)}function mO(n,e,t){const{dateRanges:i,recentlyRemovedDateranges:s}=e,a=et({},n);s&&s.forEach(f=>{delete a[f]});const c=Object.keys(a).length;return c?(Object.keys(i).forEach(f=>{const d=a[f],h=new DT(i[f].attr,d);h.isValid?(a[f]=h,d||(h.tagOrder+=c)):t.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: "${st(i[f].attr)}"`)}),a):i}function pO(n,e,t){if(n&&e){let i=0;for(let s=0,a=n.length;s<=a;s++){const l=n[s],c=e[s+i];l&&c&&l.index===c.index&&l.fragment.sn===c.fragment.sn?t(l,c):i--}}}function gO(n,e,t){const i=e.skippedSegments,s=Math.max(n.startSN,e.startSN)-e.startSN,a=(n.fragmentHint?1:0)+(i?e.endSN:Math.min(n.endSN,e.endSN))-e.startSN,l=e.startSN-n.startSN,c=e.fragmentHint?e.fragments.concat(e.fragmentHint):e.fragments,f=n.fragmentHint?n.fragments.concat(n.fragmentHint):n.fragments;for(let d=s;d<=a;d++){const h=f[l+d];let p=c[d];if(i&&!p&&h&&(p=e.fragments[d]=h),h&&p){t(h,p,d,c);const g=h.relurl,b=p.relurl;if(g&&yO(g,b)){e.playlistParsingError=Nb(`media sequence mismatch ${p.sn}:`,n,e,h,p);return}else if(h.cc!==p.cc){e.playlistParsingError=Nb(`discontinuity sequence mismatch (${h.cc}!=${p.cc})`,n,e,h,p);return}}}}function Nb(n,e,t,i,s){return new Error(`${n} ${s.url}
Playlist starting @${e.startSN}
${e.m3u8}

Playlist starting @${t.startSN}
${t.m3u8}`)}function FT(n,e,t=!0){const i=e.startSN+e.skippedSegments-n.startSN,s=n.fragments,a=i>=0;let l=0;if(a&&i<s.length)l=s[i].start;else if(a&&e.startSN===n.endSN+1)l=n.fragmentEnd;else if(a&&t)l=n.fragmentStart+i*e.levelTargetDuration;else if(!e.skippedSegments&&e.fragmentStart===0)l=n.fragmentStart;else return;nm(e,l)}function nm(n,e){if(e){const t=n.fragments;for(let i=n.skippedSegments;i<t.length;i++)t[i].addStart(e);n.fragmentHint&&n.fragmentHint.addStart(e)}}function UT(n,e=1/0){let t=1e3*n.targetduration;if(n.updated){const i=n.fragments;if(i.length&&t*4>e){const a=i[i.length-1].duration*1e3;a<t&&(t=a)}}else t/=2;return Math.round(t)}function $T(n,e,t){if(!n)return null;let i=n.fragments[e-n.startSN];return i||(i=n.fragmentHint,i&&i.sn===e)?i:e<n.startSN&&t&&t.sn===e?t:null}function Bb(n,e,t){return n?jT(n.partList,e,t):null}function jT(n,e,t){if(n)for(let i=n.length;i--;){const s=n[i];if(s.index===t&&s.fragment.sn===e)return s}return null}function HT(n){n.forEach((e,t)=>{var i;(i=e.details)==null||i.fragments.forEach(s=>{s.level=t,s.initSegment&&(s.initSegment.level=t)})})}function yO(n,e){return n!==e&&e?Fb(n)!==Fb(e):!1}function Fb(n){return n.replace(/\?[^?]*$/,"")}function Lo(n,e){for(let i=0,s=n.length;i<s;i++){var t;if(((t=n[i])==null?void 0:t.cc)===e)return n[i]}return null}function vO(n,e){return!!(n&&e.startCC<n.endCC&&e.endCC>n.startCC)}function Ub(n,e){const t=n.start+e;n.startPTS=t,n.setStart(t),n.endPTS=t+n.duration}function GT(n,e){const t=e.fragments;for(let i=0,s=t.length;i<s;i++)Ub(t[i],n);e.fragmentHint&&Ub(e.fragmentHint,n),e.alignedSliding=!0}function bO(n,e){n&&(zT(e,n),e.alignedSliding||mu(e,n),!e.alignedSliding&&!e.skippedSegments&&FT(n,e,!1))}function zT(n,e){if(!vO(e,n))return;const t=Math.min(e.endCC,n.endCC),i=Lo(e.fragments,t),s=Lo(n.fragments,t);if(!i||!s)return;We.log(`Aligning playlist at start of dicontinuity sequence ${t}`);const a=i.start-s.start;GT(a,n)}function mu(n,e){if(!n.hasProgramDateTime||!e.hasProgramDateTime)return;const t=n.fragments,i=e.fragments;if(!t.length||!i.length)return;let s,a;const l=Math.min(e.endCC,n.endCC);e.startCC<l&&n.startCC<l&&(s=Lo(i,l),a=Lo(t,l)),(!s||!a)&&(s=i[Math.floor(i.length/2)],a=Lo(t,s.cc)||t[Math.floor(t.length/2)]);const c=s.programDateTime,f=a.programDateTime;if(!c||!f)return;const d=(f-c)/1e3-(a.start-s.start);GT(d,n)}function ri(n,e,t){yi(n,e,t),n.addEventListener(e,t)}function yi(n,e,t){n.removeEventListener(e,t)}const EO={toString:function(n){let e="";const t=n.length;for(let i=0;i<t;i++)e+=`[${n.start(i).toFixed(3)}-${n.end(i).toFixed(3)}]`;return e}},le={STOPPED:"STOPPED",IDLE:"IDLE",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};class Qm extends CT{constructor(e,t,i,s,a){super(s,e.logger),this.hls=void 0,this.fragPrevious=null,this.fragCurrent=null,this.fragmentTracker=void 0,this.transmuxer=null,this._state=le.STOPPED,this.playlistType=void 0,this.media=null,this.mediaBuffer=null,this.config=void 0,this.bitrateTest=!1,this.lastCurrentTime=0,this.nextLoadPosition=0,this.startPosition=0,this.startTimeOffset=null,this.retryDate=0,this.levels=null,this.fragmentLoader=void 0,this.keyLoader=void 0,this.levelLastLoaded=null,this.startFragRequested=!1,this.decrypter=void 0,this.initPTS=[],this.buffering=!0,this.loadingParts=!1,this.loopSn=void 0,this.onMediaSeeking=()=>{const{config:l,fragCurrent:c,media:f,mediaBuffer:d,state:h}=this,p=f?f.currentTime:0,g=_e.bufferInfo(d||f,p,l.maxBufferHole),b=!g.len;if(this.log(`Media seeking to ${pe(p)?p.toFixed(3):p}, state: ${h}, ${b?"out of":"in"} buffer`),this.state===le.ENDED)this.resetLoadingState();else if(c){const y=l.maxFragLookUpTolerance,T=c.start-y,x=c.start+c.duration+y;if(b||x<g.start||T>g.end){const w=p>x;(p<T||w)&&(w&&c.loader&&(this.log(`Cancelling fragment load for seek (sn: ${c.sn})`),c.abortRequests(),this.resetLoadingState()),this.fragPrevious=null)}}if(f){this.fragmentTracker.removeFragmentsInRange(p,1/0,this.playlistType,!0);const y=this.lastCurrentTime;if(p>y&&(this.lastCurrentTime=p),!this.loadingParts){const T=Math.max(g.end,p),x=this.shouldLoadParts(this.getLevelDetails(),T);x&&(this.log(`LL-Part loading ON after seeking to ${p.toFixed(2)} with buffer @${T.toFixed(2)}`),this.loadingParts=x)}}this.hls.hasEnoughToStart||(this.log(`Setting ${b?"startPosition":"nextLoadPosition"} to ${p} for seek without enough to start`),this.nextLoadPosition=p,b&&(this.startPosition=p)),b&&this.state===le.IDLE&&this.tickImmediate()},this.onMediaEnded=()=>{this.log("setting startPosition to 0 because media ended"),this.startPosition=this.lastCurrentTime=0},this.playlistType=a,this.hls=e,this.fragmentLoader=new Yk(e.config),this.keyLoader=i,this.fragmentTracker=t,this.config=e.config,this.decrypter=new Km(e.config)}registerListeners(){const{hls:e}=this;e.on(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(L.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(L.ERROR,this.onError,this)}doTick(){this.onTickEnd()}onTickEnd(){}startLoad(e){}stopLoad(){if(this.state===le.STOPPED)return;this.fragmentLoader.abort(),this.keyLoader.abort(this.playlistType);const e=this.fragCurrent;e!=null&&e.loader&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.resetTransmuxer(),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=le.STOPPED}get startPositionValue(){const{nextLoadPosition:e,startPosition:t}=this;return t===-1&&e?e:t}get bufferingEnabled(){return this.buffering}pauseBuffering(){this.buffering=!1}resumeBuffering(){this.buffering=!0}get inFlightFrag(){return{frag:this.fragCurrent,state:this.state}}_streamEnded(e,t){if(t.live||!this.media)return!1;const i=e.end||0,s=this.config.timelineOffset||0;if(i<=s)return!1;const a=e.buffered;this.config.maxBufferHole&&a&&a.length>1&&(e=_e.bufferedInfo(a,e.start,0));const l=e.nextStart;if(l&&l>s&&l<t.edge||this.media.currentTime<e.start)return!1;const f=t.partList;if(f!=null&&f.length){const h=f[f.length-1];return _e.isBuffered(this.media,h.start+h.duration/2)}const d=t.fragments[t.fragments.length-1].type;return this.fragmentTracker.isEndListAppended(d)}getLevelDetails(){if(this.levels&&this.levelLastLoaded!==null)return this.levelLastLoaded.details}get timelineOffset(){const e=this.config.timelineOffset;if(e){var t;return((t=this.getLevelDetails())==null?void 0:t.appliedTimelineOffset)||e}return 0}onMediaAttached(e,t){const i=this.media=this.mediaBuffer=t.media;ri(i,"seeking",this.onMediaSeeking),ri(i,"ended",this.onMediaEnded);const s=this.config;this.levels&&s.autoStartLoad&&this.state===le.STOPPED&&this.startLoad(s.startPosition)}onMediaDetaching(e,t){const i=!!t.transferMedia,s=this.media;if(s!==null){if(s.ended&&(this.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),yi(s,"seeking",this.onMediaSeeking),yi(s,"ended",this.onMediaEnded),this.keyLoader&&!i&&this.keyLoader.detach(),this.media=this.mediaBuffer=null,this.loopSn=void 0,i){this.resetLoadingState(),this.resetTransmuxer();return}this.loadingParts=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()}}onManifestLoading(){this.initPTS=[],this.levels=this.levelLastLoaded=this.fragCurrent=null,this.lastCurrentTime=this.startPosition=0,this.startFragRequested=!1}onError(e,t){}onManifestLoaded(e,t){this.startTimeOffset=t.startTimeOffset}onHandlerDestroying(){this.stopLoad(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),super.onHandlerDestroying(),this.hls=this.onMediaSeeking=this.onMediaEnded=null}onHandlerDestroyed(){this.state=le.STOPPED,this.fragmentLoader&&this.fragmentLoader.destroy(),this.keyLoader&&this.keyLoader.destroy(),this.decrypter&&this.decrypter.destroy(),this.hls=this.log=this.warn=this.decrypter=this.keyLoader=this.fragmentLoader=this.fragmentTracker=null,super.onHandlerDestroyed()}loadFragment(e,t,i){this.startFragRequested=!0,this._loadFragForPlayback(e,t,i)}_loadFragForPlayback(e,t,i){const s=a=>{const l=a.frag;if(this.fragContextChanged(l)){this.warn(`${l.type} sn: ${l.sn}${a.part?" part: "+a.part.index:""} of ${this.fragInfo(l,!1,a.part)}) was dropped during download.`),this.fragmentTracker.removeFragment(l);return}l.stats.chunkCount++,this._handleFragmentLoadProgress(a)};this._doFragLoad(e,t,i,s).then(a=>{if(!a)return;const l=this.state,c=a.frag;if(this.fragContextChanged(c)){(l===le.FRAG_LOADING||!this.fragCurrent&&l===le.PARSING)&&(this.fragmentTracker.removeFragment(c),this.state=le.IDLE);return}"payload"in a&&(this.log(`Loaded ${c.type} sn: ${c.sn} of ${this.playlistLabel()} ${c.level}`),this.hls.trigger(L.FRAG_LOADED,a)),this._handleFragmentLoadComplete(a)}).catch(a=>{this.state===le.STOPPED||this.state===le.ERROR||(this.warn(`Frag error: ${a?.message||a}`),this.resetFragmentLoading(e))})}clearTrackerIfNeeded(e){var t;const{fragmentTracker:i}=this;if(i.getState(e)===Mt.APPENDING){const a=e.type,l=this.getFwdBufferInfo(this.mediaBuffer,a),c=Math.max(e.duration,l?l.len:this.config.maxBufferLength),f=this.backtrackFragment;((f?e.sn-f.sn:0)===1||this.reduceMaxBufferLength(c,e.duration))&&i.removeFragment(e)}else((t=this.mediaBuffer)==null?void 0:t.buffered.length)===0?i.removeAllFragments():i.hasParts(e.type)&&(i.detectPartialFragments({frag:e,part:null,stats:e.stats,id:e.type}),i.getState(e)===Mt.PARTIAL&&i.removeFragment(e))}checkLiveUpdate(e){if(e.updated&&!e.live){const t=e.fragments[e.fragments.length-1];this.fragmentTracker.detectPartialFragments({frag:t,part:null,stats:t.stats,id:t.type})}e.fragments[0]||(e.deltaUpdateFailed=!0)}waitForLive(e){const t=e.details;return t?.live&&t.type!=="EVENT"&&(this.levelLastLoaded!==e||t.expired)}flushMainBuffer(e,t,i=null){if(!(e-t))return;const s={startOffset:e,endOffset:t,type:i};this.hls.trigger(L.BUFFER_FLUSHING,s)}_loadInitSegment(e,t){this._doFragLoad(e,t).then(i=>{const s=i?.frag;if(!s||this.fragContextChanged(s)||!this.levels)throw new Error("init load aborted");return i}).then(i=>{const{hls:s}=this,{frag:a,payload:l}=i,c=a.decryptdata;if(l&&l.byteLength>0&&c!=null&&c.key&&c.iv&&ma(c.method)){const f=self.performance.now();return this.decrypter.decrypt(new Uint8Array(l),c.key.buffer,c.iv.buffer,Xm(c.method)).catch(d=>{throw s.trigger(L.ERROR,{type:Ee.MEDIA_ERROR,details:Q.FRAG_DECRYPT_ERROR,fatal:!1,error:d,reason:d.message,frag:a}),d}).then(d=>{const h=self.performance.now();return s.trigger(L.FRAG_DECRYPTED,{frag:a,payload:d,stats:{tstart:f,tdecrypt:h}}),i.payload=d,this.completeInitSegmentLoad(i)})}return this.completeInitSegmentLoad(i)}).catch(i=>{this.state===le.STOPPED||this.state===le.ERROR||(this.warn(i),this.resetFragmentLoading(e))})}completeInitSegmentLoad(e){const{levels:t}=this;if(!t)throw new Error("init load aborted, missing levels");const i=e.frag.stats;this.state!==le.STOPPED&&(this.state=le.IDLE),e.frag.data=new Uint8Array(e.payload),i.parsing.start=i.buffering.start=self.performance.now(),i.parsing.end=i.buffering.end=self.performance.now(),this.tick()}unhandledEncryptionError(e,t){var i,s;const a=e.tracks;if(a&&!t.encrypted&&((i=a.audio)!=null&&i.encrypted||(s=a.video)!=null&&s.encrypted)&&(!this.config.emeEnabled||!this.keyLoader.emeController)){const l=this.media,c=new Error(`Encrypted track with no key in ${this.fragInfo(t)} (media ${l?"attached mediaKeys: "+l.mediaKeys:"detached"})`);return this.warn(c.message),!l||l.mediaKeys?!1:(this.hls.trigger(L.ERROR,{type:Ee.KEY_SYSTEM_ERROR,details:Q.KEY_SYSTEM_NO_KEYS,fatal:!1,error:c,frag:t}),this.resetTransmuxer(),!0)}return!1}fragContextChanged(e){const{fragCurrent:t}=this;return!e||!t||e.sn!==t.sn||e.level!==t.level}fragBufferedComplete(e,t){const i=this.mediaBuffer?this.mediaBuffer:this.media;if(this.log(`Buffered ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)} > buffer:${i?EO.toString(_e.getBuffered(i)):"(detached)"})`),wt(e)){var s;if(e.type!==ge.SUBTITLE){const l=e.elementaryStreams;if(!Object.keys(l).some(c=>!!l[c])){this.state=le.IDLE;return}}const a=(s=this.levels)==null?void 0:s[e.level];a!=null&&a.fragmentError&&(this.log(`Resetting level fragment error count of ${a.fragmentError} on frag buffered`),a.fragmentError=0)}this.state=le.IDLE}_handleFragmentLoadComplete(e){const{transmuxer:t}=this;if(!t)return;const{frag:i,part:s,partsLoaded:a}=e,l=!a||a.length===0||a.some(f=>!f),c=new Ym(i.level,i.sn,i.stats.chunkCount+1,0,s?s.index:-1,!l);t.flush(c)}_handleFragmentLoadProgress(e){}_doFragLoad(e,t,i=null,s){var a;this.fragCurrent=e;const l=t.details;if(!this.levels||!l)throw new Error(`frag load aborted, missing level${l?"":" detail"}s`);let c=null;if(e.encrypted&&!((a=e.decryptdata)!=null&&a.key)){if(this.log(`Loading key for ${e.sn} of [${l.startSN}-${l.endSN}], ${this.playlistLabel()} ${e.level}`),this.state=le.KEY_LOADING,this.fragCurrent=e,c=this.keyLoader.load(e).then(g=>{if(!this.fragContextChanged(g.frag))return this.hls.trigger(L.KEY_LOADED,g),this.state===le.KEY_LOADING&&(this.state=le.IDLE),g}),this.hls.trigger(L.KEY_LOADING,{frag:e}),this.fragCurrent===null)return this.log("context changed in KEY_LOADING"),Promise.resolve(null)}else e.encrypted||(c=this.keyLoader.loadClear(e,l.encryptedFragments,this.startFragRequested),c&&this.log("[eme] blocking frag load until media-keys acquired"));const f=this.fragPrevious;if(wt(e)&&(!f||e.sn!==f.sn)){const g=this.shouldLoadParts(t.details,e.end);g!==this.loadingParts&&(this.log(`LL-Part loading ${g?"ON":"OFF"} loading sn ${f?.sn}->${e.sn}`),this.loadingParts=g)}if(i=Math.max(e.start,i||0),this.loadingParts&&wt(e)){const g=l.partList;if(g&&s){i>l.fragmentEnd&&l.fragmentHint&&(e=l.fragmentHint);const b=this.getNextPart(g,e,i);if(b>-1){const y=g[b];e=this.fragCurrent=y.fragment,this.log(`Loading ${e.type} sn: ${e.sn} part: ${y.index} (${b}/${g.length-1}) of ${this.fragInfo(e,!1,y)}) cc: ${e.cc} [${l.startSN}-${l.endSN}], target: ${parseFloat(i.toFixed(3))}`),this.nextLoadPosition=y.start+y.duration,this.state=le.FRAG_LOADING;let T;return c?T=c.then(x=>!x||this.fragContextChanged(x.frag)?null:this.doFragPartsLoad(e,y,t,s)).catch(x=>this.handleFragLoadError(x)):T=this.doFragPartsLoad(e,y,t,s).catch(x=>this.handleFragLoadError(x)),this.hls.trigger(L.FRAG_LOADING,{frag:e,part:y,targetBufferTime:i}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING parts")):T}else if(!e.url||this.loadedEndOfParts(g,i))return Promise.resolve(null)}}if(wt(e)&&this.loadingParts){var d;this.log(`LL-Part loading OFF after next part miss @${i.toFixed(2)} Check buffer at sn: ${e.sn} loaded parts: ${(d=l.partList)==null?void 0:d.filter(g=>g.loaded).map(g=>`[${g.start}-${g.end}]`)}`),this.loadingParts=!1}else if(!e.url)return Promise.resolve(null);this.log(`Loading ${e.type} sn: ${e.sn} of ${this.fragInfo(e,!1)}) cc: ${e.cc} ${"["+l.startSN+"-"+l.endSN+"]"}, target: ${parseFloat(i.toFixed(3))}`),pe(e.sn)&&!this.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),this.state=le.FRAG_LOADING;const h=this.config.progressive&&e.type!==ge.SUBTITLE;let p;return h&&c?p=c.then(g=>!g||this.fragContextChanged(g.frag)?null:this.fragmentLoader.load(e,s)).catch(g=>this.handleFragLoadError(g)):p=Promise.all([this.fragmentLoader.load(e,h?s:void 0),c]).then(([g])=>(!h&&s&&s(g),g)).catch(g=>this.handleFragLoadError(g)),this.hls.trigger(L.FRAG_LOADING,{frag:e,targetBufferTime:i}),this.fragCurrent===null?Promise.reject(new Error("frag load aborted, context changed in FRAG_LOADING")):p}doFragPartsLoad(e,t,i,s){return new Promise((a,l)=>{var c;const f=[],d=(c=i.details)==null?void 0:c.partList,h=p=>{this.fragmentLoader.loadPart(e,p,s).then(g=>{f[p.index]=g;const b=g.part;this.hls.trigger(L.FRAG_LOADED,g);const y=Bb(i.details,e.sn,p.index+1)||jT(d,e.sn,p.index+1);if(y)h(y);else return a({frag:e,part:b,partsLoaded:f})}).catch(l)};h(t)})}handleFragLoadError(e){if("data"in e){const t=e.data;t.frag&&t.details===Q.INTERNAL_ABORTED?this.handleFragLoadAborted(t.frag,t.part):t.frag&&t.type===Ee.KEY_SYSTEM_ERROR?(t.frag.abortRequests(),this.resetStartWhenNotLoaded(),this.resetFragmentLoading(t.frag)):this.hls.trigger(L.ERROR,t)}else this.hls.trigger(L.ERROR,{type:Ee.OTHER_ERROR,details:Q.INTERNAL_EXCEPTION,err:e,error:e,fatal:!0});return null}_handleTransmuxerFlush(e){const t=this.getCurrentContext(e);if(!t||this.state!==le.PARSING){!this.fragCurrent&&this.state!==le.STOPPED&&this.state!==le.ERROR&&(this.state=le.IDLE);return}const{frag:i,part:s,level:a}=t,l=self.performance.now();i.stats.parsing.end=l,s&&(s.stats.parsing.end=l);const c=this.getLevelDetails(),d=c&&i.sn>c.endSN||this.shouldLoadParts(c,i.end);d!==this.loadingParts&&(this.log(`LL-Part loading ${d?"ON":"OFF"} after parsing segment ending @${i.end.toFixed(2)}`),this.loadingParts=d),this.updateLevelTiming(i,s,a,e.partial)}shouldLoadParts(e,t){if(this.config.lowLatencyMode){if(!e)return this.loadingParts;if(e.partList){var i;const a=e.partList[0];if(a.fragment.type===ge.SUBTITLE)return!1;const l=a.end+(((i=e.fragmentHint)==null?void 0:i.duration)||0);if(t>=l){var s;if((this.hls.hasEnoughToStart?((s=this.media)==null?void 0:s.currentTime)||this.lastCurrentTime:this.getLoadPosition())>a.start-a.fragment.duration)return!0}}}return!1}getCurrentContext(e){const{levels:t,fragCurrent:i}=this,{level:s,sn:a,part:l}=e;if(!(t!=null&&t[s]))return this.warn(`Levels object was unset while buffering fragment ${a} of ${this.playlistLabel()} ${s}. The current chunk will not be buffered.`),null;const c=t[s],f=c.details,d=l>-1?Bb(f,a,l):null,h=d?d.fragment:$T(f,a,i);return h?(i&&i!==h&&(h.stats=i.stats),{frag:h,part:d,level:c}):null}bufferFragmentData(e,t,i,s,a){if(this.state!==le.PARSING)return;const{data1:l,data2:c}=e;let f=l;if(c&&(f=Xi(l,c)),!f.length)return;const d=this.initPTS[t.cc],h=d?-d.baseTime/d.timescale:void 0,p={type:e.type,frag:t,part:i,chunkMeta:s,offset:h,parent:t.type,data:f};if(this.hls.trigger(L.BUFFER_APPENDING,p),e.dropped&&e.independent&&!i){if(a)return;this.flushBufferGap(t)}}flushBufferGap(e){const t=this.media;if(!t)return;if(!_e.isBuffered(t,t.currentTime)){this.flushMainBuffer(0,e.start);return}const i=t.currentTime,s=_e.bufferInfo(t,i,0),a=e.duration,l=Math.min(this.config.maxFragLookUpTolerance*2,a*.25),c=Math.max(Math.min(e.start-l,s.end-l),i+l);e.start-c>l&&this.flushMainBuffer(c,e.start)}getFwdBufferInfo(e,t){var i;const s=this.getLoadPosition();if(!pe(s))return null;const l=this.lastCurrentTime>s||(i=this.media)!=null&&i.paused?0:this.config.maxBufferHole;return this.getFwdBufferInfoAtPos(e,s,t,l)}getFwdBufferInfoAtPos(e,t,i,s){const a=_e.bufferInfo(e,t,s);if(a.len===0&&a.nextStart!==void 0){const l=this.fragmentTracker.getBufferedFrag(t,i);if(l&&(a.nextStart<=l.end||l.gap)){const c=Math.max(Math.min(a.nextStart,l.end)-t,s);return _e.bufferInfo(e,t,c)}}return a}getMaxBufferLength(e){const{config:t}=this;let i;return e?i=Math.max(8*t.maxBufferSize/e,t.maxBufferLength):i=t.maxBufferLength,Math.min(i,t.maxMaxBufferLength)}reduceMaxBufferLength(e,t){const i=this.config,s=Math.max(Math.min(e-t,i.maxBufferLength),t),a=Math.max(e-t*3,i.maxMaxBufferLength/2,s);return a>=s?(i.maxMaxBufferLength=a,this.warn(`Reduce max buffer length to ${a}s`),!0):!1}getAppendedFrag(e,t=ge.MAIN){const i=this.fragmentTracker?this.fragmentTracker.getAppendedFrag(e,t):null;return i&&"fragment"in i?i.fragment:i}getNextFragment(e,t){const i=t.fragments,s=i.length;if(!s)return null;const{config:a}=this,l=i[0].start,c=a.lowLatencyMode&&!!t.partList;let f=null;if(t.live){const p=a.initialLiveManifestSize;if(s<p)return this.warn(`Not enough fragments to start playback (have: ${s}, need: ${p})`),null;if(!t.PTSKnown&&!this.startFragRequested&&this.startPosition===-1||e<l){var d;c&&!this.loadingParts&&(this.log("LL-Part loading ON for initial live fragment"),this.loadingParts=!0),f=this.getInitialLiveFragment(t);const g=this.hls.startPosition,b=this.hls.liveSyncPosition,y=f?(g!==-1&&g>=l?g:b)||f.start:e;this.log(`Setting startPosition to ${y} to match start frag at live edge. mainStart: ${g} liveSyncPosition: ${b} frag.start: ${(d=f)==null?void 0:d.start}`),this.startPosition=this.nextLoadPosition=y}}else e<=l&&(f=i[0]);if(!f){const p=this.loadingParts?t.partEnd:t.fragmentEnd;f=this.getFragmentAtPosition(e,p,t)}let h=this.filterReplacedPrimary(f,t);if(!h&&f){const p=f.sn-t.startSN;h=this.filterReplacedPrimary(i[p+1]||null,t)}return this.mapToInitFragWhenRequired(h)}isLoopLoading(e,t){const i=this.fragmentTracker.getState(e);return(i===Mt.OK||i===Mt.PARTIAL&&!!e.gap)&&this.nextLoadPosition>t}getNextFragmentLoopLoading(e,t,i,s,a){let l=null;if(e.gap&&(l=this.getNextFragment(this.nextLoadPosition,t),l&&!l.gap&&i.nextStart)){const c=this.getFwdBufferInfoAtPos(this.mediaBuffer?this.mediaBuffer:this.media,i.nextStart,s,0);if(c!==null&&i.len+c.len>=a){const f=l.sn;return this.loopSn!==f&&(this.log(`buffer full after gaps in "${s}" playlist starting at sn: ${f}`),this.loopSn=f),null}}return this.loopSn=void 0,l}get primaryPrefetch(){if($b(this.config)){var e;if((e=this.hls.interstitialsManager)==null||(e=e.playingItem)==null?void 0:e.event)return!0}return!1}filterReplacedPrimary(e,t){if(!e)return e;if($b(this.config)&&e.type!==ge.SUBTITLE){const i=this.hls.interstitialsManager,s=i?.bufferingItem;if(s){const l=s.event;if(l){if(l.appendInPlace||Math.abs(e.start-s.start)>1||s.start===0)return null}else if(e.end<=s.start&&t?.live===!1||e.start>s.end&&s.nextEvent&&(s.nextEvent.appendInPlace||e.start-s.end>1))return null}const a=i?.playerQueue;if(a)for(let l=a.length;l--;){const c=a[l].interstitial;if(c.appendInPlace&&e.start>=c.startTime&&e.end<=c.resumeTime)return null}}return e}mapToInitFragWhenRequired(e){return e!=null&&e.initSegment&&!e.initSegment.data&&!this.bitrateTest?e.initSegment:e}getNextPart(e,t,i){let s=-1,a=!1,l=!0;for(let c=0,f=e.length;c<f;c++){const d=e[c];if(l=l&&!d.independent,s>-1&&i<d.start)break;const h=d.loaded;h?s=-1:(a||(d.independent||l)&&d.fragment===t)&&(d.fragment!==t&&this.warn(`Need buffer at ${i} but next unloaded part starts at ${d.start}`),s=c),a=h}return s}loadedEndOfParts(e,t){let i;for(let s=e.length;s--;){if(i=e[s],!i.loaded)return!1;if(t>i.start)return!0}return!1}getInitialLiveFragment(e){const t=e.fragments,i=this.fragPrevious;let s=null;if(i){if(e.hasProgramDateTime&&(this.log(`Live playlist, switching playlist, load frag with same PDT: ${i.programDateTime}`),s=Nk(t,i.endProgramDateTime,this.config.maxFragLookUpTolerance)),!s){const a=i.sn+1;if(a>=e.startSN&&a<=e.endSN){const l=t[a-e.startSN];i.cc===l.cc&&(s=l,this.log(`Live playlist, switching playlist, load frag with next SN: ${s.sn}`))}s||(s=RT(e,i.cc,i.end),s&&this.log(`Live playlist, switching playlist, load frag with same CC: ${s.sn}`))}}else{const a=this.hls.liveSyncPosition;a!==null&&(s=this.getFragmentAtPosition(a,this.bitrateTest?e.fragmentEnd:e.edge,e))}return s}getFragmentAtPosition(e,t,i){const{config:s}=this;let{fragPrevious:a}=this,{fragments:l,endSN:c}=i;const{fragmentHint:f}=i,{maxFragLookUpTolerance:d}=s,h=i.partList,p=!!(this.loadingParts&&h!=null&&h.length&&f);p&&!this.bitrateTest&&h[h.length-1].fragment.sn===f.sn&&(l=l.concat(f),c=f.sn);let g;if(e<t){var b;const T=e<this.lastCurrentTime||e>t-d||(b=this.media)!=null&&b.paused||!this.startFragRequested?0:d;g=gr(a,l,e,T)}else g=l[l.length-1];if(g){const y=g.sn-i.startSN,T=this.fragmentTracker.getState(g);if((T===Mt.OK||T===Mt.PARTIAL&&g.gap)&&(a=g),a&&g.sn===a.sn&&(!p||h[0].fragment.sn>g.sn||!i.live)&&g.level===a.level){const w=l[y+1];g.sn<c&&this.fragmentTracker.getState(w)!==Mt.OK?g=w:g=null}}return g}alignPlaylists(e,t,i){const s=e.fragments.length;if(!s)return this.warn("No fragments in live playlist"),0;const a=e.fragmentStart,l=!t,c=e.alignedSliding&&pe(a);if(l||!c&&!a){bO(i,e);const f=e.fragmentStart;return this.log(`Live playlist sliding: ${f.toFixed(2)} start-sn: ${t?t.startSN:"na"}->${e.startSN} fragments: ${s}`),f}return a}waitForCdnTuneIn(e){return e.live&&e.canBlockReload&&e.partTarget&&e.tuneInGoal>Math.max(e.partHoldBack,e.partTarget*3)}setStartPosition(e,t){let i=this.startPosition;i<t&&(i=-1);const s=this.timelineOffset;if(i===-1){const a=this.startTimeOffset!==null,l=a?this.startTimeOffset:e.startTimeOffset;l!==null&&pe(l)?(i=t+l,l<0&&(i+=e.edge),i=Math.min(Math.max(t,i),t+e.totalduration),this.log(`Setting startPosition to ${i} for start time offset ${l} found in ${a?"multivariant":"media"} playlist`),this.startPosition=i):e.live?(i=this.hls.liveSyncPosition||t,this.log(`Setting startPosition to -1 to start at live edge ${i}`),this.startPosition=-1):(this.log("setting startPosition to 0 by default"),this.startPosition=i=0),this.lastCurrentTime=i+s}this.nextLoadPosition=i+s}getLoadPosition(){var e;const{media:t}=this;let i=0;return(e=this.hls)!=null&&e.hasEnoughToStart&&t?i=t.currentTime:this.nextLoadPosition>=0&&(i=this.nextLoadPosition),i}handleFragLoadAborted(e,t){this.transmuxer&&e.type===this.playlistType&&wt(e)&&e.stats.aborted&&(this.log(`Fragment ${e.sn}${t?" part "+t.index:""} of ${this.playlistLabel()} ${e.level} was aborted`),this.resetFragmentLoading(e))}resetFragmentLoading(e){(!this.fragCurrent||!this.fragContextChanged(e)&&this.state!==le.FRAG_LOADING_WAITING_RETRY)&&(this.state=le.IDLE)}onFragmentOrKeyLoadError(e,t){var i;if(t.chunkMeta&&!t.frag){const w=this.getCurrentContext(t.chunkMeta);w&&(t.frag=w.frag)}const s=t.frag;if(!s||s.type!==e||!this.levels)return;if(this.fragContextChanged(s)){var a;this.warn(`Frag load error must match current frag to retry ${s.url} > ${(a=this.fragCurrent)==null?void 0:a.url}`);return}const l=t.details===Q.FRAG_GAP;l&&this.fragmentTracker.fragBuffered(s,!0);const c=t.errorAction;if(!c){this.state=le.ERROR;return}const{action:f,flags:d,retryCount:h=0,retryConfig:p}=c,g=!!p,b=g&&f===qt.RetryRequest,y=g&&!c.resolved&&d===Ci.MoveAllAlternatesMatchingHost,T=(i=this.hls.latestLevelDetails)==null?void 0:i.live;if(!b&&y&&wt(s)&&!s.endList&&T&&!_T(t))this.resetFragmentErrors(e),this.treatAsGap(s),c.resolved=!0;else if((b||y)&&h<p.maxNumRetry){var x;const w=Jh((x=t.response)==null?void 0:x.code),S=qm(p,h);if(this.resetStartWhenNotLoaded(),this.retryDate=self.performance.now()+S,this.state=le.FRAG_LOADING_WAITING_RETRY,c.resolved=!0,w){this.log("Waiting for connection (offline)"),this.retryDate=1/0,t.reason="offline";return}this.warn(`Fragment ${s.sn} of ${e} ${s.level} errored with ${t.details}, retrying loading ${h+1}/${p.maxNumRetry} in ${S}ms`)}else if(p)if(this.resetFragmentErrors(e),h<p.maxNumRetry)!l&&f!==qt.RemoveAlternatePermanently&&(c.resolved=!0);else{this.warn(`${t.details} reached or exceeded max retry (${h})`);return}else f===qt.SendAlternateToPenaltyBox?this.state=le.WAITING_LEVEL:this.state=le.ERROR;this.tickImmediate()}checkRetryDate(){const e=self.performance.now(),t=this.retryDate,i=t===1/0;(!t||e>=t||i&&!Jh(0))&&(i&&this.log("Connection restored (online)"),this.resetStartWhenNotLoaded(),this.state=le.IDLE)}reduceLengthAndFlushBuffer(e){if(this.state===le.PARSING||this.state===le.PARSED){const t=e.frag,i=e.parent,s=this.getFwdBufferInfo(this.mediaBuffer,i),a=s&&s.len>.5;a&&this.reduceMaxBufferLength(s.len,t?.duration||10);const l=!a;return l&&this.warn(`Buffer full error while media.currentTime (${this.getLoadPosition()}) is not buffered, flush ${i} buffer`),t&&(this.fragmentTracker.removeFragment(t),this.nextLoadPosition=t.start),this.resetLoadingState(),l}return!1}resetFragmentErrors(e){e===ge.AUDIO&&(this.fragCurrent=null),this.hls.hasEnoughToStart||(this.startFragRequested=!1),this.state!==le.STOPPED&&(this.state=le.IDLE)}afterBufferFlushed(e,t,i){if(!e)return;const s=_e.getBuffered(e);this.fragmentTracker.detectEvictedFragments(t,s,i),this.state===le.ENDED&&this.resetLoadingState()}resetLoadingState(){this.log("Reset loading state"),this.fragCurrent=null,this.fragPrevious=null,this.state!==le.STOPPED&&(this.state=le.IDLE)}resetStartWhenNotLoaded(){if(!this.hls.hasEnoughToStart){this.startFragRequested=!1;const e=this.levelLastLoaded,t=e?e.details:null;t!=null&&t.live?(this.log("resetting startPosition for live start"),this.startPosition=-1,this.setStartPosition(t,t.fragmentStart),this.resetLoadingState()):this.nextLoadPosition=this.startPosition}}resetWhenMissingContext(e){this.log(`Loading context changed while buffering sn ${e.sn} of ${this.playlistLabel()} ${e.level===-1?"<removed>":e.level}. This chunk will not be buffered.`),this.removeUnbufferedFrags(),this.resetStartWhenNotLoaded(),this.resetLoadingState()}removeUnbufferedFrags(e=0){this.fragmentTracker.removeFragmentsInRange(e,1/0,this.playlistType,!1,!0)}updateLevelTiming(e,t,i,s){const a=i.details;if(!a){this.warn("level.details undefined");return}if(!Object.keys(e.elementaryStreams).reduce((f,d)=>{const h=e.elementaryStreams[d];if(h){const p=h.endPTS-h.startPTS;if(p<=0)return this.warn(`Could not parse fragment ${e.sn} ${d} duration reliably (${p})`),f||!1;const g=s?0:BT(a,e,h.startPTS,h.endPTS,h.startDTS,h.endDTS,this);return this.hls.trigger(L.LEVEL_PTS_UPDATED,{details:a,level:i,drift:g,type:d,frag:e,start:h.startPTS,end:h.endPTS}),!0}return f},!1)){var c;const f=((c=this.transmuxer)==null?void 0:c.error)===null;if((i.fragmentError===0||f&&(i.fragmentError<2||e.endList))&&this.treatAsGap(e,i),f){const d=new Error(`Found no media in fragment ${e.sn} of ${this.playlistLabel()} ${e.level} resetting transmuxer to fallback to playlist timing`);if(this.warn(d.message),this.hls.trigger(L.ERROR,{type:Ee.MEDIA_ERROR,details:Q.FRAG_PARSING_ERROR,fatal:!1,error:d,frag:e,reason:`Found no media in msn ${e.sn} of ${this.playlistLabel()} "${i.url}"`}),!this.hls)return;this.resetTransmuxer()}}this.state=le.PARSED,this.log(`Parsed ${e.type} sn: ${e.sn}${t?" part: "+t.index:""} of ${this.fragInfo(e,!1,t)})`),this.hls.trigger(L.FRAG_PARSED,{frag:e,part:t})}playlistLabel(){return this.playlistType===ge.MAIN?"level":"track"}fragInfo(e,t=!0,i){var s,a;return`${this.playlistLabel()} ${e.level} (${i?"part":"frag"}:[${((s=t&&!i?e.startPTS:(i||e).start)!=null?s:NaN).toFixed(3)}-${((a=t&&!i?e.endPTS:(i||e).end)!=null?a:NaN).toFixed(3)}]${i&&e.type==="main"?"INDEPENDENT="+(i.independent?"YES":"NO"):""}`}treatAsGap(e,t){t&&t.fragmentError++,e.gap=!0,this.fragmentTracker.removeFragment(e),this.fragmentTracker.fragBuffered(e,!0)}resetTransmuxer(){var e;(e=this.transmuxer)==null||e.reset()}recoverWorkerError(e){e.event==="demuxerWorker"&&(this.fragmentTracker.removeAllFragments(),this.transmuxer&&(this.transmuxer.destroy(),this.transmuxer=null),this.resetStartWhenNotLoaded(),this.resetLoadingState())}set state(e){const t=this._state;t!==e&&(this._state=e,this.log(`${t}->${e}`))}get state(){return this._state}}function $b(n){return!!n.interstitialsController&&n.enableInterstitialPlayback!==!1}class VT{constructor(){this.chunks=[],this.dataLength=0}push(e){this.chunks.push(e),this.dataLength+=e.length}flush(){const{chunks:e,dataLength:t}=this;let i;if(e.length)e.length===1?i=e[0]:i=xO(e,t);else return new Uint8Array(0);return this.reset(),i}reset(){this.chunks.length=0,this.dataLength=0}}function xO(n,e){const t=new Uint8Array(e);let i=0;for(let s=0;s<n.length;s++){const a=n[s];t.set(a,i),i+=a.length}return t}var bh={exports:{}},jb;function TO(){return jb||(jb=1,(function(n){var e=Object.prototype.hasOwnProperty,t="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(t=!1));function s(f,d,h){this.fn=f,this.context=d,this.once=h||!1}function a(f,d,h,p,g){if(typeof h!="function")throw new TypeError("The listener must be a function");var b=new s(h,p||f,g),y=t?t+d:d;return f._events[y]?f._events[y].fn?f._events[y]=[f._events[y],b]:f._events[y].push(b):(f._events[y]=b,f._eventsCount++),f}function l(f,d){--f._eventsCount===0?f._events=new i:delete f._events[d]}function c(){this._events=new i,this._eventsCount=0}c.prototype.eventNames=function(){var d=[],h,p;if(this._eventsCount===0)return d;for(p in h=this._events)e.call(h,p)&&d.push(t?p.slice(1):p);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(h)):d},c.prototype.listeners=function(d){var h=t?t+d:d,p=this._events[h];if(!p)return[];if(p.fn)return[p.fn];for(var g=0,b=p.length,y=new Array(b);g<b;g++)y[g]=p[g].fn;return y},c.prototype.listenerCount=function(d){var h=t?t+d:d,p=this._events[h];return p?p.fn?1:p.length:0},c.prototype.emit=function(d,h,p,g,b,y){var T=t?t+d:d;if(!this._events[T])return!1;var x=this._events[T],w=arguments.length,S,A;if(x.fn){switch(x.once&&this.removeListener(d,x.fn,void 0,!0),w){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,h),!0;case 3:return x.fn.call(x.context,h,p),!0;case 4:return x.fn.call(x.context,h,p,g),!0;case 5:return x.fn.call(x.context,h,p,g,b),!0;case 6:return x.fn.call(x.context,h,p,g,b,y),!0}for(A=1,S=new Array(w-1);A<w;A++)S[A-1]=arguments[A];x.fn.apply(x.context,S)}else{var _=x.length,I;for(A=0;A<_;A++)switch(x[A].once&&this.removeListener(d,x[A].fn,void 0,!0),w){case 1:x[A].fn.call(x[A].context);break;case 2:x[A].fn.call(x[A].context,h);break;case 3:x[A].fn.call(x[A].context,h,p);break;case 4:x[A].fn.call(x[A].context,h,p,g);break;default:if(!S)for(I=1,S=new Array(w-1);I<w;I++)S[I-1]=arguments[I];x[A].fn.apply(x[A].context,S)}}return!0},c.prototype.on=function(d,h,p){return a(this,d,h,p,!1)},c.prototype.once=function(d,h,p){return a(this,d,h,p,!0)},c.prototype.removeListener=function(d,h,p,g){var b=t?t+d:d;if(!this._events[b])return this;if(!h)return l(this,b),this;var y=this._events[b];if(y.fn)y.fn===h&&(!g||y.once)&&(!p||y.context===p)&&l(this,b);else{for(var T=0,x=[],w=y.length;T<w;T++)(y[T].fn!==h||g&&!y[T].once||p&&y[T].context!==p)&&x.push(y[T]);x.length?this._events[b]=x.length===1?x[0]:x:l(this,b)}return this},c.prototype.removeAllListeners=function(d){var h;return d?(h=t?t+d:d,this._events[h]&&l(this,h)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=t,c.EventEmitter=c,n.exports=c})(bh)),bh.exports}var SO=TO(),Zm=YD(SO);const Po="1.6.15",xa={};function wO(){return typeof __HLS_WORKER_BUNDLE__=="function"}function AO(){const n=xa[Po];if(n)return n.clientCount++,n;const e=new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`],{type:"text/javascript"}),t=self.URL.createObjectURL(e),s={worker:new self.Worker(t),objectURL:t,clientCount:1};return xa[Po]=s,s}function RO(n){const e=xa[n];if(e)return e.clientCount++,e;const t=new self.URL(n,self.location.href).href,s={worker:new self.Worker(t),scriptURL:t,clientCount:1};return xa[n]=s,s}function LO(n){const e=xa[n||Po];if(e&&e.clientCount--===1){const{worker:i,objectURL:s}=e;delete xa[n||Po],s&&self.URL.revokeObjectURL(s),i.terminate()}}function qT(n,e){return e+10<=n.length&&n[e]===51&&n[e+1]===68&&n[e+2]===73&&n[e+3]<255&&n[e+4]<255&&n[e+6]<128&&n[e+7]<128&&n[e+8]<128&&n[e+9]<128}function Jm(n,e){return e+10<=n.length&&n[e]===73&&n[e+1]===68&&n[e+2]===51&&n[e+3]<255&&n[e+4]<255&&n[e+6]<128&&n[e+7]<128&&n[e+8]<128&&n[e+9]<128}function Ou(n,e){let t=0;return t=(n[e]&127)<<21,t|=(n[e+1]&127)<<14,t|=(n[e+2]&127)<<7,t|=n[e+3]&127,t}function No(n,e){const t=e;let i=0;for(;Jm(n,e);){i+=10;const s=Ou(n,e+6);i+=s,qT(n,e+10)&&(i+=10),e+=i}if(i>0)return n.subarray(t,t+i)}function _O(n,e,t,i){const s=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],a=e[t+2],l=a>>2&15;if(l>12){const b=new Error(`invalid ADTS sampling index:${l}`);n.emit(L.ERROR,L.ERROR,{type:Ee.MEDIA_ERROR,details:Q.FRAG_PARSING_ERROR,fatal:!0,error:b,reason:b.message});return}const c=(a>>6&3)+1,f=e[t+3]>>6&3|(a&1)<<2,d="mp4a.40."+c,h=s[l];let p=l;(c===5||c===29)&&(p-=3);const g=[c<<3|(p&14)>>1,(p&1)<<7|f<<3];return We.log(`manifest codec:${i}, parsed codec:${d}, channels:${f}, rate:${h} (ADTS object type:${c} sampling index:${l})`),{config:g,samplerate:h,channelCount:f,codec:d,parsedCodec:d,manifestCodec:i}}function KT(n,e){return n[e]===255&&(n[e+1]&246)===240}function YT(n,e){return n[e+1]&1?7:9}function ep(n,e){return(n[e+3]&3)<<11|n[e+4]<<3|(n[e+5]&224)>>>5}function CO(n,e){return e+5<n.length}function pu(n,e){return e+1<n.length&&KT(n,e)}function IO(n,e){return CO(n,e)&&KT(n,e)&&ep(n,e)<=n.length-e}function DO(n,e){if(pu(n,e)){const t=YT(n,e);if(e+t>=n.length)return!1;const i=ep(n,e);if(i<=t)return!1;const s=e+i;return s===n.length||pu(n,s)}return!1}function XT(n,e,t,i,s){if(!n.samplerate){const a=_O(e,t,i,s);if(!a)return;et(n,a)}}function WT(n){return 1024*9e4/n}function kO(n,e){const t=YT(n,e);if(e+t<=n.length){const i=ep(n,e)-t;if(i>0)return{headerLength:t,frameLength:i}}}function QT(n,e,t,i,s){const a=WT(n.samplerate),l=i+s*a,c=kO(e,t);let f;if(c){const{frameLength:p,headerLength:g}=c,b=g+p,y=Math.max(0,t+b-e.length);y?(f=new Uint8Array(b-g),f.set(e.subarray(t+g,e.length),0)):f=e.subarray(t+g,t+b);const T={unit:f,pts:l};return y||n.samples.push(T),{sample:T,length:b,missing:y}}const d=e.length-t;return f=new Uint8Array(d),f.set(e.subarray(t,e.length),0),{sample:{unit:f,pts:l},length:d,missing:-1}}function OO(n,e){return Jm(n,e)&&Ou(n,e+6)+10<=n.length-e}function MO(n){return n instanceof ArrayBuffer?n:n.byteOffset==0&&n.byteLength==n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer}function Eh(n,e=0,t=1/0){return PO(n,e,t,Uint8Array)}function PO(n,e,t,i){const s=NO(n);let a=1;"BYTES_PER_ELEMENT"in i&&(a=i.BYTES_PER_ELEMENT);const l=BO(n)?n.byteOffset:0,c=(l+n.byteLength)/a,f=(l+e)/a,d=Math.floor(Math.max(0,Math.min(f,c))),h=Math.floor(Math.min(d+Math.max(t,0),c));return new i(s,d,h-d)}function NO(n){return n instanceof ArrayBuffer?n:n.buffer}function BO(n){return n&&n.buffer instanceof ArrayBuffer&&n.byteLength!==void 0&&n.byteOffset!==void 0}function FO(n){const e={key:n.type,description:"",data:"",mimeType:null,pictureType:null},t=3;if(n.size<2)return;if(n.data[0]!==t){console.log("Ignore frame with unrecognized character encoding");return}const i=n.data.subarray(1).indexOf(0);if(i===-1)return;const s=ki(Eh(n.data,1,i)),a=n.data[2+i],l=n.data.subarray(3+i).indexOf(0);if(l===-1)return;const c=ki(Eh(n.data,3+i,l));let f;return s==="-->"?f=ki(Eh(n.data,4+i+l)):f=MO(n.data.subarray(4+i+l)),e.mimeType=s,e.pictureType=a,e.description=c,e.data=f,e}function UO(n){if(n.size<2)return;const e=ki(n.data,!0),t=new Uint8Array(n.data.subarray(e.length+1));return{key:n.type,info:e,data:t.buffer}}function $O(n){if(n.size<2)return;if(n.type==="TXXX"){let t=1;const i=ki(n.data.subarray(t),!0);t+=i.length+1;const s=ki(n.data.subarray(t));return{key:n.type,info:i,data:s}}const e=ki(n.data.subarray(1));return{key:n.type,info:"",data:e}}function jO(n){if(n.type==="WXXX"){if(n.size<2)return;let t=1;const i=ki(n.data.subarray(t),!0);t+=i.length+1;const s=ki(n.data.subarray(t));return{key:n.type,info:i,data:s}}const e=ki(n.data);return{key:n.type,info:"",data:e}}function HO(n){return n.type==="PRIV"?UO(n):n.type[0]==="W"?jO(n):n.type==="APIC"?FO(n):$O(n)}function GO(n){const e=String.fromCharCode(n[0],n[1],n[2],n[3]),t=Ou(n,4),i=10;return{type:e,size:t,data:n.subarray(i,i+t)}}const wc=10,zO=10;function ZT(n){let e=0;const t=[];for(;Jm(n,e);){const i=Ou(n,e+6);n[e+5]>>6&1&&(e+=wc),e+=wc;const s=e+i;for(;e+zO<s;){const a=GO(n.subarray(e)),l=HO(a);l&&t.push(l),e+=a.size+wc}qT(n,e)&&(e+=wc)}return t}function JT(n){return n&&n.key==="PRIV"&&n.info==="com.apple.streaming.transportStreamTimestamp"}function VO(n){if(n.data.byteLength===8){const e=new Uint8Array(n.data),t=e[3]&1;let i=(e[4]<<23)+(e[5]<<15)+(e[6]<<7)+e[7];return i/=45,t&&(i+=4772185884e-2),Math.round(i)}}function tp(n){const e=ZT(n);for(let t=0;t<e.length;t++){const i=e[t];if(JT(i))return VO(i)}}let Di=(function(n){return n.audioId3="org.id3",n.dateRange="com.apple.quicktime.HLS",n.emsg="https://aomedia.org/emsg/ID3",n.misbklv="urn:misb:KLV:bin:1910.1",n})({});function yn(n="",e=9e4){return{type:n,id:-1,pid:-1,inputTimeScale:e,sequenceNumber:-1,samples:[],dropped:0}}class ip{constructor(){this._audioTrack=void 0,this._id3Track=void 0,this.frameIndex=0,this.cachedData=null,this.basePTS=null,this.initPTS=null,this.lastPTS=null}resetInitSegment(e,t,i,s){this._id3Track={type:"id3",id:3,pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0}}resetTimeStamp(e){this.initPTS=e,this.resetContiguity()}resetContiguity(){this.basePTS=null,this.lastPTS=null,this.frameIndex=0}canParse(e,t){return!1}appendFrame(e,t,i){}demux(e,t){this.cachedData&&(e=Xi(this.cachedData,e),this.cachedData=null);let i=No(e,0),s=i?i.length:0,a;const l=this._audioTrack,c=this._id3Track,f=i?tp(i):void 0,d=e.length;for((this.basePTS===null||this.frameIndex===0&&pe(f))&&(this.basePTS=qO(f,t,this.initPTS),this.lastPTS=this.basePTS),this.lastPTS===null&&(this.lastPTS=this.basePTS),i&&i.length>0&&c.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:Di.audioId3,duration:Number.POSITIVE_INFINITY});s<d;){if(this.canParse(e,s)){const h=this.appendFrame(l,e,s);h?(this.frameIndex++,this.lastPTS=h.sample.pts,s+=h.length,a=s):s=d}else OO(e,s)?(i=No(e,s),c.samples.push({pts:this.lastPTS,dts:this.lastPTS,data:i,type:Di.audioId3,duration:Number.POSITIVE_INFINITY}),s+=i.length,a=s):s++;if(s===d&&a!==d){const h=e.slice(a);this.cachedData?this.cachedData=Xi(this.cachedData,h):this.cachedData=h}}return{audioTrack:l,videoTrack:yn(),id3Track:c,textTrack:yn()}}demuxSampleAes(e,t,i){return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`))}flush(e){const t=this.cachedData;return t&&(this.cachedData=null,this.demux(t,0)),{audioTrack:this._audioTrack,videoTrack:yn(),id3Track:this._id3Track,textTrack:yn()}}destroy(){this.cachedData=null,this._audioTrack=this._id3Track=void 0}}const qO=(n,e,t)=>{if(pe(n))return n*90;const i=t?t.baseTime*9e4/t.timescale:0;return e*9e4+i};let Ac=null;const KO=[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],YO=[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],XO=[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],WO=[0,1,1,4];function eS(n,e,t,i,s){if(t+24>e.length)return;const a=tS(e,t);if(a&&t+a.frameLength<=e.length){const l=a.samplesPerFrame*9e4/a.sampleRate,c=i+s*l,f={unit:e.subarray(t,t+a.frameLength),pts:c,dts:c};return n.config=[],n.channelCount=a.channelCount,n.samplerate=a.sampleRate,n.samples.push(f),{sample:f,length:a.frameLength,missing:0}}}function tS(n,e){const t=n[e+1]>>3&3,i=n[e+1]>>1&3,s=n[e+2]>>4&15,a=n[e+2]>>2&3;if(t!==1&&s!==0&&s!==15&&a!==3){const l=n[e+2]>>1&1,c=n[e+3]>>6,f=t===3?3-i:i===3?3:4,d=KO[f*14+s-1]*1e3,p=YO[(t===3?0:t===2?1:2)*3+a],g=c===3?1:2,b=XO[t][i],y=WO[i],T=b*8*y,x=Math.floor(b*d/p+l)*y;if(Ac===null){const A=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);Ac=A?parseInt(A[1]):0}return Ac&&Ac<=87&&i===2&&d>=224e3&&c===0&&(n[e+3]=n[e+3]|128),{sampleRate:p,channelCount:g,frameLength:x,samplesPerFrame:T}}}function np(n,e){return n[e]===255&&(n[e+1]&224)===224&&(n[e+1]&6)!==0}function iS(n,e){return e+1<n.length&&np(n,e)}function QO(n,e){return np(n,e)&&4<=n.length-e}function nS(n,e){if(e+1<n.length&&np(n,e)){const i=tS(n,e);let s=4;i!=null&&i.frameLength&&(s=i.frameLength);const a=e+s;return a===n.length||iS(n,a)}return!1}class ZO extends ip{constructor(e,t){super(),this.observer=void 0,this.config=void 0,this.observer=e,this.config=t}resetInitSegment(e,t,i,s){super.resetInitSegment(e,t,i,s),this._audioTrack={container:"audio/adts",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"aac",samples:[],manifestCodec:t,duration:s,inputTimeScale:9e4,dropped:0}}static probe(e,t){if(!e)return!1;const i=No(e,0);let s=i?.length||0;if(nS(e,s))return!1;for(let a=e.length;s<a;s++)if(DO(e,s))return t.log("ADTS sync word found !"),!0;return!1}canParse(e,t){return IO(e,t)}appendFrame(e,t,i){XT(e,this.observer,t,i,e.manifestCodec);const s=QT(e,t,i,this.basePTS,this.frameIndex);if(s&&s.missing===0)return s}}const sS=(n,e)=>{let t=0,i=5;e+=i;const s=new Uint32Array(1),a=new Uint32Array(1),l=new Uint8Array(1);for(;i>0;){l[0]=n[e];const c=Math.min(i,8),f=8-c;a[0]=4278190080>>>24+f<<f,s[0]=(l[0]&a[0])>>f,t=t?t<<c|s[0]:s[0],e+=1,i-=c}return t};class JO extends ip{constructor(e){super(),this.observer=void 0,this.observer=e}resetInitSegment(e,t,i,s){super.resetInitSegment(e,t,i,s),this._audioTrack={container:"audio/ac-3",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"ac3",samples:[],manifestCodec:t,duration:s,inputTimeScale:9e4,dropped:0}}canParse(e,t){return t+64<e.length}appendFrame(e,t,i){const s=rS(e,t,i,this.basePTS,this.frameIndex);if(s!==-1)return{sample:e.samples[e.samples.length-1],length:s,missing:0}}static probe(e){if(!e)return!1;const t=No(e,0);if(!t)return!1;const i=t.length;return e[i]===11&&e[i+1]===119&&tp(t)!==void 0&&sS(e,i)<16}}function rS(n,e,t,i,s){if(t+8>e.length||e[t]!==11||e[t+1]!==119)return-1;const a=e[t+4]>>6;if(a>=3)return-1;const c=[48e3,44100,32e3][a],f=e[t+4]&63,h=[64,69,96,64,70,96,80,87,120,80,88,120,96,104,144,96,105,144,112,121,168,112,122,168,128,139,192,128,140,192,160,174,240,160,175,240,192,208,288,192,209,288,224,243,336,224,244,336,256,278,384,256,279,384,320,348,480,320,349,480,384,417,576,384,418,576,448,487,672,448,488,672,512,557,768,512,558,768,640,696,960,640,697,960,768,835,1152,768,836,1152,896,975,1344,896,976,1344,1024,1114,1536,1024,1115,1536,1152,1253,1728,1152,1254,1728,1280,1393,1920,1280,1394,1920][f*3+a]*2;if(t+h>e.length)return-1;const p=e[t+6]>>5;let g=0;p===2?g+=2:(p&1&&p!==1&&(g+=2),p&4&&(g+=2));const b=(e[t+6]<<8|e[t+7])>>12-g&1,T=[2,1,2,3,3,4,4,5][p]+b,x=e[t+5]>>3,w=e[t+5]&7,S=new Uint8Array([a<<6|x<<1|w>>2,(w&3)<<6|p<<3|b<<2|f>>4,f<<4&224]),A=1536/c*9e4,_=i+s*A,I=e.subarray(t,t+h);return n.config=S,n.channelCount=T,n.samplerate=c,n.samples.push({unit:I,pts:_}),h}class eM extends ip{resetInitSegment(e,t,i,s){super.resetInitSegment(e,t,i,s),this._audioTrack={container:"audio/mpeg",type:"audio",id:2,pid:-1,sequenceNumber:0,segmentCodec:"mp3",samples:[],manifestCodec:t,duration:s,inputTimeScale:9e4,dropped:0}}static probe(e){if(!e)return!1;const t=No(e,0);let i=t?.length||0;if(t&&e[i]===11&&e[i+1]===119&&tp(t)!==void 0&&sS(e,i)<=16)return!1;for(let s=e.length;i<s;i++)if(nS(e,i))return We.log("MPEG Audio sync word found !"),!0;return!1}canParse(e,t){return QO(e,t)}appendFrame(e,t,i){if(this.basePTS!==null)return eS(e,t,i,this.basePTS,this.frameIndex)}}const tM=/\/emsg[-/]ID3/i;class iM{constructor(e,t){this.remainderData=null,this.timeOffset=0,this.config=void 0,this.videoTrack=void 0,this.audioTrack=void 0,this.id3Track=void 0,this.txtTrack=void 0,this.config=t}resetTimeStamp(){}resetInitSegment(e,t,i,s){const a=this.videoTrack=yn("video",1),l=this.audioTrack=yn("audio",1),c=this.txtTrack=yn("text",1);if(this.id3Track=yn("id3",1),this.timeOffset=0,!(e!=null&&e.byteLength))return;const f=pT(e);if(f.video){const{id:d,timescale:h,codec:p,supplemental:g}=f.video;a.id=d,a.timescale=c.timescale=h,a.codec=p,a.supplemental=g}if(f.audio){const{id:d,timescale:h,codec:p}=f.audio;l.id=d,l.timescale=h,l.codec=p}c.id=fT.text,a.sampleDuration=0,a.duration=l.duration=s}resetContiguity(){this.remainderData=null}static probe(e){return JD(e)}demux(e,t){this.timeOffset=t;let i=e;const s=this.videoTrack,a=this.txtTrack;if(this.config.progressive){this.remainderData&&(i=Xi(this.remainderData,e));const c=ak(i);this.remainderData=c.remainder,s.samples=c.valid||new Uint8Array}else s.samples=i;const l=this.extractID3Track(s,t);return a.samples=rb(t,s),{videoTrack:s,audioTrack:this.audioTrack,id3Track:l,textTrack:this.txtTrack}}flush(){const e=this.timeOffset,t=this.videoTrack,i=this.txtTrack;t.samples=this.remainderData||new Uint8Array,this.remainderData=null;const s=this.extractID3Track(t,this.timeOffset);return i.samples=rb(e,t),{videoTrack:t,audioTrack:yn(),id3Track:s,textTrack:yn()}}extractID3Track(e,t){const i=this.id3Track;if(e.samples.length){const s=Me(e.samples,["emsg"]);s&&s.forEach(a=>{const l=lk(a);if(tM.test(l.schemeIdUri)){const c=Hb(l,t);let f=l.eventDuration===4294967295?Number.POSITIVE_INFINITY:l.eventDuration/l.timeScale;f<=.001&&(f=Number.POSITIVE_INFINITY);const d=l.payload;i.samples.push({data:d,len:d.byteLength,dts:c,pts:c,type:Di.emsg,duration:f})}else if(this.config.enableEmsgKLVMetadata&&l.schemeIdUri.startsWith("urn:misb:KLV:bin:1910.1")){const c=Hb(l,t);i.samples.push({data:l.payload,len:l.payload.byteLength,dts:c,pts:c,type:Di.misbklv,duration:Number.POSITIVE_INFINITY})}})}return i}demuxSampleAes(e,t,i){return Promise.reject(new Error("The MP4 demuxer does not support SAMPLE-AES decryption"))}destroy(){this.config=null,this.remainderData=null,this.videoTrack=this.audioTrack=this.id3Track=this.txtTrack=void 0}}function Hb(n,e){return pe(n.presentationTime)?n.presentationTime/n.timeScale:e+n.presentationTimeDelta/n.timeScale}class nM{constructor(e,t,i){this.keyData=void 0,this.decrypter=void 0,this.keyData=i,this.decrypter=new Km(t,{removePKCS7Padding:!1})}decryptBuffer(e){return this.decrypter.decrypt(e,this.keyData.key.buffer,this.keyData.iv.buffer,Ms.cbc)}decryptAacSample(e,t,i){const s=e[t].unit;if(s.length<=16)return;const a=s.subarray(16,s.length-s.length%16),l=a.buffer.slice(a.byteOffset,a.byteOffset+a.length);this.decryptBuffer(l).then(c=>{const f=new Uint8Array(c);s.set(f,16),this.decrypter.isSync()||this.decryptAacSamples(e,t+1,i)}).catch(i)}decryptAacSamples(e,t,i){for(;;t++){if(t>=e.length){i();return}if(!(e[t].unit.length<32)&&(this.decryptAacSample(e,t,i),!this.decrypter.isSync()))return}}getAvcEncryptedData(e){const t=Math.floor((e.length-48)/160)*16+16,i=new Int8Array(t);let s=0;for(let a=32;a<e.length-16;a+=160,s+=16)i.set(e.subarray(a,a+16),s);return i}getAvcDecryptedUnit(e,t){const i=new Uint8Array(t);let s=0;for(let a=32;a<e.length-16;a+=160,s+=16)e.set(i.subarray(s,s+16),a);return e}decryptAvcSample(e,t,i,s,a){const l=vT(a.data),c=this.getAvcEncryptedData(l);this.decryptBuffer(c.buffer).then(f=>{a.data=this.getAvcDecryptedUnit(l,f),this.decrypter.isSync()||this.decryptAvcSamples(e,t,i+1,s)}).catch(s)}decryptAvcSamples(e,t,i,s){if(e instanceof Uint8Array)throw new Error("Cannot decrypt samples of type Uint8Array");for(;;t++,i=0){if(t>=e.length){s();return}const a=e[t].units;for(;!(i>=a.length);i++){const l=a[i];if(!(l.data.length<=48||l.type!==1&&l.type!==5)&&(this.decryptAvcSample(e,t,i,s,l),!this.decrypter.isSync()))return}}}}class aS{constructor(){this.VideoSample=null}createVideoSample(e,t,i){return{key:e,frame:!1,pts:t,dts:i,units:[],length:0}}getLastNalUnit(e){var t;let i=this.VideoSample,s;if((!i||i.units.length===0)&&(i=e[e.length-1]),(t=i)!=null&&t.units){const a=i.units;s=a[a.length-1]}return s}pushAccessUnit(e,t){if(e.units.length&&e.frame){if(e.pts===void 0){const i=t.samples,s=i.length;if(s){const a=i[s-1];e.pts=a.pts,e.dts=a.dts}else{t.dropped++;return}}t.samples.push(e)}}parseNALu(e,t,i){const s=t.byteLength;let a=e.naluState||0;const l=a,c=[];let f=0,d,h,p,g=-1,b=0;for(a===-1&&(g=0,b=this.getNALuType(t,0),a=0,f=1);f<s;){if(d=t[f++],!a){a=d?0:1;continue}if(a===1){a=d?0:2;continue}if(!d)a=3;else if(d===1){if(h=f-a-1,g>=0){const y={data:t.subarray(g,h),type:b};c.push(y)}else{const y=this.getLastNalUnit(e.samples);y&&(l&&f<=4-l&&y.state&&(y.data=y.data.subarray(0,y.data.byteLength-l)),h>0&&(y.data=Xi(y.data,t.subarray(0,h)),y.state=0))}f<s?(p=this.getNALuType(t,f),g=f,b=p,a=0):a=-1}else a=0}if(g>=0&&a>=0){const y={data:t.subarray(g,s),type:b,state:a};c.push(y)}if(c.length===0){const y=this.getLastNalUnit(e.samples);y&&(y.data=Xi(y.data,t))}return e.naluState=a,c}}class _o{constructor(e){this.data=void 0,this.bytesAvailable=void 0,this.word=void 0,this.bitsAvailable=void 0,this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}loadWord(){const e=this.data,t=this.bytesAvailable,i=e.byteLength-t,s=new Uint8Array(4),a=Math.min(4,t);if(a===0)throw new Error("no bytes available");s.set(e.subarray(i,i+a)),this.word=new DataView(s.buffer).getUint32(0),this.bitsAvailable=a*8,this.bytesAvailable-=a}skipBits(e){let t;e=Math.min(e,this.bytesAvailable*8+this.bitsAvailable),this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t<<3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)}readBits(e){let t=Math.min(this.bitsAvailable,e);const i=this.word>>>32-t;if(e>32&&We.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0)this.word<<=t;else if(this.bytesAvailable>0)this.loadWord();else throw new Error("no bits available");return t=e-t,t>0&&this.bitsAvailable?i<<t|this.readBits(t):i}skipLZ(){let e;for(e=0;e<this.bitsAvailable;++e)if((this.word&2147483648>>>e)!==0)return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()}skipUEG(){this.skipBits(1+this.skipLZ())}skipEG(){this.skipBits(1+this.skipLZ())}readUEG(){const e=this.skipLZ();return this.readBits(e+1)-1}readEG(){const e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)}readBoolean(){return this.readBits(1)===1}readUByte(){return this.readBits(8)}readUShort(){return this.readBits(16)}readUInt(){return this.readBits(32)}}class sM extends aS{parsePES(e,t,i,s){const a=this.parseNALu(e,i.data,s);let l=this.VideoSample,c,f=!1;i.data=null,l&&a.length&&!e.audFound&&(this.pushAccessUnit(l,e),l=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts)),a.forEach(d=>{var h,p;switch(d.type){case 1:{let T=!1;c=!0;const x=d.data;if(f&&x.length>4){const w=this.readSliceType(x);(w===2||w===4||w===7||w===9)&&(T=!0)}if(T){var g;(g=l)!=null&&g.frame&&!l.key&&(this.pushAccessUnit(l,e),l=this.VideoSample=null)}l||(l=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),l.frame=!0,l.key=T;break}case 5:c=!0,(h=l)!=null&&h.frame&&!l.key&&(this.pushAccessUnit(l,e),l=this.VideoSample=null),l||(l=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),l.key=!0,l.frame=!0;break;case 6:{c=!0,Gm(d.data,1,i.pts,t.samples);break}case 7:{var b,y;c=!0,f=!0;const T=d.data,x=this.readSPS(T);if(!e.sps||e.width!==x.width||e.height!==x.height||((b=e.pixelRatio)==null?void 0:b[0])!==x.pixelRatio[0]||((y=e.pixelRatio)==null?void 0:y[1])!==x.pixelRatio[1]){e.width=x.width,e.height=x.height,e.pixelRatio=x.pixelRatio,e.sps=[T];const w=T.subarray(1,4);let S="avc1.";for(let A=0;A<3;A++){let _=w[A].toString(16);_.length<2&&(_="0"+_),S+=_}e.codec=S}break}case 8:c=!0,e.pps=[d.data];break;case 9:c=!0,e.audFound=!0,(p=l)!=null&&p.frame&&(this.pushAccessUnit(l,e),l=null),l||(l=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts));break;case 12:c=!0;break;default:c=!1;break}l&&c&&l.units.push(d)}),s&&l&&(this.pushAccessUnit(l,e),this.VideoSample=null)}getNALuType(e,t){return e[t]&31}readSliceType(e){const t=new _o(e);return t.readUByte(),t.readUEG(),t.readUEG()}skipScalingList(e,t){let i=8,s=8,a;for(let l=0;l<e;l++)s!==0&&(a=t.readEG(),s=(i+a+256)%256),i=s===0?i:s}readSPS(e){const t=new _o(e);let i=0,s=0,a=0,l=0,c,f,d;const h=t.readUByte.bind(t),p=t.readBits.bind(t),g=t.readUEG.bind(t),b=t.readBoolean.bind(t),y=t.skipBits.bind(t),T=t.skipEG.bind(t),x=t.skipUEG.bind(t),w=this.skipScalingList.bind(this);h();const S=h();if(p(5),y(3),h(),x(),S===100||S===110||S===122||S===244||S===44||S===83||S===86||S===118||S===128){const O=g();if(O===3&&y(1),x(),x(),y(1),b())for(f=O!==3?8:12,d=0;d<f;d++)b()&&(d<6?w(16,t):w(64,t))}x();const A=g();if(A===0)g();else if(A===1)for(y(1),T(),T(),c=g(),d=0;d<c;d++)T();x(),y(1);const _=g(),I=g(),P=p(1);P===0&&y(1),y(1),b()&&(i=g(),s=g(),a=g(),l=g());let C=[1,1];if(b()&&b())switch(h()){case 1:C=[1,1];break;case 2:C=[12,11];break;case 3:C=[10,11];break;case 4:C=[16,11];break;case 5:C=[40,33];break;case 6:C=[24,11];break;case 7:C=[20,11];break;case 8:C=[32,11];break;case 9:C=[80,33];break;case 10:C=[18,11];break;case 11:C=[15,11];break;case 12:C=[64,33];break;case 13:C=[160,99];break;case 14:C=[4,3];break;case 15:C=[3,2];break;case 16:C=[2,1];break;case 255:{C=[h()<<8|h(),h()<<8|h()];break}}return{width:Math.ceil((_+1)*16-i*2-s*2),height:(2-P)*(I+1)*16-(P?2:4)*(a+l),pixelRatio:C}}}class rM extends aS{constructor(...e){super(...e),this.initVPS=null}parsePES(e,t,i,s){const a=this.parseNALu(e,i.data,s);let l=this.VideoSample,c,f=!1;i.data=null,l&&a.length&&!e.audFound&&(this.pushAccessUnit(l,e),l=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts)),a.forEach(d=>{var h,p;switch(d.type){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:l||(l=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts)),l.frame=!0,c=!0;break;case 16:case 17:case 18:case 21:if(c=!0,f){var g;(g=l)!=null&&g.frame&&!l.key&&(this.pushAccessUnit(l,e),l=this.VideoSample=null)}l||(l=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),l.key=!0,l.frame=!0;break;case 19:case 20:c=!0,(h=l)!=null&&h.frame&&!l.key&&(this.pushAccessUnit(l,e),l=this.VideoSample=null),l||(l=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),l.key=!0,l.frame=!0;break;case 39:c=!0,Gm(d.data,2,i.pts,t.samples);break;case 32:c=!0,e.vps||(typeof e.params!="object"&&(e.params={}),e.params=et(e.params,this.readVPS(d.data)),this.initVPS=d.data),e.vps=[d.data];break;case 33:if(c=!0,f=!0,e.vps!==void 0&&e.vps[0]!==this.initVPS&&e.sps!==void 0&&!this.matchSPS(e.sps[0],d.data)&&(this.initVPS=e.vps[0],e.sps=e.pps=void 0),!e.sps){const b=this.readSPS(d.data);e.width=b.width,e.height=b.height,e.pixelRatio=b.pixelRatio,e.codec=b.codecString,e.sps=[],typeof e.params!="object"&&(e.params={});for(const y in b.params)e.params[y]=b.params[y]}this.pushParameterSet(e.sps,d.data,e.vps),l||(l=this.VideoSample=this.createVideoSample(!0,i.pts,i.dts)),l.key=!0;break;case 34:if(c=!0,typeof e.params=="object"){if(!e.pps){e.pps=[];const b=this.readPPS(d.data);for(const y in b)e.params[y]=b[y]}this.pushParameterSet(e.pps,d.data,e.vps)}break;case 35:c=!0,e.audFound=!0,(p=l)!=null&&p.frame&&(this.pushAccessUnit(l,e),l=null),l||(l=this.VideoSample=this.createVideoSample(!1,i.pts,i.dts));break;default:c=!1;break}l&&c&&l.units.push(d)}),s&&l&&(this.pushAccessUnit(l,e),this.VideoSample=null)}pushParameterSet(e,t,i){(i&&i[0]===this.initVPS||!i&&!e.length)&&e.push(t)}getNALuType(e,t){return(e[t]&126)>>>1}ebsp2rbsp(e){const t=new Uint8Array(e.byteLength);let i=0;for(let s=0;s<e.byteLength;s++)s>=2&&e[s]===3&&e[s-1]===0&&e[s-2]===0||(t[i]=e[s],i++);return new Uint8Array(t.buffer,0,i)}pushAccessUnit(e,t){super.pushAccessUnit(e,t),this.initVPS&&(this.initVPS=null)}readVPS(e){const t=new _o(e);t.readUByte(),t.readUByte(),t.readBits(4),t.skipBits(2),t.readBits(6);const i=t.readBits(3),s=t.readBoolean();return{numTemporalLayers:i+1,temporalIdNested:s}}readSPS(e){const t=new _o(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.readBits(4);const i=t.readBits(3);t.readBoolean();const s=t.readBits(2),a=t.readBoolean(),l=t.readBits(5),c=t.readUByte(),f=t.readUByte(),d=t.readUByte(),h=t.readUByte(),p=t.readUByte(),g=t.readUByte(),b=t.readUByte(),y=t.readUByte(),T=t.readUByte(),x=t.readUByte(),w=t.readUByte(),S=[],A=[];for(let Le=0;Le<i;Le++)S.push(t.readBoolean()),A.push(t.readBoolean());if(i>0)for(let Le=i;Le<8;Le++)t.readBits(2);for(let Le=0;Le<i;Le++)S[Le]&&(t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte(),t.readUByte()),A[Le]&&t.readUByte();t.readUEG();const _=t.readUEG();_==3&&t.skipBits(1);const I=t.readUEG(),P=t.readUEG(),C=t.readBoolean();let O=0,B=0,N=0,V=0;C&&(O+=t.readUEG(),B+=t.readUEG(),N+=t.readUEG(),V+=t.readUEG());const ee=t.readUEG(),z=t.readUEG(),H=t.readUEG(),W=t.readBoolean();for(let Le=W?0:i;Le<=i;Le++)t.skipUEG(),t.skipUEG(),t.skipUEG();if(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG(),t.readBoolean()&&t.readBoolean())for(let ye=0;ye<4;ye++)for(let Dt=0;Dt<(ye===3?2:6);Dt++)if(!t.readBoolean())t.readUEG();else{const yt=Math.min(64,1<<4+(ye<<1));ye>1&&t.readEG();for(let $t=0;$t<yt;$t++)t.readEG()}t.readBoolean(),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.skipUEG(),t.skipUEG(),t.readBoolean());const K=t.readUEG();let oe=0;for(let Le=0;Le<K;Le++){let ye=!1;if(Le!==0&&(ye=t.readBoolean()),ye){Le===K&&t.readUEG(),t.readBoolean(),t.readUEG();let Dt=0;for(let gt=0;gt<=oe;gt++){const yt=t.readBoolean();let $t=!1;yt||($t=t.readBoolean()),(yt||$t)&&Dt++}oe=Dt}else{const Dt=t.readUEG(),gt=t.readUEG();oe=Dt+gt;for(let yt=0;yt<Dt;yt++)t.readUEG(),t.readBoolean();for(let yt=0;yt<gt;yt++)t.readUEG(),t.readBoolean()}}if(t.readBoolean()){const Le=t.readUEG();for(let ye=0;ye<Le;ye++){for(let Dt=0;Dt<H+4;Dt++)t.readBits(1);t.readBits(1)}}let M=0,$=1,se=1,de=!0,he=1,me=0;t.readBoolean(),t.readBoolean();let Se=!1;if(t.readBoolean()){if(t.readBoolean()){const Wt=t.readUByte(),ei=[1,12,10,16,40,24,20,32,80,18,15,64,160,4,3,2],ut=[1,11,11,11,33,11,11,11,33,11,11,33,99,3,2,1];Wt>0&&Wt<16?($=ei[Wt-1],se=ut[Wt-1]):Wt===255&&($=t.readBits(16),se=t.readBits(16))}if(t.readBoolean()&&t.readBoolean(),t.readBoolean()&&(t.readBits(3),t.readBoolean(),t.readBoolean()&&(t.readUByte(),t.readUByte(),t.readUByte())),t.readBoolean()&&(t.readUEG(),t.readUEG()),t.readBoolean(),t.readBoolean(),t.readBoolean(),Se=t.readBoolean(),Se&&(t.skipUEG(),t.skipUEG(),t.skipUEG(),t.skipUEG()),t.readBoolean()&&(he=t.readBits(32),me=t.readBits(32),t.readBoolean()&&t.readUEG(),t.readBoolean())){const ut=t.readBoolean(),wn=t.readBoolean();let li=!1;(ut||wn)&&(li=t.readBoolean(),li&&(t.readUByte(),t.readBits(5),t.readBoolean(),t.readBits(5)),t.readBits(4),t.readBits(4),li&&t.readBits(4),t.readBits(5),t.readBits(5),t.readBits(5));for(let Ns=0;Ns<=i;Ns++){de=t.readBoolean();const Jn=de||t.readBoolean();let Er=!1;Jn?t.readEG():Er=t.readBoolean();const Bs=Er?1:t.readUEG()+1;if(ut)for(let An=0;An<Bs;An++)t.readUEG(),t.readUEG(),li&&(t.readUEG(),t.readUEG()),t.skipBits(1);if(wn)for(let An=0;An<Bs;An++)t.readUEG(),t.readUEG(),li&&(t.readUEG(),t.readUEG()),t.skipBits(1)}}t.readBoolean()&&(t.readBoolean(),t.readBoolean(),t.readBoolean(),M=t.readUEG())}let ke=I,pt=P;if(C){let Le=1,ye=1;_===1?Le=ye=2:_==2&&(Le=2),ke=I-Le*B-Le*O,pt=P-ye*V-ye*N}const It=s?["A","B","C"][s]:"",Xt=c<<24|f<<16|d<<8|h;let Ni=0;for(let Le=0;Le<32;Le++)Ni=(Ni|(Xt>>Le&1)<<31-Le)>>>0;let Pt=Ni.toString(16);return l===1&&Pt==="2"&&(Pt="6"),{codecString:`hvc1.${It}${l}.${Pt}.${a?"H":"L"}${w}.B0`,params:{general_tier_flag:a,general_profile_idc:l,general_profile_space:s,general_profile_compatibility_flags:[c,f,d,h],general_constraint_indicator_flags:[p,g,b,y,T,x],general_level_idc:w,bit_depth:ee+8,bit_depth_luma_minus8:ee,bit_depth_chroma_minus8:z,min_spatial_segmentation_idc:M,chroma_format_idc:_,frame_rate:{fixed:de,fps:me/he}},width:ke,height:pt,pixelRatio:[$,se]}}readPPS(e){const t=new _o(this.ebsp2rbsp(e));t.readUByte(),t.readUByte(),t.skipUEG(),t.skipUEG(),t.skipBits(2),t.skipBits(3),t.skipBits(2),t.skipUEG(),t.skipUEG(),t.skipEG(),t.skipBits(2),t.readBoolean()&&t.skipUEG(),t.skipEG(),t.skipEG(),t.skipBits(4);const s=t.readBoolean(),a=t.readBoolean();let l=1;return a&&s?l=0:a?l=3:s&&(l=2),{parallelismType:l}}matchSPS(e,t){return String.fromCharCode.apply(null,e).substr(3)===String.fromCharCode.apply(null,t).substr(3)}}const Ft=188;class _s{constructor(e,t,i,s){this.logger=void 0,this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.sampleAes=null,this.pmtParsed=!1,this.audioCodec=void 0,this.videoCodec=void 0,this._pmtId=-1,this._videoTrack=void 0,this._audioTrack=void 0,this._id3Track=void 0,this._txtTrack=void 0,this.aacOverFlow=null,this.remainderData=null,this.videoParser=void 0,this.observer=e,this.config=t,this.typeSupported=i,this.logger=s,this.videoParser=null}static probe(e,t){const i=_s.syncOffset(e);return i>0&&t.warn(`MPEG2-TS detected but first sync word found @ offset ${i}`),i!==-1}static syncOffset(e){const t=e.length;let i=Math.min(Ft*5,t-Ft)+1,s=0;for(;s<i;){let a=!1,l=-1,c=0;for(let f=s;f<t;f+=Ft)if(e[f]===71&&(t-f===Ft||e[f+Ft]===71)){if(c++,l===-1&&(l=f,l!==0&&(i=Math.min(l+Ft*99,e.length-Ft)+1)),a||(a=sm(e,f)===0),a&&c>1&&(l===0&&c>2||f+Ft>i))return l}else{if(c)return-1;break}s++}return-1}static createTrack(e,t){return{container:e==="video"||e==="audio"?"video/mp2t":void 0,type:e,id:fT[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:0,duration:e==="audio"?t:void 0}}resetInitSegment(e,t,i,s){this.pmtParsed=!1,this._pmtId=-1,this._videoTrack=_s.createTrack("video"),this._videoTrack.duration=s,this._audioTrack=_s.createTrack("audio",s),this._id3Track=_s.createTrack("id3"),this._txtTrack=_s.createTrack("text"),this._audioTrack.segmentCodec="aac",this.videoParser=null,this.aacOverFlow=null,this.remainderData=null,this.audioCodec=t,this.videoCodec=i}resetTimeStamp(){}resetContiguity(){const{_audioTrack:e,_videoTrack:t,_id3Track:i}=this;e&&(e.pesData=null),t&&(t.pesData=null),i&&(i.pesData=null),this.aacOverFlow=null,this.remainderData=null}demux(e,t,i=!1,s=!1){i||(this.sampleAes=null);let a;const l=this._videoTrack,c=this._audioTrack,f=this._id3Track,d=this._txtTrack;let h=l.pid,p=l.pesData,g=c.pid,b=f.pid,y=c.pesData,T=f.pesData,x=null,w=this.pmtParsed,S=this._pmtId,A=e.length;if(this.remainderData&&(e=Xi(this.remainderData,e),A=e.length,this.remainderData=null),A<Ft&&!s)return this.remainderData=e,{audioTrack:c,videoTrack:l,id3Track:f,textTrack:d};const _=Math.max(0,_s.syncOffset(e));A-=(A-_)%Ft,A<e.byteLength&&!s&&(this.remainderData=new Uint8Array(e.buffer,A,e.buffer.byteLength-A));let I=0;for(let C=_;C<A;C+=Ft)if(e[C]===71){const O=!!(e[C+1]&64),B=sm(e,C),N=(e[C+3]&48)>>4;let V;if(N>1){if(V=C+5+e[C+4],V===C+Ft)continue}else V=C+4;switch(B){case h:O&&(p&&(a=la(p,this.logger))&&(this.readyVideoParser(l.segmentCodec),this.videoParser!==null&&this.videoParser.parsePES(l,d,a,!1)),p={data:[],size:0}),p&&(p.data.push(e.subarray(V,C+Ft)),p.size+=C+Ft-V);break;case g:if(O){if(y&&(a=la(y,this.logger)))switch(c.segmentCodec){case"aac":this.parseAACPES(c,a);break;case"mp3":this.parseMPEGPES(c,a);break;case"ac3":this.parseAC3PES(c,a);break}y={data:[],size:0}}y&&(y.data.push(e.subarray(V,C+Ft)),y.size+=C+Ft-V);break;case b:O&&(T&&(a=la(T,this.logger))&&this.parseID3PES(f,a),T={data:[],size:0}),T&&(T.data.push(e.subarray(V,C+Ft)),T.size+=C+Ft-V);break;case 0:O&&(V+=e[V]+1),S=this._pmtId=aM(e,V);break;case S:{O&&(V+=e[V]+1);const ee=oM(e,V,this.typeSupported,i,this.observer,this.logger);h=ee.videoPid,h>0&&(l.pid=h,l.segmentCodec=ee.segmentVideoCodec),g=ee.audioPid,g>0&&(c.pid=g,c.segmentCodec=ee.segmentAudioCodec),b=ee.id3Pid,b>0&&(f.pid=b),x!==null&&!w&&(this.logger.warn(`MPEG-TS PMT found at ${C} after unknown PID '${x}'. Backtracking to sync byte @${_} to parse all TS packets.`),x=null,C=_-188),w=this.pmtParsed=!0;break}case 17:case 8191:break;default:x=B;break}}else I++;I>0&&rm(this.observer,new Error(`Found ${I} TS packet/s that do not start with 0x47`),void 0,this.logger),l.pesData=p,c.pesData=y,f.pesData=T;const P={audioTrack:c,videoTrack:l,id3Track:f,textTrack:d};return s&&this.extractRemainingSamples(P),P}flush(){const{remainderData:e}=this;this.remainderData=null;let t;return e?t=this.demux(e,-1,!1,!0):t={videoTrack:this._videoTrack,audioTrack:this._audioTrack,id3Track:this._id3Track,textTrack:this._txtTrack},this.extractRemainingSamples(t),this.sampleAes?this.decrypt(t,this.sampleAes):t}extractRemainingSamples(e){const{audioTrack:t,videoTrack:i,id3Track:s,textTrack:a}=e,l=i.pesData,c=t.pesData,f=s.pesData;let d;if(l&&(d=la(l,this.logger))?(this.readyVideoParser(i.segmentCodec),this.videoParser!==null&&(this.videoParser.parsePES(i,a,d,!0),i.pesData=null)):i.pesData=l,c&&(d=la(c,this.logger))){switch(t.segmentCodec){case"aac":this.parseAACPES(t,d);break;case"mp3":this.parseMPEGPES(t,d);break;case"ac3":this.parseAC3PES(t,d);break}t.pesData=null}else c!=null&&c.size&&this.logger.log("last AAC PES packet truncated,might overlap between fragments"),t.pesData=c;f&&(d=la(f,this.logger))?(this.parseID3PES(s,d),s.pesData=null):s.pesData=f}demuxSampleAes(e,t,i){const s=this.demux(e,i,!0,!this.config.progressive),a=this.sampleAes=new nM(this.observer,this.config,t);return this.decrypt(s,a)}readyVideoParser(e){this.videoParser===null&&(e==="avc"?this.videoParser=new sM:e==="hevc"&&(this.videoParser=new rM))}decrypt(e,t){return new Promise(i=>{const{audioTrack:s,videoTrack:a}=e;s.samples&&s.segmentCodec==="aac"?t.decryptAacSamples(s.samples,0,()=>{a.samples?t.decryptAvcSamples(a.samples,0,0,()=>{i(e)}):i(e)}):a.samples&&t.decryptAvcSamples(a.samples,0,0,()=>{i(e)})})}destroy(){this.observer&&this.observer.removeAllListeners(),this.config=this.logger=this.observer=null,this.aacOverFlow=this.videoParser=this.remainderData=this.sampleAes=null,this._videoTrack=this._audioTrack=this._id3Track=this._txtTrack=void 0}parseAACPES(e,t){let i=0;const s=this.aacOverFlow;let a=t.data;if(s){this.aacOverFlow=null;const p=s.missing,g=s.sample.unit.byteLength;if(p===-1)a=Xi(s.sample.unit,a);else{const b=g-p;s.sample.unit.set(a.subarray(0,p),b),e.samples.push(s.sample),i=s.missing}}let l,c;for(l=i,c=a.length;l<c-1&&!pu(a,l);l++);if(l!==i){let p;const g=l<c-1;if(g?p=`AAC PES did not start with ADTS header,offset:${l}`:p="No ADTS header found in AAC PES",rm(this.observer,new Error(p),g,this.logger),!g)return}XT(e,this.observer,a,l,this.audioCodec);let f;if(t.pts!==void 0)f=t.pts;else if(s){const p=WT(e.samplerate);f=s.sample.pts+p}else{this.logger.warn("[tsdemuxer]: AAC PES unknown PTS");return}let d=0,h;for(;l<c;)if(h=QT(e,a,l,f,d),l+=h.length,h.missing){this.aacOverFlow=h;break}else for(d++;l<c-1&&!pu(a,l);l++);}parseMPEGPES(e,t){const i=t.data,s=i.length;let a=0,l=0;const c=t.pts;if(c===void 0){this.logger.warn("[tsdemuxer]: MPEG PES unknown PTS");return}for(;l<s;)if(iS(i,l)){const f=eS(e,i,l,c,a);if(f)l+=f.length,a++;else break}else l++}parseAC3PES(e,t){{const i=t.data,s=t.pts;if(s===void 0){this.logger.warn("[tsdemuxer]: AC3 PES unknown PTS");return}const a=i.length;let l=0,c=0,f;for(;c<a&&(f=rS(e,i,c,s,l++))>0;)c+=f}}parseID3PES(e,t){if(t.pts===void 0){this.logger.warn("[tsdemuxer]: ID3 PES unknown PTS");return}const i=et({},t,{type:this._videoTrack?Di.emsg:Di.audioId3,duration:Number.POSITIVE_INFINITY});e.samples.push(i)}}function sm(n,e){return((n[e+1]&31)<<8)+n[e+2]}function aM(n,e){return(n[e+10]&31)<<8|n[e+11]}function oM(n,e,t,i,s,a){const l={audioPid:-1,videoPid:-1,id3Pid:-1,segmentVideoCodec:"avc",segmentAudioCodec:"aac"},c=(n[e+1]&15)<<8|n[e+2],f=e+3+c-4,d=(n[e+10]&15)<<8|n[e+11];for(e+=12+d;e<f;){const h=sm(n,e),p=(n[e+3]&15)<<8|n[e+4];switch(n[e]){case 207:if(!i){xh("ADTS AAC",a);break}case 15:l.audioPid===-1&&(l.audioPid=h);break;case 21:l.id3Pid===-1&&(l.id3Pid=h);break;case 219:if(!i){xh("H.264",a);break}case 27:l.videoPid===-1&&(l.videoPid=h);break;case 3:case 4:!t.mpeg&&!t.mp3?a.log("MPEG audio found, not supported in this browser"):l.audioPid===-1&&(l.audioPid=h,l.segmentAudioCodec="mp3");break;case 193:if(!i){xh("AC-3",a);break}case 129:t.ac3?l.audioPid===-1&&(l.audioPid=h,l.segmentAudioCodec="ac3"):a.log("AC-3 audio found, not supported in this browser");break;case 6:if(l.audioPid===-1&&p>0){let g=e+5,b=p;for(;b>2;){n[g]===106&&(t.ac3!==!0?a.log("AC-3 audio found, not supported in this browser for now"):(l.audioPid=h,l.segmentAudioCodec="ac3"));const T=n[g+1]+2;g+=T,b-=T}}break;case 194:case 135:return rm(s,new Error("Unsupported EC-3 in M2TS found"),void 0,a),l;case 36:l.videoPid===-1&&(l.videoPid=h,l.segmentVideoCodec="hevc",a.log("HEVC in M2TS found"));break}e+=p+5}return l}function rm(n,e,t,i){i.warn(`parsing error: ${e.message}`),n.emit(L.ERROR,L.ERROR,{type:Ee.MEDIA_ERROR,details:Q.FRAG_PARSING_ERROR,fatal:!1,levelRetry:t,error:e,reason:e.message})}function xh(n,e){e.log(`${n} with AES-128-CBC encryption found in unencrypted stream`)}function la(n,e){let t=0,i,s,a,l,c;const f=n.data;if(!n||n.size===0)return null;for(;f[0].length<19&&f.length>1;)f[0]=Xi(f[0],f[1]),f.splice(1,1);if(i=f[0],(i[0]<<16)+(i[1]<<8)+i[2]===1){if(s=(i[4]<<8)+i[5],s&&s>n.size-6)return null;const h=i[7];h&192&&(l=(i[9]&14)*536870912+(i[10]&255)*4194304+(i[11]&254)*16384+(i[12]&255)*128+(i[13]&254)/2,h&64?(c=(i[14]&14)*536870912+(i[15]&255)*4194304+(i[16]&254)*16384+(i[17]&255)*128+(i[18]&254)/2,l-c>60*9e4&&(e.warn(`${Math.round((l-c)/9e4)}s delta between PTS and DTS, align them`),l=c)):c=l),a=i[8];let p=a+9;if(n.size<=p)return null;n.size-=p;const g=new Uint8Array(n.size);for(let b=0,y=f.length;b<y;b++){i=f[b];let T=i.byteLength;if(p)if(p>T){p-=T;continue}else i=i.subarray(p),T-=p,p=0;g.set(i,t),t+=T}return s&&(s-=a+3),{data:g,pts:l,dts:c,len:s}}return null}class lM{static getSilentFrame(e,t){switch(e){case"mp4a.40.2":if(t===1)return new Uint8Array([0,200,0,128,35,128]);if(t===2)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(t===3)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(t===4)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(t===5)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(t===6)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(t===1)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===2)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(t===3)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);break}}}const ws=Math.pow(2,32)-1;class X{static init(){X.types={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],dac3:[],"ac-3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};let e;for(e in X.types)X.types.hasOwnProperty(e)&&(X.types[e]=[e.charCodeAt(0),e.charCodeAt(1),e.charCodeAt(2),e.charCodeAt(3)]);const t=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),i=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);X.HDLR_TYPES={video:t,audio:i};const s=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),a=new Uint8Array([0,0,0,0,0,0,0,0]);X.STTS=X.STSC=X.STCO=a,X.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),X.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),X.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),X.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);const l=new Uint8Array([105,115,111,109]),c=new Uint8Array([97,118,99,49]),f=new Uint8Array([0,0,0,1]);X.FTYP=X.box(X.types.ftyp,l,f,l,c),X.DINF=X.box(X.types.dinf,X.box(X.types.dref,s))}static box(e,...t){let i=8,s=t.length;const a=s;for(;s--;)i+=t[s].byteLength;const l=new Uint8Array(i);for(l[0]=i>>24&255,l[1]=i>>16&255,l[2]=i>>8&255,l[3]=i&255,l.set(e,4),s=0,i=8;s<a;s++)l.set(t[s],i),i+=t[s].byteLength;return l}static hdlr(e){return X.box(X.types.hdlr,X.HDLR_TYPES[e])}static mdat(e){return X.box(X.types.mdat,e)}static mdhd(e,t){t*=e;const i=Math.floor(t/(ws+1)),s=Math.floor(t%(ws+1));return X.box(X.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,i>>24,i>>16&255,i>>8&255,i&255,s>>24,s>>16&255,s>>8&255,s&255,85,196,0,0]))}static mdia(e){return X.box(X.types.mdia,X.mdhd(e.timescale||0,e.duration||0),X.hdlr(e.type),X.minf(e))}static mfhd(e){return X.box(X.types.mfhd,new Uint8Array([0,0,0,0,e>>24,e>>16&255,e>>8&255,e&255]))}static minf(e){return e.type==="audio"?X.box(X.types.minf,X.box(X.types.smhd,X.SMHD),X.DINF,X.stbl(e)):X.box(X.types.minf,X.box(X.types.vmhd,X.VMHD),X.DINF,X.stbl(e))}static moof(e,t,i){return X.box(X.types.moof,X.mfhd(e),X.traf(i,t))}static moov(e){let t=e.length;const i=[];for(;t--;)i[t]=X.trak(e[t]);return X.box.apply(null,[X.types.moov,X.mvhd(e[0].timescale||0,e[0].duration||0)].concat(i).concat(X.mvex(e)))}static mvex(e){let t=e.length;const i=[];for(;t--;)i[t]=X.trex(e[t]);return X.box.apply(null,[X.types.mvex,...i])}static mvhd(e,t){t*=e;const i=Math.floor(t/(ws+1)),s=Math.floor(t%(ws+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,e>>24&255,e>>16&255,e>>8&255,e&255,i>>24,i>>16&255,i>>8&255,i&255,s>>24,s>>16&255,s>>8&255,s&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return X.box(X.types.mvhd,a)}static sdtp(e){const t=e.samples||[],i=new Uint8Array(4+t.length);let s,a;for(s=0;s<t.length;s++)a=t[s].flags,i[s+4]=a.dependsOn<<4|a.isDependedOn<<2|a.hasRedundancy;return X.box(X.types.sdtp,i)}static stbl(e){return X.box(X.types.stbl,X.stsd(e),X.box(X.types.stts,X.STTS),X.box(X.types.stsc,X.STSC),X.box(X.types.stsz,X.STSZ),X.box(X.types.stco,X.STCO))}static avc1(e){let t=[],i=[],s,a,l;for(s=0;s<e.sps.length;s++)a=e.sps[s],l=a.byteLength,t.push(l>>>8&255),t.push(l&255),t=t.concat(Array.prototype.slice.call(a));for(s=0;s<e.pps.length;s++)a=e.pps[s],l=a.byteLength,i.push(l>>>8&255),i.push(l&255),i=i.concat(Array.prototype.slice.call(a));const c=X.box(X.types.avcC,new Uint8Array([1,t[3],t[4],t[5],255,224|e.sps.length].concat(t).concat([e.pps.length]).concat(i))),f=e.width,d=e.height,h=e.pixelRatio[0],p=e.pixelRatio[1];return X.box(X.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,f>>8&255,f&255,d>>8&255,d&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),c,X.box(X.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),X.box(X.types.pasp,new Uint8Array([h>>24,h>>16&255,h>>8&255,h&255,p>>24,p>>16&255,p>>8&255,p&255])))}static esds(e){const t=e.config;return new Uint8Array([0,0,0,0,3,25,0,1,0,4,17,64,21,0,0,0,0,0,0,0,0,0,0,0,5,2,...t,6,1,2])}static audioStsd(e){const t=e.samplerate||0;return new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,e.channelCount||0,0,16,0,0,0,0,t>>8&255,t&255,0,0])}static mp4a(e){return X.box(X.types.mp4a,X.audioStsd(e),X.box(X.types.esds,X.esds(e)))}static mp3(e){return X.box(X.types[".mp3"],X.audioStsd(e))}static ac3(e){return X.box(X.types["ac-3"],X.audioStsd(e),X.box(X.types.dac3,e.config))}static stsd(e){const{segmentCodec:t}=e;if(e.type==="audio"){if(t==="aac")return X.box(X.types.stsd,X.STSD,X.mp4a(e));if(t==="ac3"&&e.config)return X.box(X.types.stsd,X.STSD,X.ac3(e));if(t==="mp3"&&e.codec==="mp3")return X.box(X.types.stsd,X.STSD,X.mp3(e))}else if(e.pps&&e.sps){if(t==="avc")return X.box(X.types.stsd,X.STSD,X.avc1(e));if(t==="hevc"&&e.vps)return X.box(X.types.stsd,X.STSD,X.hvc1(e))}else throw new Error("video track missing pps or sps");throw new Error(`unsupported ${e.type} segment codec (${t}/${e.codec})`)}static tkhd(e){const t=e.id,i=(e.duration||0)*(e.timescale||0),s=e.width||0,a=e.height||0,l=Math.floor(i/(ws+1)),c=Math.floor(i%(ws+1));return X.box(X.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,t&255,0,0,0,0,l>>24,l>>16&255,l>>8&255,l&255,c>>24,c>>16&255,c>>8&255,c&255,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,s>>8&255,s&255,0,0,a>>8&255,a&255,0,0]))}static traf(e,t){const i=X.sdtp(e),s=e.id,a=Math.floor(t/(ws+1)),l=Math.floor(t%(ws+1));return X.box(X.types.traf,X.box(X.types.tfhd,new Uint8Array([0,0,0,0,s>>24,s>>16&255,s>>8&255,s&255])),X.box(X.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,a&255,l>>24,l>>16&255,l>>8&255,l&255])),X.trun(e,i.length+16+20+8+16+8+8),i)}static trak(e){return e.duration=e.duration||4294967295,X.box(X.types.trak,X.tkhd(e),X.mdia(e))}static trex(e){const t=e.id;return X.box(X.types.trex,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,t&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))}static trun(e,t){const i=e.samples||[],s=i.length,a=12+16*s,l=new Uint8Array(a);let c,f,d,h,p,g;for(t+=8+a,l.set([e.type==="video"?1:0,0,15,1,s>>>24&255,s>>>16&255,s>>>8&255,s&255,t>>>24&255,t>>>16&255,t>>>8&255,t&255],0),c=0;c<s;c++)f=i[c],d=f.duration,h=f.size,p=f.flags,g=f.cts,l.set([d>>>24&255,d>>>16&255,d>>>8&255,d&255,h>>>24&255,h>>>16&255,h>>>8&255,h&255,p.isLeading<<2|p.dependsOn,p.isDependedOn<<6|p.hasRedundancy<<4|p.paddingValue<<1|p.isNonSync,p.degradPrio&61440,p.degradPrio&15,g>>>24&255,g>>>16&255,g>>>8&255,g&255],12+16*c);return X.box(X.types.trun,l)}static initSegment(e){X.types||X.init();const t=X.moov(e);return Xi(X.FTYP,t)}static hvc1(e){const t=e.params,i=[e.vps,e.sps,e.pps],s=4,a=new Uint8Array([1,t.general_profile_space<<6|(t.general_tier_flag?32:0)|t.general_profile_idc,t.general_profile_compatibility_flags[0],t.general_profile_compatibility_flags[1],t.general_profile_compatibility_flags[2],t.general_profile_compatibility_flags[3],t.general_constraint_indicator_flags[0],t.general_constraint_indicator_flags[1],t.general_constraint_indicator_flags[2],t.general_constraint_indicator_flags[3],t.general_constraint_indicator_flags[4],t.general_constraint_indicator_flags[5],t.general_level_idc,240|t.min_spatial_segmentation_idc>>8,255&t.min_spatial_segmentation_idc,252|t.parallelismType,252|t.chroma_format_idc,248|t.bit_depth_luma_minus8,248|t.bit_depth_chroma_minus8,0,parseInt(t.frame_rate.fps),s-1|t.temporal_id_nested<<2|t.num_temporal_layers<<3|(t.frame_rate.fixed?64:0),i.length]);let l=a.length;for(let y=0;y<i.length;y+=1){l+=3;for(let T=0;T<i[y].length;T+=1)l+=2+i[y][T].length}const c=new Uint8Array(l);c.set(a,0),l=a.length;const f=i.length-1;for(let y=0;y<i.length;y+=1){c.set(new Uint8Array([32+y|(y===f?128:0),0,i[y].length]),l),l+=3;for(let T=0;T<i[y].length;T+=1)c.set(new Uint8Array([i[y][T].length>>8,i[y][T].length&255]),l),l+=2,c.set(i[y][T],l),l+=i[y][T].length}const d=X.box(X.types.hvcC,c),h=e.width,p=e.height,g=e.pixelRatio[0],b=e.pixelRatio[1];return X.box(X.types.hvc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,h>>8&255,h&255,p>>8&255,p&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),d,X.box(X.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),X.box(X.types.pasp,new Uint8Array([g>>24,g>>16&255,g>>8&255,g&255,b>>24,b>>16&255,b>>8&255,b&255])))}}X.types=void 0;X.HDLR_TYPES=void 0;X.STTS=void 0;X.STSC=void 0;X.STCO=void 0;X.STSZ=void 0;X.VMHD=void 0;X.SMHD=void 0;X.STSD=void 0;X.FTYP=void 0;X.DINF=void 0;const oS=9e4;function sp(n,e,t=1,i=!1){const s=n*e*t;return i?Math.round(s):s}function cM(n,e,t=1,i=!1){return sp(n,e,1/t,i)}function Ao(n,e=!1){return sp(n,1e3,1/oS,e)}function uM(n,e=1){return sp(n,oS,1/e)}function Gb(n){const{baseTime:e,timescale:t,trackId:i}=n;return`${e/t} (${e}/${t}) trackId: ${i}`}const dM=10*1e3,fM=1024,hM=1152,mM=1536;let ca=null,Th=null;function zb(n,e,t,i){return{duration:e,size:t,cts:i,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:n?2:1,isNonSync:n?0:1}}}class Gc extends Zi{constructor(e,t,i,s){if(super("mp4-remuxer",s),this.observer=void 0,this.config=void 0,this.typeSupported=void 0,this.ISGenerated=!1,this._initPTS=null,this._initDTS=null,this.nextVideoTs=null,this.nextAudioTs=null,this.videoSampleDuration=null,this.isAudioContiguous=!1,this.isVideoContiguous=!1,this.videoTrackConfig=void 0,this.observer=e,this.config=t,this.typeSupported=i,this.ISGenerated=!1,ca===null){const l=(navigator.userAgent||"").match(/Chrome\/(\d+)/i);ca=l?parseInt(l[1]):0}if(Th===null){const a=navigator.userAgent.match(/Safari\/(\d+)/i);Th=a?parseInt(a[1]):0}}destroy(){this.config=this.videoTrackConfig=this._initPTS=this._initDTS=null}resetTimeStamp(e){const t=this._initPTS;(!t||!e||e.trackId!==t.trackId||e.baseTime!==t.baseTime||e.timescale!==t.timescale)&&this.log(`Reset initPTS: ${t&&Gb(t)} > ${e&&Gb(e)}`),this._initPTS=this._initDTS=e}resetNextTimestamp(){this.log("reset next timestamp"),this.isVideoContiguous=!1,this.isAudioContiguous=!1}resetInitSegment(){this.log("ISGenerated flag reset"),this.ISGenerated=!1,this.videoTrackConfig=void 0}getVideoStartPts(e){let t=!1;const i=e[0].pts,s=e.reduce((a,l)=>{let c=l.pts,f=c-a;return f<-4294967296&&(t=!0,c=Ii(c,i),f=c-a),f>0?a:c},i);return t&&this.debug("PTS rollover detected"),s}remux(e,t,i,s,a,l,c,f){let d,h,p,g,b,y,T=a,x=a;const w=e.pid>-1,S=t.pid>-1,A=t.samples.length,_=e.samples.length>0,I=c&&A>0||A>1;if((!w||_)&&(!S||I)||this.ISGenerated||c){if(this.ISGenerated){var C,O,B,N;const H=this.videoTrackConfig;(H&&(t.width!==H.width||t.height!==H.height||((C=t.pixelRatio)==null?void 0:C[0])!==((O=H.pixelRatio)==null?void 0:O[0])||((B=t.pixelRatio)==null?void 0:B[1])!==((N=H.pixelRatio)==null?void 0:N[1]))||!H&&I||this.nextAudioTs===null&&_)&&this.resetInitSegment()}this.ISGenerated||(p=this.generateIS(e,t,a,l));const V=this.isVideoContiguous;let ee=-1,z;if(I&&(ee=pM(t.samples),!V&&this.config.forceKeyFrameOnDiscontinuity))if(y=!0,ee>0){this.warn(`Dropped ${ee} out of ${A} video samples due to a missing keyframe`);const H=this.getVideoStartPts(t.samples);t.samples=t.samples.slice(ee),t.dropped+=ee,x+=(t.samples[0].pts-H)/t.inputTimeScale,z=x}else ee===-1&&(this.warn(`No keyframe found out of ${A} video samples`),y=!1);if(this.ISGenerated){if(_&&I){const H=this.getVideoStartPts(t.samples),k=(Ii(e.samples[0].pts,H)-H)/t.inputTimeScale;T+=Math.max(0,k),x+=Math.max(0,-k)}if(_){if(e.samplerate||(this.warn("regenerate InitSegment as audio detected"),p=this.generateIS(e,t,a,l)),h=this.remuxAudio(e,T,this.isAudioContiguous,l,S||I||f===ge.AUDIO?x:void 0),I){const H=h?h.endPTS-h.startPTS:0;t.inputTimeScale||(this.warn("regenerate InitSegment as video detected"),p=this.generateIS(e,t,a,l)),d=this.remuxVideo(t,x,V,H)}}else I&&(d=this.remuxVideo(t,x,V,0));d&&(d.firstKeyFrame=ee,d.independent=ee!==-1,d.firstKeyFramePTS=z)}}return this.ISGenerated&&this._initPTS&&this._initDTS&&(i.samples.length&&(b=lS(i,a,this._initPTS,this._initDTS)),s.samples.length&&(g=cS(s,a,this._initPTS))),{audio:h,video:d,initSegment:p,independent:y,text:g,id3:b}}computeInitPts(e,t,i,s){const a=Math.round(i*t);let l=Ii(e,a);if(l<a+t)for(this.log(`Adjusting PTS for rollover in timeline near ${(a-l)/t} ${s}`);l<a+t;)l+=8589934592;return l-a}generateIS(e,t,i,s){const a=e.samples,l=t.samples,c=this.typeSupported,f={},d=this._initPTS;let h=!d||s,p="audio/mp4",g,b,y,T=-1;if(h&&(g=b=1/0),e.config&&a.length){switch(e.timescale=e.samplerate,e.segmentCodec){case"mp3":c.mpeg?(p="audio/mpeg",e.codec=""):c.mp3&&(e.codec="mp3");break;case"ac3":e.codec="ac-3";break}f.audio={id:"audio",container:p,codec:e.codec,initSegment:e.segmentCodec==="mp3"&&c.mpeg?new Uint8Array(0):X.initSegment([e]),metadata:{channelCount:e.channelCount}},h&&(T=e.id,y=e.inputTimeScale,!d||y!==d.timescale?g=b=this.computeInitPts(a[0].pts,y,i,"audio"):h=!1)}if(t.sps&&t.pps&&l.length){if(t.timescale=t.inputTimeScale,f.video={id:"main",container:"video/mp4",codec:t.codec,initSegment:X.initSegment([t]),metadata:{width:t.width,height:t.height}},h)if(T=t.id,y=t.inputTimeScale,!d||y!==d.timescale){const x=this.getVideoStartPts(l),w=Ii(l[0].dts,x),S=this.computeInitPts(w,y,i,"video"),A=this.computeInitPts(x,y,i,"video");b=Math.min(b,S),g=Math.min(g,A)}else h=!1;this.videoTrackConfig={width:t.width,height:t.height,pixelRatio:t.pixelRatio}}if(Object.keys(f).length)return this.ISGenerated=!0,h?(d&&this.warn(`Timestamps at playlist time: ${s?"":"~"}${i} ${g/y} != initPTS: ${d.baseTime/d.timescale} (${d.baseTime}/${d.timescale}) trackId: ${d.trackId}`),this.log(`Found initPTS at playlist time: ${i} offset: ${g/y} (${g}/${y}) trackId: ${T}`),this._initPTS={baseTime:g,timescale:y,trackId:T},this._initDTS={baseTime:b,timescale:y,trackId:T}):g=y=void 0,{tracks:f,initPTS:g,timescale:y,trackId:T}}remuxVideo(e,t,i,s){const a=e.inputTimeScale,l=e.samples,c=[],f=l.length,d=this._initPTS,h=d.baseTime*a/d.timescale;let p=this.nextVideoTs,g=8,b=this.videoSampleDuration,y,T,x=Number.POSITIVE_INFINITY,w=Number.NEGATIVE_INFINITY,S=!1;if(!i||p===null){const M=h+t*a,$=l[0].pts-Ii(l[0].dts,l[0].pts);ca&&p!==null&&Math.abs(M-$-(p+h))<15e3?i=!0:p=M-$-h}const A=p+h;for(let M=0;M<f;M++){const $=l[M];$.pts=Ii($.pts,A),$.dts=Ii($.dts,A),$.dts<l[M>0?M-1:M].dts&&(S=!0)}S&&l.sort(function(M,$){const se=M.dts-$.dts,de=M.pts-$.pts;return se||de}),y=l[0].dts,T=l[l.length-1].dts;const _=T-y,I=_?Math.round(_/(f-1)):b||e.inputTimeScale/30;if(i){const M=y-A,$=M>I,se=M<-1;if(($||se)&&($?this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${Ao(M,!0)} ms (${M}dts) hole between fragments detected at ${t.toFixed(3)}`):this.warn(`${(e.segmentCodec||"").toUpperCase()}: ${Ao(-M,!0)} ms (${M}dts) overlapping between fragments detected at ${t.toFixed(3)}`),!se||A>=l[0].pts||ca)){y=A;const de=l[0].pts-M;if($)l[0].dts=y,l[0].pts=de;else{let he=!0;for(let me=0;me<l.length&&!(l[me].dts>de&&he);me++){const Se=l[me].pts;if(l[me].dts-=M,l[me].pts-=M,me<l.length-1){const Oe=l[me+1].pts,ke=l[me].pts,pt=Oe<=ke,It=Oe<=Se;he=pt==It}}}this.log(`Video: Initial PTS/DTS adjusted: ${Ao(de,!0)}/${Ao(y,!0)}, delta: ${Ao(M,!0)} ms`)}}y=Math.max(0,y);let P=0,C=0,O=y;for(let M=0;M<f;M++){const $=l[M],se=$.units,de=se.length;let he=0;for(let me=0;me<de;me++)he+=se[me].data.length;C+=he,P+=de,$.length=he,$.dts<O?($.dts=O,O+=I/4|0||1):O=$.dts,x=Math.min($.pts,x),w=Math.max($.pts,w)}T=l[f-1].dts;const B=C+4*P+8;let N;try{N=new Uint8Array(B)}catch(M){this.observer.emit(L.ERROR,L.ERROR,{type:Ee.MUX_ERROR,details:Q.REMUX_ALLOC_ERROR,fatal:!1,error:M,bytes:B,reason:`fail allocating video mdat ${B}`});return}const V=new DataView(N.buffer);V.setUint32(0,B),N.set(X.types.mdat,4);let ee=!1,z=Number.POSITIVE_INFINITY,H=Number.POSITIVE_INFINITY,W=Number.NEGATIVE_INFINITY,k=Number.NEGATIVE_INFINITY;for(let M=0;M<f;M++){const $=l[M],se=$.units;let de=0;for(let Se=0,Oe=se.length;Se<Oe;Se++){const ke=se[Se],pt=ke.data,It=ke.data.byteLength;V.setUint32(g,It),g+=4,N.set(pt,g),g+=It,de+=4+It}let he;if(M<f-1)b=l[M+1].dts-$.dts,he=l[M+1].pts-$.pts;else{const Se=this.config,Oe=M>0?$.dts-l[M-1].dts:I;if(he=M>0?$.pts-l[M-1].pts:I,Se.stretchShortVideoTrack&&this.nextAudioTs!==null){const ke=Math.floor(Se.maxBufferHole*a),pt=(s?x+s*a:this.nextAudioTs+h)-$.pts;pt>ke?(b=pt-Oe,b<0?b=Oe:ee=!0,this.log(`It is approximately ${pt/90} ms to the next segment; using duration ${b/90} ms for the last video frame.`)):b=Oe}else b=Oe}const me=Math.round($.pts-$.dts);z=Math.min(z,b),W=Math.max(W,b),H=Math.min(H,he),k=Math.max(k,he),c.push(zb($.key,b,de,me))}if(c.length){if(ca){if(ca<70){const M=c[0].flags;M.dependsOn=2,M.isNonSync=0}}else if(Th&&k-H<W-z&&I/W<.025&&c[0].cts===0){this.warn("Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.");let M=y;for(let $=0,se=c.length;$<se;$++){const de=M+c[$].duration,he=M+c[$].cts;if($<se-1){const me=de+c[$+1].cts;c[$].duration=me-he}else c[$].duration=$?c[$-1].duration:I;c[$].cts=0,M=de}}}b=ee||!b?I:b;const G=T+b;this.nextVideoTs=p=G-h,this.videoSampleDuration=b,this.isVideoContiguous=!0;const fe={data1:X.moof(e.sequenceNumber++,y,et(e,{samples:c})),data2:N,startPTS:(x-h)/a,endPTS:(w+b-h)/a,startDTS:(y-h)/a,endDTS:p/a,type:"video",hasAudio:!1,hasVideo:!0,nb:c.length,dropped:e.dropped};return e.samples=[],e.dropped=0,fe}getSamplesPerFrame(e){switch(e.segmentCodec){case"mp3":return hM;case"ac3":return mM;default:return fM}}remuxAudio(e,t,i,s,a){const l=e.inputTimeScale,c=e.samplerate?e.samplerate:l,f=l/c,d=this.getSamplesPerFrame(e),h=d*f,p=this._initPTS,g=e.segmentCodec==="mp3"&&this.typeSupported.mpeg,b=[],y=a!==void 0;let T=e.samples,x=g?0:8,w=this.nextAudioTs||-1;const S=p.baseTime*l/p.timescale,A=S+t*l;if(this.isAudioContiguous=i=i||T.length&&w>0&&(s&&Math.abs(A-(w+S))<9e3||Math.abs(Ii(T[0].pts,A)-(w+S))<20*h),T.forEach(function(k){k.pts=Ii(k.pts,A)}),!i||w<0){const k=T.length;if(T=T.filter(G=>G.pts>=0),k!==T.length&&this.warn(`Removed ${T.length-k} of ${k} samples (initPTS ${S} / ${l})`),!T.length)return;a===0?w=0:s&&!y?w=Math.max(0,A-S):w=T[0].pts-S}if(e.segmentCodec==="aac"){const k=this.config.maxAudioFramesDrift;for(let G=0,K=w+S;G<T.length;G++){const oe=T[G],fe=oe.pts,M=fe-K,$=Math.abs(1e3*M/l);if(M<=-k*h&&y)G===0&&(this.warn(`Audio frame @ ${(fe/l).toFixed(3)}s overlaps marker by ${Math.round(1e3*M/l)} ms.`),this.nextAudioTs=w=fe-S,K=fe);else if(M>=k*h&&$<dM&&y){let se=Math.round(M/h);for(K=fe-se*h;K<0&&se&&h;)se--,K+=h;G===0&&(this.nextAudioTs=w=K-S),this.warn(`Injecting ${se} audio frames @ ${((K-S)/l).toFixed(3)}s due to ${Math.round(1e3*M/l)} ms gap.`);for(let de=0;de<se;de++){let he=lM.getSilentFrame(e.parsedCodec||e.manifestCodec||e.codec,e.channelCount);he||(this.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),he=oe.unit.subarray()),T.splice(G,0,{unit:he,pts:K}),K+=h,G++}}oe.pts=K,K+=h}}let _=null,I=null,P,C=0,O=T.length;for(;O--;)C+=T[O].unit.byteLength;for(let k=0,G=T.length;k<G;k++){const K=T[k],oe=K.unit;let fe=K.pts;if(I!==null){const $=b[k-1];$.duration=Math.round((fe-I)/f)}else if(i&&e.segmentCodec==="aac"&&(fe=w+S),_=fe,C>0){C+=x;try{P=new Uint8Array(C)}catch($){this.observer.emit(L.ERROR,L.ERROR,{type:Ee.MUX_ERROR,details:Q.REMUX_ALLOC_ERROR,fatal:!1,error:$,bytes:C,reason:`fail allocating audio mdat ${C}`});return}g||(new DataView(P.buffer).setUint32(0,C),P.set(X.types.mdat,4))}else return;P.set(oe,x);const M=oe.byteLength;x+=M,b.push(zb(!0,d,M,0)),I=fe}const B=b.length;if(!B)return;const N=b[b.length-1];w=I-S,this.nextAudioTs=w+f*N.duration;const V=g?new Uint8Array(0):X.moof(e.sequenceNumber++,_/f,et({},e,{samples:b}));e.samples=[];const ee=(_-S)/l,z=this.nextAudioTs/l,W={data1:V,data2:P,startPTS:ee,endPTS:z,startDTS:ee,endDTS:z,type:"audio",hasAudio:!0,hasVideo:!1,nb:B};return this.isAudioContiguous=!0,W}}function Ii(n,e){let t;if(e===null)return n;for(e<n?t=-8589934592:t=8589934592;Math.abs(n-e)>4294967296;)n+=t;return n}function pM(n){for(let e=0;e<n.length;e++)if(n[e].key)return e;return-1}function lS(n,e,t,i){const s=n.samples.length;if(!s)return;const a=n.inputTimeScale;for(let c=0;c<s;c++){const f=n.samples[c];f.pts=Ii(f.pts-t.baseTime*a/t.timescale,e*a)/a,f.dts=Ii(f.dts-i.baseTime*a/i.timescale,e*a)/a}const l=n.samples;return n.samples=[],{samples:l}}function cS(n,e,t){const i=n.samples.length;if(!i)return;const s=n.inputTimeScale;for(let l=0;l<i;l++){const c=n.samples[l];c.pts=Ii(c.pts-t.baseTime*s/t.timescale,e*s)/s}n.samples.sort((l,c)=>l.pts-c.pts);const a=n.samples;return n.samples=[],{samples:a}}class gM extends Zi{constructor(e,t,i,s){super("passthrough-remuxer",s),this.emitInitSegment=!1,this.audioCodec=void 0,this.videoCodec=void 0,this.initData=void 0,this.initPTS=null,this.initTracks=void 0,this.lastEndTime=null,this.isVideoContiguous=!1}destroy(){}resetTimeStamp(e){this.lastEndTime=null;const t=this.initPTS;t&&e&&t.baseTime===e.baseTime&&t.timescale===e.timescale||(this.initPTS=e)}resetNextTimestamp(){this.isVideoContiguous=!1,this.lastEndTime=null}resetInitSegment(e,t,i,s){this.audioCodec=t,this.videoCodec=i,this.generateInitSegment(e,s),this.emitInitSegment=!0}generateInitSegment(e,t){let{audioCodec:i,videoCodec:s}=this;if(!(e!=null&&e.byteLength)){this.initTracks=void 0,this.initData=void 0;return}const{audio:a,video:l}=this.initData=pT(e);if(t)nk(e,t);else{const f=a||l;f!=null&&f.encrypted&&this.warn(`Init segment with encrypted track with has no key ("${f.codec}")!`)}a&&(i=Vb(a,it.AUDIO,this)),l&&(s=Vb(l,it.VIDEO,this));const c={};a&&l?c.audiovideo={container:"video/mp4",codec:i+","+s,supplemental:l.supplemental,encrypted:l.encrypted,initSegment:e,id:"main"}:a?c.audio={container:"audio/mp4",codec:i,encrypted:a.encrypted,initSegment:e,id:"audio"}:l?c.video={container:"video/mp4",codec:s,supplemental:l.supplemental,encrypted:l.encrypted,initSegment:e,id:"main"}:this.warn("initSegment does not contain moov or trak boxes."),this.initTracks=c}remux(e,t,i,s,a,l){var c,f;let{initPTS:d,lastEndTime:h}=this;const p={audio:void 0,video:void 0,text:s,id3:i,initSegment:void 0};pe(h)||(h=this.lastEndTime=a||0);const g=t.samples;if(!g.length)return p;const b={initPTS:void 0,timescale:void 0,trackId:void 0};let y=this.initData;if((c=y)!=null&&c.length||(this.generateInitSegment(g),y=this.initData),!((f=y)!=null&&f.length))return this.warn("Failed to generate initSegment."),p;this.emitInitSegment&&(b.tracks=this.initTracks,this.emitInitSegment=!1);const T=rk(g,y,this),x=y.audio?T[y.audio.id]:null,w=y.video?T[y.video.id]:null,S=Rc(w,1/0),A=Rc(x,1/0),_=Rc(w,0,!0),I=Rc(x,0,!0);let P=a,C=0;const O=x&&(!w||!d&&A<S||d&&d.trackId===y.audio.id),B=O?x:w;if(B){const K=B.timescale,oe=B.start-a*K,fe=O?y.audio.id:y.video.id;P=B.start/K,C=O?I-A:_-S,(l||!d)&&(yM(d,P,a,C)||K!==d.timescale)&&(d&&this.warn(`Timestamps at playlist time: ${l?"":"~"}${a} ${oe/K} != initPTS: ${d.baseTime/d.timescale} (${d.baseTime}/${d.timescale}) trackId: ${d.trackId}`),this.log(`Found initPTS at playlist time: ${a} offset: ${P-a} (${oe}/${K}) trackId: ${fe}`),d=null,b.initPTS=oe,b.timescale=K,b.trackId=fe)}else this.warn(`No audio or video samples found for initPTS at playlist time: ${a}`);d?(b.initPTS=d.baseTime,b.timescale=d.timescale,b.trackId=d.trackId):((!b.timescale||b.trackId===void 0||b.initPTS===void 0)&&(this.warn("Could not set initPTS"),b.initPTS=P,b.timescale=1,b.trackId=-1),this.initPTS=d={baseTime:b.initPTS,timescale:b.timescale,trackId:b.trackId});const N=P-d.baseTime/d.timescale,V=N+C;C>0?this.lastEndTime=V:(this.warn("Duration parsed from mp4 should be greater than zero"),this.resetNextTimestamp());const ee=!!y.audio,z=!!y.video;let H="";ee&&(H+="audio"),z&&(H+="video");const W=(y.audio?y.audio.encrypted:!1)||(y.video?y.video.encrypted:!1),k={data1:g,startPTS:N,startDTS:N,endPTS:V,endDTS:V,type:H,hasAudio:ee,hasVideo:z,nb:1,dropped:0,encrypted:W};p.audio=ee&&!z?k:void 0,p.video=z?k:void 0;const G=w?.sampleCount;if(G){const K=w.keyFrameIndex,oe=K!==-1;k.nb=G,k.dropped=K===0||this.isVideoContiguous?0:oe?K:G,k.independent=oe,k.firstKeyFrame=K,oe&&w.keyFrameStart&&(k.firstKeyFramePTS=(w.keyFrameStart-d.baseTime)/d.timescale),this.isVideoContiguous||(p.independent=oe),this.isVideoContiguous||(this.isVideoContiguous=oe),k.dropped&&this.warn(`fmp4 does not start with IDR: firstIDR ${K}/${G} dropped: ${k.dropped} start: ${k.firstKeyFramePTS||"NA"}`)}return p.initSegment=b,p.id3=lS(i,a,d,d),s.samples.length&&(p.text=cS(s,a,d)),p}}function Rc(n,e,t=!1){return n?.start!==void 0?(n.start+(t?n.duration:0))/n.timescale:e}function yM(n,e,t,i){if(n===null)return!0;const s=Math.max(i,1),a=e-n.baseTime/n.timescale;return Math.abs(a-t)>s}function Vb(n,e,t){const i=n.codec;return i&&i.length>4?i:e===it.AUDIO?i==="ec-3"||i==="ac-3"||i==="alac"?i:i==="fLaC"||i==="Opus"?ou(i,!1):(t.warn(`Unhandled audio codec "${i}" in mp4 MAP`),i||"mp4a"):(t.warn(`Unhandled video codec "${i}" in mp4 MAP`),i||"avc1")}let Kn;try{Kn=self.performance.now.bind(self.performance)}catch{Kn=Date.now}const zc=[{demux:iM,remux:gM},{demux:_s,remux:Gc},{demux:ZO,remux:Gc},{demux:eM,remux:Gc}];zc.splice(2,0,{demux:JO,remux:Gc});class qb{constructor(e,t,i,s,a,l){this.asyncResult=!1,this.logger=void 0,this.observer=void 0,this.typeSupported=void 0,this.config=void 0,this.id=void 0,this.demuxer=void 0,this.remuxer=void 0,this.decrypter=void 0,this.probe=void 0,this.decryptionPromise=null,this.transmuxConfig=void 0,this.currentTransmuxState=void 0,this.observer=e,this.typeSupported=t,this.config=i,this.id=a,this.logger=l}configure(e){this.transmuxConfig=e,this.decrypter&&this.decrypter.reset()}push(e,t,i,s){const a=i.transmuxing;a.executeStart=Kn();let l=new Uint8Array(e);const{currentTransmuxState:c,transmuxConfig:f}=this;s&&(this.currentTransmuxState=s);const{contiguous:d,discontinuity:h,trackSwitch:p,accurateTimeOffset:g,timeOffset:b,initSegmentChange:y}=s||c,{audioCodec:T,videoCodec:x,defaultInitPts:w,duration:S,initSegmentData:A}=f,_=vM(l,t);if(_&&ma(_.method)){const O=this.getDecrypter(),B=Xm(_.method);if(O.isSync()){let N=O.softwareDecrypt(l,_.key.buffer,_.iv.buffer,B);if(i.part>-1){const ee=O.flush();N=ee&&ee.buffer}if(!N)return a.executeEnd=Kn(),Sh(i);l=new Uint8Array(N)}else return this.asyncResult=!0,this.decryptionPromise=O.webCryptoDecrypt(l,_.key.buffer,_.iv.buffer,B).then(N=>{const V=this.push(N,null,i);return this.decryptionPromise=null,V}),this.decryptionPromise}const I=this.needsProbing(h,p);if(I){const O=this.configureTransmuxer(l);if(O)return this.logger.warn(`[transmuxer] ${O.message}`),this.observer.emit(L.ERROR,L.ERROR,{type:Ee.MEDIA_ERROR,details:Q.FRAG_PARSING_ERROR,fatal:!1,error:O,reason:O.message}),a.executeEnd=Kn(),Sh(i)}(h||p||y||I)&&this.resetInitSegment(A,T,x,S,t),(h||y||I)&&this.resetInitialTimestamp(w),d||this.resetContiguity();const P=this.transmux(l,_,b,g,i);this.asyncResult=Bo(P);const C=this.currentTransmuxState;return C.contiguous=!0,C.discontinuity=!1,C.trackSwitch=!1,a.executeEnd=Kn(),P}flush(e){const t=e.transmuxing;t.executeStart=Kn();const{decrypter:i,currentTransmuxState:s,decryptionPromise:a}=this;if(a)return this.asyncResult=!0,a.then(()=>this.flush(e));const l=[],{timeOffset:c}=s;if(i){const p=i.flush();p&&l.push(this.push(p.buffer,null,e))}const{demuxer:f,remuxer:d}=this;if(!f||!d){t.executeEnd=Kn();const p=[Sh(e)];return this.asyncResult?Promise.resolve(p):p}const h=f.flush(c);return Bo(h)?(this.asyncResult=!0,h.then(p=>(this.flushRemux(l,p,e),l))):(this.flushRemux(l,h,e),this.asyncResult?Promise.resolve(l):l)}flushRemux(e,t,i){const{audioTrack:s,videoTrack:a,id3Track:l,textTrack:c}=t,{accurateTimeOffset:f,timeOffset:d}=this.currentTransmuxState;this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${i.sn}${i.part>-1?" part: "+i.part:""} of ${this.id===ge.MAIN?"level":"track"} ${i.level}`);const h=this.remuxer.remux(s,a,l,c,d,f,!0,this.id);e.push({remuxResult:h,chunkMeta:i}),i.transmuxing.executeEnd=Kn()}resetInitialTimestamp(e){const{demuxer:t,remuxer:i}=this;!t||!i||(t.resetTimeStamp(e),i.resetTimeStamp(e))}resetContiguity(){const{demuxer:e,remuxer:t}=this;!e||!t||(e.resetContiguity(),t.resetNextTimestamp())}resetInitSegment(e,t,i,s,a){const{demuxer:l,remuxer:c}=this;!l||!c||(l.resetInitSegment(e,t,i,s),c.resetInitSegment(e,t,i,a))}destroy(){this.demuxer&&(this.demuxer.destroy(),this.demuxer=void 0),this.remuxer&&(this.remuxer.destroy(),this.remuxer=void 0)}transmux(e,t,i,s,a){let l;return t&&t.method==="SAMPLE-AES"?l=this.transmuxSampleAes(e,t,i,s,a):l=this.transmuxUnencrypted(e,i,s,a),l}transmuxUnencrypted(e,t,i,s){const{audioTrack:a,videoTrack:l,id3Track:c,textTrack:f}=this.demuxer.demux(e,t,!1,!this.config.progressive);return{remuxResult:this.remuxer.remux(a,l,c,f,t,i,!1,this.id),chunkMeta:s}}transmuxSampleAes(e,t,i,s,a){return this.demuxer.demuxSampleAes(e,t,i).then(l=>({remuxResult:this.remuxer.remux(l.audioTrack,l.videoTrack,l.id3Track,l.textTrack,i,s,!1,this.id),chunkMeta:a}))}configureTransmuxer(e){const{config:t,observer:i,typeSupported:s}=this;let a;for(let p=0,g=zc.length;p<g;p++){var l;if((l=zc[p].demux)!=null&&l.probe(e,this.logger)){a=zc[p];break}}if(!a)return new Error("Failed to find demuxer by probing fragment data");const c=this.demuxer,f=this.remuxer,d=a.remux,h=a.demux;(!f||!(f instanceof d))&&(this.remuxer=new d(i,t,s,this.logger)),(!c||!(c instanceof h))&&(this.demuxer=new h(i,t,s,this.logger),this.probe=h.probe)}needsProbing(e,t){return!this.demuxer||!this.remuxer||e||t}getDecrypter(){let e=this.decrypter;return e||(e=this.decrypter=new Km(this.config)),e}}function vM(n,e){let t=null;return n.byteLength>0&&e?.key!=null&&e.iv!==null&&e.method!=null&&(t=e),t}const Sh=n=>({remuxResult:{},chunkMeta:n});function Bo(n){return"then"in n&&n.then instanceof Function}class bM{constructor(e,t,i,s,a){this.audioCodec=void 0,this.videoCodec=void 0,this.initSegmentData=void 0,this.duration=void 0,this.defaultInitPts=void 0,this.audioCodec=e,this.videoCodec=t,this.initSegmentData=i,this.duration=s,this.defaultInitPts=a||null}}class EM{constructor(e,t,i,s,a,l){this.discontinuity=void 0,this.contiguous=void 0,this.accurateTimeOffset=void 0,this.trackSwitch=void 0,this.timeOffset=void 0,this.initSegmentChange=void 0,this.discontinuity=e,this.contiguous=t,this.accurateTimeOffset=i,this.trackSwitch=s,this.timeOffset=a,this.initSegmentChange=l}}let Kb=0;class uS{constructor(e,t,i,s){this.error=null,this.hls=void 0,this.id=void 0,this.instanceNo=Kb++,this.observer=void 0,this.frag=null,this.part=null,this.useWorker=void 0,this.workerContext=null,this.transmuxer=null,this.onTransmuxComplete=void 0,this.onFlush=void 0,this.onWorkerMessage=f=>{const d=f.data,h=this.hls;if(!(!h||!(d!=null&&d.event)||d.instanceNo!==this.instanceNo))switch(d.event){case"init":{var p;const g=(p=this.workerContext)==null?void 0:p.objectURL;g&&self.URL.revokeObjectURL(g);break}case"transmuxComplete":{this.handleTransmuxComplete(d.data);break}case"flush":{this.onFlush(d.data);break}case"workerLog":{h.logger[d.data.logType]&&h.logger[d.data.logType](d.data.message);break}default:{d.data=d.data||{},d.data.frag=this.frag,d.data.part=this.part,d.data.id=this.id,h.trigger(d.event,d.data);break}}},this.onWorkerError=f=>{if(!this.hls)return;const d=new Error(`${f.message}  (${f.filename}:${f.lineno})`);this.hls.config.enableWorker=!1,this.hls.logger.warn(`Error in "${this.id}" Web Worker, fallback to inline`),this.hls.trigger(L.ERROR,{type:Ee.OTHER_ERROR,details:Q.INTERNAL_EXCEPTION,fatal:!1,event:"demuxerWorker",error:d})};const a=e.config;this.hls=e,this.id=t,this.useWorker=!!a.enableWorker,this.onTransmuxComplete=i,this.onFlush=s;const l=(f,d)=>{d=d||{},d.frag=this.frag||void 0,f===L.ERROR&&(d=d,d.parent=this.id,d.part=this.part,this.error=d.error),this.hls.trigger(f,d)};this.observer=new Zm,this.observer.on(L.FRAG_DECRYPTED,l),this.observer.on(L.ERROR,l);const c=lb(a.preferManagedMediaSource);if(this.useWorker&&typeof Worker<"u"){const f=this.hls.logger;if(a.workerPath||wO()){try{a.workerPath?(f.log(`loading Web Worker ${a.workerPath} for "${t}"`),this.workerContext=RO(a.workerPath)):(f.log(`injecting Web Worker for "${t}"`),this.workerContext=AO());const{worker:h}=this.workerContext;h.addEventListener("message",this.onWorkerMessage),h.addEventListener("error",this.onWorkerError),h.postMessage({instanceNo:this.instanceNo,cmd:"init",typeSupported:c,id:t,config:st(a)})}catch(h){f.warn(`Error setting up "${t}" Web Worker, fallback to inline`,h),this.terminateWorker(),this.error=null,this.transmuxer=new qb(this.observer,c,a,"",t,e.logger)}return}}this.transmuxer=new qb(this.observer,c,a,"",t,e.logger)}reset(){if(this.frag=null,this.part=null,this.workerContext){const e=this.instanceNo;this.instanceNo=Kb++;const t=this.hls.config,i=lb(t.preferManagedMediaSource);this.workerContext.worker.postMessage({instanceNo:this.instanceNo,cmd:"reset",resetNo:e,typeSupported:i,id:this.id,config:st(t)})}}terminateWorker(){if(this.workerContext){const{worker:e}=this.workerContext;this.workerContext=null,e.removeEventListener("message",this.onWorkerMessage),e.removeEventListener("error",this.onWorkerError),LO(this.hls.config.workerPath)}}destroy(){if(this.workerContext)this.terminateWorker(),this.onWorkerMessage=this.onWorkerError=null;else{const t=this.transmuxer;t&&(t.destroy(),this.transmuxer=null)}const e=this.observer;e&&e.removeAllListeners(),this.frag=null,this.part=null,this.observer=null,this.hls=null}push(e,t,i,s,a,l,c,f,d,h){var p,g;d.transmuxing.start=self.performance.now();const{instanceNo:b,transmuxer:y}=this,T=l?l.start:a.start,x=a.decryptdata,w=this.frag,S=!(w&&a.cc===w.cc),A=!(w&&d.level===w.level),_=w?d.sn-w.sn:-1,I=this.part?d.part-this.part.index:-1,P=_===0&&d.id>1&&d.id===w?.stats.chunkCount,C=!A&&(_===1||_===0&&(I===1||P&&I<=0)),O=self.performance.now();(A||_||a.stats.parsing.start===0)&&(a.stats.parsing.start=O),l&&(I||!C)&&(l.stats.parsing.start=O);const B=!(w&&((p=a.initSegment)==null?void 0:p.url)===((g=w.initSegment)==null?void 0:g.url)),N=new EM(S,C,f,A,T,B);if(!C||S||B){this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${a.type} sn: ${d.sn}${d.part>-1?" part: "+d.part:""} ${this.id===ge.MAIN?"level":"track"}: ${d.level} id: ${d.id}
        discontinuity: ${S}
        trackSwitch: ${A}
        contiguous: ${C}
        accurateTimeOffset: ${f}
        timeOffset: ${T}
        initSegmentChange: ${B}`);const V=new bM(i,s,t,c,h);this.configureTransmuxer(V)}if(this.frag=a,this.part=l,this.workerContext)this.workerContext.worker.postMessage({instanceNo:b,cmd:"demux",data:e,decryptdata:x,chunkMeta:d,state:N},e instanceof ArrayBuffer?[e]:[]);else if(y){const V=y.push(e,x,d,N);Bo(V)?V.then(ee=>{this.handleTransmuxComplete(ee)}).catch(ee=>{this.transmuxerError(ee,d,"transmuxer-interface push error")}):this.handleTransmuxComplete(V)}}flush(e){e.transmuxing.start=self.performance.now();const{instanceNo:t,transmuxer:i}=this;if(this.workerContext)this.workerContext.worker.postMessage({instanceNo:t,cmd:"flush",chunkMeta:e});else if(i){const s=i.flush(e);Bo(s)?s.then(a=>{this.handleFlushResult(a,e)}).catch(a=>{this.transmuxerError(a,e,"transmuxer-interface flush error")}):this.handleFlushResult(s,e)}}transmuxerError(e,t,i){this.hls&&(this.error=e,this.hls.trigger(L.ERROR,{type:Ee.MEDIA_ERROR,details:Q.FRAG_PARSING_ERROR,chunkMeta:t,frag:this.frag||void 0,part:this.part||void 0,fatal:!1,error:e,err:e,reason:i}))}handleFlushResult(e,t){e.forEach(i=>{this.handleTransmuxComplete(i)}),this.onFlush(t)}configureTransmuxer(e){const{instanceNo:t,transmuxer:i}=this;this.workerContext?this.workerContext.worker.postMessage({instanceNo:t,cmd:"configure",config:e}):i&&i.configure(e)}handleTransmuxComplete(e){e.chunkMeta.transmuxing.end=self.performance.now(),this.onTransmuxComplete(e)}}const Yb=100;class xM extends Qm{constructor(e,t,i){super(e,t,i,"audio-stream-controller",ge.AUDIO),this.mainAnchor=null,this.mainFragLoading=null,this.audioOnly=!1,this.bufferedTrack=null,this.switchingTrack=null,this.trackId=-1,this.waitingData=null,this.mainDetails=null,this.flushing=!1,this.bufferFlushed=!1,this.cachedTrackLoadedData=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.resetItem()}resetItem(){this.mainDetails=this.mainAnchor=this.mainFragLoading=this.bufferedTrack=this.switchingTrack=this.waitingData=this.cachedTrackLoadedData=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(L.LEVEL_LOADED,this.onLevelLoaded,this),e.on(L.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.on(L.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(L.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(L.BUFFER_RESET,this.onBufferReset,this),e.on(L.BUFFER_CREATED,this.onBufferCreated,this),e.on(L.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(L.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(L.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(L.FRAG_LOADING,this.onFragLoading,this),e.on(L.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){const{hls:e}=this;e&&(super.unregisterListeners(),e.off(L.LEVEL_LOADED,this.onLevelLoaded,this),e.off(L.AUDIO_TRACKS_UPDATED,this.onAudioTracksUpdated,this),e.off(L.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(L.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(L.BUFFER_RESET,this.onBufferReset,this),e.off(L.BUFFER_CREATED,this.onBufferCreated,this),e.off(L.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(L.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(L.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(L.FRAG_LOADING,this.onFragLoading,this),e.off(L.FRAG_BUFFERED,this.onFragBuffered,this))}onInitPtsFound(e,{frag:t,id:i,initPTS:s,timescale:a,trackId:l}){if(i===ge.MAIN){const c=t.cc,f=this.fragCurrent;if(this.initPTS[c]={baseTime:s,timescale:a,trackId:l},this.log(`InitPTS for cc: ${c} found from main: ${s/a} (${s}/${a}) trackId: ${l}`),this.mainAnchor=t,this.state===le.WAITING_INIT_PTS){const d=this.waitingData;(!d&&!this.loadingParts||d&&d.frag.cc!==c)&&this.syncWithAnchor(t,d?.frag)}else!this.hls.hasEnoughToStart&&f&&f.cc!==c?(f.abortRequests(),this.syncWithAnchor(t,f)):this.state===le.IDLE&&this.tick()}}getLoadPosition(){return!this.startFragRequested&&this.nextLoadPosition>=0?this.nextLoadPosition:super.getLoadPosition()}syncWithAnchor(e,t){var i;const s=((i=this.mainFragLoading)==null?void 0:i.frag)||null;if(t&&s?.cc===t.cc)return;const a=(s||e).cc,l=this.getLevelDetails(),c=this.getLoadPosition(),f=RT(l,a,c);f&&(this.log(`Syncing with main frag at ${f.start} cc ${f.cc}`),this.startFragRequested=!1,this.nextLoadPosition=f.start,this.resetLoadingState(),this.state===le.IDLE&&this.doTickIdle())}startLoad(e,t){if(!this.levels){this.startPosition=e,this.state=le.STOPPED;return}const i=this.lastCurrentTime;this.stopLoad(),this.setInterval(Yb),i>0&&e===-1?(this.log(`Override startPosition with lastCurrentTime @${i.toFixed(3)}`),e=i,this.state=le.IDLE):this.state=le.WAITING_TRACK,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}doTick(){switch(this.state){case le.IDLE:this.doTickIdle();break;case le.WAITING_TRACK:{const{levels:e,trackId:t}=this,i=e?.[t],s=i?.details;if(s&&!this.waitForLive(i)){if(this.waitForCdnTuneIn(s))break;this.state=le.WAITING_INIT_PTS}break}case le.FRAG_LOADING_WAITING_RETRY:{this.checkRetryDate();break}case le.WAITING_INIT_PTS:{const e=this.waitingData;if(e){const{frag:t,part:i,cache:s,complete:a}=e,l=this.mainAnchor;if(this.initPTS[t.cc]!==void 0){this.waitingData=null,this.state=le.FRAG_LOADING;const c=s.flush().buffer,f={frag:t,part:i,payload:c,networkDetails:null};this._handleFragmentLoadProgress(f),a&&super._handleFragmentLoadComplete(f)}else l&&l.cc!==e.frag.cc&&this.syncWithAnchor(l,e.frag)}else this.state=le.IDLE}}this.onTickEnd()}resetLoadingState(){const e=this.waitingData;e&&(this.fragmentTracker.removeFragment(e.frag),this.waitingData=null),super.resetLoadingState()}onTickEnd(){const{media:e}=this;e!=null&&e.readyState&&(this.lastCurrentTime=e.currentTime)}doTickIdle(){var e;const{hls:t,levels:i,media:s,trackId:a}=this,l=t.config;if(!this.buffering||!s&&!this.primaryPrefetch&&(this.startFragRequested||!l.startFragPrefetch)||!(i!=null&&i[a]))return;const c=i[a],f=c.details;if(!f||this.waitForLive(c)||this.waitForCdnTuneIn(f)){this.state=le.WAITING_TRACK,this.startFragRequested=!1;return}const d=this.mediaBuffer?this.mediaBuffer:this.media;this.bufferFlushed&&d&&(this.bufferFlushed=!1,this.afterBufferFlushed(d,it.AUDIO,ge.AUDIO));const h=this.getFwdBufferInfo(d,ge.AUDIO);if(h===null)return;if(!this.switchingTrack&&this._streamEnded(h,f)){t.trigger(L.BUFFER_EOS,{type:"audio"}),this.state=le.ENDED;return}const p=h.len,g=t.maxBufferLength,b=f.fragments,y=b[0].start,T=this.getLoadPosition(),x=this.flushing?T:h.end;if(this.switchingTrack&&s){const A=T;f.PTSKnown&&A<y&&(h.end>y||h.nextStart)&&(this.log("Alt audio track ahead of main track, seek to start of alt audio track"),s.currentTime=y+.05)}if(p>=g&&!this.switchingTrack&&x<b[b.length-1].start)return;let w=this.getNextFragment(x,f);if(w&&this.isLoopLoading(w,x)&&(w=this.getNextFragmentLoopLoading(w,f,h,ge.MAIN,g)),!w){this.bufferFlushed=!0;return}let S=((e=this.mainFragLoading)==null?void 0:e.frag)||null;if(!this.audioOnly&&this.startFragRequested&&S&&wt(w)&&!w.endList&&(!f.live||!this.loadingParts&&x<this.hls.liveSyncPosition)&&(this.fragmentTracker.getState(S)===Mt.OK&&(this.mainFragLoading=S=null),S&&wt(S))){if(w.start>S.end){const _=this.fragmentTracker.getFragAtPos(x,ge.MAIN);_&&_.end>S.end&&(S=_,this.mainFragLoading={frag:_,targetBufferTime:null})}if(w.start>S.end)return}this.loadFragment(w,c,x)}onMediaDetaching(e,t){this.bufferFlushed=this.flushing=!1,super.onMediaDetaching(e,t)}onAudioTracksUpdated(e,{audioTracks:t}){this.resetTransmuxer(),this.levels=t.map(i=>new Mo(i))}onAudioTrackSwitching(e,t){const i=!!t.url;this.trackId=t.id;const{fragCurrent:s}=this;s&&(s.abortRequests(),this.removeUnbufferedFrags(s.start)),this.resetLoadingState(),i?(this.switchingTrack=t,this.flushAudioIfNeeded(t),this.state!==le.STOPPED&&(this.setInterval(Yb),this.state=le.IDLE,this.tick())):(this.resetTransmuxer(),this.switchingTrack=null,this.bufferedTrack=t,this.clearInterval())}onManifestLoading(){super.onManifestLoading(),this.bufferFlushed=this.flushing=this.audioOnly=!1,this.resetItem(),this.trackId=-1}onLevelLoaded(e,t){this.mainDetails=t.details;const i=this.cachedTrackLoadedData;i&&(this.cachedTrackLoadedData=null,this.onAudioTrackLoaded(L.AUDIO_TRACK_LOADED,i))}onAudioTrackLoaded(e,t){var i;const{levels:s}=this,{details:a,id:l,groupId:c,track:f}=t;if(!s){this.warn(`Audio tracks reset while loading track ${l} "${f.name}" of "${c}"`);return}const d=this.mainDetails;if(!d||a.endCC>d.endCC||d.expired){this.cachedTrackLoadedData=t,this.state!==le.STOPPED&&(this.state=le.WAITING_TRACK);return}this.cachedTrackLoadedData=null,this.log(`Audio track ${l} "${f.name}" of "${c}" loaded [${a.startSN},${a.endSN}]${a.lastPartSn?`[part-${a.lastPartSn}-${a.lastPartIndex}]`:""},duration:${a.totalduration}`);const h=s[l];let p=0;if(a.live||(i=h.details)!=null&&i.live){if(this.checkLiveUpdate(a),a.deltaUpdateFailed)return;if(h.details){var g;p=this.alignPlaylists(a,h.details,(g=this.levelLastLoaded)==null?void 0:g.details)}a.alignedSliding||(zT(a,d),a.alignedSliding||mu(a,d),p=a.fragmentStart)}h.details=a,this.levelLastLoaded=h,this.startFragRequested||this.setStartPosition(d,p),this.hls.trigger(L.AUDIO_TRACK_UPDATED,{details:a,id:l,groupId:t.groupId}),this.state===le.WAITING_TRACK&&!this.waitForCdnTuneIn(a)&&(this.state=le.IDLE),this.tick()}_handleFragmentLoadProgress(e){var t;const i=e.frag,{part:s,payload:a}=e,{config:l,trackId:c,levels:f}=this;if(!f){this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);return}const d=f[c];if(!d){this.warn("Audio track is undefined on fragment load progress");return}const h=d.details;if(!h){this.warn("Audio track details undefined on fragment load progress"),this.removeUnbufferedFrags(i.start);return}const p=l.defaultAudioCodec||d.audioCodec||"mp4a.40.2";let g=this.transmuxer;g||(g=this.transmuxer=new uS(this.hls,ge.AUDIO,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)));const b=this.initPTS[i.cc],y=(t=i.initSegment)==null?void 0:t.data;if(b!==void 0){const x=s?s.index:-1,w=x!==-1,S=new Ym(i.level,i.sn,i.stats.chunkCount,a.byteLength,x,w);g.push(a,y,p,"",i,s,h.totalduration,!1,S,b)}else{this.log(`Unknown video PTS for cc ${i.cc}, waiting for video PTS before demuxing audio frag ${i.sn} of [${h.startSN} ,${h.endSN}],track ${c}`);const{cache:T}=this.waitingData=this.waitingData||{frag:i,part:s,cache:new VT,complete:!1};T.push(new Uint8Array(a)),this.state!==le.STOPPED&&(this.state=le.WAITING_INIT_PTS)}}_handleFragmentLoadComplete(e){if(this.waitingData){this.waitingData.complete=!0;return}super._handleFragmentLoadComplete(e)}onBufferReset(){this.mediaBuffer=null}onBufferCreated(e,t){this.bufferFlushed=this.flushing=!1;const i=t.tracks.audio;i&&(this.mediaBuffer=i.buffer||null)}onFragLoading(e,t){!this.audioOnly&&t.frag.type===ge.MAIN&&wt(t.frag)&&(this.mainFragLoading=t,this.state===le.IDLE&&this.tick())}onFragBuffered(e,t){const{frag:i,part:s}=t;if(i.type!==ge.AUDIO){!this.audioOnly&&i.type===ge.MAIN&&!i.elementaryStreams.video&&!i.elementaryStreams.audiovideo&&(this.audioOnly=!0,this.mainFragLoading=null);return}if(this.fragContextChanged(i)){this.warn(`Fragment ${i.sn}${s?" p: "+s.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack?this.switchingTrack.name:"false"}`);return}if(wt(i)){this.fragPrevious=i;const a=this.switchingTrack;a&&(this.bufferedTrack=a,this.switchingTrack=null,this.hls.trigger(L.AUDIO_TRACK_SWITCHED,Xe({},a)))}this.fragBufferedComplete(i,s),this.media&&this.tick()}onError(e,t){var i;if(t.fatal){this.state=le.ERROR;return}switch(t.details){case Q.FRAG_GAP:case Q.FRAG_PARSING_ERROR:case Q.FRAG_DECRYPT_ERROR:case Q.FRAG_LOAD_ERROR:case Q.FRAG_LOAD_TIMEOUT:case Q.KEY_LOAD_ERROR:case Q.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(ge.AUDIO,t);break;case Q.AUDIO_TRACK_LOAD_ERROR:case Q.AUDIO_TRACK_LOAD_TIMEOUT:case Q.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===le.WAITING_TRACK&&((i=t.context)==null?void 0:i.type)===Pe.AUDIO_TRACK&&(this.state=le.IDLE);break;case Q.BUFFER_ADD_CODEC_ERROR:case Q.BUFFER_APPEND_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)||this.resetLoadingState();break;case Q.BUFFER_FULL_ERROR:if(t.parent!=="audio")return;this.reduceLengthAndFlushBuffer(t)&&(this.bufferedTrack=null,super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"));break;case Q.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onBufferFlushing(e,{type:t}){t!==it.VIDEO&&(this.flushing=!0)}onBufferFlushed(e,{type:t}){if(t!==it.VIDEO){this.flushing=!1,this.bufferFlushed=!0,this.state===le.ENDED&&(this.state=le.IDLE);const i=this.mediaBuffer||this.media;i&&(this.afterBufferFlushed(i,t,ge.AUDIO),this.tick())}}_handleTransmuxComplete(e){var t;const i="audio",{hls:s}=this,{remuxResult:a,chunkMeta:l}=e,c=this.getCurrentContext(l);if(!c){this.resetWhenMissingContext(l);return}const{frag:f,part:d,level:h}=c,{details:p}=h,{audio:g,text:b,id3:y,initSegment:T}=a;if(this.fragContextChanged(f)||!p){this.fragmentTracker.removeFragment(f);return}if(this.state=le.PARSING,this.switchingTrack&&g&&this.completeAudioSwitch(this.switchingTrack),T!=null&&T.tracks){const x=f.initSegment||f;if(this.unhandledEncryptionError(T,f))return;this._bufferInitSegment(h,T.tracks,x,l),s.trigger(L.FRAG_PARSING_INIT_SEGMENT,{frag:x,id:i,tracks:T.tracks})}if(g){const{startPTS:x,endPTS:w,startDTS:S,endDTS:A}=g;d&&(d.elementaryStreams[it.AUDIO]={startPTS:x,endPTS:w,startDTS:S,endDTS:A}),f.setElementaryStreamInfo(it.AUDIO,x,w,S,A),this.bufferFragmentData(g,f,d,l)}if(y!=null&&(t=y.samples)!=null&&t.length){const x=et({id:i,frag:f,details:p},y);s.trigger(L.FRAG_PARSING_METADATA,x)}if(b){const x=et({id:i,frag:f,details:p},b);s.trigger(L.FRAG_PARSING_USERDATA,x)}}_bufferInitSegment(e,t,i,s){if(this.state!==le.PARSING||(t.video&&delete t.video,t.audiovideo&&delete t.audiovideo,!t.audio))return;const a=t.audio;a.id=ge.AUDIO;const l=e.audioCodec;this.log(`Init audio buffer, container:${a.container}, codecs[level/parsed]=[${l}/${a.codec}]`),l&&l.split(",").length===1&&(a.levelCodec=l),this.hls.trigger(L.BUFFER_CODECS,t);const c=a.initSegment;if(c!=null&&c.byteLength){const f={type:"audio",frag:i,part:null,chunkMeta:s,parent:i.type,data:c};this.hls.trigger(L.BUFFER_APPENDING,f)}this.tickImmediate()}loadFragment(e,t,i){const s=this.fragmentTracker.getState(e);if(this.switchingTrack||s===Mt.NOT_LOADED||s===Mt.PARTIAL){var a;if(!wt(e))this._loadInitSegment(e,t);else if((a=t.details)!=null&&a.live&&!this.initPTS[e.cc]){this.log(`Waiting for video PTS in continuity counter ${e.cc} of live stream before loading audio fragment ${e.sn} of level ${this.trackId}`),this.state=le.WAITING_INIT_PTS;const l=this.mainDetails;l&&l.fragmentStart!==t.details.fragmentStart&&mu(t.details,l)}else super.loadFragment(e,t,i)}else this.clearTrackerIfNeeded(e)}flushAudioIfNeeded(e){if(this.media&&this.bufferedTrack){const{name:t,lang:i,assocLang:s,characteristics:a,audioCodec:l,channels:c}=this.bufferedTrack;fr({name:t,lang:i,assocLang:s,characteristics:a,audioCodec:l,channels:c},e,ar)||(cu(e.url,this.hls)?(this.log("Switching audio track : flushing all audio"),super.flushMainBuffer(0,Number.POSITIVE_INFINITY,"audio"),this.bufferedTrack=null):this.bufferedTrack=e)}}completeAudioSwitch(e){const{hls:t}=this;this.flushAudioIfNeeded(e),this.bufferedTrack=e,this.switchingTrack=null,t.trigger(L.AUDIO_TRACK_SWITCHED,Xe({},e))}}class rp extends Zi{constructor(e,t){super(t,e.logger),this.hls=void 0,this.canLoad=!1,this.timer=-1,this.hls=e}destroy(){this.clearTimer(),this.hls=this.log=this.warn=null}clearTimer(){this.timer!==-1&&(self.clearTimeout(this.timer),this.timer=-1)}startLoad(){this.canLoad=!0,this.loadPlaylist()}stopLoad(){this.canLoad=!1,this.clearTimer()}switchParams(e,t,i){const s=t?.renditionReports;if(s){let a=-1;for(let l=0;l<s.length;l++){const c=s[l];let f;try{f=new self.URL(c.URI,t.url).href}catch(d){this.warn(`Could not construct new URL for Rendition Report: ${d}`),f=c.URI||""}if(f===e){a=l;break}else f===e.substring(0,f.length)&&(a=l)}if(a!==-1){const l=s[a],c=parseInt(l["LAST-MSN"])||t.lastPartSn;let f=parseInt(l["LAST-PART"])||t.lastPartIndex;if(this.hls.config.lowLatencyMode){const h=Math.min(t.age-t.partTarget,t.targetduration);f>=0&&h>t.partTarget&&(f+=1)}const d=i&&cb(i);return new ub(c,f>=0?f:void 0,d)}}}loadPlaylist(e){this.clearTimer()}loadingPlaylist(e,t){this.clearTimer()}shouldLoadPlaylist(e){return this.canLoad&&!!e&&!!e.url&&(!e.details||e.details.live)}getUrlWithDirectives(e,t){if(t)try{return t.addDirectives(e)}catch(i){this.warn(`Could not construct new URL with HLS Delivery Directives: ${i}`)}return e}playlistLoaded(e,t,i){const{details:s,stats:a}=t,l=self.performance.now(),c=a.loading.first?Math.max(0,l-a.loading.first):0;s.advancedDateTime=Date.now()-c;const f=this.hls.config.timelineOffset;if(f!==s.appliedTimelineOffset){const h=Math.max(f||0,0);s.appliedTimelineOffset=h,s.fragments.forEach(p=>{p.setStart(p.playlistOffset+h)})}if(s.live||i!=null&&i.live){const h="levelInfo"in t?t.levelInfo:t.track;if(s.reloaded(i),i&&s.fragments.length>0){hO(i,s,this);const S=s.playlistParsingError;if(S){this.warn(S);const A=this.hls;if(!A.config.ignorePlaylistParsingErrors){var d;const{networkDetails:_}=t;A.trigger(L.ERROR,{type:Ee.NETWORK_ERROR,details:Q.LEVEL_PARSING_ERROR,fatal:!1,url:s.url,error:S,reason:S.message,level:t.level||void 0,parent:(d=s.fragments[0])==null?void 0:d.type,networkDetails:_,stats:a});return}s.playlistParsingError=null}}s.requestScheduled===-1&&(s.requestScheduled=a.loading.start);const p=this.hls.mainForwardBufferInfo,g=p?p.end-p.len:0,b=(s.edge-g)*1e3,y=UT(s,b);if(s.requestScheduled+y<l?s.requestScheduled=l:s.requestScheduled+=y,this.log(`live playlist ${e} ${s.advanced?"REFRESHED "+s.lastPartSn+"-"+s.lastPartIndex:s.updated?"UPDATED":"MISSED"}`),!this.canLoad||!s.live)return;let T,x,w;if(s.canBlockReload&&s.endSN&&s.advanced){const S=this.hls.config.lowLatencyMode,A=s.lastPartSn,_=s.endSN,I=s.lastPartIndex,P=I!==-1,C=A===_;P?C?(x=_+1,w=S?0:I):(x=A,w=S?I+1:s.maxPartIndex):x=_+1;const O=s.age,B=O+s.ageHeader;let N=Math.min(B-s.partTarget,s.targetduration*1.5);if(N>0){if(B>s.targetduration*3)this.log(`Playlist last advanced ${O.toFixed(2)}s ago. Omitting segment and part directives.`),x=void 0,w=void 0;else if(i!=null&&i.tuneInGoal&&B-s.partTarget>i.tuneInGoal)this.warn(`CDN Tune-in goal increased from: ${i.tuneInGoal} to: ${N} with playlist age: ${s.age}`),N=0;else{const V=Math.floor(N/s.targetduration);if(x+=V,w!==void 0){const ee=Math.round(N%s.targetduration/s.partTarget);w+=ee}this.log(`CDN Tune-in age: ${s.ageHeader}s last advanced ${O.toFixed(2)}s goal: ${N} skip sn ${V} to part ${w}`)}s.tuneInGoal=N}if(T=this.getDeliveryDirectives(s,t.deliveryDirectives,x,w),S||!C){s.requestScheduled=l,this.loadingPlaylist(h,T);return}}else(s.canBlockReload||s.canSkipUntil)&&(T=this.getDeliveryDirectives(s,t.deliveryDirectives,x,w));T&&x!==void 0&&s.canBlockReload&&(s.requestScheduled=a.loading.first+Math.max(y-c*2,y/2)),this.scheduleLoading(h,T,s)}else this.clearTimer()}scheduleLoading(e,t,i){const s=i||e.details;if(!s){this.loadingPlaylist(e,t);return}const a=self.performance.now(),l=s.requestScheduled;if(a>=l){this.loadingPlaylist(e,t);return}const c=l-a;this.log(`reload live playlist ${e.name||e.bitrate+"bps"} in ${Math.round(c)} ms`),this.clearTimer(),this.timer=self.setTimeout(()=>this.loadingPlaylist(e,t),c)}getDeliveryDirectives(e,t,i,s){let a=cb(e);return t!=null&&t.skip&&e.deltaUpdateFailed&&(i=t.msn,s=t.part,a=jc.No),new ub(i,s,a)}checkRetry(e){const t=e.details,i=uu(e),s=e.errorAction,{action:a,retryCount:l=0,retryConfig:c}=s||{},f=!!s&&!!c&&(a===qt.RetryRequest||!s.resolved&&a===qt.SendAlternateToPenaltyBox);if(f){var d;if(l>=c.maxNumRetry)return!1;if(i&&(d=e.context)!=null&&d.deliveryDirectives)this.warn(`Retrying playlist loading ${l+1}/${c.maxNumRetry} after "${t}" without delivery-directives`),this.loadPlaylist();else{const h=qm(c,l);this.clearTimer(),this.timer=self.setTimeout(()=>this.loadPlaylist(),h),this.warn(`Retrying playlist loading ${l+1}/${c.maxNumRetry} after "${t}" in ${h}ms`)}e.levelRetry=!0,s.resolved=!0}return f}}function dS(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(!Fo(n[t].attrs,e[t].attrs))return!1;return!0}function Fo(n,e,t){const i=n["STABLE-RENDITION-ID"];return i&&!t?i===e["STABLE-RENDITION-ID"]:!(t||["LANGUAGE","NAME","CHARACTERISTICS","AUTOSELECT","DEFAULT","FORCED","ASSOC-LANGUAGE"]).some(s=>n[s]!==e[s])}function am(n,e){return e.label.toLowerCase()===n.name.toLowerCase()&&(!e.language||e.language.toLowerCase()===(n.lang||"").toLowerCase())}class TM extends rp{constructor(e){super(e,"audio-track-controller"),this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.registerListeners()}registerListeners(){const{hls:e}=this;e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.MANIFEST_PARSED,this.onManifestParsed,this),e.on(L.LEVEL_LOADING,this.onLevelLoading,this),e.on(L.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(L.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.on(L.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.MANIFEST_PARSED,this.onManifestParsed,this),e.off(L.LEVEL_LOADING,this.onLevelLoading,this),e.off(L.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(L.AUDIO_TRACK_LOADED,this.onAudioTrackLoaded,this),e.off(L.ERROR,this.onError,this)}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,super.destroy()}onManifestLoading(){this.tracks=[],this.tracksInGroup=[],this.groupIds=null,this.currentTrack=null,this.trackId=-1,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.audioTracks||[]}onAudioTrackLoaded(e,t){const{id:i,groupId:s,details:a}=t,l=this.tracksInGroup[i];if(!l||l.groupId!==s){this.warn(`Audio track with id:${i} and group:${s} not found in active group ${l?.groupId}`);return}const c=l.details;l.details=t.details,this.log(`Audio track ${i} "${l.name}" lang:${l.lang} group:${s} loaded [${a.startSN}-${a.endSN}]`),i===this.trackId&&this.playlistLoaded(i,t,c)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const i=t.audioGroups||null,s=this.groupIds;let a=this.currentTrack;if(!i||s?.length!==i?.length||i!=null&&i.some(c=>s?.indexOf(c)===-1)){this.groupIds=i,this.trackId=-1,this.currentTrack=null;const c=this.tracks.filter(g=>!i||i.indexOf(g.groupId)!==-1);if(c.length)this.selectDefaultTrack&&!c.some(g=>g.default)&&(this.selectDefaultTrack=!1),c.forEach((g,b)=>{g.id=b});else if(!a&&!this.tracksInGroup.length)return;this.tracksInGroup=c;const f=this.hls.config.audioPreference;if(!a&&f){const g=vn(f,c,ar);if(g>-1)a=c[g];else{const b=vn(f,this.tracks);a=this.tracks[b]}}let d=this.findTrackId(a);d===-1&&a&&(d=this.findTrackId(null));const h={audioTracks:c};this.log(`Updating audio tracks, ${c.length} track(s) found in group(s): ${i?.join(",")}`),this.hls.trigger(L.AUDIO_TRACKS_UPDATED,h);const p=this.trackId;if(d!==-1&&p===-1)this.setAudioTrack(d);else if(c.length&&p===-1){var l;const g=new Error(`No audio track selected for current audio group-ID(s): ${(l=this.groupIds)==null?void 0:l.join(",")} track count: ${c.length}`);this.warn(g.message),this.hls.trigger(L.ERROR,{type:Ee.MEDIA_ERROR,details:Q.AUDIO_TRACK_LOAD_ERROR,fatal:!0,error:g})}}}onError(e,t){t.fatal||!t.context||t.context.type===Pe.AUDIO_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allAudioTracks(){return this.tracks}get audioTracks(){return this.tracksInGroup}get audioTrack(){return this.trackId}set audioTrack(e){this.selectDefaultTrack=!1,this.setAudioTrack(e)}setAudioOption(e){const t=this.hls;if(t.config.audioPreference=e,e){const i=this.allAudioTracks;if(this.selectDefaultTrack=!1,i.length){const s=this.currentTrack;if(s&&fr(e,s,ar))return s;const a=vn(e,this.tracksInGroup,ar);if(a>-1){const l=this.tracksInGroup[a];return this.setAudioTrack(a),l}else if(s){let l=t.loadLevel;l===-1&&(l=t.firstAutoLevel);const c=Mk(e,t.levels,i,l,ar);if(c===-1)return null;t.nextLoadLevel=c}if(e.channels||e.audioCodec){const l=vn(e,i);if(l>-1)return i[l]}}}return null}setAudioTrack(e){const t=this.tracksInGroup;if(e<0||e>=t.length){this.warn(`Invalid audio track id: ${e}`);return}this.selectDefaultTrack=!1;const i=this.currentTrack,s=t[e],a=s.details&&!s.details.live;if(e===this.trackId&&s===i&&a||(this.log(`Switching to audio-track ${e} "${s.name}" lang:${s.lang} group:${s.groupId} channels:${s.channels}`),this.trackId=e,this.currentTrack=s,this.hls.trigger(L.AUDIO_TRACK_SWITCHING,Xe({},s)),a))return;const l=this.switchParams(s.url,i?.details,s.details);this.loadPlaylist(l)}findTrackId(e){const t=this.tracksInGroup;for(let i=0;i<t.length;i++){const s=t[i];if(!(this.selectDefaultTrack&&!s.default)&&(!e||fr(e,s,ar)))return i}if(e){const{name:i,lang:s,assocLang:a,characteristics:l,audioCodec:c,channels:f}=e;for(let d=0;d<t.length;d++){const h=t[d];if(fr({name:i,lang:s,assocLang:a,characteristics:l,audioCodec:c,channels:f},h,ar))return d}for(let d=0;d<t.length;d++){const h=t[d];if(Fo(e.attrs,h.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return d}for(let d=0;d<t.length;d++){const h=t[d];if(Fo(e.attrs,h.attrs,["LANGUAGE"]))return d}}return-1}loadPlaylist(e){super.loadPlaylist();const t=this.currentTrack;this.shouldLoadPlaylist(t)&&cu(t.url,this.hls)&&this.scheduleLoading(t,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const i=e.id,s=e.groupId,a=this.getUrlWithDirectives(e.url,t),l=e.details,c=l?.age;this.log(`Loading audio-track ${i} "${e.name}" lang:${e.lang} group:${s}${t?.msn!==void 0?" at sn "+t.msn+" part "+t.part:""}${c&&l.live?" age "+c.toFixed(1)+(l.type&&" "+l.type||""):""} ${a}`),this.hls.trigger(L.AUDIO_TRACK_LOADING,{url:a,id:i,groupId:s,deliveryDirectives:t||null,track:e})}}class SM{constructor(e){this.tracks=void 0,this.queues={video:[],audio:[],audiovideo:[]},this.tracks=e}destroy(){this.tracks=this.queues=null}append(e,t,i){if(this.queues===null||this.tracks===null)return;const s=this.queues[t];s.push(e),s.length===1&&!i&&this.executeNext(t)}appendBlocker(e){return new Promise(t=>{const i={label:"async-blocker",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.append(i,e)})}prependBlocker(e){return new Promise(t=>{if(this.queues){const i={label:"async-blocker-prepend",execute:t,onStart:()=>{},onComplete:()=>{},onError:()=>{}};this.queues[e].unshift(i)}})}removeBlockers(){this.queues!==null&&[this.queues.video,this.queues.audio,this.queues.audiovideo].forEach(e=>{var t;const i=(t=e[0])==null?void 0:t.label;(i==="async-blocker"||i==="async-blocker-prepend")&&(e[0].execute(),e.splice(0,1))})}unblockAudio(e){if(this.queues===null)return;this.queues.audio[0]===e&&this.shiftAndExecuteNext("audio")}executeNext(e){if(this.queues===null||this.tracks===null)return;const t=this.queues[e];if(t.length){const s=t[0];try{s.execute()}catch(a){var i;if(s.onError(a),this.queues===null||this.tracks===null)return;const l=(i=this.tracks[e])==null?void 0:i.buffer;l!=null&&l.updating||this.shiftAndExecuteNext(e)}}}shiftAndExecuteNext(e){this.queues!==null&&(this.queues[e].shift(),this.executeNext(e))}current(e){var t;return((t=this.queues)==null?void 0:t[e][0])||null}toString(){const{queues:e,tracks:t}=this;return e===null||t===null?"<destroyed>":`
${this.list("video")}
${this.list("audio")}
${this.list("audiovideo")}}`}list(e){var t,i;return(t=this.queues)!=null&&t[e]||(i=this.tracks)!=null&&i[e]?`${e}: (${this.listSbInfo(e)}) ${this.listOps(e)}`:""}listSbInfo(e){var t;const i=(t=this.tracks)==null?void 0:t[e],s=i?.buffer;return s?`SourceBuffer${s.updating?" updating":""}${i.ended?" ended":""}${i.ending?" ending":""}`:"none"}listOps(e){var t;return((t=this.queues)==null?void 0:t[e].map(i=>i.label).join(", "))||""}}const Xb=/(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\.[^.,]+)+/,fS="HlsJsTrackRemovedError";class wM extends Error{constructor(e){super(e),this.name=fS}}class AM extends Zi{constructor(e,t){super("buffer-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.details=null,this._objectUrl=null,this.operationQueue=null,this.bufferCodecEventsTotal=0,this.media=null,this.mediaSource=null,this.lastMpegAudioChunk=null,this.blockedAudioAppend=null,this.lastVideoAppendEnd=0,this.appendSource=void 0,this.transferData=void 0,this.overrides=void 0,this.appendErrors={audio:0,video:0,audiovideo:0},this.tracks={},this.sourceBuffers=[[null,null],[null,null]],this._onEndStreaming=i=>{var s;this.hls&&((s=this.mediaSource)==null?void 0:s.readyState)==="open"&&this.hls.pauseBuffering()},this._onStartStreaming=i=>{this.hls&&this.hls.resumeBuffering()},this._onMediaSourceOpen=i=>{const{media:s,mediaSource:a}=this;i&&this.log("Media source opened"),!(!s||!a)&&(a.removeEventListener("sourceopen",this._onMediaSourceOpen),s.removeEventListener("emptied",this._onMediaEmptied),this.updateDuration(),this.hls.trigger(L.MEDIA_ATTACHED,{media:s,mediaSource:a}),this.mediaSource!==null&&this.checkPendingTracks())},this._onMediaSourceClose=()=>{this.log("Media source closed")},this._onMediaSourceEnded=()=>{this.log("Media source ended")},this._onMediaEmptied=()=>{const{mediaSrc:i,_objectUrl:s}=this;i!==s&&this.error(`Media element src was set while attaching MediaSource (${s} > ${i})`)},this.hls=e,this.fragmentTracker=t,this.appendSource=KD(Os(e.config.preferManagedMediaSource)),this.initTracks(),this.registerListeners()}hasSourceTypes(){return Object.keys(this.tracks).length>0}destroy(){this.unregisterListeners(),this.details=null,this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.transferData=this.overrides=void 0,this.operationQueue&&(this.operationQueue.destroy(),this.operationQueue=null),this.hls=this.fragmentTracker=null,this._onMediaSourceOpen=this._onMediaSourceClose=null,this._onMediaSourceEnded=null,this._onStartStreaming=this._onEndStreaming=null}registerListeners(){const{hls:e}=this;e.on(L.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.MANIFEST_PARSED,this.onManifestParsed,this),e.on(L.BUFFER_RESET,this.onBufferReset,this),e.on(L.BUFFER_APPENDING,this.onBufferAppending,this),e.on(L.BUFFER_CODECS,this.onBufferCodecs,this),e.on(L.BUFFER_EOS,this.onBufferEos,this),e.on(L.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(L.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(L.FRAG_PARSED,this.onFragParsed,this),e.on(L.FRAG_CHANGED,this.onFragChanged,this),e.on(L.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(L.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.MANIFEST_PARSED,this.onManifestParsed,this),e.off(L.BUFFER_RESET,this.onBufferReset,this),e.off(L.BUFFER_APPENDING,this.onBufferAppending,this),e.off(L.BUFFER_CODECS,this.onBufferCodecs,this),e.off(L.BUFFER_EOS,this.onBufferEos,this),e.off(L.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(L.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(L.FRAG_PARSED,this.onFragParsed,this),e.off(L.FRAG_CHANGED,this.onFragChanged,this),e.off(L.ERROR,this.onError,this)}transferMedia(){const{media:e,mediaSource:t}=this;if(!e)return null;const i={};if(this.operationQueue){const a=this.isUpdating();a||this.operationQueue.removeBlockers();const l=this.isQueued();(a||l)&&this.warn(`Transfering MediaSource with${l?" operations in queue":""}${a?" updating SourceBuffer(s)":""} ${this.operationQueue}`),this.operationQueue.destroy()}const s=this.transferData;return!this.sourceBufferCount&&s&&s.mediaSource===t?et(i,s.tracks):this.sourceBuffers.forEach(a=>{const[l]=a;l&&(i[l]=et({},this.tracks[l]),this.removeBuffer(l)),a[0]=a[1]=null}),{media:e,mediaSource:t,tracks:i}}initTracks(){const e={};this.sourceBuffers=[[null,null],[null,null]],this.tracks=e,this.resetQueue(),this.resetAppendErrors(),this.lastMpegAudioChunk=this.blockedAudioAppend=null,this.lastVideoAppendEnd=0}onManifestLoading(){this.bufferCodecEventsTotal=0,this.details=null}onManifestParsed(e,t){var i;let s=2;(t.audio&&!t.video||!t.altAudio)&&(s=1),this.bufferCodecEventsTotal=s,this.log(`${s} bufferCodec event(s) expected.`),(i=this.transferData)!=null&&i.mediaSource&&this.sourceBufferCount&&s&&this.bufferCreated()}onMediaAttaching(e,t){const i=this.media=t.media;this.transferData=this.overrides=void 0;const s=Os(this.appendSource);if(s){const a=!!t.mediaSource;(a||t.overrides)&&(this.transferData=t,this.overrides=t.overrides);const l=this.mediaSource=t.mediaSource||new s;if(this.assignMediaSource(l),a)this._objectUrl=i.src,this.attachTransferred();else{const c=this._objectUrl=self.URL.createObjectURL(l);if(this.appendSource)try{i.removeAttribute("src");const f=self.ManagedMediaSource;i.disableRemotePlayback=i.disableRemotePlayback||f&&l instanceof f,Wb(i),RM(i,c),i.load()}catch{i.src=c}else i.src=c}i.addEventListener("emptied",this._onMediaEmptied)}}assignMediaSource(e){var t,i;this.log(`${((t=this.transferData)==null?void 0:t.mediaSource)===e?"transferred":"created"} media source: ${(i=e.constructor)==null?void 0:i.name}`),e.addEventListener("sourceopen",this._onMediaSourceOpen),e.addEventListener("sourceended",this._onMediaSourceEnded),e.addEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(e.addEventListener("startstreaming",this._onStartStreaming),e.addEventListener("endstreaming",this._onEndStreaming))}attachTransferred(){const e=this.media,t=this.transferData;if(!t||!e)return;const i=this.tracks,s=t.tracks,a=s?Object.keys(s):null,l=a?a.length:0,c=()=>{Promise.resolve().then(()=>{this.media&&this.mediaSourceOpenOrEnded&&this._onMediaSourceOpen()})};if(s&&a&&l){if(!this.tracksReady){this.hls.config.startFragPrefetch=!0,this.log("attachTransferred: waiting for SourceBuffer track info");return}if(this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})
required tracks: ${st(i,(f,d)=>f==="initSegment"?void 0:d)};
transfer tracks: ${st(s,(f,d)=>f==="initSegment"?void 0:d)}}`),!lT(s,i)){t.mediaSource=null,t.tracks=void 0;const f=e.currentTime,d=this.details,h=Math.max(f,d?.fragments[0].start||0);if(h-f>1){this.log(`attachTransferred: waiting for playback to reach new tracks start time ${f} -> ${h}`);return}this.warn(`attachTransferred: resetting MediaSource for incompatible tracks ("${Object.keys(s)}"->"${Object.keys(i)}") start time: ${h} currentTime: ${f}`),this.onMediaDetaching(L.MEDIA_DETACHING,{}),this.onMediaAttaching(L.MEDIA_ATTACHING,t),e.currentTime=h;return}this.transferData=void 0,a.forEach(f=>{const d=f,h=s[d];if(h){const p=h.buffer;if(p){const g=this.fragmentTracker,b=h.id;if(g.hasFragments(b)||g.hasParts(b)){const x=_e.getBuffered(p);g.detectEvictedFragments(d,x,b,null,!0)}const y=wh(d),T=[d,p];this.sourceBuffers[y]=T,p.updating&&this.operationQueue&&this.operationQueue.prependBlocker(d),this.trackSourceBuffer(d,h)}}}),c(),this.bufferCreated()}else this.log("attachTransferred: MediaSource w/o SourceBuffers"),c()}get mediaSourceOpenOrEnded(){var e;const t=(e=this.mediaSource)==null?void 0:e.readyState;return t==="open"||t==="ended"}onMediaDetaching(e,t){const i=!!t.transferMedia;this.transferData=this.overrides=void 0;const{media:s,mediaSource:a,_objectUrl:l}=this;if(a){if(this.log(`media source ${i?"transferring":"detaching"}`),i)this.sourceBuffers.forEach(([c])=>{c&&this.removeBuffer(c)}),this.resetQueue();else{if(this.mediaSourceOpenOrEnded){const c=a.readyState==="open";try{const f=a.sourceBuffers;for(let d=f.length;d--;)c&&f[d].abort(),a.removeSourceBuffer(f[d]);c&&a.endOfStream()}catch(f){this.warn(`onMediaDetaching: ${f.message} while calling endOfStream`)}}this.sourceBufferCount&&this.onBufferReset()}a.removeEventListener("sourceopen",this._onMediaSourceOpen),a.removeEventListener("sourceended",this._onMediaSourceEnded),a.removeEventListener("sourceclose",this._onMediaSourceClose),this.appendSource&&(a.removeEventListener("startstreaming",this._onStartStreaming),a.removeEventListener("endstreaming",this._onEndStreaming)),this.mediaSource=null,this._objectUrl=null}s&&(s.removeEventListener("emptied",this._onMediaEmptied),i||(l&&self.URL.revokeObjectURL(l),this.mediaSrc===l?(s.removeAttribute("src"),this.appendSource&&Wb(s),s.load()):this.warn("media|source.src was changed by a third party - skip cleanup")),this.media=null),this.hls.trigger(L.MEDIA_DETACHED,t)}onBufferReset(){this.sourceBuffers.forEach(([e])=>{e&&this.resetBuffer(e)}),this.initTracks()}resetBuffer(e){var t;const i=(t=this.tracks[e])==null?void 0:t.buffer;if(this.removeBuffer(e),i)try{var s;(s=this.mediaSource)!=null&&s.sourceBuffers.length&&this.mediaSource.removeSourceBuffer(i)}catch(a){this.warn(`onBufferReset ${e}`,a)}delete this.tracks[e]}removeBuffer(e){this.removeBufferListeners(e),this.sourceBuffers[wh(e)]=[null,null];const t=this.tracks[e];t&&(t.buffer=void 0)}resetQueue(){this.operationQueue&&this.operationQueue.destroy(),this.operationQueue=new SM(this.tracks)}onBufferCodecs(e,t){var i;const s=this.tracks,a=Object.keys(t);this.log(`BUFFER_CODECS: "${a}" (current SB count ${this.sourceBufferCount})`);const l="audiovideo"in t&&(s.audio||s.video)||s.audiovideo&&("audio"in t||"video"in t),c=!l&&this.sourceBufferCount&&this.media&&a.some(f=>!s[f]);if(l||c){this.warn(`Unsupported transition between "${Object.keys(s)}" and "${a}" SourceBuffers`);return}a.forEach(f=>{var d,h;const p=t[f],{id:g,codec:b,levelCodec:y,container:T,metadata:x,supplemental:w}=p;let S=s[f];const A=(d=this.transferData)==null||(d=d.tracks)==null?void 0:d[f],_=A!=null&&A.buffer?A:S,I=_?.pendingCodec||_?.codec,P=_?.levelCodec;S||(S=s[f]={buffer:void 0,listeners:[],codec:b,supplemental:w,container:T,levelCodec:y,metadata:x,id:g});const C=$c(I,P),O=C?.replace(Xb,"$1");let B=$c(b,y);const N=(h=B)==null?void 0:h.replace(Xb,"$1");B&&C&&O!==N&&(f.slice(0,5)==="audio"&&(B=ou(B,this.appendSource)),this.log(`switching codec ${I} to ${B}`),B!==(S.pendingCodec||S.codec)&&(S.pendingCodec=B),S.container=T,this.appendChangeType(f,T,B))}),(this.tracksReady||this.sourceBufferCount)&&(t.tracks=this.sourceBufferTracks),!this.sourceBufferCount&&(this.bufferCodecEventsTotal>1&&!this.tracks.video&&!t.video&&((i=t.audio)==null?void 0:i.id)==="main"&&(this.log("Main audio-only"),this.bufferCodecEventsTotal=1),this.mediaSourceOpenOrEnded&&this.checkPendingTracks())}get sourceBufferTracks(){return Object.keys(this.tracks).reduce((e,t)=>{const i=this.tracks[t];return e[t]={id:i.id,container:i.container,codec:i.codec,levelCodec:i.levelCodec},e},{})}appendChangeType(e,t,i){const s=`${t};codecs=${i}`,a={label:`change-type=${s}`,execute:()=>{const l=this.tracks[e];if(l){const c=l.buffer;c!=null&&c.changeType&&(this.log(`changing ${e} sourceBuffer type to ${s}`),c.changeType(s),l.codec=i,l.container=t)}this.shiftAndExecuteNext(e)},onStart:()=>{},onComplete:()=>{},onError:l=>{this.warn(`Failed to change ${e} SourceBuffer type`,l)}};this.append(a,e,this.isPending(this.tracks[e]))}blockAudio(e){var t;const i=e.start,s=i+e.duration*.05;if(((t=this.fragmentTracker.getAppendedFrag(i,ge.MAIN))==null?void 0:t.gap)===!0)return;const l={label:"block-audio",execute:()=>{var c;const f=this.tracks.video;(this.lastVideoAppendEnd>s||f!=null&&f.buffer&&_e.isBuffered(f.buffer,s)||((c=this.fragmentTracker.getAppendedFrag(s,ge.MAIN))==null?void 0:c.gap)===!0)&&(this.blockedAudioAppend=null,this.shiftAndExecuteNext("audio"))},onStart:()=>{},onComplete:()=>{},onError:c=>{this.warn("Error executing block-audio operation",c)}};this.blockedAudioAppend={op:l,frag:e},this.append(l,"audio",!0)}unblockAudio(){const{blockedAudioAppend:e,operationQueue:t}=this;e&&t&&(this.blockedAudioAppend=null,t.unblockAudio(e.op))}onBufferAppending(e,t){const{tracks:i}=this,{data:s,type:a,parent:l,frag:c,part:f,chunkMeta:d,offset:h}=t,p=d.buffering[a],{sn:g,cc:b}=c,y=self.performance.now();p.start=y;const T=c.stats.buffering,x=f?f.stats.buffering:null;T.start===0&&(T.start=y),x&&x.start===0&&(x.start=y);const w=i.audio;let S=!1;a==="audio"&&w?.container==="audio/mpeg"&&(S=!this.lastMpegAudioChunk||d.id===1||this.lastMpegAudioChunk.sn!==d.sn,this.lastMpegAudioChunk=d);const A=i.video,_=A?.buffer;if(_&&g!=="initSegment"){const C=f||c,O=this.blockedAudioAppend;if(a==="audio"&&l!=="main"&&!this.blockedAudioAppend&&!(A.ending||A.ended)){const N=C.start+C.duration*.05,V=_.buffered,ee=this.currentOp("video");!V.length&&!ee?this.blockAudio(C):!ee&&!_e.isBuffered(_,N)&&this.lastVideoAppendEnd<N&&this.blockAudio(C)}else if(a==="video"){const B=C.end;if(O){const N=O.frag.start;(B>N||B<this.lastVideoAppendEnd||_e.isBuffered(_,N))&&this.unblockAudio()}this.lastVideoAppendEnd=B}}const I=(f||c).start,P={label:`append-${a}`,execute:()=>{var C;p.executeStart=self.performance.now();const O=(C=this.tracks[a])==null?void 0:C.buffer;O&&(S?this.updateTimestampOffset(O,I,.1,a,g,b):h!==void 0&&pe(h)&&this.updateTimestampOffset(O,h,1e-6,a,g,b)),this.appendExecutor(s,a)},onStart:()=>{},onComplete:()=>{const C=self.performance.now();p.executeEnd=p.end=C,T.first===0&&(T.first=C),x&&x.first===0&&(x.first=C);const O={};this.sourceBuffers.forEach(([B,N])=>{B&&(O[B]=_e.getBuffered(N))}),this.appendErrors[a]=0,a==="audio"||a==="video"?this.appendErrors.audiovideo=0:(this.appendErrors.audio=0,this.appendErrors.video=0),this.hls.trigger(L.BUFFER_APPENDED,{type:a,frag:c,part:f,chunkMeta:d,parent:c.type,timeRanges:O})},onError:C=>{var O;const B={type:Ee.MEDIA_ERROR,parent:c.type,details:Q.BUFFER_APPEND_ERROR,sourceBufferName:a,frag:c,part:f,chunkMeta:d,error:C,err:C,fatal:!1},N=(O=this.media)==null?void 0:O.error;if(C.code===DOMException.QUOTA_EXCEEDED_ERR||C.name=="QuotaExceededError"||"quota"in C)B.details=Q.BUFFER_FULL_ERROR;else if(C.code===DOMException.INVALID_STATE_ERR&&this.mediaSourceOpenOrEnded&&!N)B.errorAction=ha(!0);else if(C.name===fS&&this.sourceBufferCount===0)B.errorAction=ha(!0);else{const V=++this.appendErrors[a];this.warn(`Failed ${V}/${this.hls.config.appendErrorMaxRetry} times to append segment in "${a}" sourceBuffer (${N||"no media error"})`),(V>=this.hls.config.appendErrorMaxRetry||N)&&(B.fatal=!0)}this.hls.trigger(L.ERROR,B)}};this.log(`queuing "${a}" append sn: ${g}${f?" p: "+f.index:""} of ${c.type===ge.MAIN?"level":"track"} ${c.level} cc: ${b}`),this.append(P,a,this.isPending(this.tracks[a]))}getFlushOp(e,t,i){return this.log(`queuing "${e}" remove ${t}-${i}`),{label:"remove",execute:()=>{this.removeExecutor(e,t,i)},onStart:()=>{},onComplete:()=>{this.hls.trigger(L.BUFFER_FLUSHED,{type:e})},onError:s=>{this.warn(`Failed to remove ${t}-${i} from "${e}" SourceBuffer`,s)}}}onBufferFlushing(e,t){const{type:i,startOffset:s,endOffset:a}=t;i?this.append(this.getFlushOp(i,s,a),i):this.sourceBuffers.forEach(([l])=>{l&&this.append(this.getFlushOp(l,s,a),l)})}onFragParsed(e,t){const{frag:i,part:s}=t,a=[],l=s?s.elementaryStreams:i.elementaryStreams;l[it.AUDIOVIDEO]?a.push("audiovideo"):(l[it.AUDIO]&&a.push("audio"),l[it.VIDEO]&&a.push("video"));const c=()=>{const f=self.performance.now();i.stats.buffering.end=f,s&&(s.stats.buffering.end=f);const d=s?s.stats:i.stats;this.hls.trigger(L.FRAG_BUFFERED,{frag:i,part:s,stats:d,id:i.type})};a.length===0&&this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${i.type} level: ${i.level} sn: ${i.sn}`),this.blockBuffers(c,a).catch(f=>{this.warn(`Fragment buffered callback ${f}`),this.stepOperationQueue(this.sourceBufferTypes)})}onFragChanged(e,t){this.trimBuffers()}get bufferedToEnd(){return this.sourceBufferCount>0&&!this.sourceBuffers.some(([e])=>{if(e){const t=this.tracks[e];if(t)return!t.ended||t.ending}return!1})}onBufferEos(e,t){var i;this.sourceBuffers.forEach(([l])=>{if(l){const c=this.tracks[l];(!t.type||t.type===l)&&(c.ending=!0,c.ended||(c.ended=!0,this.log(`${l} buffer reached EOS`)))}});const s=((i=this.overrides)==null?void 0:i.endOfStream)!==!1;this.sourceBufferCount>0&&!this.sourceBuffers.some(([l])=>{var c;return l&&!((c=this.tracks[l])!=null&&c.ended)})?s?(this.log("Queueing EOS"),this.blockUntilOpen(()=>{this.tracksEnded();const{mediaSource:l}=this;if(!l||l.readyState!=="open"){l&&this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${l.readyState}`);return}this.log("Calling mediaSource.endOfStream()"),l.endOfStream(),this.hls.trigger(L.BUFFERED_TO_END,void 0)})):(this.tracksEnded(),this.hls.trigger(L.BUFFERED_TO_END,void 0)):t.type==="video"&&this.unblockAudio()}tracksEnded(){this.sourceBuffers.forEach(([e])=>{if(e!==null){const t=this.tracks[e];t&&(t.ending=!1)}})}onLevelUpdated(e,{details:t}){t.fragments.length&&(this.details=t,this.updateDuration())}updateDuration(){this.blockUntilOpen(()=>{const e=this.getDurationAndRange();e&&this.updateMediaSource(e)})}onError(e,t){if(t.details===Q.BUFFER_APPEND_ERROR&&t.frag){var i;const s=(i=t.errorAction)==null?void 0:i.nextAutoLevel;pe(s)&&s!==t.frag.level&&this.resetAppendErrors()}}resetAppendErrors(){this.appendErrors={audio:0,video:0,audiovideo:0}}trimBuffers(){const{hls:e,details:t,media:i}=this;if(!i||t===null||!this.sourceBufferCount)return;const s=e.config,a=i.currentTime,l=t.levelTargetDuration,c=t.live&&s.liveBackBufferLength!==null?s.liveBackBufferLength:s.backBufferLength;if(pe(c)&&c>=0){const d=Math.max(c,l),h=Math.floor(a/l)*l-d;this.flushBackBuffer(a,l,h)}const f=s.frontBufferFlushThreshold;if(pe(f)&&f>0){const d=Math.max(s.maxBufferLength,f),h=Math.max(d,l),p=Math.floor(a/l)*l+h;this.flushFrontBuffer(a,l,p)}}flushBackBuffer(e,t,i){this.sourceBuffers.forEach(([s,a])=>{if(a){const c=_e.getBuffered(a);if(c.length>0&&i>c.start(0)){var l;this.hls.trigger(L.BACK_BUFFER_REACHED,{bufferEnd:i});const f=this.tracks[s];if((l=this.details)!=null&&l.live)this.hls.trigger(L.LIVE_BACK_BUFFER_REACHED,{bufferEnd:i});else if(f!=null&&f.ended){this.log(`Cannot flush ${s} back buffer while SourceBuffer is in ended state`);return}this.hls.trigger(L.BUFFER_FLUSHING,{startOffset:0,endOffset:i,type:s})}}})}flushFrontBuffer(e,t,i){this.sourceBuffers.forEach(([s,a])=>{if(a){const l=_e.getBuffered(a),c=l.length;if(c<2)return;const f=l.start(c-1),d=l.end(c-1);if(i>f||e>=f&&e<=d)return;this.hls.trigger(L.BUFFER_FLUSHING,{startOffset:f,endOffset:1/0,type:s})}})}getDurationAndRange(){var e;const{details:t,mediaSource:i}=this;if(!t||!this.media||i?.readyState!=="open")return null;const s=t.edge;if(t.live&&this.hls.config.liveDurationInfinity){if(t.fragments.length&&i.setLiveSeekableRange){const d=Math.max(0,t.fragmentStart),h=Math.max(d,s);return{duration:1/0,start:d,end:h}}return{duration:1/0}}const a=(e=this.overrides)==null?void 0:e.duration;if(a)return pe(a)?{duration:a}:null;const l=this.media.duration,c=pe(i.duration)?i.duration:0;return s>c&&s>l||!pe(l)?{duration:s}:null}updateMediaSource({duration:e,start:t,end:i}){const s=this.mediaSource;!this.media||!s||s.readyState!=="open"||(s.duration!==e&&(pe(e)&&this.log(`Updating MediaSource duration to ${e.toFixed(3)}`),s.duration=e),t!==void 0&&i!==void 0&&(this.log(`MediaSource duration is set to ${s.duration}. Setting seekable range to ${t}-${i}.`),s.setLiveSeekableRange(t,i)))}get tracksReady(){const e=this.pendingTrackCount;return e>0&&(e>=this.bufferCodecEventsTotal||this.isPending(this.tracks.audiovideo))}checkPendingTracks(){const{bufferCodecEventsTotal:e,pendingTrackCount:t,tracks:i}=this;if(this.log(`checkPendingTracks (pending: ${t} codec events expected: ${e}) ${st(i)}`),this.tracksReady){var s;const a=(s=this.transferData)==null?void 0:s.tracks;a&&Object.keys(a).length?this.attachTransferred():this.createSourceBuffers()}}bufferCreated(){if(this.sourceBufferCount){const e={};this.sourceBuffers.forEach(([t,i])=>{if(t){const s=this.tracks[t];e[t]={buffer:i,container:s.container,codec:s.codec,supplemental:s.supplemental,levelCodec:s.levelCodec,id:s.id,metadata:s.metadata}}}),this.hls.trigger(L.BUFFER_CREATED,{tracks:e}),this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`),this.sourceBuffers.forEach(([t])=>{this.executeNext(t)})}else{const e=new Error("could not create source buffer for media codec(s)");this.hls.trigger(L.ERROR,{type:Ee.MEDIA_ERROR,details:Q.BUFFER_INCOMPATIBLE_CODECS_ERROR,fatal:!0,error:e,reason:e.message})}}createSourceBuffers(){const{tracks:e,sourceBuffers:t,mediaSource:i}=this;if(!i)throw new Error("createSourceBuffers called when mediaSource was null");for(const a in e){const l=a,c=e[l];if(this.isPending(c)){const f=this.getTrackCodec(c,l),d=`${c.container};codecs=${f}`;c.codec=f,this.log(`creating sourceBuffer(${d})${this.currentOp(l)?" Queued":""} ${st(c)}`);try{const h=i.addSourceBuffer(d),p=wh(l),g=[l,h];t[p]=g,c.buffer=h}catch(h){var s;this.error(`error while trying to add sourceBuffer: ${h.message}`),this.shiftAndExecuteNext(l),(s=this.operationQueue)==null||s.removeBlockers(),delete this.tracks[l],this.hls.trigger(L.ERROR,{type:Ee.MEDIA_ERROR,details:Q.BUFFER_ADD_CODEC_ERROR,fatal:!1,error:h,sourceBufferName:l,mimeType:d,parent:c.id});return}this.trackSourceBuffer(l,c)}}this.bufferCreated()}getTrackCodec(e,t){const i=e.supplemental;let s=e.codec;i&&(t==="video"||t==="audiovideo")&&ko(i,"video")&&(s=pk(s,i));const a=$c(s,e.levelCodec);return a?t.slice(0,5)==="audio"?ou(a,this.appendSource):a:""}trackSourceBuffer(e,t){const i=t.buffer;if(!i)return;const s=this.getTrackCodec(t,e);this.tracks[e]={buffer:i,codec:s,container:t.container,levelCodec:t.levelCodec,supplemental:t.supplemental,metadata:t.metadata,id:t.id,listeners:[]},this.removeBufferListeners(e),this.addBufferListener(e,"updatestart",this.onSBUpdateStart),this.addBufferListener(e,"updateend",this.onSBUpdateEnd),this.addBufferListener(e,"error",this.onSBUpdateError),this.appendSource&&this.addBufferListener(e,"bufferedchange",(a,l)=>{const c=l.removedRanges;c!=null&&c.length&&this.hls.trigger(L.BUFFER_FLUSHED,{type:a})})}get mediaSrc(){var e,t;const i=((e=this.media)==null||(t=e.querySelector)==null?void 0:t.call(e,"source"))||this.media;return i?.src}onSBUpdateStart(e){const t=this.currentOp(e);t&&t.onStart()}onSBUpdateEnd(e){var t;if(((t=this.mediaSource)==null?void 0:t.readyState)==="closed"){this.resetBuffer(e);return}const i=this.currentOp(e);i&&(i.onComplete(),this.shiftAndExecuteNext(e))}onSBUpdateError(e,t){var i;const s=new Error(`${e} SourceBuffer error. MediaSource readyState: ${(i=this.mediaSource)==null?void 0:i.readyState}`);this.error(`${s}`,t),this.hls.trigger(L.ERROR,{type:Ee.MEDIA_ERROR,details:Q.BUFFER_APPENDING_ERROR,sourceBufferName:e,error:s,fatal:!1});const a=this.currentOp(e);a&&a.onError(s)}updateTimestampOffset(e,t,i,s,a,l){const c=t-e.timestampOffset;Math.abs(c)>=i&&(this.log(`Updating ${s} SourceBuffer timestampOffset to ${t} (sn: ${a} cc: ${l})`),e.timestampOffset=t)}removeExecutor(e,t,i){const{media:s,mediaSource:a}=this,l=this.tracks[e],c=l?.buffer;if(!s||!a||!c){this.warn(`Attempting to remove from the ${e} SourceBuffer, but it does not exist`),this.shiftAndExecuteNext(e);return}const f=pe(s.duration)?s.duration:1/0,d=pe(a.duration)?a.duration:1/0,h=Math.max(0,t),p=Math.min(i,f,d);p>h&&(!l.ending||l.ended)?(l.ended=!1,this.log(`Removing [${h},${p}] from the ${e} SourceBuffer`),c.remove(h,p)):this.shiftAndExecuteNext(e)}appendExecutor(e,t){const i=this.tracks[t],s=i?.buffer;if(!s)throw new wM(`Attempting to append to the ${t} SourceBuffer, but it does not exist`);i.ending=!1,i.ended=!1,s.appendBuffer(e)}blockUntilOpen(e){if(this.isUpdating()||this.isQueued())this.blockBuffers(e).catch(t=>{this.warn(`SourceBuffer blocked callback ${t}`),this.stepOperationQueue(this.sourceBufferTypes)});else try{e()}catch(t){this.warn(`Callback run without blocking ${this.operationQueue} ${t}`)}}isUpdating(){return this.sourceBuffers.some(([e,t])=>e&&t.updating)}isQueued(){return this.sourceBuffers.some(([e])=>e&&!!this.currentOp(e))}isPending(e){return!!e&&!e.buffer}blockBuffers(e,t=this.sourceBufferTypes){if(!t.length)return this.log("Blocking operation requested, but no SourceBuffers exist"),Promise.resolve().then(e);const{operationQueue:i}=this,s=t.map(l=>this.appendBlocker(l));return t.length>1&&this.blockedAudioAppend&&this.unblockAudio(),Promise.all(s).then(l=>{i===this.operationQueue&&(e(),this.stepOperationQueue(this.sourceBufferTypes))})}stepOperationQueue(e){e.forEach(t=>{var i;const s=(i=this.tracks[t])==null?void 0:i.buffer;!s||s.updating||this.shiftAndExecuteNext(t)})}append(e,t,i){this.operationQueue&&this.operationQueue.append(e,t,i)}appendBlocker(e){if(this.operationQueue)return this.operationQueue.appendBlocker(e)}currentOp(e){return this.operationQueue?this.operationQueue.current(e):null}executeNext(e){e&&this.operationQueue&&this.operationQueue.executeNext(e)}shiftAndExecuteNext(e){this.operationQueue&&this.operationQueue.shiftAndExecuteNext(e)}get pendingTrackCount(){return Object.keys(this.tracks).reduce((e,t)=>e+(this.isPending(this.tracks[t])?1:0),0)}get sourceBufferCount(){return this.sourceBuffers.reduce((e,[t])=>e+(t?1:0),0)}get sourceBufferTypes(){return this.sourceBuffers.map(([e])=>e).filter(e=>!!e)}addBufferListener(e,t,i){const s=this.tracks[e];if(!s)return;const a=s.buffer;if(!a)return;const l=i.bind(this,e);s.listeners.push({event:t,listener:l}),a.addEventListener(t,l)}removeBufferListeners(e){const t=this.tracks[e];if(!t)return;const i=t.buffer;i&&(t.listeners.forEach(s=>{i.removeEventListener(s.event,s.listener)}),t.listeners.length=0)}}function Wb(n){const e=n.querySelectorAll("source");[].slice.call(e).forEach(t=>{n.removeChild(t)})}function RM(n,e){const t=self.document.createElement("source");t.type="video/mp4",t.src=e,n.appendChild(t)}function wh(n){return n==="audio"?1:0}class ap{constructor(e){this.hls=void 0,this.autoLevelCapping=void 0,this.firstLevel=void 0,this.media=void 0,this.restrictedLevels=void 0,this.timer=void 0,this.clientRect=void 0,this.streamController=void 0,this.hls=e,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.firstLevel=-1,this.media=null,this.restrictedLevels=[],this.timer=void 0,this.clientRect=null,this.registerListeners()}setStreamController(e){this.streamController=e}destroy(){this.hls&&this.unregisterListener(),this.timer&&this.stopCapping(),this.media=null,this.clientRect=null,this.hls=this.streamController=null}registerListeners(){const{hls:e}=this;e.on(L.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.on(L.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(L.MANIFEST_PARSED,this.onManifestParsed,this),e.on(L.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(L.BUFFER_CODECS,this.onBufferCodecs,this),e.on(L.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListener(){const{hls:e}=this;e.off(L.FPS_DROP_LEVEL_CAPPING,this.onFpsDropLevelCapping,this),e.off(L.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(L.MANIFEST_PARSED,this.onManifestParsed,this),e.off(L.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(L.BUFFER_CODECS,this.onBufferCodecs,this),e.off(L.MEDIA_DETACHING,this.onMediaDetaching,this)}onFpsDropLevelCapping(e,t){const i=this.hls.levels[t.droppedLevel];this.isLevelAllowed(i)&&this.restrictedLevels.push({bitrate:i.bitrate,height:i.height,width:i.width})}onMediaAttaching(e,t){this.media=t.media instanceof HTMLVideoElement?t.media:null,this.clientRect=null,this.timer&&this.hls.levels.length&&this.detectPlayerSize()}onManifestParsed(e,t){const i=this.hls;this.restrictedLevels=[],this.firstLevel=t.firstLevel,i.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onLevelsUpdated(e,t){this.timer&&pe(this.autoLevelCapping)&&this.detectPlayerSize()}onBufferCodecs(e,t){this.hls.config.capLevelToPlayerSize&&t.video&&this.startCapping()}onMediaDetaching(){this.stopCapping(),this.media=null}detectPlayerSize(){if(this.media){if(this.mediaHeight<=0||this.mediaWidth<=0){this.clientRect=null;return}const e=this.hls.levels;if(e.length){const t=this.hls,i=this.getMaxLevel(e.length-1);i!==this.autoLevelCapping&&t.logger.log(`Setting autoLevelCapping to ${i}: ${e[i].height}p@${e[i].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`),t.autoLevelCapping=i,t.autoLevelEnabled&&t.autoLevelCapping>this.autoLevelCapping&&this.streamController&&this.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}}getMaxLevel(e){const t=this.hls.levels;if(!t.length)return-1;const i=t.filter((s,a)=>this.isLevelAllowed(s)&&a<=e);return this.clientRect=null,ap.getMaxLevelByMediaSize(i,this.mediaWidth,this.mediaHeight)}startCapping(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,self.clearInterval(this.timer),this.timer=self.setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())}stopCapping(){this.restrictedLevels=[],this.firstLevel=-1,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(self.clearInterval(this.timer),this.timer=void 0)}getDimensions(){if(this.clientRect)return this.clientRect;const e=this.media,t={width:0,height:0};if(e){const i=e.getBoundingClientRect();t.width=i.width,t.height=i.height,!t.width&&!t.height&&(t.width=i.right-i.left||e.width||0,t.height=i.bottom-i.top||e.height||0)}return this.clientRect=t,t}get mediaWidth(){return this.getDimensions().width*this.contentScaleFactor}get mediaHeight(){return this.getDimensions().height*this.contentScaleFactor}get contentScaleFactor(){let e=1;if(!this.hls.config.ignoreDevicePixelRatio)try{e=self.devicePixelRatio}catch{}return Math.min(e,this.hls.config.maxDevicePixelRatio)}isLevelAllowed(e){return!this.restrictedLevels.some(i=>e.bitrate===i.bitrate&&e.width===i.width&&e.height===i.height)}static getMaxLevelByMediaSize(e,t,i){if(!(e!=null&&e.length))return-1;const s=(c,f)=>f?c.width!==f.width||c.height!==f.height:!0;let a=e.length-1;const l=Math.max(t,i);for(let c=0;c<e.length;c+=1){const f=e[c];if((f.width>=l||f.height>=l)&&s(f,e[c+1])){a=c;break}}return a}}const LM={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},gi=LM,_M={HLS:"h"},CM=_M;class Tn{constructor(e,t){Array.isArray(e)&&(e=e.map(i=>i instanceof Tn?i:new Tn(i))),this.value=e,this.params=t}}const IM="Dict";function DM(n){return Array.isArray(n)?JSON.stringify(n):n instanceof Map?"Map{}":n instanceof Set?"Set{}":typeof n=="object"?JSON.stringify(n):String(n)}function kM(n,e,t,i){return new Error(`failed to ${n} "${DM(e)}" as ${t}`,{cause:i})}function Sn(n,e,t){return kM("serialize",n,e,t)}class hS{constructor(e){this.description=e}}const Qb="Bare Item",OM="Boolean";function MM(n){if(typeof n!="boolean")throw Sn(n,OM);return n?"?1":"?0"}function PM(n){return btoa(String.fromCharCode(...n))}const NM="Byte Sequence";function BM(n){if(ArrayBuffer.isView(n)===!1)throw Sn(n,NM);return`:${PM(n)}:`}const FM="Integer";function UM(n){return n<-999999999999999||999999999999999<n}function mS(n){if(UM(n))throw Sn(n,FM);return n.toString()}function $M(n){return`@${mS(n.getTime()/1e3)}`}function pS(n,e){if(n<0)return-pS(-n,e);const t=Math.pow(10,e);if(Math.abs(n*t%1-.5)<Number.EPSILON){const s=Math.floor(n*t);return(s%2===0?s:s+1)/t}else return Math.round(n*t)/t}const jM="Decimal";function HM(n){const e=pS(n,3);if(Math.floor(Math.abs(e)).toString().length>12)throw Sn(n,jM);const t=e.toString();return t.includes(".")?t:`${t}.0`}const GM="String",zM=/[\x00-\x1f\x7f]+/;function VM(n){if(zM.test(n))throw Sn(n,GM);return`"${n.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`}function qM(n){return n.description||n.toString().slice(7,-1)}const KM="Token";function Zb(n){const e=qM(n);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(e)===!1)throw Sn(e,KM);return e}function om(n){switch(typeof n){case"number":if(!pe(n))throw Sn(n,Qb);return Number.isInteger(n)?mS(n):HM(n);case"string":return VM(n);case"symbol":return Zb(n);case"boolean":return MM(n);case"object":if(n instanceof Date)return $M(n);if(n instanceof Uint8Array)return BM(n);if(n instanceof hS)return Zb(n);default:throw Sn(n,Qb)}}const YM="Key";function lm(n){if(/^[a-z*][a-z0-9\-_.*]*$/.test(n)===!1)throw Sn(n,YM);return n}function op(n){return n==null?"":Object.entries(n).map(([e,t])=>t===!0?`;${lm(e)}`:`;${lm(e)}=${om(t)}`).join("")}function gS(n){return n instanceof Tn?`${om(n.value)}${op(n.params)}`:om(n)}function XM(n){return`(${n.value.map(gS).join(" ")})${op(n.params)}`}function WM(n,e={whitespace:!0}){if(typeof n!="object"||n==null)throw Sn(n,IM);const t=n instanceof Map?n.entries():Object.entries(n),i=e?.whitespace?" ":"";return Array.from(t).map(([s,a])=>{a instanceof Tn||(a=new Tn(a));let l=lm(s);return a.value===!0?l+=op(a.params):(l+="=",Array.isArray(a.value)?l+=XM(a):l+=gS(a)),l}).join(`,${i}`)}function yS(n,e){return WM(n,e)}const mn="CMCD-Object",Et="CMCD-Request",sr="CMCD-Session",As="CMCD-Status",QM={br:mn,ab:mn,d:mn,ot:mn,tb:mn,tpb:mn,lb:mn,tab:mn,lab:mn,url:mn,pb:Et,bl:Et,tbl:Et,dl:Et,ltc:Et,mtp:Et,nor:Et,nrr:Et,rc:Et,sn:Et,sta:Et,su:Et,ttfb:Et,ttfbb:Et,ttlb:Et,cmsdd:Et,cmsds:Et,smrt:Et,df:Et,cs:Et,ts:Et,cid:sr,pr:sr,sf:sr,sid:sr,st:sr,v:sr,msd:sr,bs:As,bsd:As,cdn:As,rtp:As,bg:As,pt:As,ec:As,e:As},ZM={REQUEST:Et};function JM(n){return Object.keys(n).reduce((e,t)=>{var i;return(i=n[t])===null||i===void 0||i.forEach(s=>e[s]=t),e},{})}function eP(n,e){const t={};if(!n)return t;const i=Object.keys(n),s=e?JM(e):{};return i.reduce((a,l)=>{var c;const f=QM[l]||s[l]||ZM.REQUEST,d=(c=a[f])!==null&&c!==void 0?c:a[f]={};return d[l]=n[l],a},t)}function tP(n){return["ot","sf","st","e","sta"].includes(n)}function iP(n){return typeof n=="number"?pe(n):n!=null&&n!==""&&n!==!1}const vS="event";function nP(n,e){const t=new URL(n),i=new URL(e);if(t.origin!==i.origin)return n;const s=t.pathname.split("/").slice(1),a=i.pathname.split("/").slice(1,-1);for(;s[0]===a[0];)s.shift(),a.shift();for(;a.length;)a.shift(),s.unshift("..");return s.join("/")+t.search+t.hash}const Vc=n=>Math.round(n),cm=(n,e)=>Array.isArray(n)?n.map(t=>cm(t,e)):n instanceof Tn&&typeof n.value=="string"?new Tn(cm(n.value,e),n.params):(e.baseUrl&&(n=nP(n,e.baseUrl)),e.version===1?encodeURIComponent(n):n),Lc=n=>Vc(n/100)*100,sP=(n,e)=>{let t=n;return e.version>=2&&(n instanceof Tn&&typeof n.value=="string"?t=new Tn([n]):typeof n=="string"&&(t=[n])),cm(t,e)},rP={br:Vc,d:Vc,bl:Lc,dl:Lc,mtp:Lc,nor:sP,rtp:Lc,tb:Vc},bS="request",ES="response",lp=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],aP=["e"],oP=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function Mu(n){return oP.test(n)}function lP(n){return lp.includes(n)||aP.includes(n)||Mu(n)}const xS=["d","dl","nor","ot","rtp","su"];function cP(n){return lp.includes(n)||xS.includes(n)||Mu(n)}const uP=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"];function dP(n){return lp.includes(n)||xS.includes(n)||uP.includes(n)||Mu(n)}const fP=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function hP(n){return fP.includes(n)||Mu(n)}const mP={[ES]:dP,[vS]:lP,[bS]:cP};function TS(n,e={}){const t={};if(n==null||typeof n!="object")return t;const i=e.version||n.v||1,s=e.reportingMode||bS,a=i===1?hP:mP[s];let l=Object.keys(n).filter(a);const c=e.filter;typeof c=="function"&&(l=l.filter(c));const f=s===ES||s===vS;f&&!l.includes("ts")&&l.push("ts"),i>1&&!l.includes("v")&&l.push("v");const d=et({},rP,e.formatters),h={version:i,reportingMode:s,baseUrl:e.baseUrl};return l.sort().forEach(p=>{let g=n[p];const b=d[p];if(typeof b=="function"&&(g=b(g,h)),p==="v"){if(i===1)return;g=i}p=="pr"&&g===1||(f&&p==="ts"&&!pe(g)&&(g=Date.now()),iP(g)&&(tP(p)&&typeof g=="string"&&(g=new hS(g)),t[p]=g))}),t}function pP(n,e={}){const t={};if(!n)return t;const i=TS(n,e),s=eP(i,e?.customHeaderMap);return Object.entries(s).reduce((a,[l,c])=>{const f=yS(c,{whitespace:!1});return f&&(a[l]=f),a},t)}function gP(n,e,t){return et(n,pP(e,t))}const yP="CMCD";function vP(n,e={}){return n?yS(TS(n,e),{whitespace:!1}):""}function bP(n,e={}){if(!n)return"";const t=vP(n,e);return encodeURIComponent(t)}function EP(n,e={}){if(!n)return"";const t=bP(n,e);return`${yP}=${t}`}const Jb=/CMCD=[^&#]+/;function xP(n,e,t){const i=EP(e,t);if(!i)return n;if(Jb.test(n))return n.replace(Jb,i);const s=n.includes("?")?"&":"?";return`${n}${s}${i}`}class TP{constructor(e){this.hls=void 0,this.config=void 0,this.media=void 0,this.sid=void 0,this.cid=void 0,this.useHeaders=!1,this.includeKeys=void 0,this.initialized=!1,this.starved=!1,this.buffering=!0,this.audioBuffer=void 0,this.videoBuffer=void 0,this.onWaiting=()=>{this.initialized&&(this.starved=!0),this.buffering=!0},this.onPlaying=()=>{this.initialized||(this.initialized=!0),this.buffering=!1},this.applyPlaylistData=s=>{try{this.apply(s,{ot:gi.MANIFEST,su:!this.initialized})}catch(a){this.hls.logger.warn("Could not generate manifest CMCD data.",a)}},this.applyFragmentData=s=>{try{const{frag:a,part:l}=s,c=this.hls.levels[a.level],f=this.getObjectType(a),d={d:(l||a).duration*1e3,ot:f};(f===gi.VIDEO||f===gi.AUDIO||f==gi.MUXED)&&(d.br=c.bitrate/1e3,d.tb=this.getTopBandwidth(f)/1e3,d.bl=this.getBufferLength(f));const h=l?this.getNextPart(l):this.getNextFrag(a);h!=null&&h.url&&h.url!==a.url&&(d.nor=h.url),this.apply(s,d)}catch(a){this.hls.logger.warn("Could not generate segment CMCD data.",a)}},this.hls=e;const t=this.config=e.config,{cmcd:i}=t;i!=null&&(t.pLoader=this.createPlaylistLoader(),t.fLoader=this.createFragmentLoader(),this.sid=i.sessionId||e.sessionId,this.cid=i.contentId,this.useHeaders=i.useHeaders===!0,this.includeKeys=i.includeKeys,this.registerListeners())}registerListeners(){const e=this.hls;e.on(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(L.MEDIA_DETACHED,this.onMediaDetached,this),e.on(L.BUFFER_CREATED,this.onBufferCreated,this)}unregisterListeners(){const e=this.hls;e.off(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(L.MEDIA_DETACHED,this.onMediaDetached,this),e.off(L.BUFFER_CREATED,this.onBufferCreated,this)}destroy(){this.unregisterListeners(),this.onMediaDetached(),this.hls=this.config=this.audioBuffer=this.videoBuffer=null,this.onWaiting=this.onPlaying=this.media=null}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("waiting",this.onWaiting),this.media.addEventListener("playing",this.onPlaying)}onMediaDetached(){this.media&&(this.media.removeEventListener("waiting",this.onWaiting),this.media.removeEventListener("playing",this.onPlaying),this.media=null)}onBufferCreated(e,t){var i,s;this.audioBuffer=(i=t.tracks.audio)==null?void 0:i.buffer,this.videoBuffer=(s=t.tracks.video)==null?void 0:s.buffer}createData(){var e;return{v:1,sf:CM.HLS,sid:this.sid,cid:this.cid,pr:(e=this.media)==null?void 0:e.playbackRate,mtp:this.hls.bandwidthEstimate/1e3}}apply(e,t={}){et(t,this.createData());const i=t.ot===gi.INIT||t.ot===gi.VIDEO||t.ot===gi.MUXED;this.starved&&i&&(t.bs=!0,t.su=!0,this.starved=!1),t.su==null&&(t.su=this.buffering);const{includeKeys:s}=this;s&&(t=Object.keys(t).reduce((l,c)=>(s.includes(c)&&(l[c]=t[c]),l),{}));const a={baseUrl:e.url};this.useHeaders?(e.headers||(e.headers={}),gP(e.headers,t,a)):e.url=xP(e.url,t,a)}getNextFrag(e){var t;const i=(t=this.hls.levels[e.level])==null?void 0:t.details;if(i){const s=e.sn-i.startSN;return i.fragments[s+1]}}getNextPart(e){var t;const{index:i,fragment:s}=e,a=(t=this.hls.levels[s.level])==null||(t=t.details)==null?void 0:t.partList;if(a){const{sn:l}=s;for(let c=a.length-1;c>=0;c--){const f=a[c];if(f.index===i&&f.fragment.sn===l)return a[c+1]}}}getObjectType(e){const{type:t}=e;if(t==="subtitle")return gi.TIMED_TEXT;if(e.sn==="initSegment")return gi.INIT;if(t==="audio")return gi.AUDIO;if(t==="main")return this.hls.audioTracks.length?gi.VIDEO:gi.MUXED}getTopBandwidth(e){let t=0,i;const s=this.hls;if(e===gi.AUDIO)i=s.audioTracks;else{const a=s.maxAutoLevel,l=a>-1?a+1:s.levels.length;i=s.levels.slice(0,l)}return i.forEach(a=>{a.bitrate>t&&(t=a.bitrate)}),t>0?t:NaN}getBufferLength(e){const t=this.media,i=e===gi.AUDIO?this.audioBuffer:this.videoBuffer;return!i||!t?NaN:_e.bufferInfo(i,t.currentTime,this.config.maxBufferHole).len*1e3}createPlaylistLoader(){const{pLoader:e}=this.config,t=this.applyPlaylistData,i=e||this.config.loader;return class{constructor(a){this.loader=void 0,this.loader=new i(a)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(a,l,c){t(a),this.loader.load(a,l,c)}}}createFragmentLoader(){const{fLoader:e}=this.config,t=this.applyFragmentData,i=e||this.config.loader;return class{constructor(a){this.loader=void 0,this.loader=new i(a)}get stats(){return this.loader.stats}get context(){return this.loader.context}destroy(){this.loader.destroy()}abort(){this.loader.abort()}load(a,l,c){t(a),this.loader.load(a,l,c)}}}}const SP=3e5;class wP extends Zi{constructor(e){super("content-steering",e.logger),this.hls=void 0,this.loader=null,this.uri=null,this.pathwayId=".",this._pathwayPriority=null,this.timeToLoad=300,this.reloadTimer=-1,this.updated=0,this.started=!1,this.enabled=!0,this.levels=null,this.audioTracks=null,this.subtitleTracks=null,this.penalizedPathways={},this.hls=e,this.registerListeners()}registerListeners(){const e=this.hls;e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(L.MANIFEST_PARSED,this.onManifestParsed,this),e.on(L.ERROR,this.onError,this)}unregisterListeners(){const e=this.hls;e&&(e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(L.MANIFEST_PARSED,this.onManifestParsed,this),e.off(L.ERROR,this.onError,this))}pathways(){return(this.levels||[]).reduce((e,t)=>(e.indexOf(t.pathwayId)===-1&&e.push(t.pathwayId),e),[])}get pathwayPriority(){return this._pathwayPriority}set pathwayPriority(e){this.updatePathwayPriority(e)}startLoad(){if(this.started=!0,this.clearTimeout(),this.enabled&&this.uri){if(this.updated){const e=this.timeToLoad*1e3-(performance.now()-this.updated);if(e>0){this.scheduleRefresh(this.uri,e);return}}this.loadSteeringManifest(this.uri)}}stopLoad(){this.started=!1,this.loader&&(this.loader.destroy(),this.loader=null),this.clearTimeout()}clearTimeout(){this.reloadTimer!==-1&&(self.clearTimeout(this.reloadTimer),this.reloadTimer=-1)}destroy(){this.unregisterListeners(),this.stopLoad(),this.hls=null,this.levels=this.audioTracks=this.subtitleTracks=null}removeLevel(e){const t=this.levels;t&&(this.levels=t.filter(i=>i!==e))}onManifestLoading(){this.stopLoad(),this.enabled=!0,this.timeToLoad=300,this.updated=0,this.uri=null,this.pathwayId=".",this.levels=this.audioTracks=this.subtitleTracks=null}onManifestLoaded(e,t){const{contentSteering:i}=t;i!==null&&(this.pathwayId=i.pathwayId,this.uri=i.uri,this.started&&this.startLoad())}onManifestParsed(e,t){this.audioTracks=t.audioTracks,this.subtitleTracks=t.subtitleTracks}onError(e,t){const{errorAction:i}=t;if(i?.action===qt.SendAlternateToPenaltyBox&&i.flags===Ci.MoveAllAlternatesMatchingHost){const s=this.levels;let a=this._pathwayPriority,l=this.pathwayId;if(t.context){const{groupId:c,pathwayId:f,type:d}=t.context;c&&s?l=this.getPathwayForGroupId(c,d,l):f&&(l=f)}l in this.penalizedPathways||(this.penalizedPathways[l]=performance.now()),!a&&s&&(a=this.pathways()),a&&a.length>1&&(this.updatePathwayPriority(a),i.resolved=this.pathwayId!==l),t.details===Q.BUFFER_APPEND_ERROR&&!t.fatal?i.resolved=!0:i.resolved||this.warn(`Could not resolve ${t.details} ("${t.error.message}") with content-steering for Pathway: ${l} levels: ${s&&s.length} priorities: ${st(a)} penalized: ${st(this.penalizedPathways)}`)}}filterParsedLevels(e){this.levels=e;let t=this.getLevelsForPathway(this.pathwayId);if(t.length===0){const i=e[0].pathwayId;this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to "${i}"`),t=this.getLevelsForPathway(i),this.pathwayId=i}return t.length!==e.length&&this.log(`Found ${t.length}/${e.length} levels in Pathway "${this.pathwayId}"`),t}getLevelsForPathway(e){return this.levels===null?[]:this.levels.filter(t=>e===t.pathwayId)}updatePathwayPriority(e){this._pathwayPriority=e;let t;const i=this.penalizedPathways,s=performance.now();Object.keys(i).forEach(a=>{s-i[a]>SP&&delete i[a]});for(let a=0;a<e.length;a++){const l=e[a];if(l in i)continue;if(l===this.pathwayId)return;const c=this.hls.nextLoadLevel,f=this.hls.levels[c];if(t=this.getLevelsForPathway(l),t.length>0){this.log(`Setting Pathway to "${l}"`),this.pathwayId=l,HT(t),this.hls.trigger(L.LEVELS_UPDATED,{levels:t});const d=this.hls.levels[c];f&&d&&this.levels&&(d.attrs["STABLE-VARIANT-ID"]!==f.attrs["STABLE-VARIANT-ID"]&&d.bitrate!==f.bitrate&&this.log(`Unstable Pathways change from bitrate ${f.bitrate} to ${d.bitrate}`),this.hls.nextLoadLevel=c);break}}}getPathwayForGroupId(e,t,i){const s=this.getLevelsForPathway(i).concat(this.levels||[]);for(let a=0;a<s.length;a++)if(t===Pe.AUDIO_TRACK&&s[a].hasAudioGroup(e)||t===Pe.SUBTITLE_TRACK&&s[a].hasSubtitleGroup(e))return s[a].pathwayId;return i}clonePathways(e){const t=this.levels;if(!t)return;const i={},s={};e.forEach(a=>{const{ID:l,"BASE-ID":c,"URI-REPLACEMENT":f}=a;if(t.some(h=>h.pathwayId===l))return;const d=this.getLevelsForPathway(c).map(h=>{const p=new ft(h.attrs);p["PATHWAY-ID"]=l;const g=p.AUDIO&&`${p.AUDIO}_clone_${l}`,b=p.SUBTITLES&&`${p.SUBTITLES}_clone_${l}`;g&&(i[p.AUDIO]=g,p.AUDIO=g),b&&(s[p.SUBTITLES]=b,p.SUBTITLES=b);const y=SS(h.uri,p["STABLE-VARIANT-ID"],"PER-VARIANT-URIS",f),T=new Mo({attrs:p,audioCodec:h.audioCodec,bitrate:h.bitrate,height:h.height,name:h.name,url:y,videoCodec:h.videoCodec,width:h.width});if(h.audioGroups)for(let x=1;x<h.audioGroups.length;x++)T.addGroupId("audio",`${h.audioGroups[x]}_clone_${l}`);if(h.subtitleGroups)for(let x=1;x<h.subtitleGroups.length;x++)T.addGroupId("text",`${h.subtitleGroups[x]}_clone_${l}`);return T});t.push(...d),eE(this.audioTracks,i,f,l),eE(this.subtitleTracks,s,f,l)})}loadSteeringManifest(e){const t=this.hls.config,i=t.loader;this.loader&&this.loader.destroy(),this.loader=new i(t);let s;try{s=new self.URL(e)}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest URI: ${e}`);return}if(s.protocol!=="data:"){const h=(this.hls.bandwidthEstimate||t.abrEwmaDefaultEstimate)|0;s.searchParams.set("_HLS_pathway",this.pathwayId),s.searchParams.set("_HLS_throughput",""+h)}const a={responseType:"json",url:s.href},l=t.steeringManifestLoadPolicy.default,c=l.errorRetry||l.timeoutRetry||{},f={loadPolicy:l,timeout:l.maxLoadTimeMs,maxRetry:c.maxNumRetry||0,retryDelay:c.retryDelayMs||0,maxRetryDelay:c.maxRetryDelayMs||0},d={onSuccess:(h,p,g,b)=>{this.log(`Loaded steering manifest: "${s}"`);const y=h.data;if(y?.VERSION!==1){this.log(`Steering VERSION ${y.VERSION} not supported!`);return}this.updated=performance.now(),this.timeToLoad=y.TTL;const{"RELOAD-URI":T,"PATHWAY-CLONES":x,"PATHWAY-PRIORITY":w}=y;if(T)try{this.uri=new self.URL(T,s).href}catch{this.enabled=!1,this.log(`Failed to parse Steering Manifest RELOAD-URI: ${T}`);return}this.scheduleRefresh(this.uri||g.url),x&&this.clonePathways(x);const S={steeringManifest:y,url:s.toString()};this.hls.trigger(L.STEERING_MANIFEST_LOADED,S),w&&this.updatePathwayPriority(w)},onError:(h,p,g,b)=>{if(this.log(`Error loading steering manifest: ${h.code} ${h.text} (${p.url})`),this.stopLoad(),h.code===410){this.enabled=!1,this.log(`Steering manifest ${p.url} no longer available`);return}let y=this.timeToLoad*1e3;if(h.code===429){const T=this.loader;if(typeof T?.getResponseHeader=="function"){const x=T.getResponseHeader("Retry-After");x&&(y=parseFloat(x)*1e3)}this.log(`Steering manifest ${p.url} rate limited`);return}this.scheduleRefresh(this.uri||p.url,y)},onTimeout:(h,p,g)=>{this.log(`Timeout loading steering manifest (${p.url})`),this.scheduleRefresh(this.uri||p.url)}};this.log(`Requesting steering manifest: ${s}`),this.loader.load(a,f,d)}scheduleRefresh(e,t=this.timeToLoad*1e3){this.clearTimeout(),this.reloadTimer=self.setTimeout(()=>{var i;const s=(i=this.hls)==null?void 0:i.media;if(s&&!s.ended){this.loadSteeringManifest(e);return}this.scheduleRefresh(e,this.timeToLoad*1e3)},t)}}function eE(n,e,t,i){n&&Object.keys(e).forEach(s=>{const a=n.filter(l=>l.groupId===s).map(l=>{const c=et({},l);return c.details=void 0,c.attrs=new ft(c.attrs),c.url=c.attrs.URI=SS(l.url,l.attrs["STABLE-RENDITION-ID"],"PER-RENDITION-URIS",t),c.groupId=c.attrs["GROUP-ID"]=e[s],c.attrs["PATHWAY-ID"]=i,c});n.push(...a)})}function SS(n,e,t,i){const{HOST:s,PARAMS:a,[t]:l}=i;let c;e&&(c=l?.[e],c&&(n=c));const f=new self.URL(n);return s&&!c&&(f.host=s),a&&Object.keys(a).sort().forEach(d=>{d&&f.searchParams.set(d,a[d])}),f.href}class pa extends Zi{constructor(e){super("eme",e.logger),this.hls=void 0,this.config=void 0,this.media=null,this.mediaResolved=void 0,this.keyFormatPromise=null,this.keySystemAccessPromises={},this._requestLicenseFailureCount=0,this.mediaKeySessions=[],this.keyIdToKeySessionPromise={},this.mediaKeys=null,this.setMediaKeysQueue=pa.CDMCleanupPromise?[pa.CDMCleanupPromise]:[],this.bannedKeyIds={},this.onMediaEncrypted=t=>{const{initDataType:i,initData:s}=t,a=`"${t.type}" event: init data type: "${i}"`;if(this.debug(a),s!==null){if(!this.keyFormatPromise){let l=Object.keys(this.keySystemAccessPromises);l.length||(l=Ro(this.config));const c=l.map(gh).filter(f=>!!f);this.keyFormatPromise=this.getKeyFormatPromise(c)}this.keyFormatPromise.then(l=>{const c=Hc(l);if(i!=="sinf"||c!==ht.FAIRPLAY){this.log(`Ignoring "${t.type}" event with init data type: "${i}" for selected key-system ${c}`);return}let f;try{const b=Ot(new Uint8Array(s)),y=Wm(JSON.parse(b).sinf),T=yT(y);if(!T)throw new Error("'schm' box missing or not cbcs/cenc with schi > tenc");f=new Uint8Array(T.subarray(8,24))}catch(b){this.warn(`${a} Failed to parse sinf: ${b}`);return}const d=Kt(f),{keyIdToKeySessionPromise:h,mediaKeySessions:p}=this;let g=h[d];for(let b=0;b<p.length;b++){const y=p[b],T=y.decryptdata;if(!T.keyId)continue;const x=Kt(T.keyId);if(fu(f,T.keyId)||T.uri.replace(/-/g,"").indexOf(d)!==-1){if(g=h[x],!g)continue;if(T.pssh)break;delete h[x],T.pssh=new Uint8Array(s),T.keyId=f,g=h[d]=g.then(()=>this.generateRequestWithPreferredKeySession(y,i,s,"encrypted-event-key-match")),g.catch(w=>this.handleError(w));break}}g||this.handleError(new Error(`Key ID ${d} not encountered in playlist. Key-system sessions ${p.length}.`))}).catch(l=>this.handleError(l))}},this.onWaitingForKey=t=>{this.log(`"${t.type}" event`)},this.hls=e,this.config=e.config,this.registerListeners()}destroy(){this.onDestroying(),this.onMediaDetached();const e=this.config;e.requestMediaKeySystemAccessFunc=null,e.licenseXhrSetup=e.licenseResponseCallback=void 0,e.drmSystems=e.drmSystemOptions={},this.hls=this.config=this.keyIdToKeySessionPromise=null,this.onMediaEncrypted=this.onWaitingForKey=null}registerListeners(){this.hls.on(L.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.on(L.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.on(L.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.on(L.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.on(L.DESTROYING,this.onDestroying,this)}unregisterListeners(){this.hls.off(L.MEDIA_ATTACHED,this.onMediaAttached,this),this.hls.off(L.MEDIA_DETACHED,this.onMediaDetached,this),this.hls.off(L.MANIFEST_LOADING,this.onManifestLoading,this),this.hls.off(L.MANIFEST_LOADED,this.onManifestLoaded,this),this.hls.off(L.DESTROYING,this.onDestroying,this)}getLicenseServerUrl(e){const{drmSystems:t,widevineLicenseUrl:i}=this.config,s=t?.[e];if(s)return s.licenseUrl;if(e===ht.WIDEVINE&&i)return i}getLicenseServerUrlOrThrow(e){const t=this.getLicenseServerUrl(e);if(t===void 0)throw new Error(`no license server URL configured for key-system "${e}"`);return t}getServerCertificateUrl(e){const{drmSystems:t}=this.config,i=t?.[e];if(i)return i.serverCertificateUrl;this.log(`No Server Certificate in config.drmSystems["${e}"]`)}attemptKeySystemAccess(e){const t=this.hls.levels,i=(l,c,f)=>!!l&&f.indexOf(l)===c,s=t.map(l=>l.audioCodec).filter(i),a=t.map(l=>l.videoCodec).filter(i);return s.length+a.length===0&&a.push("avc1.42e01e"),new Promise((l,c)=>{const f=d=>{const h=d.shift();this.getMediaKeysPromise(h,s,a).then(p=>l({keySystem:h,mediaKeys:p})).catch(p=>{d.length?f(d):p instanceof _i?c(p):c(new _i({type:Ee.KEY_SYSTEM_ERROR,details:Q.KEY_SYSTEM_NO_ACCESS,error:p,fatal:!0},p.message))})};f(e)})}requestMediaKeySystemAccess(e,t){const{requestMediaKeySystemAccessFunc:i}=this.config;if(typeof i!="function"){let s=`Configured requestMediaKeySystemAccess is not a function ${i}`;return MT===null&&self.location.protocol==="http:"&&(s=`navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`),Promise.reject(new Error(s))}return i(e,t)}getMediaKeysPromise(e,t,i){var s;const a=sO(e,t,i,this.config.drmSystemOptions||{});let l=this.keySystemAccessPromises[e],c=(s=l)==null?void 0:s.keySystemAccess;if(!c){this.log(`Requesting encrypted media "${e}" key-system access with config: ${st(a)}`),c=this.requestMediaKeySystemAccess(e,a);const f=l=this.keySystemAccessPromises[e]={keySystemAccess:c};return c.catch(d=>{this.log(`Failed to obtain access to key-system "${e}": ${d}`)}),c.then(d=>{this.log(`Access for key-system "${d.keySystem}" obtained`);const h=this.fetchServerCertificate(e);this.log(`Create media-keys for "${e}"`);const p=f.mediaKeys=d.createMediaKeys().then(g=>(this.log(`Media-keys created for "${e}"`),f.hasMediaKeys=!0,h.then(b=>b?this.setMediaKeysServerCertificate(g,e,b):g)));return p.catch(g=>{this.error(`Failed to create media-keys for "${e}"}: ${g}`)}),p})}return c.then(()=>l.mediaKeys)}createMediaKeySessionContext({decryptdata:e,keySystem:t,mediaKeys:i}){this.log(`Creating key-system session "${t}" keyId: ${Kt(e.keyId||[])} keyUri: ${e.uri}`);const s=i.createSession(),a={decryptdata:e,keySystem:t,mediaKeys:i,mediaKeysSession:s,keyStatus:"status-pending"};return this.mediaKeySessions.push(a),a}renewKeySession(e){const t=e.decryptdata;if(t.pssh){const i=this.createMediaKeySessionContext(e),s=_c(t),a="cenc";this.keyIdToKeySessionPromise[s]=this.generateRequestWithPreferredKeySession(i,a,t.pssh.buffer,"expired")}else this.warn("Could not renew expired session. Missing pssh initData.");this.removeSession(e)}updateKeySession(e,t){const i=e.mediaKeysSession;return this.log(`Updating key-session "${i.sessionId}" for keyId ${Kt(e.decryptdata.keyId||[])}
      } (data length: ${t.byteLength})`),i.update(t)}getSelectedKeySystemFormats(){return Object.keys(this.keySystemAccessPromises).map(e=>({keySystem:e,hasMediaKeys:this.keySystemAccessPromises[e].hasMediaKeys})).filter(({hasMediaKeys:e})=>!!e).map(({keySystem:e})=>gh(e)).filter(e=>!!e)}getKeySystemAccess(e){return this.getKeySystemSelectionPromise(e).then(({keySystem:t,mediaKeys:i})=>this.attemptSetMediaKeys(t,i))}selectKeySystem(e){return new Promise((t,i)=>{this.getKeySystemSelectionPromise(e).then(({keySystem:s})=>{const a=gh(s);a?t(a):i(new Error(`Unable to find format for key-system "${s}"`))}).catch(i)})}selectKeySystemFormat(e){const t=Object.keys(e.levelkeys||{});return this.keyFormatPromise||(this.log(`Selecting key-system from fragment (sn: ${e.sn} ${e.type}: ${e.level}) key formats ${t.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(t)),this.keyFormatPromise}getKeyFormatPromise(e){const t=Ro(this.config),i=e.map(Hc).filter(s=>!!s&&t.indexOf(s)!==-1);return this.selectKeySystem(i)}getKeyStatus(e){const{mediaKeySessions:t}=this;for(let i=0;i<t.length;i++){const s=AP(e,t[i]);if(s)return s}}loadKey(e){const t=e.keyInfo.decryptdata,i=_c(t),s=this.bannedKeyIds[i];if(s||this.getKeyStatus(t)==="internal-error"){const c=tE(s||"internal-error",t);return this.handleError(c,e.frag),Promise.reject(c)}const a=`(keyId: ${i} format: "${t.keyFormat}" method: ${t.method} uri: ${t.uri})`;this.log(`Starting session for key ${a}`);const l=this.keyIdToKeySessionPromise[i];if(!l){const c=this.getKeySystemForKeyPromise(t).then(({keySystem:f,mediaKeys:d})=>(this.throwIfDestroyed(),this.log(`Handle encrypted media sn: ${e.frag.sn} ${e.frag.type}: ${e.frag.level} using key ${a}`),this.attemptSetMediaKeys(f,d).then(()=>(this.throwIfDestroyed(),this.createMediaKeySessionContext({keySystem:f,mediaKeys:d,decryptdata:t}))))).then(f=>{const d="cenc",h=t.pssh?t.pssh.buffer:null;return this.generateRequestWithPreferredKeySession(f,d,h,"playlist-key")});return c.catch(f=>this.handleError(f,e.frag)),this.keyIdToKeySessionPromise[i]=c,c}return l.catch(c=>{if(c instanceof _i){const f=Xe({},c.data);this.getKeyStatus(t)==="internal-error"&&(f.decryptdata=t);const d=new _i(f,c.message);this.handleError(d,e.frag)}}),l}throwIfDestroyed(e="Invalid state"){if(!this.hls)throw new Error("invalid state")}handleError(e,t){if(this.hls)if(e instanceof _i){t&&(e.data.frag=t);const i=e.data.decryptdata;this.error(`${e.message}${i?` (${Kt(i.keyId||[])})`:""}`),this.hls.trigger(L.ERROR,e.data)}else this.error(e.message),this.hls.trigger(L.ERROR,{type:Ee.KEY_SYSTEM_ERROR,details:Q.KEY_SYSTEM_NO_KEYS,error:e,fatal:!0})}getKeySystemForKeyPromise(e){const t=_c(e),i=this.keyIdToKeySessionPromise[t];if(!i){const s=Hc(e.keyFormat),a=s?[s]:Ro(this.config);return this.attemptKeySystemAccess(a)}return i}getKeySystemSelectionPromise(e){if(e.length||(e=Ro(this.config)),e.length===0)throw new _i({type:Ee.KEY_SYSTEM_ERROR,details:Q.KEY_SYSTEM_NO_CONFIGURED_LICENSE,fatal:!0},`Missing key-system license configuration options ${st({drmSystems:this.config.drmSystems})}`);return this.attemptKeySystemAccess(e)}attemptSetMediaKeys(e,t){if(this.mediaResolved=void 0,this.mediaKeys===t)return Promise.resolve();const i=this.setMediaKeysQueue.slice();this.log(`Setting media-keys for "${e}"`);const s=Promise.all(i).then(()=>this.media?this.media.setMediaKeys(t):new Promise((a,l)=>{this.mediaResolved=()=>{if(this.mediaResolved=void 0,!this.media)return l(new Error("Attempted to set mediaKeys without media element attached"));this.mediaKeys=t,this.media.setMediaKeys(t).then(a).catch(l)}}));return this.mediaKeys=t,this.setMediaKeysQueue.push(s),s.then(()=>{this.log(`Media-keys set for "${e}"`),i.push(s),this.setMediaKeysQueue=this.setMediaKeysQueue.filter(a=>i.indexOf(a)===-1)})}generateRequestWithPreferredKeySession(e,t,i,s){var a;const l=(a=this.config.drmSystems)==null||(a=a[e.keySystem])==null?void 0:a.generateRequest;if(l)try{const y=l.call(this.hls,t,i,e);if(!y)throw new Error("Invalid response from configured generateRequest filter");t=y.initDataType,i=y.initData?y.initData:null,e.decryptdata.pssh=i?new Uint8Array(i):null}catch(y){if(this.warn(y.message),this.hls&&this.hls.config.debug)throw y}if(i===null)return this.log(`Skipping key-session request for "${s}" (no initData)`),Promise.resolve(e);const c=_c(e.decryptdata),f=e.decryptdata.uri;this.log(`Generating key-session request for "${s}" keyId: ${c} URI: ${f} (init data type: ${t} length: ${i.byteLength})`);const d=new Zm,h=e._onmessage=y=>{const T=e.mediaKeysSession;if(!T){d.emit("error",new Error("invalid state"));return}const{messageType:x,message:w}=y;this.log(`"${x}" message event for session "${T.sessionId}" message size: ${w.byteLength}`),x==="license-request"||x==="license-renewal"?this.renewLicense(e,w).catch(S=>{d.eventNames().length?d.emit("error",S):this.handleError(S)}):x==="license-release"?e.keySystem===ht.FAIRPLAY&&this.updateKeySession(e,tm("acknowledged")).then(()=>this.removeSession(e)).catch(S=>this.handleError(S)):this.warn(`unhandled media key message type "${x}"`)},p=(y,T)=>{T.keyStatus=y;let x;y.startsWith("usable")?d.emit("resolved"):y==="internal-error"||y==="output-restricted"||y==="output-downscaled"?x=tE(y,T.decryptdata):y==="expired"?x=new Error(`key expired (keyId: ${c})`):y==="released"?x=new Error("key released"):y==="status-pending"||this.warn(`unhandled key status change "${y}" (keyId: ${c})`),x&&(d.eventNames().length?d.emit("error",x):this.handleError(x))},g=e._onkeystatuseschange=y=>{if(!e.mediaKeysSession){d.emit("error",new Error("invalid state"));return}const x=this.getKeyStatuses(e);if(!Object.keys(x).some(_=>x[_]!=="status-pending"))return;if(x[c]==="expired"){this.log(`Expired key ${st(x)} in key-session "${e.mediaKeysSession.sessionId}"`),this.renewKeySession(e);return}let S=x[c];if(S)p(S,e);else{var A;e.keyStatusTimeouts||(e.keyStatusTimeouts={}),(A=e.keyStatusTimeouts)[c]||(A[c]=self.setTimeout(()=>{if(!e.mediaKeysSession||!this.mediaKeys)return;const I=this.getKeyStatus(e.decryptdata);if(I&&I!=="status-pending")return this.log(`No status for keyId ${c} in key-session "${e.mediaKeysSession.sessionId}". Using session key-status ${I} from other session.`),p(I,e);this.log(`key status for ${c} in key-session "${e.mediaKeysSession.sessionId}" timed out after 1000ms`),S="internal-error",p(S,e)},1e3)),this.log(`No status for keyId ${c} (${st(x)}).`)}};ri(e.mediaKeysSession,"message",h),ri(e.mediaKeysSession,"keystatuseschange",g);const b=new Promise((y,T)=>{d.on("error",T),d.on("resolved",y)});return e.mediaKeysSession.generateRequest(t,i).then(()=>{this.log(`Request generated for key-session "${e.mediaKeysSession.sessionId}" keyId: ${c} URI: ${f}`)}).catch(y=>{throw new _i({type:Ee.KEY_SYSTEM_ERROR,details:Q.KEY_SYSTEM_NO_SESSION,error:y,decryptdata:e.decryptdata,fatal:!1},`Error generating key-session request: ${y}`)}).then(()=>b).catch(y=>(d.removeAllListeners(),this.removeSession(e).then(()=>{throw y}))).then(()=>(d.removeAllListeners(),e))}getKeyStatuses(e){const t={};return e.mediaKeysSession.keyStatuses.forEach((i,s)=>{if(typeof s=="string"&&typeof i=="object"){const c=s;s=i,i=c}const a="buffer"in s?new Uint8Array(s.buffer,s.byteOffset,s.byteLength):new Uint8Array(s);if(e.keySystem===ht.PLAYREADY&&a.length===16){const c=Kt(a);t[c]=i,kT(a)}const l=Kt(a);i==="internal-error"&&(this.bannedKeyIds[l]=i),this.log(`key status change "${i}" for keyStatuses keyId: ${l} key-session "${e.mediaKeysSession.sessionId}"`),t[l]=i}),t}fetchServerCertificate(e){const t=this.config,i=t.loader,s=new i(t),a=this.getServerCertificateUrl(e);return a?(this.log(`Fetching server certificate for "${e}"`),new Promise((l,c)=>{const f={responseType:"arraybuffer",url:a},d=t.certLoadPolicy.default,h={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},p={onSuccess:(g,b,y,T)=>{l(g.data)},onError:(g,b,y,T)=>{c(new _i({type:Ee.KEY_SYSTEM_ERROR,details:Q.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:y,response:Xe({url:f.url,data:void 0},g)},`"${e}" certificate request failed (${a}). Status: ${g.code} (${g.text})`))},onTimeout:(g,b,y)=>{c(new _i({type:Ee.KEY_SYSTEM_ERROR,details:Q.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,fatal:!0,networkDetails:y,response:{url:f.url,data:void 0}},`"${e}" certificate request timed out (${a})`))},onAbort:(g,b,y)=>{c(new Error("aborted"))}};s.load(f,h,p)})):Promise.resolve()}setMediaKeysServerCertificate(e,t,i){return new Promise((s,a)=>{e.setServerCertificate(i).then(l=>{this.log(`setServerCertificate ${l?"success":"not supported by CDM"} (${i.byteLength}) on "${t}"`),s(e)}).catch(l=>{a(new _i({type:Ee.KEY_SYSTEM_ERROR,details:Q.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,error:l,fatal:!0},l.message))})})}renewLicense(e,t){return this.requestLicense(e,new Uint8Array(t)).then(i=>this.updateKeySession(e,new Uint8Array(i)).catch(s=>{throw new _i({type:Ee.KEY_SYSTEM_ERROR,details:Q.KEY_SYSTEM_SESSION_UPDATE_FAILED,decryptdata:e.decryptdata,error:s,fatal:!1},s.message)}))}unpackPlayReadyKeyMessage(e,t){const i=String.fromCharCode.apply(null,new Uint16Array(t.buffer));if(!i.includes("PlayReadyKeyMessage"))return e.setRequestHeader("Content-Type","text/xml; charset=utf-8"),t;const s=new DOMParser().parseFromString(i,"application/xml"),a=s.querySelectorAll("HttpHeader");if(a.length>0){let h;for(let p=0,g=a.length;p<g;p++){var l,c;h=a[p];const b=(l=h.querySelector("name"))==null?void 0:l.textContent,y=(c=h.querySelector("value"))==null?void 0:c.textContent;b&&y&&e.setRequestHeader(b,y)}}const f=s.querySelector("Challenge"),d=f?.textContent;if(!d)throw new Error("Cannot find <Challenge> in key message");return tm(atob(d))}setupLicenseXHR(e,t,i,s){const a=this.config.licenseXhrSetup;return a?Promise.resolve().then(()=>{if(!i.decryptdata)throw new Error("Key removed");return a.call(this.hls,e,t,i,s)}).catch(l=>{if(!i.decryptdata)throw l;return e.open("POST",t,!0),a.call(this.hls,e,t,i,s)}).then(l=>(e.readyState||e.open("POST",t,!0),{xhr:e,licenseChallenge:l||s})):(e.open("POST",t,!0),Promise.resolve({xhr:e,licenseChallenge:s}))}requestLicense(e,t){const i=this.config.keyLoadPolicy.default;return new Promise((s,a)=>{const l=this.getLicenseServerUrlOrThrow(e.keySystem);this.log(`Sending license request to URL: ${l}`);const c=new XMLHttpRequest;c.responseType="arraybuffer",c.onreadystatechange=()=>{if(!this.hls||!e.mediaKeysSession)return a(new Error("invalid state"));if(c.readyState===4)if(c.status===200){this._requestLicenseFailureCount=0;let f=c.response;this.log(`License received ${f instanceof ArrayBuffer?f.byteLength:f}`);const d=this.config.licenseResponseCallback;if(d)try{f=d.call(this.hls,c,l,e)}catch(h){this.error(h)}s(f)}else{const f=i.errorRetry,d=f?f.maxNumRetry:0;if(this._requestLicenseFailureCount++,this._requestLicenseFailureCount>d||c.status>=400&&c.status<500)a(new _i({type:Ee.KEY_SYSTEM_ERROR,details:Q.KEY_SYSTEM_LICENSE_REQUEST_FAILED,decryptdata:e.decryptdata,fatal:!0,networkDetails:c,response:{url:l,data:void 0,code:c.status,text:c.statusText}},`License Request XHR failed (${l}). Status: ${c.status} (${c.statusText})`));else{const h=d-this._requestLicenseFailureCount+1;this.warn(`Retrying license request, ${h} attempts left`),this.requestLicense(e,t).then(s,a)}}},e.licenseXhr&&e.licenseXhr.readyState!==XMLHttpRequest.DONE&&e.licenseXhr.abort(),e.licenseXhr=c,this.setupLicenseXHR(c,l,e,t).then(({xhr:f,licenseChallenge:d})=>{e.keySystem==ht.PLAYREADY&&(d=this.unpackPlayReadyKeyMessage(f,d)),f.send(d)}).catch(a)})}onDestroying(){this.unregisterListeners(),this._clear()}onMediaAttached(e,t){if(!this.config.emeEnabled)return;const i=t.media;this.media=i,ri(i,"encrypted",this.onMediaEncrypted),ri(i,"waitingforkey",this.onWaitingForKey);const s=this.mediaResolved;s?s():this.mediaKeys=i.mediaKeys}onMediaDetached(){const e=this.media;e&&(yi(e,"encrypted",this.onMediaEncrypted),yi(e,"waitingforkey",this.onWaitingForKey),this.media=null,this.mediaKeys=null)}_clear(){var e;this._requestLicenseFailureCount=0,this.keyIdToKeySessionPromise={},this.bannedKeyIds={};const t=this.mediaResolved;if(t&&t(),!this.mediaKeys&&!this.mediaKeySessions.length)return;const i=this.media,s=this.mediaKeySessions.slice();this.mediaKeySessions=[],this.mediaKeys=null,ks.clearKeyUriToKeyIdMap();const a=s.length;pa.CDMCleanupPromise=Promise.all(s.map(l=>this.removeSession(l)).concat((i==null||(e=i.setMediaKeys(null))==null?void 0:e.catch(l=>{this.log(`Could not clear media keys: ${l}`),this.hls&&this.hls.trigger(L.ERROR,{type:Ee.OTHER_ERROR,details:Q.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,fatal:!1,error:new Error(`Could not clear media keys: ${l}`)})}))||Promise.resolve())).catch(l=>{this.log(`Could not close sessions and clear media keys: ${l}`),this.hls&&this.hls.trigger(L.ERROR,{type:Ee.OTHER_ERROR,details:Q.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close sessions and clear media keys: ${l}`)})}).then(()=>{a&&this.log("finished closing key sessions and clearing media keys")})}onManifestLoading(){this._clear()}onManifestLoaded(e,{sessionKeys:t}){if(!(!t||!this.config.emeEnabled)&&!this.keyFormatPromise){const i=t.reduce((s,a)=>(s.indexOf(a.keyFormat)===-1&&s.push(a.keyFormat),s),[]);this.log(`Selecting key-system from session-keys ${i.join(", ")}`),this.keyFormatPromise=this.getKeyFormatPromise(i)}}removeSession(e){const{mediaKeysSession:t,licenseXhr:i,decryptdata:s}=e;if(t){this.log(`Remove licenses and keys and close session "${t.sessionId}" keyId: ${Kt(s?.keyId||[])}`),e._onmessage&&(t.removeEventListener("message",e._onmessage),e._onmessage=void 0),e._onkeystatuseschange&&(t.removeEventListener("keystatuseschange",e._onkeystatuseschange),e._onkeystatuseschange=void 0),i&&i.readyState!==XMLHttpRequest.DONE&&i.abort(),e.mediaKeysSession=e.decryptdata=e.licenseXhr=void 0;const a=this.mediaKeySessions.indexOf(e);a>-1&&this.mediaKeySessions.splice(a,1);const{keyStatusTimeouts:l}=e;l&&Object.keys(l).forEach(d=>self.clearTimeout(l[d]));const{drmSystemOptions:c}=this.config;return(aO(c)?new Promise((d,h)=>{self.setTimeout(()=>h(new Error("MediaKeySession.remove() timeout")),8e3),t.remove().then(d).catch(h)}):Promise.resolve()).catch(d=>{this.log(`Could not remove session: ${d}`),this.hls&&this.hls.trigger(L.ERROR,{type:Ee.OTHER_ERROR,details:Q.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,fatal:!1,error:new Error(`Could not remove session: ${d}`)})}).then(()=>t.close()).catch(d=>{this.log(`Could not close session: ${d}`),this.hls&&this.hls.trigger(L.ERROR,{type:Ee.OTHER_ERROR,details:Q.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,fatal:!1,error:new Error(`Could not close session: ${d}`)})})}return Promise.resolve()}}pa.CDMCleanupPromise=void 0;function _c(n){if(!n)throw new Error("Could not read keyId of undefined decryptdata");if(n.keyId===null)throw new Error("keyId is null");return Kt(n.keyId)}function AP(n,e){if(n.keyId&&e.mediaKeysSession.keyStatuses.has(n.keyId))return e.mediaKeysSession.keyStatuses.get(n.keyId);if(n.matches(e.decryptdata))return e.keyStatus}class _i extends Error{constructor(e,t){super(t),this.data=void 0,e.error||(e.error=new Error(t)),this.data=e,e.err=e.error}}function tE(n,e){const t=n==="output-restricted",i=t?Q.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:Q.KEY_SYSTEM_STATUS_INTERNAL_ERROR;return new _i({type:Ee.KEY_SYSTEM_ERROR,details:i,fatal:!1,decryptdata:e},t?"HDCP level output restricted":`key status changed to "${n}"`)}class RP{constructor(e){this.hls=void 0,this.isVideoPlaybackQualityAvailable=!1,this.timer=void 0,this.media=null,this.lastTime=void 0,this.lastDroppedFrames=0,this.lastDecodedFrames=0,this.streamController=void 0,this.hls=e,this.registerListeners()}setStreamController(e){this.streamController=e}registerListeners(){this.hls.on(L.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.on(L.MEDIA_DETACHING,this.onMediaDetaching,this)}unregisterListeners(){this.hls.off(L.MEDIA_ATTACHING,this.onMediaAttaching,this),this.hls.off(L.MEDIA_DETACHING,this.onMediaDetaching,this)}destroy(){this.timer&&clearInterval(this.timer),this.unregisterListeners(),this.isVideoPlaybackQualityAvailable=!1,this.media=null}onMediaAttaching(e,t){const i=this.hls.config;if(i.capLevelOnFPSDrop){const s=t.media instanceof self.HTMLVideoElement?t.media:null;this.media=s,s&&typeof s.getVideoPlaybackQuality=="function"&&(this.isVideoPlaybackQualityAvailable=!0),self.clearInterval(this.timer),this.timer=self.setInterval(this.checkFPSInterval.bind(this),i.fpsDroppedMonitoringPeriod)}}onMediaDetaching(){this.media=null}checkFPS(e,t,i){const s=performance.now();if(t){if(this.lastTime){const a=s-this.lastTime,l=i-this.lastDroppedFrames,c=t-this.lastDecodedFrames,f=1e3*l/a,d=this.hls;if(d.trigger(L.FPS_DROP,{currentDropped:l,currentDecoded:c,totalDroppedFrames:i}),f>0&&l>d.config.fpsDroppedMonitoringThreshold*c){let h=d.currentLevel;d.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+h),h>0&&(d.autoLevelCapping===-1||d.autoLevelCapping>=h)&&(h=h-1,d.trigger(L.FPS_DROP_LEVEL_CAPPING,{level:h,droppedLevel:d.currentLevel}),d.autoLevelCapping=h,this.streamController.nextLevelSwitch())}}this.lastTime=s,this.lastDroppedFrames=i,this.lastDecodedFrames=t}}checkFPSInterval(){const e=this.media;if(e)if(this.isVideoPlaybackQualityAvailable){const t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)}}function wS(n,e){let t;try{t=new Event("addtrack")}catch{t=document.createEvent("Event"),t.initEvent("addtrack",!1,!1)}t.track=n,e.dispatchEvent(t)}function AS(n,e){const t=n.mode;if(t==="disabled"&&(n.mode="hidden"),n.cues&&!n.cues.getCueById(e.id))try{if(n.addCue(e),!n.cues.getCueById(e.id))throw new Error(`addCue is failed for: ${e}`)}catch(i){We.debug(`[texttrack-utils]: ${i}`);try{const s=new self.TextTrackCue(e.startTime,e.endTime,e.text);s.id=e.id,n.addCue(s)}catch(s){We.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${s}`)}}t==="disabled"&&(n.mode=t)}function da(n,e){const t=n.mode;if(t==="disabled"&&(n.mode="hidden"),n.cues)for(let i=n.cues.length;i--;)e&&n.cues[i].removeEventListener("enter",e),n.removeCue(n.cues[i]);t==="disabled"&&(n.mode=t)}function um(n,e,t,i){const s=n.mode;if(s==="disabled"&&(n.mode="hidden"),n.cues&&n.cues.length>0){const a=_P(n.cues,e,t);for(let l=0;l<a.length;l++)(!i||i(a[l]))&&n.removeCue(a[l])}s==="disabled"&&(n.mode=s)}function LP(n,e){if(e<=n[0].startTime)return 0;const t=n.length-1;if(e>n[t].endTime)return-1;let i=0,s=t,a;for(;i<=s;)if(a=Math.floor((s+i)/2),e<n[a].startTime)s=a-1;else if(e>n[a].startTime&&i<t)i=a+1;else return a;return n[i].startTime-e<e-n[s].startTime?i:s}function _P(n,e,t){const i=[],s=LP(n,e);if(s>-1)for(let a=s,l=n.length;a<l;a++){const c=n[a];if(c.startTime>=e&&c.endTime<=t)i.push(c);else if(c.startTime>t)return i}return i}function qc(n){const e=[];for(let t=0;t<n.length;t++){const i=n[t];(i.kind==="subtitles"||i.kind==="captions")&&i.label&&e.push(n[t])}return e}class CP extends rp{constructor(e){super(e,"subtitle-track-controller"),this.media=null,this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0,this.queuedDefaultTrack=-1,this.useTextTrackPolling=!1,this.subtitlePollingInterval=-1,this._subtitleDisplay=!0,this.asyncPollTrackChange=()=>this.pollTrackChange(0),this.onTextTracksChanged=()=>{if(this.useTextTrackPolling||self.clearInterval(this.subtitlePollingInterval),!this.media||!this.hls.config.renderTextTracksNatively)return;let t=null;const i=qc(this.media.textTracks);for(let a=0;a<i.length;a++)if(i[a].mode==="hidden")t=i[a];else if(i[a].mode==="showing"){t=i[a];break}const s=this.findTrackForTextTrack(t);this.subtitleTrack!==s&&this.setSubtitleTrack(s)},this.registerListeners()}destroy(){this.unregisterListeners(),this.tracks.length=0,this.tracksInGroup.length=0,this.currentTrack=null,this.onTextTracksChanged=this.asyncPollTrackChange=null,super.destroy()}get subtitleDisplay(){return this._subtitleDisplay}set subtitleDisplay(e){this._subtitleDisplay=e,this.trackId>-1&&this.toggleTrackModes()}registerListeners(){const{hls:e}=this;e.on(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.MANIFEST_PARSED,this.onManifestParsed,this),e.on(L.LEVEL_LOADING,this.onLevelLoading,this),e.on(L.LEVEL_SWITCHING,this.onLevelSwitching,this),e.on(L.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(L.ERROR,this.onError,this)}unregisterListeners(){const{hls:e}=this;e.off(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.MANIFEST_PARSED,this.onManifestParsed,this),e.off(L.LEVEL_LOADING,this.onLevelLoading,this),e.off(L.LEVEL_SWITCHING,this.onLevelSwitching,this),e.off(L.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(L.ERROR,this.onError,this)}onMediaAttached(e,t){this.media=t.media,this.media&&(this.queuedDefaultTrack>-1&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=-1),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.pollTrackChange(500):this.media.textTracks.addEventListener("change",this.asyncPollTrackChange))}pollTrackChange(e){self.clearInterval(this.subtitlePollingInterval),this.subtitlePollingInterval=self.setInterval(this.onTextTracksChanged,e)}onMediaDetaching(e,t){const i=this.media;if(!i)return;const s=!!t.transferMedia;if(self.clearInterval(this.subtitlePollingInterval),this.useTextTrackPolling||i.textTracks.removeEventListener("change",this.asyncPollTrackChange),this.trackId>-1&&(this.queuedDefaultTrack=this.trackId),this.subtitleTrack=-1,this.media=null,s)return;qc(i.textTracks).forEach(l=>{da(l)})}onManifestLoading(){this.tracks=[],this.groupIds=null,this.tracksInGroup=[],this.trackId=-1,this.currentTrack=null,this.selectDefaultTrack=!0}onManifestParsed(e,t){this.tracks=t.subtitleTracks}onSubtitleTrackLoaded(e,t){const{id:i,groupId:s,details:a}=t,l=this.tracksInGroup[i];if(!l||l.groupId!==s){this.warn(`Subtitle track with id:${i} and group:${s} not found in active group ${l?.groupId}`);return}const c=l.details;l.details=t.details,this.log(`Subtitle track ${i} "${l.name}" lang:${l.lang} group:${s} loaded [${a.startSN}-${a.endSN}]`),i===this.trackId&&this.playlistLoaded(i,t,c)}onLevelLoading(e,t){this.switchLevel(t.level)}onLevelSwitching(e,t){this.switchLevel(t.level)}switchLevel(e){const t=this.hls.levels[e];if(!t)return;const i=t.subtitleGroups||null,s=this.groupIds;let a=this.currentTrack;if(!i||s?.length!==i?.length||i!=null&&i.some(l=>s?.indexOf(l)===-1)){this.groupIds=i,this.trackId=-1,this.currentTrack=null;const l=this.tracks.filter(h=>!i||i.indexOf(h.groupId)!==-1);if(l.length)this.selectDefaultTrack&&!l.some(h=>h.default)&&(this.selectDefaultTrack=!1),l.forEach((h,p)=>{h.id=p});else if(!a&&!this.tracksInGroup.length)return;this.tracksInGroup=l;const c=this.hls.config.subtitlePreference;if(!a&&c){this.selectDefaultTrack=!1;const h=vn(c,l);if(h>-1)a=l[h];else{const p=vn(c,this.tracks);a=this.tracks[p]}}let f=this.findTrackId(a);f===-1&&a&&(f=this.findTrackId(null));const d={subtitleTracks:l};this.log(`Updating subtitle tracks, ${l.length} track(s) found in "${i?.join(",")}" group-id`),this.hls.trigger(L.SUBTITLE_TRACKS_UPDATED,d),f!==-1&&this.trackId===-1&&this.setSubtitleTrack(f)}}findTrackId(e){const t=this.tracksInGroup,i=this.selectDefaultTrack;for(let s=0;s<t.length;s++){const a=t[s];if(!(i&&!a.default||!i&&!e)&&(!e||fr(a,e)))return s}if(e){for(let s=0;s<t.length;s++){const a=t[s];if(Fo(e.attrs,a.attrs,["LANGUAGE","ASSOC-LANGUAGE","CHARACTERISTICS"]))return s}for(let s=0;s<t.length;s++){const a=t[s];if(Fo(e.attrs,a.attrs,["LANGUAGE"]))return s}}return-1}findTrackForTextTrack(e){if(e){const t=this.tracksInGroup;for(let i=0;i<t.length;i++){const s=t[i];if(am(s,e))return i}}return-1}onError(e,t){t.fatal||!t.context||t.context.type===Pe.SUBTITLE_TRACK&&t.context.id===this.trackId&&(!this.groupIds||this.groupIds.indexOf(t.context.groupId)!==-1)&&this.checkRetry(t)}get allSubtitleTracks(){return this.tracks}get subtitleTracks(){return this.tracksInGroup}get subtitleTrack(){return this.trackId}set subtitleTrack(e){this.selectDefaultTrack=!1,this.setSubtitleTrack(e)}setSubtitleOption(e){if(this.hls.config.subtitlePreference=e,e){if(e.id===-1)return this.setSubtitleTrack(-1),null;const t=this.allSubtitleTracks;if(this.selectDefaultTrack=!1,t.length){const i=this.currentTrack;if(i&&fr(e,i))return i;const s=vn(e,this.tracksInGroup);if(s>-1){const a=this.tracksInGroup[s];return this.setSubtitleTrack(s),a}else{if(i)return null;{const a=vn(e,t);if(a>-1)return t[a]}}}}return null}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentTrack)&&this.scheduleLoading(this.currentTrack,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const i=e.id,s=e.groupId,a=this.getUrlWithDirectives(e.url,t),l=e.details,c=l?.age;this.log(`Loading subtitle ${i} "${e.name}" lang:${e.lang} group:${s}${t?.msn!==void 0?" at sn "+t.msn+" part "+t.part:""}${c&&l.live?" age "+c.toFixed(1)+(l.type&&" "+l.type||""):""} ${a}`),this.hls.trigger(L.SUBTITLE_TRACK_LOADING,{url:a,id:i,groupId:s,deliveryDirectives:t||null,track:e})}toggleTrackModes(){const{media:e}=this;if(!e)return;const t=qc(e.textTracks),i=this.currentTrack;let s;if(i&&(s=t.filter(a=>am(i,a))[0],s||this.warn(`Unable to find subtitle TextTrack with name "${i.name}" and language "${i.lang}"`)),[].slice.call(t).forEach(a=>{a.mode!=="disabled"&&a!==s&&(a.mode="disabled")}),s){const a=this.subtitleDisplay?"showing":"hidden";s.mode!==a&&(s.mode=a)}}setSubtitleTrack(e){const t=this.tracksInGroup;if(!this.media){this.queuedDefaultTrack=e;return}if(e<-1||e>=t.length||!pe(e)){this.warn(`Invalid subtitle track id: ${e}`);return}this.selectDefaultTrack=!1;const i=this.currentTrack,s=t[e]||null;if(this.trackId=e,this.currentTrack=s,this.toggleTrackModes(),!s){this.hls.trigger(L.SUBTITLE_TRACK_SWITCH,{id:e});return}const a=!!s.details&&!s.details.live;if(e===this.trackId&&s===i&&a)return;this.log(`Switching to subtitle-track ${e}`+(s?` "${s.name}" lang:${s.lang} group:${s.groupId}`:""));const{id:l,groupId:c="",name:f,type:d,url:h}=s;this.hls.trigger(L.SUBTITLE_TRACK_SWITCH,{id:l,groupId:c,name:f,type:d,url:h});const p=this.switchParams(s.url,i?.details,s.details);this.loadPlaylist(p)}}function IP(){try{return crypto.randomUUID()}catch{try{const e=URL.createObjectURL(new Blob),t=e.toString();return URL.revokeObjectURL(e),t.slice(t.lastIndexOf("/")+1)}catch{let t=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s=>{const a=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(s=="x"?a:a&3|8).toString(16)})}}}function Co(n){let e=5381,t=n.length;for(;t;)e=e*33^n.charCodeAt(--t);return(e>>>0).toString()}const ga=.025;let gu=(function(n){return n[n.Point=0]="Point",n[n.Range=1]="Range",n})({});function DP(n,e,t){return`${n.identifier}-${t+1}-${Co(e)}`}class kP{constructor(e,t){this.base=void 0,this._duration=null,this._timelineStart=null,this.appendInPlaceDisabled=void 0,this.appendInPlaceStarted=void 0,this.dateRange=void 0,this.hasPlayed=!1,this.cumulativeDuration=0,this.resumeOffset=NaN,this.playoutLimit=NaN,this.restrictions={skip:!1,jump:!1},this.snapOptions={out:!1,in:!1},this.assetList=[],this.assetListLoader=void 0,this.assetListResponse=null,this.resumeAnchor=void 0,this.error=void 0,this.resetOnResume=void 0,this.base=t,this.dateRange=e,this.setDateRange(e)}setDateRange(e){this.dateRange=e,this.resumeOffset=e.attr.optionalFloat("X-RESUME-OFFSET",this.resumeOffset),this.playoutLimit=e.attr.optionalFloat("X-PLAYOUT-LIMIT",this.playoutLimit),this.restrictions=e.attr.enumeratedStringList("X-RESTRICT",this.restrictions),this.snapOptions=e.attr.enumeratedStringList("X-SNAP",this.snapOptions)}reset(){var e;this.appendInPlaceStarted=!1,(e=this.assetListLoader)==null||e.destroy(),this.assetListLoader=void 0,this.supplementsPrimary||(this.assetListResponse=null,this.assetList=[],this._duration=null)}isAssetPastPlayoutLimit(e){var t;if(e>0&&e>=this.assetList.length)return!0;const i=this.playoutLimit;return e<=0||isNaN(i)?!1:i===0?!0:(((t=this.assetList[e])==null?void 0:t.startOffset)||0)>i}findAssetIndex(e){return this.assetList.indexOf(e)}get identifier(){return this.dateRange.id}get startDate(){return this.dateRange.startDate}get startTime(){const e=this.dateRange.startTime;if(this.snapOptions.out){const t=this.dateRange.tagAnchor;if(t)return Ah(e,t)}return e}get startOffset(){return this.cue.pre?0:this.startTime}get startIsAligned(){if(this.startTime===0||this.snapOptions.out)return!0;const e=this.dateRange.tagAnchor;if(e){const t=this.dateRange.startTime,i=Ah(t,e);return t-i<.1}return!1}get resumptionOffset(){const e=this.resumeOffset,t=pe(e)?e:this.duration;return this.cumulativeDuration+t}get resumeTime(){const e=this.startOffset+this.resumptionOffset;if(this.snapOptions.in){const t=this.resumeAnchor;if(t)return Ah(e,t)}return e}get appendInPlace(){return this.appendInPlaceStarted?!0:this.appendInPlaceDisabled?!1:!!(!this.cue.once&&!this.cue.pre&&this.startIsAligned&&(isNaN(this.playoutLimit)&&isNaN(this.resumeOffset)||this.resumeOffset&&this.duration&&Math.abs(this.resumeOffset-this.duration)<ga))}set appendInPlace(e){if(this.appendInPlaceStarted){this.resetOnResume=!e;return}this.appendInPlaceDisabled=!e}get timelineStart(){return this._timelineStart!==null?this._timelineStart:this.startTime}set timelineStart(e){this._timelineStart=e}get duration(){const e=this.playoutLimit;let t;return this._duration!==null?t=this._duration:this.dateRange.duration?t=this.dateRange.duration:t=this.dateRange.plannedDuration||0,!isNaN(e)&&e<t&&(t=e),t}set duration(e){this._duration=e}get cue(){return this.dateRange.cue}get timelineOccupancy(){return this.dateRange.attr["X-TIMELINE-OCCUPIES"]==="RANGE"?gu.Range:gu.Point}get supplementsPrimary(){return this.dateRange.attr["X-TIMELINE-STYLE"]==="PRIMARY"}get contentMayVary(){return this.dateRange.attr["X-CONTENT-MAY-VARY"]!=="NO"}get assetUrl(){return this.dateRange.attr["X-ASSET-URI"]}get assetListUrl(){return this.dateRange.attr["X-ASSET-LIST"]}get baseUrl(){return this.base.url}get assetListLoaded(){return this.assetList.length>0||this.assetListResponse!==null}toString(){return OP(this)}}function Ah(n,e){return n-e.start<e.duration/2&&!(Math.abs(n-(e.start+e.duration))<ga)?e.start:e.start+e.duration}function RS(n,e,t){const i=new self.URL(n,t);return i.protocol!=="data:"&&i.searchParams.set("_HLS_primary_id",e),i}function Rh(n,e){for(;(t=n.assetList[++e])!=null&&t.error;)var t;return e}function OP(n){return`["${n.identifier}" ${n.cue.pre?"<pre>":n.cue.post?"<post>":""}${n.timelineStart.toFixed(2)}-${n.resumeTime.toFixed(2)}]`}function ua(n){const e=n.timelineStart,t=n.duration||0;return`["${n.identifier}" ${e.toFixed(2)}-${(e+t).toFixed(2)}]`}class MP{constructor(e,t,i,s){this.hls=void 0,this.interstitial=void 0,this.assetItem=void 0,this.tracks=null,this.hasDetails=!1,this.mediaAttached=null,this._currentTime=void 0,this._bufferedEosTime=void 0,this.checkPlayout=()=>{this.reachedPlayout(this.currentTime)&&this.hls&&this.hls.trigger(L.PLAYOUT_LIMIT_REACHED,{})};const a=this.hls=new e(t);this.interstitial=i,this.assetItem=s;const l=()=>{this.hasDetails=!0};a.once(L.LEVEL_LOADED,l),a.once(L.AUDIO_TRACK_LOADED,l),a.once(L.SUBTITLE_TRACK_LOADED,l),a.on(L.MEDIA_ATTACHING,(c,{media:f})=>{this.removeMediaListeners(),this.mediaAttached=f,this.interstitial.playoutLimit&&(f.addEventListener("timeupdate",this.checkPlayout),this.appendInPlace&&a.on(L.BUFFER_APPENDED,()=>{const h=this.bufferedEnd;this.reachedPlayout(h)&&(this._bufferedEosTime=h,a.trigger(L.BUFFERED_TO_END,void 0))}))})}get appendInPlace(){return this.interstitial.appendInPlace}loadSource(){const e=this.hls;if(e)if(e.url)e.levels.length&&!e.started&&e.startLoad(-1,!0);else{let t=this.assetItem.uri;try{t=RS(t,e.config.primarySessionId||"").href}catch{}e.loadSource(t)}}bufferedInPlaceToEnd(e){var t;if(!this.appendInPlace)return!1;if((t=this.hls)!=null&&t.bufferedToEnd)return!0;if(!e)return!1;const i=Math.min(this._bufferedEosTime||1/0,this.duration),s=this.timelineOffset,a=_e.bufferInfo(e,s,0);return this.getAssetTime(a.end)>=i-.02}reachedPlayout(e){const i=this.interstitial.playoutLimit;return this.startOffset+e>=i}get destroyed(){var e;return!((e=this.hls)!=null&&e.userConfig)}get assetId(){return this.assetItem.identifier}get interstitialId(){return this.assetItem.parentIdentifier}get media(){var e;return((e=this.hls)==null?void 0:e.media)||null}get bufferedEnd(){const e=this.media||this.mediaAttached;if(!e)return this._bufferedEosTime?this._bufferedEosTime:this.currentTime;const t=_e.bufferInfo(e,e.currentTime,.001);return this.getAssetTime(t.end)}get currentTime(){const e=this.media||this.mediaAttached;return e?this.getAssetTime(e.currentTime):this._currentTime||0}get duration(){const e=this.assetItem.duration;if(!e)return 0;const t=this.interstitial.playoutLimit;if(t){const i=t-this.startOffset;if(i>0&&i<e)return i}return e}get remaining(){const e=this.duration;return e?Math.max(0,e-this.currentTime):0}get startOffset(){return this.assetItem.startOffset}get timelineOffset(){var e;return((e=this.hls)==null?void 0:e.config.timelineOffset)||0}set timelineOffset(e){const t=this.timelineOffset;if(e!==t){const i=e-t;if(Math.abs(i)>1/9e4&&this.hls){if(this.hasDetails)throw new Error("Cannot set timelineOffset after playlists are loaded");this.hls.config.timelineOffset=e}}}getAssetTime(e){const t=this.timelineOffset,i=this.duration;return Math.min(Math.max(0,e-t),i)}removeMediaListeners(){const e=this.mediaAttached;e&&(this._currentTime=e.currentTime,this.bufferSnapShot(),e.removeEventListener("timeupdate",this.checkPlayout))}bufferSnapShot(){if(this.mediaAttached){var e;(e=this.hls)!=null&&e.bufferedToEnd&&(this._bufferedEosTime=this.bufferedEnd)}}destroy(){this.removeMediaListeners(),this.hls&&this.hls.destroy(),this.hls=null,this.tracks=this.mediaAttached=this.checkPlayout=null}attachMedia(e){var t;this.loadSource(),(t=this.hls)==null||t.attachMedia(e)}detachMedia(){var e;this.removeMediaListeners(),this.mediaAttached=null,(e=this.hls)==null||e.detachMedia()}resumeBuffering(){var e;(e=this.hls)==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.hls)==null||e.pauseBuffering()}transferMedia(){var e;return this.bufferSnapShot(),((e=this.hls)==null?void 0:e.transferMedia())||null}resetDetails(){const e=this.hls;if(e&&this.hasDetails){e.stopLoad();const t=i=>delete i.details;e.levels.forEach(t),e.allAudioTracks.forEach(t),e.allSubtitleTracks.forEach(t),this.hasDetails=!1}}on(e,t,i){var s;(s=this.hls)==null||s.on(e,t)}once(e,t,i){var s;(s=this.hls)==null||s.once(e,t)}off(e,t,i){var s;(s=this.hls)==null||s.off(e,t)}toString(){var e;return`HlsAssetPlayer: ${ua(this.assetItem)} ${(e=this.hls)==null?void 0:e.sessionId} ${this.appendInPlace?"append-in-place":""}`}}const iE=.033;class PP extends Zi{constructor(e,t){super("interstitials-sched",t),this.onScheduleUpdate=void 0,this.eventMap={},this.events=null,this.items=null,this.durations={primary:0,playout:0,integrated:0},this.onScheduleUpdate=e}destroy(){this.reset(),this.onScheduleUpdate=null}reset(){this.eventMap={},this.setDurations(0,0,0),this.events&&this.events.forEach(e=>e.reset()),this.events=this.items=null}resetErrorsInRange(e,t){return this.events?this.events.reduce((i,s)=>e<=s.startOffset&&t>s.startOffset?(delete s.error,i+1):i,0):0}get duration(){const e=this.items;return e?e[e.length-1].end:0}get length(){return this.items?this.items.length:0}getEvent(e){return e&&this.eventMap[e]||null}hasEvent(e){return e in this.eventMap}findItemIndex(e,t){if(e.event)return this.findEventIndex(e.event.identifier);let i=-1;e.nextEvent?i=this.findEventIndex(e.nextEvent.identifier)-1:e.previousEvent&&(i=this.findEventIndex(e.previousEvent.identifier)+1);const s=this.items;if(s)for(s[i]||(t===void 0&&(t=e.start),i=this.findItemIndexAtTime(t));i>=0&&(a=s[i])!=null&&a.event;){var a;i--}return i}findItemIndexAtTime(e,t){const i=this.items;if(i)for(let s=0;s<i.length;s++){let a=i[s];if(t&&t!=="primary"&&(a=a[t]),e===a.start||e>a.start&&e<a.end)return s}return-1}findJumpRestrictedIndex(e,t){const i=this.items;if(i)for(let s=e;s<=t&&i[s];s++){const a=i[s].event;if(a!=null&&a.restrictions.jump&&!a.appendInPlace)return s}return-1}findEventIndex(e){const t=this.items;if(t)for(let s=t.length;s--;){var i;if(((i=t[s].event)==null?void 0:i.identifier)===e)return s}return-1}findAssetIndex(e,t){const i=e.assetList,s=i.length;if(s>1)for(let a=0;a<s;a++){const l=i[a];if(!l.error){const c=l.timelineStart;if(t===c||t>c&&(t<c+(l.duration||0)||a===s-1))return a}}return 0}get assetIdAtEnd(){var e;const t=(e=this.items)==null||(e=e[this.length-1])==null?void 0:e.event;if(t){const i=t.assetList,s=i[i.length-1];if(s)return s.identifier}return null}parseInterstitialDateRanges(e,t){const i=e.main.details,{dateRanges:s}=i,a=this.events,l=this.parseDateRanges(s,{url:i.url},t),c=Object.keys(s),f=a?a.filter(d=>!c.includes(d.identifier)):[];l.length&&l.sort((d,h)=>{const p=d.cue.pre,g=d.cue.post,b=h.cue.pre,y=h.cue.post;if(p&&!b)return-1;if(b&&!p||g&&!y)return 1;if(y&&!g)return-1;if(!p&&!b&&!g&&!y){const T=d.startTime,x=h.startTime;if(T!==x)return T-x}return d.dateRange.tagOrder-h.dateRange.tagOrder}),this.events=l,f.forEach(d=>{this.removeEvent(d)}),this.updateSchedule(e,f)}updateSchedule(e,t=[],i=!1){const s=this.events||[];if(s.length||t.length||this.length<2){const a=this.items,l=this.parseSchedule(s,e);(i||t.length||a?.length!==l.length||l.some((f,d)=>Math.abs(f.playout.start-a[d].playout.start)>.005||Math.abs(f.playout.end-a[d].playout.end)>.005))&&(this.items=l,this.onScheduleUpdate(t,a))}}parseDateRanges(e,t,i){const s=[],a=Object.keys(e);for(let l=0;l<a.length;l++){const c=a[l],f=e[c];if(f.isInterstitial){let d=this.eventMap[c];d?d.setDateRange(f):(d=new kP(f,t),this.eventMap[c]=d,i===!1&&(d.appendInPlace=i)),s.push(d)}}return s}parseSchedule(e,t){const i=[],s=t.main.details,a=s.live?1/0:s.edge;let l=0;if(e=e.filter(f=>!f.error&&!(f.cue.once&&f.hasPlayed)),e.length){this.resolveOffsets(e,t);let f=0,d=0;if(e.forEach((h,p)=>{const g=h.cue.pre,b=h.cue.post,y=e[p-1]||null,T=h.appendInPlace,x=b?a:h.startOffset,w=h.duration,S=h.timelineOccupancy===gu.Range?w:0,A=h.resumptionOffset,_=y?.startTime===x,I=x+h.cumulativeDuration;let P=T?I+w:x+A;if(g||!b&&x<=0){const O=d;d+=S,h.timelineStart=I;const B=l;l+=w,i.push({event:h,start:I,end:P,playout:{start:B,end:l},integrated:{start:O,end:d}})}else if(x<=a){if(!_){const N=x-f;if(N>iE){const V=f,ee=d;d+=N;const z=l;l+=N;const H={previousEvent:e[p-1]||null,nextEvent:h,start:V,end:V+N,playout:{start:z,end:l},integrated:{start:ee,end:d}};i.push(H)}else N>0&&y&&(y.cumulativeDuration+=N,i[i.length-1].end=x)}b&&(P=I),h.timelineStart=I;const O=d;d+=S;const B=l;l+=w,i.push({event:h,start:I,end:P,playout:{start:B,end:l},integrated:{start:O,end:d}})}else return;const C=h.resumeTime;b||C>a?f=a:f=C}),f<a){var c;const h=f,p=d,g=a-f;d+=g;const b=l;l+=g,i.push({previousEvent:((c=i[i.length-1])==null?void 0:c.event)||null,nextEvent:null,start:f,end:h+g,playout:{start:b,end:l},integrated:{start:p,end:d}})}this.setDurations(a,l,d)}else i.push({previousEvent:null,nextEvent:null,start:0,end:a,playout:{start:0,end:a},integrated:{start:0,end:a}}),this.setDurations(a,a,a);return i}setDurations(e,t,i){this.durations={primary:e,playout:t,integrated:i}}resolveOffsets(e,t){const i=t.main.details,s=i.live?1/0:i.edge;let a=0,l=-1;e.forEach((c,f)=>{const d=c.cue.pre,h=c.cue.post,p=d?0:h?s:c.startTime;this.updateAssetDurations(c),l===p?c.cumulativeDuration=a:(a=0,l=p),!h&&c.snapOptions.in&&(c.resumeAnchor=gr(null,i.fragments,c.startOffset+c.resumptionOffset,0,0)||void 0),c.appendInPlace&&!c.appendInPlaceStarted&&(this.primaryCanResumeInPlaceAt(c,t)||(c.appendInPlace=!1)),!c.appendInPlace&&f+1<e.length&&e[f+1].startTime-e[f].resumeTime<iE&&(e[f+1].appendInPlace=!1,e[f+1].appendInPlace&&this.warn(`Could not change append strategy for abutting event ${c}`));const b=pe(c.resumeOffset)?c.resumeOffset:c.duration;a+=b})}primaryCanResumeInPlaceAt(e,t){const i=e.resumeTime,s=e.startTime+e.resumptionOffset;return Math.abs(i-s)>ga?(this.log(`"${e.identifier}" resumption ${i} not aligned with estimated timeline end ${s}`),!1):!Object.keys(t).some(l=>{const c=t[l].details,f=c.edge;if(i>=f)return this.log(`"${e.identifier}" resumption ${i} past ${l} playlist end ${f}`),!1;const d=gr(null,c.fragments,i);if(!d)return this.log(`"${e.identifier}" resumption ${i} does not align with any fragments in ${l} playlist (${c.fragStart}-${c.fragmentEnd})`),!0;const h=l==="audio"?.175:0;return Math.abs(d.start-i)<ga+h||Math.abs(d.end-i)<ga+h?!1:(this.log(`"${e.identifier}" resumption ${i} not aligned with ${l} fragment bounds (${d.start}-${d.end} sn: ${d.sn} cc: ${d.cc})`),!0)})}updateAssetDurations(e){if(!e.assetListLoaded)return;const t=e.timelineStart;let i=0,s=!1,a=!1;for(let l=0;l<e.assetList.length;l++){const c=e.assetList[l],f=t+i;c.startOffset=i,c.timelineStart=f,s||(s=c.duration===null),a||(a=!!c.error);const d=c.error?0:c.duration||0;i+=d}s&&!a?e.duration=Math.max(i,e.duration):e.duration=i}removeEvent(e){e.reset(),delete this.eventMap[e.identifier]}}function nn(n){return`[${n.event?'"'+n.event.identifier+'"':"primary"}: ${n.start.toFixed(2)}-${n.end.toFixed(2)}]`}class NP{constructor(e){this.hls=void 0,this.hls=e}destroy(){this.hls=null}loadAssetList(e,t){const i=e.assetListUrl;let s;try{s=RS(i,this.hls.sessionId,e.baseUrl)}catch(g){const b=this.assignAssetListError(e,Q.ASSET_LIST_LOAD_ERROR,g,i);this.hls.trigger(L.ERROR,b);return}t&&s.protocol!=="data:"&&s.searchParams.set("_HLS_start_offset",""+t);const a=this.hls.config,l=a.loader,c=new l(a),f={responseType:"json",url:s.href},d=a.interstitialAssetListLoadPolicy.default,h={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},p={onSuccess:(g,b,y,T)=>{const x=g.data,w=x?.ASSETS;if(!Array.isArray(w)){const S=this.assignAssetListError(e,Q.ASSET_LIST_PARSING_ERROR,new Error("Invalid interstitial asset list"),y.url,b,T);this.hls.trigger(L.ERROR,S);return}e.assetListResponse=x,this.hls.trigger(L.ASSET_LIST_LOADED,{event:e,assetListResponse:x,networkDetails:T})},onError:(g,b,y,T)=>{const x=this.assignAssetListError(e,Q.ASSET_LIST_LOAD_ERROR,new Error(`Error loading X-ASSET-LIST: HTTP status ${g.code} ${g.text} (${b.url})`),b.url,T,y);this.hls.trigger(L.ERROR,x)},onTimeout:(g,b,y)=>{const T=this.assignAssetListError(e,Q.ASSET_LIST_LOAD_TIMEOUT,new Error(`Timeout loading X-ASSET-LIST (${b.url})`),b.url,g,y);this.hls.trigger(L.ERROR,T)}};return c.load(f,h,p),this.hls.trigger(L.ASSET_LIST_LOADING,{event:e}),c}assignAssetListError(e,t,i,s,a,l){return e.error=i,{type:Ee.NETWORK_ERROR,details:t,fatal:!1,interstitial:e,url:s,error:i,networkDetails:l,stats:a}}}function nE(n){var e;n==null||(e=n.play())==null||e.catch(()=>{})}function Cc(n,e){return`[${n}] Advancing timeline position to ${e}`}class BP extends Zi{constructor(e,t){super("interstitials",e.logger),this.HlsPlayerClass=void 0,this.hls=void 0,this.assetListLoader=void 0,this.mediaSelection=null,this.altSelection=null,this.media=null,this.detachedData=null,this.requiredTracks=null,this.manager=null,this.playerQueue=[],this.bufferedPos=-1,this.timelinePos=-1,this.schedule=void 0,this.playingItem=null,this.bufferingItem=null,this.waitingItem=null,this.endedItem=null,this.playingAsset=null,this.endedAsset=null,this.bufferingAsset=null,this.shouldPlay=!1,this.onPlay=()=>{this.shouldPlay=!0},this.onPause=()=>{this.shouldPlay=!1},this.onSeeking=()=>{const i=this.currentTime;if(i===void 0||this.playbackDisabled||!this.schedule)return;const s=i-this.timelinePos;if(Math.abs(s)<1/7056e5)return;const l=s<=-.01;this.timelinePos=i,this.bufferedPos=i;const c=this.playingItem;if(!c){this.checkBuffer();return}if(l&&this.schedule.resetErrorsInRange(i,i-s)&&this.updateSchedule(!0),this.checkBuffer(),l&&i<c.start||i>=c.end){var f;const b=this.findItemIndex(c);let y=this.schedule.findItemIndexAtTime(i);if(y===-1&&(y=b+(l?-1:1),this.log(`seeked ${l?"back ":""}to position not covered by schedule ${i} (resolving from ${b} to ${y})`)),!this.isInterstitial(c)&&(f=this.media)!=null&&f.paused&&(this.shouldPlay=!1),!l&&y>b){const T=this.schedule.findJumpRestrictedIndex(b+1,y);if(T>b){this.setSchedulePosition(T);return}}this.setSchedulePosition(y);return}const d=this.playingAsset;if(!d){if(this.playingLastItem&&this.isInterstitial(c)){const b=c.event.assetList[0];b&&(this.endedItem=this.playingItem,this.playingItem=null,this.setScheduleToAssetAtTime(i,b))}return}const h=d.timelineStart,p=d.duration||0;if(l&&i<h||i>=h+p){var g;(g=c.event)!=null&&g.appendInPlace&&(this.clearAssetPlayers(c.event,c),this.flushFrontBuffer(i)),this.setScheduleToAssetAtTime(i,d)}},this.onTimeupdate=()=>{const i=this.currentTime;if(i===void 0||this.playbackDisabled)return;if(i>this.timelinePos)this.timelinePos=i,i>this.bufferedPos&&this.checkBuffer();else return;const s=this.playingItem;if(!s||this.playingLastItem)return;if(i>=s.end){this.timelinePos=s.end;const c=this.findItemIndex(s);this.setSchedulePosition(c+1)}const a=this.playingAsset;if(!a)return;const l=a.timelineStart+(a.duration||0);i>=l&&this.setScheduleToAssetAtTime(i,a)},this.onScheduleUpdate=(i,s)=>{const a=this.schedule;if(!a)return;const l=this.playingItem,c=a.events||[],f=a.items||[],d=a.durations,h=i.map(T=>T.identifier),p=!!(c.length||h.length);(p||s)&&this.log(`INTERSTITIALS_UPDATED (${c.length}): ${c}
Schedule: ${f.map(T=>nn(T))} pos: ${this.timelinePos}`),h.length&&this.log(`Removed events ${h}`);let g=null,b=null;l&&(g=this.updateItem(l,this.timelinePos),this.itemsMatch(l,g)?this.playingItem=g:this.waitingItem=this.endedItem=null),this.waitingItem=this.updateItem(this.waitingItem),this.endedItem=this.updateItem(this.endedItem);const y=this.bufferingItem;if(y&&(b=this.updateItem(y,this.bufferedPos),this.itemsMatch(y,b)?this.bufferingItem=b:y.event&&(this.bufferingItem=this.playingItem,this.clearInterstitial(y.event,null))),i.forEach(T=>{T.assetList.forEach(x=>{this.clearAssetPlayer(x.identifier,null)})}),this.playerQueue.forEach(T=>{if(T.interstitial.appendInPlace){const x=T.assetItem.timelineStart,w=T.timelineOffset-x;if(w)try{T.timelineOffset=x}catch(S){Math.abs(w)>ga&&this.warn(`${S} ("${T.assetId}" ${T.timelineOffset}->${x})`)}}}),p||s){if(this.hls.trigger(L.INTERSTITIALS_UPDATED,{events:c.slice(0),schedule:f.slice(0),durations:d,removedIds:h}),this.isInterstitial(l)&&h.includes(l.event.identifier)){this.warn(`Interstitial "${l.event.identifier}" removed while playing`),this.primaryFallback(l.event);return}l&&this.trimInPlace(g,l),y&&b!==g&&this.trimInPlace(b,y),this.checkBuffer()}},this.hls=e,this.HlsPlayerClass=t,this.assetListLoader=new NP(e),this.schedule=new PP(this.onScheduleUpdate,e.logger),this.registerListeners()}registerListeners(){const e=this.hls;e&&(e.on(L.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(L.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(L.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.on(L.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(L.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.on(L.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.on(L.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.on(L.BUFFER_APPENDED,this.onBufferAppended,this),e.on(L.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(L.BUFFERED_TO_END,this.onBufferedToEnd,this),e.on(L.MEDIA_ENDED,this.onMediaEnded,this),e.on(L.ERROR,this.onError,this),e.on(L.DESTROYING,this.onDestroying,this))}unregisterListeners(){const e=this.hls;e&&(e.off(L.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(L.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(L.AUDIO_TRACK_UPDATED,this.onAudioTrackUpdated,this),e.off(L.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(L.SUBTITLE_TRACK_UPDATED,this.onSubtitleTrackUpdated,this),e.off(L.EVENT_CUE_ENTER,this.onInterstitialCueEnter,this),e.off(L.ASSET_LIST_LOADED,this.onAssetListLoaded,this),e.off(L.BUFFER_CODECS,this.onBufferCodecs,this),e.off(L.BUFFER_APPENDED,this.onBufferAppended,this),e.off(L.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(L.BUFFERED_TO_END,this.onBufferedToEnd,this),e.off(L.MEDIA_ENDED,this.onMediaEnded,this),e.off(L.ERROR,this.onError,this),e.off(L.DESTROYING,this.onDestroying,this))}startLoad(){this.resumeBuffering()}stopLoad(){this.pauseBuffering()}resumeBuffering(){var e;(e=this.getBufferingPlayer())==null||e.resumeBuffering()}pauseBuffering(){var e;(e=this.getBufferingPlayer())==null||e.pauseBuffering()}destroy(){this.unregisterListeners(),this.stopLoad(),this.assetListLoader&&this.assetListLoader.destroy(),this.emptyPlayerQueue(),this.clearScheduleState(),this.schedule&&this.schedule.destroy(),this.media=this.detachedData=this.mediaSelection=this.requiredTracks=this.altSelection=this.schedule=this.manager=null,this.hls=this.HlsPlayerClass=this.log=null,this.assetListLoader=null,this.onPlay=this.onPause=this.onSeeking=this.onTimeupdate=null,this.onScheduleUpdate=null}onDestroying(){const e=this.primaryMedia||this.media;e&&this.removeMediaListeners(e)}removeMediaListeners(e){yi(e,"play",this.onPlay),yi(e,"pause",this.onPause),yi(e,"seeking",this.onSeeking),yi(e,"timeupdate",this.onTimeupdate)}onMediaAttaching(e,t){const i=this.media=t.media;ri(i,"seeking",this.onSeeking),ri(i,"timeupdate",this.onTimeupdate),ri(i,"play",this.onPlay),ri(i,"pause",this.onPause)}onMediaAttached(e,t){const i=this.effectivePlayingItem,s=this.detachedData;if(this.detachedData=null,i===null)this.checkStart();else if(!s){this.clearScheduleState();const a=this.findItemIndex(i);this.setSchedulePosition(a)}}clearScheduleState(){this.log("clear schedule state"),this.playingItem=this.bufferingItem=this.waitingItem=this.endedItem=this.playingAsset=this.endedAsset=this.bufferingAsset=null}onMediaDetaching(e,t){const i=!!t.transferMedia,s=this.media;if(this.media=null,!i&&(s&&this.removeMediaListeners(s),this.detachedData)){const a=this.getBufferingPlayer();a&&(this.log(`Removing schedule state for detachedData and ${a}`),this.playingAsset=this.endedAsset=this.bufferingAsset=this.bufferingItem=this.waitingItem=this.detachedData=null,a.detachMedia()),this.shouldPlay=!1}}get interstitialsManager(){if(!this.hls)return null;if(this.manager)return this.manager;const e=this,t=()=>e.bufferingItem||e.waitingItem,i=p=>p&&e.getAssetPlayer(p.identifier),s=(p,g,b,y,T)=>{if(p){let x=p[g].start;const w=p.event;if(w){if(g==="playout"||w.timelineOccupancy!==gu.Point){const S=i(b);S?.interstitial===w&&(x+=S.assetItem.startOffset+S[T])}}else{const S=y==="bufferedPos"?l():e[y];x+=S-p.start}return x}return 0},a=(p,g)=>{var b;if(p!==0&&g!=="primary"&&(b=e.schedule)!=null&&b.length){var y;const T=e.schedule.findItemIndexAtTime(p),x=(y=e.schedule.items)==null?void 0:y[T];if(x){const w=x[g].start-x.start;return p+w}}return p},l=()=>{const p=e.bufferedPos;return p===Number.MAX_VALUE?c("primary"):Math.max(p,0)},c=p=>{var g,b;return(g=e.primaryDetails)!=null&&g.live?e.primaryDetails.edge:((b=e.schedule)==null?void 0:b.durations[p])||0},f=(p,g)=>{var b,y;const T=e.effectivePlayingItem;if(T!=null&&(b=T.event)!=null&&b.restrictions.skip||!e.schedule)return;e.log(`seek to ${p} "${g}"`);const x=e.effectivePlayingItem,w=e.schedule.findItemIndexAtTime(p,g),S=(y=e.schedule.items)==null?void 0:y[w],A=e.getBufferingPlayer(),_=A?.interstitial,I=_?.appendInPlace,P=x&&e.itemsMatch(x,S);if(x&&(I||P)){const C=i(e.playingAsset),O=C?.media||e.primaryMedia;if(O){const B=g==="primary"?O.currentTime:s(x,g,e.playingAsset,"timelinePos","currentTime"),N=p-B,V=(I?B:O.currentTime)+N;if(V>=0&&(!C||I||V<=C.duration)){O.currentTime=V;return}}}if(S){let C=p;if(g!=="primary"){const B=S[g].start,N=p-B;C=S.start+N}const O=!e.isInterstitial(S);if((!e.isInterstitial(x)||x.event.appendInPlace)&&(O||S.event.appendInPlace)){const B=e.media||(I?A?.media:null);B&&(B.currentTime=C)}else if(x){const B=e.findItemIndex(x);if(w>B){const V=e.schedule.findJumpRestrictedIndex(B+1,w);if(V>B){e.setSchedulePosition(V);return}}let N=0;if(O)e.timelinePos=C,e.checkBuffer();else{const V=S.event.assetList,ee=p-(S[g]||S).start;for(let z=V.length;z--;){const H=V[z];if(H.duration&&ee>=H.startOffset&&ee<H.startOffset+H.duration){N=z;break}}}e.setSchedulePosition(w,N)}}},d=()=>{const p=e.effectivePlayingItem;if(e.isInterstitial(p))return p;const g=t();return e.isInterstitial(g)?g:null},h={get bufferedEnd(){const p=t(),g=e.bufferingItem;if(g&&g===p){var b;return s(g,"playout",e.bufferingAsset,"bufferedPos","bufferedEnd")-g.playout.start||((b=e.bufferingAsset)==null?void 0:b.startOffset)||0}return 0},get currentTime(){const p=d(),g=e.effectivePlayingItem;return g&&g===p?s(g,"playout",e.effectivePlayingAsset,"timelinePos","currentTime")-g.playout.start:0},set currentTime(p){const g=d(),b=e.effectivePlayingItem;b&&b===g&&f(p+b.playout.start,"playout")},get duration(){const p=d();return p?p.playout.end-p.playout.start:0},get assetPlayers(){var p;const g=(p=d())==null?void 0:p.event.assetList;return g?g.map(b=>e.getAssetPlayer(b.identifier)):[]},get playingIndex(){var p;const g=(p=d())==null?void 0:p.event;return g&&e.effectivePlayingAsset?g.findAssetIndex(e.effectivePlayingAsset):-1},get scheduleItem(){return d()}};return this.manager={get events(){var p;return((p=e.schedule)==null||(p=p.events)==null?void 0:p.slice(0))||[]},get schedule(){var p;return((p=e.schedule)==null||(p=p.items)==null?void 0:p.slice(0))||[]},get interstitialPlayer(){return d()?h:null},get playerQueue(){return e.playerQueue.slice(0)},get bufferingAsset(){return e.bufferingAsset},get bufferingItem(){return t()},get bufferingIndex(){const p=t();return e.findItemIndex(p)},get playingAsset(){return e.effectivePlayingAsset},get playingItem(){return e.effectivePlayingItem},get playingIndex(){const p=e.effectivePlayingItem;return e.findItemIndex(p)},primary:{get bufferedEnd(){return l()},get currentTime(){const p=e.timelinePos;return p>0?p:0},set currentTime(p){f(p,"primary")},get duration(){return c("primary")},get seekableStart(){var p;return((p=e.primaryDetails)==null?void 0:p.fragmentStart)||0}},integrated:{get bufferedEnd(){return s(t(),"integrated",e.bufferingAsset,"bufferedPos","bufferedEnd")},get currentTime(){return s(e.effectivePlayingItem,"integrated",e.effectivePlayingAsset,"timelinePos","currentTime")},set currentTime(p){f(p,"integrated")},get duration(){return c("integrated")},get seekableStart(){var p;return a(((p=e.primaryDetails)==null?void 0:p.fragmentStart)||0,"integrated")}},skip:()=>{const p=e.effectivePlayingItem,g=p?.event;if(g&&!g.restrictions.skip){const b=e.findItemIndex(p);if(g.appendInPlace){const y=p.playout.start+p.event.duration;f(y+.001,"playout")}else e.advanceAfterAssetEnded(g,b,1/0)}}}}get effectivePlayingItem(){return this.waitingItem||this.playingItem||this.endedItem}get effectivePlayingAsset(){return this.playingAsset||this.endedAsset}get playingLastItem(){var e;const t=this.playingItem,i=(e=this.schedule)==null?void 0:e.items;return!this.playbackStarted||!t||!i?!1:this.findItemIndex(t)===i.length-1}get playbackStarted(){return this.effectivePlayingItem!==null}get currentTime(){var e,t;if(this.mediaSelection===null)return;const i=this.waitingItem||this.playingItem;if(this.isInterstitial(i)&&!i.event.appendInPlace)return;let s=this.media;!s&&(e=this.bufferingItem)!=null&&(e=e.event)!=null&&e.appendInPlace&&(s=this.primaryMedia);const a=(t=s)==null?void 0:t.currentTime;if(!(a===void 0||!pe(a)))return a}get primaryMedia(){var e;return this.media||((e=this.detachedData)==null?void 0:e.media)||null}isInterstitial(e){return!!(e!=null&&e.event)}retreiveMediaSource(e,t){const i=this.getAssetPlayer(e);i&&this.transferMediaFromPlayer(i,t)}transferMediaFromPlayer(e,t){const i=e.interstitial.appendInPlace,s=e.media;if(i&&s===this.primaryMedia){if(this.bufferingAsset=null,(!t||this.isInterstitial(t)&&!t.event.appendInPlace)&&t&&s){this.detachedData={media:s};return}const a=e.transferMedia();this.log(`transfer MediaSource from ${e} ${st(a)}`),this.detachedData=a}else t&&s&&(this.shouldPlay||(this.shouldPlay=!s.paused))}transferMediaTo(e,t){var i,s;if(e.media===t)return;let a=null;const l=this.hls,c=e!==l,f=c&&e.interstitial.appendInPlace,d=(i=this.detachedData)==null?void 0:i.mediaSource;let h;if(l.media)f&&(a=l.transferMedia(),this.detachedData=a),h="Primary";else if(d){const y=this.getBufferingPlayer();y?(a=y.transferMedia(),h=`${y}`):h="detached MediaSource"}else h="detached media";if(!a){if(d)a=this.detachedData,this.log(`using detachedData: MediaSource ${st(a)}`);else if(!this.detachedData||l.media===t){const y=this.playerQueue;y.length>1&&y.forEach(T=>{if(c&&T.interstitial.appendInPlace!==f){const x=T.interstitial;this.clearInterstitial(T.interstitial,null),x.appendInPlace=!1,x.appendInPlace&&this.warn(`Could not change append strategy for queued assets ${x}`)}}),this.hls.detachMedia(),this.detachedData={media:t}}}const p=a&&"mediaSource"in a&&((s=a.mediaSource)==null?void 0:s.readyState)!=="closed",g=p&&a?a:t;this.log(`${p?"transfering MediaSource":"attaching media"} to ${c?e:"Primary"} from ${h} (media.currentTime: ${t.currentTime})`);const b=this.schedule;if(g===a&&b){const y=c&&e.assetId===b.assetIdAtEnd;g.overrides={duration:b.duration,endOfStream:!c||y,cueRemoval:!c}}e.attachMedia(g)}onInterstitialCueEnter(){this.onTimeupdate()}checkStart(){const e=this.schedule,t=e?.events;if(!t||this.playbackDisabled||!this.media)return;this.bufferedPos===-1&&(this.bufferedPos=0);const i=this.timelinePos,s=this.effectivePlayingItem;if(i===-1){const a=this.hls.startPosition;if(this.log(Cc("checkStart",a)),this.timelinePos=a,t.length&&t[0].cue.pre){const l=e.findEventIndex(t[0].identifier);this.setSchedulePosition(l)}else if(a>=0||!this.primaryLive){const l=this.timelinePos=a>0?a:0,c=e.findItemIndexAtTime(l);this.setSchedulePosition(c)}}else if(s&&!this.playingItem){const a=e.findItemIndex(s);this.setSchedulePosition(a)}}advanceAssetBuffering(e,t){const i=e.event,s=i.findAssetIndex(t),a=Rh(i,s);if(!i.isAssetPastPlayoutLimit(a))this.bufferedToEvent(e,a);else if(this.schedule){var l;const c=(l=this.schedule.items)==null?void 0:l[this.findItemIndex(e)+1];c&&this.bufferedToItem(c)}}advanceAfterAssetEnded(e,t,i){const s=Rh(e,i);if(e.isAssetPastPlayoutLimit(s)){if(this.schedule){const a=this.schedule.items;if(a){const l=t+1,c=a.length;if(l>=c){this.setSchedulePosition(-1);return}const f=e.resumeTime;this.timelinePos<f&&(this.log(Cc("advanceAfterAssetEnded",f)),this.timelinePos=f,e.appendInPlace&&this.advanceInPlace(f),this.checkBuffer(this.bufferedPos<f)),this.setSchedulePosition(l)}}}else{if(e.appendInPlace){const a=e.assetList[s];a&&this.advanceInPlace(a.timelineStart)}this.setSchedulePosition(t,s)}}setScheduleToAssetAtTime(e,t){const i=this.schedule;if(!i)return;const s=t.parentIdentifier,a=i.getEvent(s);if(a){const l=i.findEventIndex(s),c=i.findAssetIndex(a,e);this.advanceAfterAssetEnded(a,l,c-1)}}setSchedulePosition(e,t){var i;const s=(i=this.schedule)==null?void 0:i.items;if(!s||this.playbackDisabled)return;const a=e>=0?s[e]:null;this.log(`setSchedulePosition ${e}, ${t} (${a&&nn(a)}) pos: ${this.timelinePos}`);const l=this.waitingItem||this.playingItem,c=this.playingLastItem;if(this.isInterstitial(l)){const h=l.event,p=this.playingAsset,g=p?.identifier,b=g?this.getAssetPlayer(g):null;if(b&&g&&(!this.eventItemsMatch(l,a)||t!==void 0&&g!==h.assetList[t].identifier)){var f;const y=h.findAssetIndex(p);if(this.log(`INTERSTITIAL_ASSET_ENDED ${y+1}/${h.assetList.length} ${ua(p)}`),this.endedAsset=p,this.playingAsset=null,this.hls.trigger(L.INTERSTITIAL_ASSET_ENDED,{asset:p,assetListIndex:y,event:h,schedule:s.slice(0),scheduleIndex:e,player:b}),l!==this.playingItem){this.itemsMatch(l,this.playingItem)&&!this.playingAsset&&this.advanceAfterAssetEnded(h,this.findItemIndex(this.playingItem),y);return}this.retreiveMediaSource(g,a),b.media&&!((f=this.detachedData)!=null&&f.mediaSource)&&b.detachMedia()}if(!this.eventItemsMatch(l,a)&&(this.endedItem=l,this.playingItem=null,this.log(`INTERSTITIAL_ENDED ${h} ${nn(l)}`),h.hasPlayed=!0,this.hls.trigger(L.INTERSTITIAL_ENDED,{event:h,schedule:s.slice(0),scheduleIndex:e}),h.cue.once)){var d;this.updateSchedule();const y=(d=this.schedule)==null?void 0:d.items;if(a&&y){const T=this.findItemIndex(a);this.advanceSchedule(T,y,t,l,c)}return}}this.advanceSchedule(e,s,t,l,c)}advanceSchedule(e,t,i,s,a){const l=this.schedule;if(!l)return;const c=t[e]||null,f=this.primaryMedia,d=this.playerQueue;if(d.length&&d.forEach(h=>{const p=h.interstitial,g=l.findEventIndex(p.identifier);(g<e||g>e+1)&&this.clearInterstitial(p,c)}),this.isInterstitial(c)){this.timelinePos=Math.min(Math.max(this.timelinePos,c.start),c.end);const h=c.event;if(i===void 0){i=l.findAssetIndex(h,this.timelinePos);const y=Rh(h,i-1);if(h.isAssetPastPlayoutLimit(y)||h.appendInPlace&&this.timelinePos===c.end){this.advanceAfterAssetEnded(h,e,i);return}i=y}const p=this.waitingItem;this.assetsBuffered(c,f)||this.setBufferingItem(c);let g=this.preloadAssets(h,i);if(this.eventItemsMatch(c,p||s)||(this.waitingItem=c,this.log(`INTERSTITIAL_STARTED ${nn(c)} ${h.appendInPlace?"append in place":""}`),this.hls.trigger(L.INTERSTITIAL_STARTED,{event:h,schedule:t.slice(0),scheduleIndex:e})),!h.assetListLoaded){this.log(`Waiting for ASSET-LIST to complete loading ${h}`);return}if(h.assetListLoader&&(h.assetListLoader.destroy(),h.assetListLoader=void 0),!f){this.log(`Waiting for attachMedia to start Interstitial ${h}`);return}this.waitingItem=this.endedItem=null,this.playingItem=c;const b=h.assetList[i];if(!b){this.advanceAfterAssetEnded(h,e,i||0);return}if(g||(g=this.getAssetPlayer(b.identifier)),g===null||g.destroyed){const y=h.assetList.length;this.warn(`asset ${i+1}/${y} player destroyed ${h}`),g=this.createAssetPlayer(h,b,i),g.loadSource()}if(!this.eventItemsMatch(c,this.bufferingItem)&&h.appendInPlace&&this.isAssetBuffered(b))return;this.startAssetPlayer(g,i,t,e,f),this.shouldPlay&&nE(g.media)}else c?(this.resumePrimary(c,e,s),this.shouldPlay&&nE(this.hls.media)):a&&this.isInterstitial(s)&&(this.endedItem=null,this.playingItem=s,s.event.appendInPlace||this.attachPrimary(l.durations.primary,null))}get playbackDisabled(){return this.hls.config.enableInterstitialPlayback===!1}get primaryDetails(){var e;return(e=this.mediaSelection)==null?void 0:e.main.details}get primaryLive(){var e;return!!((e=this.primaryDetails)!=null&&e.live)}resumePrimary(e,t,i){var s,a;if(this.playingItem=e,this.playingAsset=this.endedAsset=null,this.waitingItem=this.endedItem=null,this.bufferedToItem(e),this.log(`resuming ${nn(e)}`),!((s=this.detachedData)!=null&&s.mediaSource)){let c=this.timelinePos;(c<e.start||c>=e.end)&&(c=this.getPrimaryResumption(e,t),this.log(Cc("resumePrimary",c)),this.timelinePos=c),this.attachPrimary(c,e)}if(!i)return;const l=(a=this.schedule)==null?void 0:a.items;l&&(this.log(`INTERSTITIALS_PRIMARY_RESUMED ${nn(e)}`),this.hls.trigger(L.INTERSTITIALS_PRIMARY_RESUMED,{schedule:l.slice(0),scheduleIndex:t}),this.checkBuffer())}getPrimaryResumption(e,t){const i=e.start;if(this.primaryLive){const s=this.primaryDetails;if(t===0)return this.hls.startPosition;if(s&&(i<s.fragmentStart||i>s.edge))return this.hls.liveSyncPosition||-1}return i}isAssetBuffered(e){const t=this.getAssetPlayer(e.identifier);return t!=null&&t.hls?t.hls.bufferedToEnd:_e.bufferInfo(this.primaryMedia,this.timelinePos,0).end+1>=e.timelineStart+(e.duration||0)}attachPrimary(e,t,i){t?this.setBufferingItem(t):this.bufferingItem=this.playingItem,this.bufferingAsset=null;const s=this.primaryMedia;if(!s)return;const a=this.hls;a.media?this.checkBuffer():(this.transferMediaTo(a,s),i&&this.startLoadingPrimaryAt(e,i)),i||(this.log(Cc("attachPrimary",e)),this.timelinePos=e,this.startLoadingPrimaryAt(e,i))}startLoadingPrimaryAt(e,t){var i;const s=this.hls;!s.loadingEnabled||!s.media||Math.abs((((i=s.mainForwardBufferInfo)==null?void 0:i.start)||s.media.currentTime)-e)>.5?s.startLoad(e,t):s.bufferingEnabled||s.resumeBuffering()}onManifestLoading(){var e;this.stopLoad(),(e=this.schedule)==null||e.reset(),this.emptyPlayerQueue(),this.clearScheduleState(),this.shouldPlay=!1,this.bufferedPos=this.timelinePos=-1,this.mediaSelection=this.altSelection=this.manager=this.requiredTracks=null,this.hls.off(L.BUFFER_CODECS,this.onBufferCodecs,this),this.hls.on(L.BUFFER_CODECS,this.onBufferCodecs,this)}onLevelUpdated(e,t){if(t.level===-1||!this.schedule)return;const i=this.hls.levels[t.level];if(!i.details)return;const s=Xe(Xe({},this.mediaSelection||this.altSelection),{},{main:i});this.mediaSelection=s,this.schedule.parseInterstitialDateRanges(s,this.hls.config.interstitialAppendInPlace),!this.effectivePlayingItem&&this.schedule.items&&this.checkStart()}onAudioTrackUpdated(e,t){const i=this.hls.audioTracks[t.id],s=this.mediaSelection;if(!s){this.altSelection=Xe(Xe({},this.altSelection),{},{audio:i});return}const a=Xe(Xe({},s),{},{audio:i});this.mediaSelection=a}onSubtitleTrackUpdated(e,t){const i=this.hls.subtitleTracks[t.id],s=this.mediaSelection;if(!s){this.altSelection=Xe(Xe({},this.altSelection),{},{subtitles:i});return}const a=Xe(Xe({},s),{},{subtitles:i});this.mediaSelection=a}onAudioTrackSwitching(e,t){const i=fb(t);this.playerQueue.forEach(({hls:s})=>s&&(s.setAudioOption(t)||s.setAudioOption(i)))}onSubtitleTrackSwitch(e,t){const i=fb(t);this.playerQueue.forEach(({hls:s})=>s&&(s.setSubtitleOption(t)||t.id!==-1&&s.setSubtitleOption(i)))}onBufferCodecs(e,t){const i=t.tracks;i&&(this.requiredTracks=i)}onBufferAppended(e,t){this.checkBuffer()}onBufferFlushed(e,t){const i=this.playingItem;if(i&&!this.itemsMatch(i,this.bufferingItem)&&!this.isInterstitial(i)){const s=this.timelinePos;this.bufferedPos=s,this.checkBuffer()}}onBufferedToEnd(e){if(!this.schedule)return;const t=this.schedule.events;if(this.bufferedPos<Number.MAX_VALUE&&t){for(let s=0;s<t.length;s++){const a=t[s];if(a.cue.post){var i;const l=this.schedule.findEventIndex(a.identifier),c=(i=this.schedule.items)==null?void 0:i[l];this.isInterstitial(c)&&this.eventItemsMatch(c,this.bufferingItem)&&this.bufferedToItem(c,0);break}}this.bufferedPos=Number.MAX_VALUE}}onMediaEnded(e){const t=this.playingItem;if(!this.playingLastItem&&t){const i=this.findItemIndex(t);this.setSchedulePosition(i+1)}else this.shouldPlay=!1}updateItem(e,t){var i;const s=(i=this.schedule)==null?void 0:i.items;if(e&&s){const a=this.findItemIndex(e,t);return s[a]||null}return null}trimInPlace(e,t){if(this.isInterstitial(e)&&e.event.appendInPlace&&t.end-e.end>.25){e.event.assetList.forEach((a,l)=>{e.event.isAssetPastPlayoutLimit(l)&&this.clearAssetPlayer(a.identifier,null)});const i=e.end+.25,s=_e.bufferInfo(this.primaryMedia,i,0);(s.end>i||(s.nextStart||0)>i)&&(this.log(`trim buffered interstitial ${nn(e)} (was ${nn(t)})`),this.attachPrimary(i,null,!0),this.flushFrontBuffer(i))}}itemsMatch(e,t){return!!t&&(e===t||e.event&&t.event&&this.eventItemsMatch(e,t)||!e.event&&!t.event&&this.findItemIndex(e)===this.findItemIndex(t))}eventItemsMatch(e,t){var i;return!!t&&(e===t||e.event.identifier===((i=t.event)==null?void 0:i.identifier))}findItemIndex(e,t){return e&&this.schedule?this.schedule.findItemIndex(e,t):-1}updateSchedule(e=!1){var t;const i=this.mediaSelection;i&&((t=this.schedule)==null||t.updateSchedule(i,[],e))}checkBuffer(e){var t;const i=(t=this.schedule)==null?void 0:t.items;if(!i)return;const s=_e.bufferInfo(this.primaryMedia,this.timelinePos,0);e&&(this.bufferedPos=this.timelinePos),e||(e=s.len<1),this.updateBufferedPos(s.end,i,e)}updateBufferedPos(e,t,i){const s=this.schedule,a=this.bufferingItem;if(this.bufferedPos>e||!s)return;if(t.length===1&&this.itemsMatch(t[0],a)){this.bufferedPos=e;return}const l=this.playingItem,c=this.findItemIndex(l);let f=s.findItemIndexAtTime(e);if(this.bufferedPos<e){var d;const h=this.findItemIndex(a),p=Math.min(h+1,t.length-1),g=t[p];if((f===-1&&a&&e>=a.end||(d=g.event)!=null&&d.appendInPlace&&e+.01>=g.start)&&(f=p),this.isInterstitial(a)){const b=a.event;if(p-c>1&&b.appendInPlace===!1||b.assetList.length===0&&b.assetListLoader)return}if(this.bufferedPos=e,f>h&&f>c)this.bufferedToItem(g);else{const b=this.primaryDetails;this.primaryLive&&b&&e>b.edge-b.targetduration&&g.start<b.edge+this.hls.config.interstitialLiveLookAhead&&this.isInterstitial(g)&&this.preloadAssets(g.event,0)}}else i&&l&&!this.itemsMatch(l,a)&&(f===c?this.bufferedToItem(l):f===c+1&&this.bufferedToItem(t[f]))}assetsBuffered(e,t){return e.event.assetList.length===0?!1:!e.event.assetList.some(s=>{const a=this.getAssetPlayer(s.identifier);return!(a!=null&&a.bufferedInPlaceToEnd(t))})}setBufferingItem(e){const t=this.bufferingItem,i=this.schedule;if(!this.itemsMatch(e,t)&&i){const{items:s,events:a}=i;if(!s||!a)return t;const l=this.isInterstitial(e),c=this.getBufferingPlayer();this.bufferingItem=e,this.bufferedPos=Math.max(e.start,Math.min(e.end,this.timelinePos));const f=c?c.remaining:t?t.end-this.timelinePos:0;if(this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${nn(e)}`+(t?` (${f.toFixed(2)} remaining)`:"")),!this.playbackDisabled)if(l){const d=i.findAssetIndex(e.event,this.bufferedPos);e.event.assetList.forEach((h,p)=>{const g=this.getAssetPlayer(h.identifier);g&&(p===d&&g.loadSource(),g.resumeBuffering())})}else this.hls.resumeBuffering(),this.playerQueue.forEach(d=>d.pauseBuffering());this.hls.trigger(L.INTERSTITIALS_BUFFERED_TO_BOUNDARY,{events:a.slice(0),schedule:s.slice(0),bufferingIndex:this.findItemIndex(e),playingIndex:this.findItemIndex(this.playingItem)})}else this.bufferingItem!==e&&(this.bufferingItem=e);return t}bufferedToItem(e,t=0){const i=this.setBufferingItem(e);if(!this.playbackDisabled){if(this.isInterstitial(e))this.bufferedToEvent(e,t);else if(i!==null){this.bufferingAsset=null;const s=this.detachedData;s?s.mediaSource?this.attachPrimary(e.start,e,!0):this.preloadPrimary(e):this.preloadPrimary(e)}}}preloadPrimary(e){const t=this.findItemIndex(e),i=this.getPrimaryResumption(e,t);this.startLoadingPrimaryAt(i)}bufferedToEvent(e,t){const i=e.event,s=i.assetList.length===0&&!i.assetListLoader,a=i.cue.once;if(s||!a){const l=this.preloadAssets(i,t);if(l!=null&&l.interstitial.appendInPlace){const c=this.primaryMedia;c&&this.bufferAssetPlayer(l,c)}}}preloadAssets(e,t){const i=e.assetUrl,s=e.assetList.length,a=s===0&&!e.assetListLoader,l=e.cue.once;if(a){const f=e.timelineStart;if(e.appendInPlace){var c;const g=this.playingItem;!this.isInterstitial(g)&&(g==null||(c=g.nextEvent)==null?void 0:c.identifier)===e.identifier&&this.flushFrontBuffer(f+.25)}let d,h=0;if(!this.playingItem&&this.primaryLive&&(h=this.hls.startPosition,h===-1&&(h=this.hls.liveSyncPosition||0)),h&&!(e.cue.pre||e.cue.post)){const g=h-f;g>0&&(d=Math.round(g*1e3)/1e3)}if(this.log(`Load interstitial asset ${t+1}/${i?1:s} ${e}${d?` live-start: ${h} start-offset: ${d}`:""}`),i)return this.createAsset(e,0,0,f,e.duration,i);const p=this.assetListLoader.loadAssetList(e,d);p&&(e.assetListLoader=p)}else if(!l&&s){for(let d=t;d<s;d++){const h=e.assetList[d],p=this.getAssetPlayerQueueIndex(h.identifier);(p===-1||this.playerQueue[p].destroyed)&&!h.error&&this.createAssetPlayer(e,h,d)}const f=e.assetList[t];if(f){const d=this.getAssetPlayer(f.identifier);return d&&d.loadSource(),d}}return null}flushFrontBuffer(e){const t=this.requiredTracks;if(!t)return;this.log(`Removing front buffer starting at ${e}`),Object.keys(t).forEach(s=>{this.hls.trigger(L.BUFFER_FLUSHING,{startOffset:e,endOffset:1/0,type:s})})}getAssetPlayerQueueIndex(e){const t=this.playerQueue;for(let i=0;i<t.length;i++)if(e===t[i].assetId)return i;return-1}getAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);return this.playerQueue[t]||null}getBufferingPlayer(){const{playerQueue:e,primaryMedia:t}=this;if(t){for(let i=0;i<e.length;i++)if(e[i].media===t)return e[i]}return null}createAsset(e,t,i,s,a,l){const c={parentIdentifier:e.identifier,identifier:DP(e,l,t),duration:a,startOffset:i,timelineStart:s,uri:l};return this.createAssetPlayer(e,c,t)}createAssetPlayer(e,t,i){const s=this.hls,a=s.userConfig;let l=a.videoPreference;const c=s.loadLevelObj||s.levels[s.currentLevel];(l||c)&&(l=et({},l),c.videoCodec&&(l.videoCodec=c.videoCodec),c.videoRange&&(l.allowedVideoRanges=[c.videoRange]));const f=s.audioTracks[s.audioTrack],d=s.subtitleTracks[s.subtitleTrack];let h=0;if(this.primaryLive||e.appendInPlace){const _=this.timelinePos-t.timelineStart;if(_>1){const I=t.duration;I&&_<I&&(h=_)}}const p=t.identifier,g=Xe(Xe({},a),{},{maxMaxBufferLength:Math.min(180,s.config.maxMaxBufferLength),autoStartLoad:!0,startFragPrefetch:!0,primarySessionId:s.sessionId,assetPlayerId:p,abrEwmaDefaultEstimate:s.bandwidthEstimate,interstitialsController:void 0,startPosition:h,liveDurationInfinity:!1,testBandwidth:!1,videoPreference:l,audioPreference:f||a.audioPreference,subtitlePreference:d||a.subtitlePreference});e.appendInPlace&&(e.appendInPlaceStarted=!0,t.timelineStart&&(g.timelineOffset=t.timelineStart));const b=g.cmcd;b!=null&&b.sessionId&&b.contentId&&(g.cmcd=et({},b,{contentId:Co(t.uri)})),this.getAssetPlayer(p)&&this.warn(`Duplicate date range identifier ${e} and asset ${p}`);const y=new MP(this.HlsPlayerClass,g,e,t);this.playerQueue.push(y),e.assetList[i]=t;let T=!0;const x=_=>{if(_.live){var I;const O=new Error(`Interstitials MUST be VOD assets ${e}`),B={fatal:!0,type:Ee.OTHER_ERROR,details:Q.INTERSTITIAL_ASSET_ITEM_ERROR,error:O},N=((I=this.schedule)==null?void 0:I.findEventIndex(e.identifier))||-1;this.handleAssetItemError(B,e,N,i,O.message);return}const P=_.edge-_.fragmentStart,C=t.duration;(T||C===null||P>C)&&(T=!1,this.log(`Interstitial asset "${p}" duration change ${C} > ${P}`),t.duration=P,this.updateSchedule())};y.on(L.LEVEL_UPDATED,(_,{details:I})=>x(I)),y.on(L.LEVEL_PTS_UPDATED,(_,{details:I})=>x(I)),y.on(L.EVENT_CUE_ENTER,()=>this.onInterstitialCueEnter());const w=(_,I)=>{const P=this.getAssetPlayer(p);if(P&&I.tracks){P.off(L.BUFFER_CODECS,w),P.tracks=I.tracks;const C=this.primaryMedia;this.bufferingAsset===P.assetItem&&C&&!P.media&&this.bufferAssetPlayer(P,C)}};y.on(L.BUFFER_CODECS,w);const S=()=>{var _;const I=this.getAssetPlayer(p);if(this.log(`buffered to end of asset ${I}`),!I||!this.schedule)return;const P=this.schedule.findEventIndex(e.identifier),C=(_=this.schedule.items)==null?void 0:_[P];this.isInterstitial(C)&&this.advanceAssetBuffering(C,t)};y.on(L.BUFFERED_TO_END,S);const A=_=>()=>{if(!this.getAssetPlayer(p)||!this.schedule)return;this.shouldPlay=!0;const P=this.schedule.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,P,_)};return y.once(L.MEDIA_ENDED,A(i)),y.once(L.PLAYOUT_LIMIT_REACHED,A(1/0)),y.on(L.ERROR,(_,I)=>{if(!this.schedule)return;const P=this.getAssetPlayer(p);if(I.details===Q.BUFFER_STALLED_ERROR){if(P!=null&&P.appendInPlace){this.handleInPlaceStall(e);return}this.onTimeupdate(),this.checkBuffer(!0);return}this.handleAssetItemError(I,e,this.schedule.findEventIndex(e.identifier),i,`Asset player error ${I.error} ${e}`)}),y.on(L.DESTROYING,()=>{if(!this.getAssetPlayer(p)||!this.schedule)return;const I=new Error(`Asset player destroyed unexpectedly ${p}`),P={fatal:!0,type:Ee.OTHER_ERROR,details:Q.INTERSTITIAL_ASSET_ITEM_ERROR,error:I};this.handleAssetItemError(P,e,this.schedule.findEventIndex(e.identifier),i,I.message)}),this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${ua(t)}`),this.hls.trigger(L.INTERSTITIAL_ASSET_PLAYER_CREATED,{asset:t,assetListIndex:i,event:e,player:y}),y}clearInterstitial(e,t){this.clearAssetPlayers(e,t),e.reset()}clearAssetPlayers(e,t){e.assetList.forEach(i=>{this.clearAssetPlayer(i.identifier,t)})}resetAssetPlayer(e){const t=this.getAssetPlayerQueueIndex(e);if(t!==-1){this.log(`reset asset player "${e}" after error`);const i=this.playerQueue[t];this.transferMediaFromPlayer(i,null),i.resetDetails()}}clearAssetPlayer(e,t){const i=this.getAssetPlayerQueueIndex(e);if(i!==-1){const s=this.playerQueue[i];this.log(`clear ${s} toSegment: ${t&&nn(t)}`),this.transferMediaFromPlayer(s,t),this.playerQueue.splice(i,1),s.destroy()}}emptyPlayerQueue(){let e;for(;e=this.playerQueue.pop();)e.destroy();this.playerQueue=[]}startAssetPlayer(e,t,i,s,a){const{interstitial:l,assetItem:c,assetId:f}=e,d=l.assetList.length,h=this.playingAsset;this.endedAsset=null,this.playingAsset=c,(!h||h.identifier!==f)&&(h&&(this.clearAssetPlayer(h.identifier,i[s]),delete h.error),this.log(`INTERSTITIAL_ASSET_STARTED ${t+1}/${d} ${ua(c)}`),this.hls.trigger(L.INTERSTITIAL_ASSET_STARTED,{asset:c,assetListIndex:t,event:l,schedule:i.slice(0),scheduleIndex:s,player:e})),this.bufferAssetPlayer(e,a)}bufferAssetPlayer(e,t){var i,s;if(!this.schedule)return;const{interstitial:a,assetItem:l}=e,c=this.schedule.findEventIndex(a.identifier),f=(i=this.schedule.items)==null?void 0:i[c];if(!f)return;e.loadSource(),this.setBufferingItem(f),this.bufferingAsset=l;const d=this.getBufferingPlayer();if(d===e)return;const h=a.appendInPlace;if(h&&d?.interstitial.appendInPlace===!1)return;const p=d?.tracks||((s=this.detachedData)==null?void 0:s.tracks)||this.requiredTracks;if(h&&l!==this.playingAsset){if(!e.tracks){this.log(`Waiting for track info before buffering ${e}`);return}if(p&&!lT(p,e.tracks)){const g=new Error(`Asset ${ua(l)} SourceBuffer tracks ('${Object.keys(e.tracks)}') are not compatible with primary content tracks ('${Object.keys(p)}')`),b={fatal:!0,type:Ee.OTHER_ERROR,details:Q.INTERSTITIAL_ASSET_ITEM_ERROR,error:g},y=a.findAssetIndex(l);this.handleAssetItemError(b,a,c,y,g.message);return}}this.transferMediaTo(e,t)}handleInPlaceStall(e){const t=this.schedule,i=this.primaryMedia;if(!t||!i)return;const s=i.currentTime,a=t.findAssetIndex(e,s),l=e.assetList[a];if(l){const c=this.getAssetPlayer(l.identifier);if(c){const f=c.currentTime||s-l.timelineStart,d=c.duration-f;if(this.warn(`Stalled at ${f} of ${f+d} in ${c} ${e} (media.currentTime: ${s})`),f&&(d/i.playbackRate<.5||c.bufferedInPlaceToEnd(i))&&c.hls){const h=t.findEventIndex(e.identifier);this.advanceAfterAssetEnded(e,h,a)}}}}advanceInPlace(e){const t=this.primaryMedia;t&&t.currentTime<e&&(t.currentTime=e)}handleAssetItemError(e,t,i,s,a){if(e.details===Q.BUFFER_STALLED_ERROR)return;const l=t.assetList[s]||null;if(this.warn(`INTERSTITIAL_ASSET_ERROR ${l&&ua(l)} ${e.error}`),!this.schedule)return;const c=l?.identifier||"",f=this.getAssetPlayerQueueIndex(c),d=this.playerQueue[f]||null,h=this.schedule.items,p=et({},e,{fatal:!1,errorAction:ha(!0),asset:l,assetListIndex:s,event:t,schedule:h,scheduleIndex:i,player:d});if(this.hls.trigger(L.INTERSTITIAL_ASSET_ERROR,p),!e.fatal)return;const g=this.playingAsset,b=this.bufferingAsset,y=new Error(a);if(l&&(this.clearAssetPlayer(c,null),l.error=y),!t.assetList.some(T=>!T.error))t.error=y;else for(let T=s;T<t.assetList.length;T++)this.resetAssetPlayer(t.assetList[T].identifier);this.updateSchedule(!0),t.error?this.primaryFallback(t):g&&g.identifier===c?this.advanceAfterAssetEnded(t,i,s):b&&b.identifier===c&&this.isInterstitial(this.bufferingItem)&&this.advanceAssetBuffering(this.bufferingItem,b)}primaryFallback(e){const t=e.timelineStart,i=this.effectivePlayingItem;let s=this.timelinePos;if(i){this.log(`Fallback to primary from event "${e.identifier}" start: ${t} pos: ${s} playing: ${nn(i)} error: ${e.error}`),s===-1&&(s=this.hls.startPosition);const l=this.updateItem(i,s);this.itemsMatch(i,l)&&this.clearInterstitial(e,null),e.appendInPlace&&(this.attachPrimary(t,null),this.flushFrontBuffer(t))}else if(s===-1){this.checkStart();return}if(!this.schedule)return;const a=this.schedule.findItemIndexAtTime(s);this.setSchedulePosition(a)}onAssetListLoaded(e,t){var i,s;const a=t.event,l=a.identifier,c=t.assetListResponse.ASSETS;if(!((i=this.schedule)!=null&&i.hasEvent(l)))return;const f=a.timelineStart,d=a.duration;let h=0;c.forEach((T,x)=>{const w=parseFloat(T.DURATION);this.createAsset(a,x,h,f+h,w,T.URI),h+=w}),a.duration=h,this.log(`Loaded asset-list with duration: ${h} (was: ${d}) ${a}`);const p=this.waitingItem,g=p?.event.identifier===l;this.updateSchedule();const b=(s=this.bufferingItem)==null?void 0:s.event;if(g){var y;const T=this.schedule.findEventIndex(l),x=(y=this.schedule.items)==null?void 0:y[T];if(x){if(!this.playingItem&&this.timelinePos>x.end&&this.schedule.findItemIndexAtTime(this.timelinePos)!==T){a.error=new Error(`Interstitial ${c.length?"no longer within playback range":"asset-list is empty"} ${this.timelinePos} ${a}`),this.log(a.error.message),this.updateSchedule(!0),this.primaryFallback(a);return}this.setBufferingItem(x)}this.setSchedulePosition(T)}else if(b?.identifier===l){const T=a.assetList[0];if(T){const x=this.getAssetPlayer(T.identifier);if(b.appendInPlace){const w=this.primaryMedia;x&&w&&this.bufferAssetPlayer(x,w)}else x&&x.loadSource()}}}onError(e,t){if(this.schedule)switch(t.details){case Q.ASSET_LIST_PARSING_ERROR:case Q.ASSET_LIST_LOAD_ERROR:case Q.ASSET_LIST_LOAD_TIMEOUT:{const i=t.interstitial;i&&(this.updateSchedule(!0),this.primaryFallback(i));break}case Q.BUFFER_STALLED_ERROR:{const i=this.endedItem||this.waitingItem||this.playingItem;if(this.isInterstitial(i)&&i.event.appendInPlace){this.handleInPlaceStall(i.event);return}this.log(`Primary player stall @${this.timelinePos} bufferedPos: ${this.bufferedPos}`),this.onTimeupdate(),this.checkBuffer(!0);break}}}}const sE=500;class FP extends Qm{constructor(e,t,i){super(e,t,i,"subtitle-stream-controller",ge.SUBTITLE),this.currentTrackId=-1,this.tracksBuffered=[],this.mainDetails=null,this.registerListeners()}onHandlerDestroying(){this.unregisterListeners(),super.onHandlerDestroying(),this.mainDetails=null}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(L.LEVEL_LOADED,this.onLevelLoaded,this),e.on(L.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(L.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.on(L.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.on(L.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.on(L.BUFFER_FLUSHING,this.onBufferFlushing,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(L.LEVEL_LOADED,this.onLevelLoaded,this),e.off(L.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(L.SUBTITLE_TRACK_SWITCH,this.onSubtitleTrackSwitch,this),e.off(L.SUBTITLE_TRACK_LOADED,this.onSubtitleTrackLoaded,this),e.off(L.SUBTITLE_FRAG_PROCESSED,this.onSubtitleFragProcessed,this),e.off(L.BUFFER_FLUSHING,this.onBufferFlushing,this)}startLoad(e,t){this.stopLoad(),this.state=le.IDLE,this.setInterval(sE),this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}onManifestLoading(){super.onManifestLoading(),this.mainDetails=null}onMediaDetaching(e,t){this.tracksBuffered=[],super.onMediaDetaching(e,t)}onLevelLoaded(e,t){this.mainDetails=t.details}onSubtitleFragProcessed(e,t){const{frag:i,success:s}=t;if(this.fragContextChanged(i)||(wt(i)&&(this.fragPrevious=i),this.state=le.IDLE),!s)return;const a=this.tracksBuffered[this.currentTrackId];if(!a)return;let l;const c=i.start;for(let d=0;d<a.length;d++)if(c>=a[d].start&&c<=a[d].end){l=a[d];break}const f=i.start+i.duration;l?l.end=f:(l={start:c,end:f},a.push(l)),this.fragmentTracker.fragBuffered(i),this.fragBufferedComplete(i,null),this.media&&this.tick()}onBufferFlushing(e,t){const{startOffset:i,endOffset:s}=t;if(i===0&&s!==Number.POSITIVE_INFINITY){const a=s-1;if(a<=0)return;t.endOffsetSubtitles=Math.max(0,a),this.tracksBuffered.forEach(l=>{for(let c=0;c<l.length;){if(l[c].end<=a){l.shift();continue}else if(l[c].start<a)l[c].start=a;else break;c++}}),this.fragmentTracker.removeFragmentsInRange(i,a,ge.SUBTITLE)}}onError(e,t){const i=t.frag;i?.type===ge.SUBTITLE&&(t.details===Q.FRAG_GAP&&this.fragmentTracker.fragBuffered(i,!0),this.fragCurrent&&this.fragCurrent.abortRequests(),this.state!==le.STOPPED&&(this.state=le.IDLE))}onSubtitleTracksUpdated(e,{subtitleTracks:t}){if(this.levels&&dS(this.levels,t)){this.levels=t.map(i=>new Mo(i));return}this.tracksBuffered=[],this.levels=t.map(i=>{const s=new Mo(i);return this.tracksBuffered[s.id]=[],s}),this.fragmentTracker.removeFragmentsInRange(0,Number.POSITIVE_INFINITY,ge.SUBTITLE),this.fragPrevious=null,this.mediaBuffer=null}onSubtitleTrackSwitch(e,t){var i;if(this.currentTrackId=t.id,!((i=this.levels)!=null&&i.length)||this.currentTrackId===-1){this.clearInterval();return}const s=this.levels[this.currentTrackId];s!=null&&s.details?this.mediaBuffer=this.mediaBufferTimeRanges:this.mediaBuffer=null,s&&this.state!==le.STOPPED&&this.setInterval(sE)}onSubtitleTrackLoaded(e,t){var i;const{currentTrackId:s,levels:a}=this,{details:l,id:c}=t;if(!a){this.warn(`Subtitle tracks were reset while loading level ${c}`);return}const f=a[c];if(c>=a.length||!f)return;this.log(`Subtitle track ${c} loaded [${l.startSN},${l.endSN}]${l.lastPartSn?`[part-${l.lastPartSn}-${l.lastPartIndex}]`:""},duration:${l.totalduration}`),this.mediaBuffer=this.mediaBufferTimeRanges;let d=0;if(l.live||(i=f.details)!=null&&i.live){if(l.deltaUpdateFailed)return;const p=this.mainDetails;if(!p){this.startFragRequested=!1;return}const g=p.fragments[0];if(!f.details)l.hasProgramDateTime&&p.hasProgramDateTime?(mu(l,p),d=l.fragmentStart):g&&(d=g.start,nm(l,d));else{var h;d=this.alignPlaylists(l,f.details,(h=this.levelLastLoaded)==null?void 0:h.details),d===0&&g&&(d=g.start,nm(l,d))}p&&!this.startFragRequested&&this.setStartPosition(p,d)}f.details=l,this.levelLastLoaded=f,c===s&&(this.hls.trigger(L.SUBTITLE_TRACK_UPDATED,{details:l,id:c,groupId:t.groupId}),this.tick(),l.live&&!this.fragCurrent&&this.media&&this.state===le.IDLE&&(gr(null,l.fragments,this.media.currentTime,0)||(this.warn("Subtitle playlist not aligned with playback"),f.details=void 0)))}_handleFragmentLoadComplete(e){const{frag:t,payload:i}=e,s=t.decryptdata,a=this.hls;if(!this.fragContextChanged(t)&&i&&i.byteLength>0&&s!=null&&s.key&&s.iv&&ma(s.method)){const l=performance.now();this.decrypter.decrypt(new Uint8Array(i),s.key.buffer,s.iv.buffer,Xm(s.method)).catch(c=>{throw a.trigger(L.ERROR,{type:Ee.MEDIA_ERROR,details:Q.FRAG_DECRYPT_ERROR,fatal:!1,error:c,reason:c.message,frag:t}),c}).then(c=>{const f=performance.now();a.trigger(L.FRAG_DECRYPTED,{frag:t,payload:c,stats:{tstart:l,tdecrypt:f}})}).catch(c=>{this.warn(`${c.name}: ${c.message}`),this.state=le.IDLE})}}doTick(){if(!this.media){this.state=le.IDLE;return}if(this.state===le.IDLE){const{currentTrackId:e,levels:t}=this,i=t?.[e];if(!i||!t.length||!i.details||this.waitForLive(i))return;const{config:s}=this,a=this.getLoadPosition(),l=_e.bufferedInfo(this.tracksBuffered[this.currentTrackId]||[],a,s.maxBufferHole),{end:c,len:f}=l,d=i.details,h=this.hls.maxBufferLength+d.levelTargetDuration;if(f>h)return;const p=d.fragments,g=p.length,b=d.edge;let y=null;const T=this.fragPrevious;if(c<b){const S=s.maxFragLookUpTolerance,A=c>b-S?0:S;y=gr(T,p,Math.max(p[0].start,c),A),!y&&T&&T.start<p[0].start&&(y=p[0])}else y=p[g-1];if(y=this.filterReplacedPrimary(y,i.details),!y)return;const x=y.sn-d.startSN,w=p[x-1];if(w&&w.cc===y.cc&&this.fragmentTracker.getState(w)===Mt.NOT_LOADED&&(y=w),this.fragmentTracker.getState(y)===Mt.NOT_LOADED){const S=this.mapToInitFragWhenRequired(y);S&&this.loadFragment(S,i,c)}}}loadFragment(e,t,i){wt(e)?super.loadFragment(e,t,i):this._loadInitSegment(e,t)}get mediaBufferTimeRanges(){return new UP(this.tracksBuffered[this.currentTrackId]||[])}}class UP{constructor(e){this.buffered=void 0;const t=(i,s,a)=>{if(s=s>>>0,s>a-1)throw new DOMException(`Failed to execute '${i}' on 'TimeRanges': The index provided (${s}) is greater than the maximum bound (${a})`);return e[s][i]};this.buffered={get length(){return e.length},end(i){return t("end",i,e.length)},start(i){return t("start",i,e.length)}}}}const $P={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},LS=n=>String.fromCharCode($P[n]||n),sn=15,Vn=100,jP={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},HP={17:2,18:4,21:6,22:8,23:10,19:13,20:15},GP={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},zP={25:2,26:4,29:6,30:8,31:10,27:13,28:15},VP=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];class qP{constructor(){this.time=null,this.verboseLevel=0}log(e,t){if(this.verboseLevel>=e){const i=typeof t=="function"?t():t;We.log(`${this.time} [${e}] ${i}`)}}}const rr=function(e){const t=[];for(let i=0;i<e.length;i++)t.push(e[i].toString(16));return t};class _S{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(e){const t=["foreground","underline","italics","background","flash"];for(let i=0;i<t.length;i++){const s=t[i];e.hasOwnProperty(s)&&(this[s]=e[s])}}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash}copy(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash}toString(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash}}class KP{constructor(){this.uchar=" ",this.penState=new _S}reset(){this.uchar=" ",this.penState.reset()}setChar(e,t){this.uchar=e,this.penState.copy(t)}setPenState(e){this.penState.copy(e)}equals(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)}copy(e){this.uchar=e.uchar,this.penState.copy(e.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}}class YP{constructor(e){this.chars=[],this.pos=0,this.currPenState=new _S,this.cueStartTime=null,this.logger=void 0;for(let t=0;t<Vn;t++)this.chars.push(new KP);this.logger=e}equals(e){for(let t=0;t<Vn;t++)if(!this.chars[t].equals(e.chars[t]))return!1;return!0}copy(e){for(let t=0;t<Vn;t++)this.chars[t].copy(e.chars[t])}isEmpty(){let e=!0;for(let t=0;t<Vn;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e}setCursor(e){this.pos!==e&&(this.pos=e),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>Vn&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=Vn)}moveCursor(e){const t=this.pos+e;if(e>1)for(let i=this.pos+1;i<t+1;i++)this.chars[i].setPenState(this.currPenState);this.setCursor(t)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(e){e>=144&&this.backSpace();const t=LS(e);if(this.pos>=Vn){this.logger.log(0,()=>"Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");return}this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)}clearFromPos(e){let t;for(t=e;t<Vn;t++)this.chars[t].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const e=[];let t=!0;for(let i=0;i<Vn;i++){const s=this.chars[i].uchar;s!==" "&&(t=!1),e.push(s)}return t?"":e.join("")}setPenStyles(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)}}class Lh{constructor(e){this.rows=[],this.currRow=sn-1,this.nrRollUpRows=null,this.lastOutputScreen=null,this.logger=void 0;for(let t=0;t<sn;t++)this.rows.push(new YP(e));this.logger=e}reset(){for(let e=0;e<sn;e++)this.rows[e].clear();this.currRow=sn-1}equals(e){let t=!0;for(let i=0;i<sn;i++)if(!this.rows[i].equals(e.rows[i])){t=!1;break}return t}copy(e){for(let t=0;t<sn;t++)this.rows[t].copy(e.rows[t])}isEmpty(){let e=!0;for(let t=0;t<sn;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(e){this.rows[this.currRow].insertChar(e)}setPen(e){this.rows[this.currRow].setPenStyles(e)}moveCursor(e){this.rows[this.currRow].moveCursor(e)}setCursor(e){this.logger.log(2,"setCursor: "+e),this.rows[this.currRow].setCursor(e)}setPAC(e){this.logger.log(2,()=>"pacData = "+st(e));let t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(let c=0;c<sn;c++)this.rows[c].clear();const a=this.currRow+1-this.nrRollUpRows,l=this.lastOutputScreen;if(l){const c=l.rows[a].cueStartTime,f=this.logger.time;if(c!==null&&f!==null&&c<f)for(let d=0;d<this.nrRollUpRows;d++)this.rows[t-this.nrRollUpRows+d+1].copy(l.rows[a+d])}}this.currRow=t;const i=this.rows[this.currRow];if(e.indent!==null){const a=e.indent,l=Math.max(a-1,0);i.setCursor(e.indent),e.color=i.chars[l].penState.foreground}const s={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(s)}setBkgData(e){this.logger.log(2,()=>"bkgData = "+st(e)),this.backSpace(),this.setPen(e),this.insertChar(32)}setRollUpRows(e){this.nrRollUpRows=e}rollUp(){if(this.nrRollUpRows===null){this.logger.log(3,"roll_up but nrRollUpRows not set yet");return}this.logger.log(1,()=>this.getDisplayText());const e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),this.logger.log(2,"Rolling up")}getDisplayText(e){e=e||!1;const t=[];let i="",s=-1;for(let a=0;a<sn;a++){const l=this.rows[a].getTextString();l&&(s=a+1,e?t.push("Row "+s+": '"+l+"'"):t.push(l.trim()))}return t.length>0&&(e?i="["+t.join(" | ")+"]":i=t.join(`
`)),i}getTextAndFormat(){return this.rows}}class rE{constructor(e,t,i){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.logger=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Lh(i),this.nonDisplayedMemory=new Lh(i),this.lastOutputScreen=new Lh(i),this.currRollUpRow=this.displayedMemory.rows[sn-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=i}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter.reset(),this.currRollUpRow=this.displayedMemory.rows[sn-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(e){this.outputFilter=e}setPAC(e){this.writeScreen.setPAC(e)}setBkgData(e){this.writeScreen.setBkgData(e)}setMode(e){e!==this.mode&&(this.mode=e,this.logger.log(2,()=>"MODE="+e),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)}insertChars(e){for(let i=0;i<e.length;i++)this.writeScreen.insertChar(e[i]);const t=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,()=>t+": "+this.writeScreen.getDisplayText(!0)),(this.mode==="MODE_PAINT-ON"||this.mode==="MODE_ROLL-UP")&&(this.logger.log(1,()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(e){this.logger.log(2,"RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,()=>"DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)}ccTO(e){this.logger.log(2,"TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)}ccMIDROW(e){const t={flash:!1};if(t.underline=e%2===1,t.italics=e>=46,t.italics)t.foreground="white";else{const i=Math.floor(e/2)-16,s=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=s[i]}this.logger.log(2,"MIDROW: "+st(t)),this.writeScreen.setPen(t)}outputDataUpdate(e=!1){const t=this.logger.time;t!==null&&this.outputFilter&&(this.cueStartTime===null&&!this.displayedMemory.isEmpty()?this.cueStartTime=t:this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t),this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))}}class aE{constructor(e,t,i){this.channels=void 0,this.currentChannel=0,this.cmdHistory=WP(),this.logger=void 0;const s=this.logger=new qP;this.channels=[null,new rE(e,t,s),new rE(e+1,i,s)]}getHandler(e){return this.channels[e].getHandler()}setHandler(e,t){this.channels[e].setHandler(t)}addData(e,t){this.logger.time=e;for(let i=0;i<t.length;i+=2){const s=t[i]&127,a=t[i+1]&127;let l=!1,c=null;if(s===0&&a===0)continue;this.logger.log(3,()=>"["+rr([t[i],t[i+1]])+"] -> ("+rr([s,a])+")");const f=this.cmdHistory;if(s>=16&&s<=31){if(XP(s,a,f)){Ic(null,null,f),this.logger.log(3,()=>"Repeated command ("+rr([s,a])+") is dropped");continue}Ic(s,a,this.cmdHistory),l=this.parseCmd(s,a),l||(l=this.parseMidrow(s,a)),l||(l=this.parsePAC(s,a)),l||(l=this.parseBackgroundAttributes(s,a))}else Ic(null,null,f);if(!l&&(c=this.parseChars(s,a),c)){const h=this.currentChannel;h&&h>0?this.channels[h].insertChars(c):this.logger.log(2,"No channel found yet. TEXT-MODE?")}!l&&!c&&this.logger.log(2,()=>"Couldn't parse cleaned data "+rr([s,a])+" orig: "+rr([t[i],t[i+1]]))}}parseCmd(e,t){const i=(e===20||e===28||e===21||e===29)&&t>=32&&t<=47,s=(e===23||e===31)&&t>=33&&t<=35;if(!(i||s))return!1;const a=e===20||e===21||e===23?1:2,l=this.channels[a];return e===20||e===21||e===28||e===29?t===32?l.ccRCL():t===33?l.ccBS():t===34?l.ccAOF():t===35?l.ccAON():t===36?l.ccDER():t===37?l.ccRU(2):t===38?l.ccRU(3):t===39?l.ccRU(4):t===40?l.ccFON():t===41?l.ccRDC():t===42?l.ccTR():t===43?l.ccRTD():t===44?l.ccEDM():t===45?l.ccCR():t===46?l.ccENM():t===47&&l.ccEOC():l.ccTO(t-32),this.currentChannel=a,!0}parseMidrow(e,t){let i=0;if((e===17||e===25)&&t>=32&&t<=47){if(e===17?i=1:i=2,i!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const s=this.channels[i];return s?(s.ccMIDROW(t),this.logger.log(3,()=>"MIDROW ("+rr([e,t])+")"),!0):!1}return!1}parsePAC(e,t){let i;const s=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,a=(e===16||e===24)&&t>=64&&t<=95;if(!(s||a))return!1;const l=e<=23?1:2;t>=64&&t<=95?i=l===1?jP[e]:GP[e]:i=l===1?HP[e]:zP[e];const c=this.channels[l];return c?(c.setPAC(this.interpretPAC(i,t)),this.currentChannel=l,!0):!1}interpretPAC(e,t){let i;const s={color:null,italics:!1,indent:null,underline:!1,row:e};return t>95?i=t-96:i=t-64,s.underline=(i&1)===1,i<=13?s.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(i/2)]:i<=15?(s.italics=!0,s.color="white"):s.indent=Math.floor((i-16)/2)*4,s}parseChars(e,t){let i,s=null,a=null;if(e>=25?(i=2,a=e-8):(i=1,a=e),a>=17&&a<=19){let l;a===17?l=t+80:a===18?l=t+112:l=t+144,this.logger.log(2,()=>"Special char '"+LS(l)+"' in channel "+i),s=[l]}else e>=32&&e<=127&&(s=t===0?[e]:[e,t]);return s&&this.logger.log(3,()=>"Char codes =  "+rr(s).join(",")),s}parseBackgroundAttributes(e,t){const i=(e===16||e===24)&&t>=32&&t<=47,s=(e===23||e===31)&&t>=45&&t<=47;if(!(i||s))return!1;let a;const l={};e===16||e===24?(a=Math.floor((t-32)/2),l.background=VP[a],t%2===1&&(l.background=l.background+"_semi")):t===45?l.background="transparent":(l.foreground="black",t===47&&(l.underline=!0));const c=e<=23?1:2;return this.channels[c].setBkgData(l),!0}reset(){for(let e=0;e<Object.keys(this.channels).length;e++){const t=this.channels[e];t&&t.reset()}Ic(null,null,this.cmdHistory)}cueSplitAtTime(e){for(let t=0;t<this.channels.length;t++){const i=this.channels[t];i&&i.cueSplitAtTime(e)}}}function Ic(n,e,t){t.a=n,t.b=e}function XP(n,e,t){return t.a===n&&t.b===e}function WP(){return{a:null,b:null}}var cp=(function(){if(hu!=null&&hu.VTTCue)return self.VTTCue;const n=["","lr","rl"],e=["start","middle","end","left","right"];function t(c,f){if(typeof f!="string"||!Array.isArray(c))return!1;const d=f.toLowerCase();return~c.indexOf(d)?d:!1}function i(c){return t(n,c)}function s(c){return t(e,c)}function a(c,...f){let d=1;for(;d<arguments.length;d++){const h=arguments[d];for(const p in h)c[p]=h[p]}return c}function l(c,f,d){const h=this,p={enumerable:!0};h.hasBeenReset=!1;let g="",b=!1,y=c,T=f,x=d,w=null,S="",A=!0,_="auto",I="start",P=50,C="middle",O=50,B="middle";Object.defineProperty(h,"id",a({},p,{get:function(){return g},set:function(N){g=""+N}})),Object.defineProperty(h,"pauseOnExit",a({},p,{get:function(){return b},set:function(N){b=!!N}})),Object.defineProperty(h,"startTime",a({},p,{get:function(){return y},set:function(N){if(typeof N!="number")throw new TypeError("Start time must be set to a number.");y=N,this.hasBeenReset=!0}})),Object.defineProperty(h,"endTime",a({},p,{get:function(){return T},set:function(N){if(typeof N!="number")throw new TypeError("End time must be set to a number.");T=N,this.hasBeenReset=!0}})),Object.defineProperty(h,"text",a({},p,{get:function(){return x},set:function(N){x=""+N,this.hasBeenReset=!0}})),Object.defineProperty(h,"region",a({},p,{get:function(){return w},set:function(N){w=N,this.hasBeenReset=!0}})),Object.defineProperty(h,"vertical",a({},p,{get:function(){return S},set:function(N){const V=i(N);if(V===!1)throw new SyntaxError("An invalid or illegal string was specified.");S=V,this.hasBeenReset=!0}})),Object.defineProperty(h,"snapToLines",a({},p,{get:function(){return A},set:function(N){A=!!N,this.hasBeenReset=!0}})),Object.defineProperty(h,"line",a({},p,{get:function(){return _},set:function(N){if(typeof N!="number"&&N!=="auto")throw new SyntaxError("An invalid number or illegal string was specified.");_=N,this.hasBeenReset=!0}})),Object.defineProperty(h,"lineAlign",a({},p,{get:function(){return I},set:function(N){const V=s(N);if(!V)throw new SyntaxError("An invalid or illegal string was specified.");I=V,this.hasBeenReset=!0}})),Object.defineProperty(h,"position",a({},p,{get:function(){return P},set:function(N){if(N<0||N>100)throw new Error("Position must be between 0 and 100.");P=N,this.hasBeenReset=!0}})),Object.defineProperty(h,"positionAlign",a({},p,{get:function(){return C},set:function(N){const V=s(N);if(!V)throw new SyntaxError("An invalid or illegal string was specified.");C=V,this.hasBeenReset=!0}})),Object.defineProperty(h,"size",a({},p,{get:function(){return O},set:function(N){if(N<0||N>100)throw new Error("Size must be between 0 and 100.");O=N,this.hasBeenReset=!0}})),Object.defineProperty(h,"align",a({},p,{get:function(){return B},set:function(N){const V=s(N);if(!V)throw new SyntaxError("An invalid or illegal string was specified.");B=V,this.hasBeenReset=!0}})),h.displayState=void 0}return l.prototype.getCueAsHTML=function(){return self.WebVTT.convertCueToDOMTree(self,this.text)},l})();class QP{decode(e,t){if(!e)return"";if(typeof e!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}function CS(n){function e(i,s,a,l){return(i|0)*3600+(s|0)*60+(a|0)+parseFloat(l||0)}const t=n.match(/^(?:(\d+):)?(\d{2}):(\d{2})(\.\d+)?/);return t?parseFloat(t[2])>59?e(t[2],t[3],0,t[4]):e(t[1],t[2],t[3],t[4]):null}class ZP{constructor(){this.values=Object.create(null)}set(e,t){!this.get(e)&&t!==""&&(this.values[e]=t)}get(e,t,i){return i?this.has(e)?this.values[e]:t[i]:this.has(e)?this.values[e]:t}has(e){return e in this.values}alt(e,t,i){for(let s=0;s<i.length;++s)if(t===i[s]){this.set(e,t);break}}integer(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))}percent(e,t){if(/^([\d]{1,3})(\.[\d]*)?%$/.test(t)){const i=parseFloat(t);if(i>=0&&i<=100)return this.set(e,i),!0}return!1}}function IS(n,e,t,i){const s=i?n.split(i):[n];for(const a in s){if(typeof s[a]!="string")continue;const l=s[a].split(t);if(l.length!==2)continue;const c=l[0],f=l[1];e(c,f)}}const dm=new cp(0,0,""),Dc=dm.align==="middle"?"middle":"center";function JP(n,e,t){const i=n;function s(){const c=CS(n);if(c===null)throw new Error("Malformed timestamp: "+i);return n=n.replace(/^[^\sa-zA-Z-]+/,""),c}function a(c,f){const d=new ZP;IS(c,function(g,b){let y;switch(g){case"region":for(let T=t.length-1;T>=0;T--)if(t[T].id===b){d.set(g,t[T].region);break}break;case"vertical":d.alt(g,b,["rl","lr"]);break;case"line":y=b.split(","),d.integer(g,y[0]),d.percent(g,y[0])&&d.set("snapToLines",!1),d.alt(g,y[0],["auto"]),y.length===2&&d.alt("lineAlign",y[1],["start",Dc,"end"]);break;case"position":y=b.split(","),d.percent(g,y[0]),y.length===2&&d.alt("positionAlign",y[1],["start",Dc,"end","line-left","line-right","auto"]);break;case"size":d.percent(g,b);break;case"align":d.alt(g,b,["start",Dc,"end","left","right"]);break}},/:/,/\s/),f.region=d.get("region",null),f.vertical=d.get("vertical","");let h=d.get("line","auto");h==="auto"&&dm.line===-1&&(h=-1),f.line=h,f.lineAlign=d.get("lineAlign","start"),f.snapToLines=d.get("snapToLines",!0),f.size=d.get("size",100),f.align=d.get("align",Dc);let p=d.get("position","auto");p==="auto"&&dm.position===50&&(p=f.align==="start"||f.align==="left"?0:f.align==="end"||f.align==="right"?100:50),f.position=p}function l(){n=n.replace(/^\s+/,"")}if(l(),e.startTime=s(),l(),n.slice(0,3)!=="-->")throw new Error("Malformed time stamp (time stamps must be separated by '-->'): "+i);n=n.slice(3),l(),e.endTime=s(),l(),a(n,e)}function DS(n){return n.replace(/<br(?: \/)?>/gi,`
`)}class e3{constructor(){this.state="INITIAL",this.buffer="",this.decoder=new QP,this.regionList=[],this.cue=null,this.oncue=void 0,this.onparsingerror=void 0,this.onflush=void 0}parse(e){const t=this;e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));function i(){let a=t.buffer,l=0;for(a=DS(a);l<a.length&&a[l]!=="\r"&&a[l]!==`
`;)++l;const c=a.slice(0,l);return a[l]==="\r"&&++l,a[l]===`
`&&++l,t.buffer=a.slice(l),c}function s(a){IS(a,function(l,c){},/:/)}try{let a="";if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;a=i();const c=a.match(/^()?WEBVTT([ \t].*)?$/);if(!(c!=null&&c[0]))throw new Error("Malformed WebVTT signature.");t.state="HEADER"}let l=!1;for(;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(l?l=!1:a=i(),t.state){case"HEADER":/:/.test(a)?s(a):a||(t.state="ID");continue;case"NOTE":a||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(a)){t.state="NOTE";break}if(!a)continue;if(t.cue=new cp(0,0,""),t.state="CUE",a.indexOf("-->")===-1){t.cue.id=a;continue}case"CUE":if(!t.cue){t.state="BADCUE";continue}try{JP(a,t.cue,t.regionList)}catch{t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":{const c=a.indexOf("-->")!==-1;if(!a||c&&(l=!0)){t.oncue&&t.cue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}if(t.cue===null)continue;t.cue.text&&(t.cue.text+=`
`),t.cue.text+=a}continue;case"BADCUE":a||(t.state="ID")}}}catch{t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this}flush(){const e=this;try{if((e.cue||e.state==="HEADER")&&(e.buffer+=`

`,e.parse()),e.state==="INITIAL"||e.state==="BADWEBVTT")throw new Error("Malformed WebVTT signature.")}catch(t){e.onparsingerror&&e.onparsingerror(t)}return e.onflush&&e.onflush(),this}}const t3=/\r\n|\n\r|\n|\r/g,_h=function(e,t,i=0){return e.slice(i,i+t.length)===t},i3=function(e){let t=parseInt(e.slice(-3));const i=parseInt(e.slice(-6,-4)),s=parseInt(e.slice(-9,-7)),a=e.length>9?parseInt(e.substring(0,e.indexOf(":"))):0;if(!pe(t)||!pe(i)||!pe(s)||!pe(a))throw Error(`Malformed X-TIMESTAMP-MAP: Local:${e}`);return t+=1e3*i,t+=60*1e3*s,t+=3600*1e3*a,t};function up(n,e,t){return Co(n.toString())+Co(e.toString())+Co(t)}const n3=function(e,t,i){let s=e[t],a=e[s.prevCC];if(!a||!a.new&&s.new){e.ccOffset=e.presentationOffset=s.start,s.new=!1;return}for(;(l=a)!=null&&l.new;){var l;e.ccOffset+=s.start-a.start,s.new=!1,s=a,a=e[s.prevCC]}e.presentationOffset=i};function s3(n,e,t,i,s,a,l){const c=new e3,f=ki(new Uint8Array(n)).trim().replace(t3,`
`).split(`
`),d=[],h=e?uM(e.baseTime,e.timescale):0;let p="00:00.000",g=0,b=0,y,T=!0;c.oncue=function(x){const w=t[i];let S=t.ccOffset;const A=(g-h)/9e4;if(w!=null&&w.new&&(b!==void 0?S=t.ccOffset=w.start:n3(t,i,A)),A){if(!e){y=new Error("Missing initPTS for VTT MPEGTS");return}S=A-t.presentationOffset}const _=x.endTime-x.startTime,I=Ii((x.startTime+S-b)*9e4,s*9e4)/9e4;x.startTime=Math.max(I,0),x.endTime=Math.max(I+_,0);const P=x.text.trim();x.text=decodeURIComponent(encodeURIComponent(P)),x.id||(x.id=up(x.startTime,x.endTime,P)),x.endTime>0&&d.push(x)},c.onparsingerror=function(x){y=x},c.onflush=function(){if(y){l(y);return}a(d)},f.forEach(x=>{if(T)if(_h(x,"X-TIMESTAMP-MAP=")){T=!1,x.slice(16).split(",").forEach(w=>{_h(w,"LOCAL:")?p=w.slice(6):_h(w,"MPEGTS:")&&(g=parseInt(w.slice(7)))});try{b=i3(p)/1e3}catch(w){y=w}return}else x===""&&(T=!1);c.parse(x+`
`)}),c.flush()}const Ch="stpp.ttml.im1t",kS=/^(\d{2,}):(\d{2}):(\d{2}):(\d{2})\.?(\d+)?$/,OS=/^(\d*(?:\.\d*)?)(h|m|s|ms|f|t)$/,r3={left:"start",center:"center",right:"end",start:"start",end:"end"};function oE(n,e,t,i){const s=Me(new Uint8Array(n),["mdat"]);if(s.length===0){i(new Error("Could not parse IMSC1 mdat"));return}const a=s.map(c=>ki(c)),l=cM(e.baseTime,1,e.timescale);try{a.forEach(c=>t(a3(c,l)))}catch(c){i(c)}}function a3(n,e){const s=new DOMParser().parseFromString(n,"text/xml").getElementsByTagName("tt")[0];if(!s)throw new Error("Invalid ttml");const a={frameRate:30,subFrameRate:1,frameRateMultiplier:0,tickRate:0},l=Object.keys(a).reduce((p,g)=>(p[g]=s.getAttribute(`ttp:${g}`)||a[g],p),{}),c=s.getAttribute("xml:space")!=="preserve",f=lE(Ih(s,"styling","style")),d=lE(Ih(s,"layout","region")),h=Ih(s,"body","[begin]");return[].map.call(h,p=>{const g=MS(p,c);if(!g||!p.hasAttribute("begin"))return null;const b=kh(p.getAttribute("begin"),l),y=kh(p.getAttribute("dur"),l);let T=kh(p.getAttribute("end"),l);if(b===null)throw cE(p);if(T===null){if(y===null)throw cE(p);T=b+y}const x=new cp(b-e,T-e,g);x.id=up(x.startTime,x.endTime,x.text);const w=d[p.getAttribute("region")],S=f[p.getAttribute("style")],A=o3(w,S,f),{textAlign:_}=A;if(_){const I=r3[_];I&&(x.lineAlign=I),x.align=_}return et(x,A),x}).filter(p=>p!==null)}function Ih(n,e,t){const i=n.getElementsByTagName(e)[0];return i?[].slice.call(i.querySelectorAll(t)):[]}function lE(n){return n.reduce((e,t)=>{const i=t.getAttribute("xml:id");return i&&(e[i]=t),e},{})}function MS(n,e){return[].slice.call(n.childNodes).reduce((t,i,s)=>{var a;return i.nodeName==="br"&&s?t+`
`:(a=i.childNodes)!=null&&a.length?MS(i,e):e?t+i.textContent.trim().replace(/\s+/g," "):t+i.textContent},"")}function o3(n,e,t){const i="http://www.w3.org/ns/ttml#styling";let s=null;const a=["displayAlign","textAlign","color","backgroundColor","fontSize","fontFamily"],l=n!=null&&n.hasAttribute("style")?n.getAttribute("style"):null;return l&&t.hasOwnProperty(l)&&(s=t[l]),a.reduce((c,f)=>{const d=Dh(e,i,f)||Dh(n,i,f)||Dh(s,i,f);return d&&(c[f]=d),c},{})}function Dh(n,e,t){return n&&n.hasAttributeNS(e,t)?n.getAttributeNS(e,t):null}function cE(n){return new Error(`Could not parse ttml timestamp ${n}`)}function kh(n,e){if(!n)return null;let t=CS(n);return t===null&&(kS.test(n)?t=l3(n,e):OS.test(n)&&(t=c3(n,e))),t}function l3(n,e){const t=kS.exec(n),i=(t[4]|0)+(t[5]|0)/e.subFrameRate;return(t[1]|0)*3600+(t[2]|0)*60+(t[3]|0)+i/e.frameRate}function c3(n,e){const t=OS.exec(n),i=Number(t[1]);switch(t[2]){case"h":return i*3600;case"m":return i*60;case"ms":return i*1e3;case"f":return i/e.frameRate;case"t":return i/e.tickRate}return i}class kc{constructor(e,t){this.timelineController=void 0,this.cueRanges=[],this.trackName=void 0,this.startTime=null,this.endTime=null,this.screen=null,this.timelineController=e,this.trackName=t}dispatchCue(){this.startTime!==null&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen,this.cueRanges),this.startTime=null)}newCue(e,t,i){(this.startTime===null||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=i,this.timelineController.createCaptionsTrack(this.trackName)}reset(){this.cueRanges=[],this.startTime=null}}class u3{constructor(e){this.hls=void 0,this.media=null,this.config=void 0,this.enabled=!0,this.Cues=void 0,this.textTracks=[],this.tracks=[],this.initPTS=[],this.unparsedVttFrags=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.cea608Parser1=void 0,this.cea608Parser2=void 0,this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=dE(),this.captionsProperties=void 0,this.hls=e,this.config=e.config,this.Cues=e.config.cueHandler,this.captionsProperties={textTrack1:{label:this.config.captionsTextTrack1Label,languageCode:this.config.captionsTextTrack1LanguageCode},textTrack2:{label:this.config.captionsTextTrack2Label,languageCode:this.config.captionsTextTrack2LanguageCode},textTrack3:{label:this.config.captionsTextTrack3Label,languageCode:this.config.captionsTextTrack3LanguageCode},textTrack4:{label:this.config.captionsTextTrack4Label,languageCode:this.config.captionsTextTrack4LanguageCode}},e.on(L.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(L.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.on(L.FRAG_LOADING,this.onFragLoading,this),e.on(L.FRAG_LOADED,this.onFragLoaded,this),e.on(L.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.on(L.FRAG_DECRYPTED,this.onFragDecrypted,this),e.on(L.INIT_PTS_FOUND,this.onInitPtsFound,this),e.on(L.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.on(L.BUFFER_FLUSHING,this.onBufferFlushing,this)}destroy(){const{hls:e}=this;e.off(L.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(L.SUBTITLE_TRACKS_UPDATED,this.onSubtitleTracksUpdated,this),e.off(L.FRAG_LOADING,this.onFragLoading,this),e.off(L.FRAG_LOADED,this.onFragLoaded,this),e.off(L.FRAG_PARSING_USERDATA,this.onFragParsingUserdata,this),e.off(L.FRAG_DECRYPTED,this.onFragDecrypted,this),e.off(L.INIT_PTS_FOUND,this.onInitPtsFound,this),e.off(L.SUBTITLE_TRACKS_CLEARED,this.onSubtitleTracksCleared,this),e.off(L.BUFFER_FLUSHING,this.onBufferFlushing,this),this.hls=this.config=this.media=null,this.cea608Parser1=this.cea608Parser2=void 0}initCea608Parsers(){const e=new kc(this,"textTrack1"),t=new kc(this,"textTrack2"),i=new kc(this,"textTrack3"),s=new kc(this,"textTrack4");this.cea608Parser1=new aE(1,e,t),this.cea608Parser2=new aE(3,i,s)}addCues(e,t,i,s,a){let l=!1;for(let c=a.length;c--;){const f=a[c],d=d3(f[0],f[1],t,i);if(d>=0&&(f[0]=Math.min(f[0],t),f[1]=Math.max(f[1],i),l=!0,d/(i-t)>.5))return}if(l||a.push([t,i]),this.config.renderTextTracksNatively){const c=this.captionsTracks[e];this.Cues.newCue(c,t,i,s)}else{const c=this.Cues.newCue(null,t,i,s);this.hls.trigger(L.CUES_PARSED,{type:"captions",cues:c,track:e})}}onInitPtsFound(e,{frag:t,id:i,initPTS:s,timescale:a,trackId:l}){const{unparsedVttFrags:c}=this;i===ge.MAIN&&(this.initPTS[t.cc]={baseTime:s,timescale:a,trackId:l}),c.length&&(this.unparsedVttFrags=[],c.forEach(f=>{this.initPTS[f.frag.cc]?this.onFragLoaded(L.FRAG_LOADED,f):this.hls.trigger(L.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:f.frag,error:new Error("Subtitle discontinuity domain does not match main")})}))}getExistingTrack(e,t){const{media:i}=this;if(i)for(let s=0;s<i.textTracks.length;s++){const a=i.textTracks[s];if(uE(a,{name:e,lang:t,characteristics:"transcribes-spoken-dialog,describes-music-and-sound"}))return a}return null}createCaptionsTrack(e){this.config.renderTextTracksNatively?this.createNativeTrack(e):this.createNonNativeTrack(e)}createNativeTrack(e){if(this.captionsTracks[e])return;const{captionsProperties:t,captionsTracks:i,media:s}=this,{label:a,languageCode:l}=t[e],c=this.getExistingTrack(a,l);if(c)i[e]=c,da(i[e]),wS(i[e],s);else{const f=this.createTextTrack("captions",a,l);f&&(f[e]=!0,i[e]=f)}}createNonNativeTrack(e){if(this.nonNativeCaptionsTracks[e])return;const t=this.captionsProperties[e];if(!t)return;const i=t.label,s={_id:e,label:i,kind:"captions",default:t.media?!!t.media.default:!1,closedCaptions:t.media};this.nonNativeCaptionsTracks[e]=s,this.hls.trigger(L.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:[s]})}createTextTrack(e,t,i){const s=this.media;if(s)return s.addTextTrack(e,t,i)}onMediaAttaching(e,t){this.media=t.media,t.mediaSource||this._cleanTracks()}onMediaDetaching(e,t){const i=!!t.transferMedia;if(this.media=null,i)return;const{captionsTracks:s}=this;Object.keys(s).forEach(a=>{da(s[a]),delete s[a]}),this.nonNativeCaptionsTracks={}}onManifestLoading(){this.lastCc=-1,this.lastSn=-1,this.lastPartIndex=-1,this.prevCC=-1,this.vttCCs=dE(),this._cleanTracks(),this.tracks=[],this.captionsTracks={},this.nonNativeCaptionsTracks={},this.textTracks=[],this.unparsedVttFrags=[],this.initPTS=[],this.cea608Parser1&&this.cea608Parser2&&(this.cea608Parser1.reset(),this.cea608Parser2.reset())}_cleanTracks(){const{media:e}=this;if(!e)return;const t=e.textTracks;if(t)for(let i=0;i<t.length;i++)da(t[i])}onSubtitleTracksUpdated(e,t){const i=t.subtitleTracks||[],s=i.some(a=>a.textCodec===Ch);if(this.config.enableWebVTT||s&&this.config.enableIMSC1){if(dS(this.tracks,i)){this.tracks=i;return}if(this.textTracks=[],this.tracks=i,this.config.renderTextTracksNatively){const l=this.media,c=l?qc(l.textTracks):null;if(this.tracks.forEach((f,d)=>{let h;if(c){let p=null;for(let g=0;g<c.length;g++)if(c[g]&&uE(c[g],f)){p=c[g],c[g]=null;break}p&&(h=p)}if(h)da(h);else{const p=PS(f);h=this.createTextTrack(p,f.name,f.lang),h&&(h.mode="disabled")}h&&this.textTracks.push(h)}),c!=null&&c.length){const f=c.filter(d=>d!==null).map(d=>d.label);f.length&&this.hls.logger.warn(`Media element contains unused subtitle tracks: ${f.join(", ")}. Replace media element for each source to clear TextTracks and captions menu.`)}}else if(this.tracks.length){const l=this.tracks.map(c=>({label:c.name,kind:c.type.toLowerCase(),default:c.default,subtitleTrack:c}));this.hls.trigger(L.NON_NATIVE_TEXT_TRACKS_FOUND,{tracks:l})}}}onManifestLoaded(e,t){this.config.enableCEA708Captions&&t.captions&&t.captions.forEach(i=>{const s=/(?:CC|SERVICE)([1-4])/.exec(i.instreamId);if(!s)return;const a=`textTrack${s[1]}`,l=this.captionsProperties[a];l&&(l.label=i.name,i.lang&&(l.languageCode=i.lang),l.media=i)})}closedCaptionsForLevel(e){const t=this.hls.levels[e.level];return t?.attrs["CLOSED-CAPTIONS"]}onFragLoading(e,t){if(this.enabled&&t.frag.type===ge.MAIN){var i,s;const{cea608Parser1:a,cea608Parser2:l,lastSn:c}=this,{cc:f,sn:d}=t.frag,h=(i=(s=t.part)==null?void 0:s.index)!=null?i:-1;a&&l&&(d!==c+1||d===c&&h!==this.lastPartIndex+1||f!==this.lastCc)&&(a.reset(),l.reset()),this.lastCc=f,this.lastSn=d,this.lastPartIndex=h}}onFragLoaded(e,t){const{frag:i,payload:s}=t;if(i.type===ge.SUBTITLE)if(s.byteLength){const a=i.decryptdata,l="stats"in t;if(a==null||!a.encrypted||l){const c=this.tracks[i.level],f=this.vttCCs;f[i.cc]||(f[i.cc]={start:i.start,prevCC:this.prevCC,new:!0},this.prevCC=i.cc),c&&c.textCodec===Ch?this._parseIMSC1(i,s):this._parseVTTs(t)}}else this.hls.trigger(L.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:new Error("Empty subtitle payload")})}_parseIMSC1(e,t){const i=this.hls;oE(t,this.initPTS[e.cc],s=>{this._appendCues(s,e.level),i.trigger(L.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},s=>{i.logger.log(`Failed to parse IMSC1: ${s}`),i.trigger(L.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e,error:s})})}_parseVTTs(e){var t;const{frag:i,payload:s}=e,{initPTS:a,unparsedVttFrags:l}=this,c=a.length-1;if(!a[i.cc]&&c===-1){l.push(e);return}const f=this.hls,d=(t=i.initSegment)!=null&&t.data?Xi(i.initSegment.data,new Uint8Array(s)).buffer:s;s3(d,this.initPTS[i.cc],this.vttCCs,i.cc,i.start,h=>{this._appendCues(h,i.level),f.trigger(L.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:i})},h=>{const p=h.message==="Missing initPTS for VTT MPEGTS";p?l.push(e):this._fallbackToIMSC1(i,s),f.logger.log(`Failed to parse VTT cue: ${h}`),!(p&&c>i.cc)&&f.trigger(L.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:i,error:h})})}_fallbackToIMSC1(e,t){const i=this.tracks[e.level];i.textCodec||oE(t,this.initPTS[e.cc],()=>{i.textCodec=Ch,this._parseIMSC1(e,t)},()=>{i.textCodec="wvtt"})}_appendCues(e,t){const i=this.hls;if(this.config.renderTextTracksNatively){const s=this.textTracks[t];if(!s||s.mode==="disabled")return;e.forEach(a=>AS(s,a))}else{const s=this.tracks[t];if(!s)return;const a=s.default?"default":"subtitles"+t;i.trigger(L.CUES_PARSED,{type:"subtitles",cues:e,track:a})}}onFragDecrypted(e,t){const{frag:i}=t;i.type===ge.SUBTITLE&&this.onFragLoaded(L.FRAG_LOADED,t)}onSubtitleTracksCleared(){this.tracks=[],this.captionsTracks={}}onFragParsingUserdata(e,t){if(!this.enabled||!this.config.enableCEA708Captions)return;const{frag:i,samples:s}=t;if(!(i.type===ge.MAIN&&this.closedCaptionsForLevel(i)==="NONE"))for(let a=0;a<s.length;a++){const l=s[a].bytes;if(l){this.cea608Parser1||this.initCea608Parsers();const c=this.extractCea608Data(l);this.cea608Parser1.addData(s[a].pts,c[0]),this.cea608Parser2.addData(s[a].pts,c[1])}}}onBufferFlushing(e,{startOffset:t,endOffset:i,endOffsetSubtitles:s,type:a}){const{media:l}=this;if(!(!l||l.currentTime<i)){if(!a||a==="video"){const{captionsTracks:c}=this;Object.keys(c).forEach(f=>um(c[f],t,i))}if(this.config.renderTextTracksNatively&&t===0&&s!==void 0){const{textTracks:c}=this;Object.keys(c).forEach(f=>um(c[f],t,s))}}}extractCea608Data(e){const t=[[],[]],i=e[0]&31;let s=2;for(let a=0;a<i;a++){const l=e[s++],c=127&e[s++],f=127&e[s++];if(c===0&&f===0)continue;if((4&l)!==0){const h=3&l;(h===0||h===1)&&(t[h].push(c),t[h].push(f))}}return t}}function PS(n){return n.characteristics&&/transcribes-spoken-dialog/gi.test(n.characteristics)&&/describes-music-and-sound/gi.test(n.characteristics)?"captions":"subtitles"}function uE(n,e){return!!n&&n.kind===PS(e)&&am(e,n)}function d3(n,e,t,i){return Math.min(e,i)-Math.max(n,t)}function dE(){return{ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!0}}}const f3=/\s/,h3={newCue(n,e,t,i){const s=[];let a,l,c,f,d;const h=self.VTTCue||self.TextTrackCue;for(let g=0;g<i.rows.length;g++)if(a=i.rows[g],c=!0,f=0,d="",!a.isEmpty()){var p;for(let T=0;T<a.chars.length;T++)f3.test(a.chars[T].uchar)&&c?f++:(d+=a.chars[T].uchar,c=!1);a.cueStartTime=e,e===t&&(t+=1e-4),f>=16?f--:f++;const b=DS(d.trim()),y=up(e,t,b);n!=null&&(p=n.cues)!=null&&p.getCueById(y)||(l=new h(e,t,b),l.id=y,l.line=g+1,l.align="left",l.position=10+Math.min(80,Math.floor(f*8/32)*10),s.push(l))}return n&&s.length&&(s.sort((g,b)=>g.line==="auto"||b.line==="auto"?0:g.line>8&&b.line>8?b.line-g.line:g.line-b.line),s.forEach(g=>AS(n,g))),s}};function m3(){if(self.fetch&&self.AbortController&&self.ReadableStream&&self.Request)try{return new self.ReadableStream({}),!0}catch{}return!1}const p3=/(\d+)-(\d+)\/(\d+)/;class fE{constructor(e){this.fetchSetup=void 0,this.requestTimeout=void 0,this.request=null,this.response=null,this.controller=void 0,this.context=null,this.config=null,this.callbacks=null,this.stats=void 0,this.loader=null,this.fetchSetup=e.fetchSetup||b3,this.controller=new self.AbortController,this.stats=new Hm}destroy(){this.loader=this.callbacks=this.context=this.config=this.request=null,this.abortInternal(),this.response=null,this.fetchSetup=this.controller=this.stats=null}abortInternal(){this.controller&&!this.stats.loading.end&&(this.stats.aborted=!0,this.controller.abort())}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.response)}load(e,t,i){const s=this.stats;if(s.loading.start)throw new Error("Loader can only be used once.");s.loading.start=self.performance.now();const a=g3(e,this.controller.signal),l=e.responseType==="arraybuffer",c=l?"byteLength":"length",{maxTimeToFirstByteMs:f,maxLoadTimeMs:d}=t.loadPolicy;this.context=e,this.config=t,this.callbacks=i,this.request=this.fetchSetup(e,a),self.clearTimeout(this.requestTimeout),t.timeout=f&&pe(f)?f:d,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(s,e,this.response))},t.timeout),(Bo(this.request)?this.request.then(self.fetch):self.fetch(this.request)).then(p=>{var g;this.response=this.loader=p;const b=Math.max(self.performance.now(),s.loading.start);if(self.clearTimeout(this.requestTimeout),t.timeout=d,this.requestTimeout=self.setTimeout(()=>{this.callbacks&&(this.abortInternal(),this.callbacks.onTimeout(s,e,this.response))},d-(b-s.loading.start)),!p.ok){const{status:T,statusText:x}=p;throw new E3(x||"fetch, bad network response",T,p)}s.loading.first=b,s.total=v3(p.headers)||s.total;const y=(g=this.callbacks)==null?void 0:g.onProgress;return y&&pe(t.highWaterMark)?this.loadProgressively(p,s,e,t.highWaterMark,y):l?p.arrayBuffer():e.responseType==="json"?p.json():p.text()}).then(p=>{var g,b;const y=this.response;if(!y)throw new Error("loader destroyed");self.clearTimeout(this.requestTimeout),s.loading.end=Math.max(self.performance.now(),s.loading.first);const T=p[c];T&&(s.loaded=s.total=T);const x={url:y.url,data:p,code:y.status},w=(g=this.callbacks)==null?void 0:g.onProgress;w&&!pe(t.highWaterMark)&&w(s,e,p,y),(b=this.callbacks)==null||b.onSuccess(x,s,e,y)}).catch(p=>{var g;if(self.clearTimeout(this.requestTimeout),s.aborted)return;const b=p&&p.code||0,y=p?p.message:null;(g=this.callbacks)==null||g.onError({code:b,text:y},e,p?p.details:null,s)})}getCacheAge(){let e=null;if(this.response){const t=this.response.headers.get("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.response?this.response.headers.get(e):null}loadProgressively(e,t,i,s=0,a){const l=new VT,c=e.body.getReader(),f=()=>c.read().then(d=>{if(d.done)return l.dataLength&&a(t,i,l.flush().buffer,e),Promise.resolve(new ArrayBuffer(0));const h=d.value,p=h.length;return t.loaded+=p,p<s||l.dataLength?(l.push(h),l.dataLength>=s&&a(t,i,l.flush().buffer,e)):a(t,i,h.buffer,e),f()}).catch(()=>Promise.reject());return f()}}function g3(n,e){const t={method:"GET",mode:"cors",credentials:"same-origin",signal:e,headers:new self.Headers(et({},n.headers))};return n.rangeEnd&&t.headers.set("Range","bytes="+n.rangeStart+"-"+String(n.rangeEnd-1)),t}function y3(n){const e=p3.exec(n);if(e)return parseInt(e[2])-parseInt(e[1])+1}function v3(n){const e=n.get("Content-Range");if(e){const i=y3(e);if(pe(i))return i}const t=n.get("Content-Length");if(t)return parseInt(t)}function b3(n,e){return new self.Request(n.url,e)}class E3 extends Error{constructor(e,t,i){super(e),this.code=void 0,this.details=void 0,this.code=t,this.details=i}}const x3=/^age:\s*[\d.]+\s*$/im;class NS{constructor(e){this.xhrSetup=void 0,this.requestTimeout=void 0,this.retryTimeout=void 0,this.retryDelay=void 0,this.config=null,this.callbacks=null,this.context=null,this.loader=null,this.stats=void 0,this.xhrSetup=e&&e.xhrSetup||null,this.stats=new Hm,this.retryDelay=0}destroy(){this.callbacks=null,this.abortInternal(),this.loader=null,this.config=null,this.context=null,this.xhrSetup=null}abortInternal(){const e=this.loader;self.clearTimeout(this.requestTimeout),self.clearTimeout(this.retryTimeout),e&&(e.onreadystatechange=null,e.onprogress=null,e.readyState!==4&&(this.stats.aborted=!0,e.abort()))}abort(){var e;this.abortInternal(),(e=this.callbacks)!=null&&e.onAbort&&this.callbacks.onAbort(this.stats,this.context,this.loader)}load(e,t,i){if(this.stats.loading.start)throw new Error("Loader can only be used once.");this.stats.loading.start=self.performance.now(),this.context=e,this.config=t,this.callbacks=i,this.loadInternal()}loadInternal(){const{config:e,context:t}=this;if(!e||!t)return;const i=this.loader=new self.XMLHttpRequest,s=this.stats;s.loading.first=0,s.loaded=0,s.aborted=!1;const a=this.xhrSetup;a?Promise.resolve().then(()=>{if(!(this.loader!==i||this.stats.aborted))return a(i,t.url)}).catch(l=>{if(!(this.loader!==i||this.stats.aborted))return i.open("GET",t.url,!0),a(i,t.url)}).then(()=>{this.loader!==i||this.stats.aborted||this.openAndSendXhr(i,t,e)}).catch(l=>{var c;(c=this.callbacks)==null||c.onError({code:i.status,text:l.message},t,i,s)}):this.openAndSendXhr(i,t,e)}openAndSendXhr(e,t,i){e.readyState||e.open("GET",t.url,!0);const s=t.headers,{maxTimeToFirstByteMs:a,maxLoadTimeMs:l}=i.loadPolicy;if(s)for(const c in s)e.setRequestHeader(c,s[c]);t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,self.clearTimeout(this.requestTimeout),i.timeout=a&&pe(a)?a:l,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),i.timeout),e.send()}readystatechange(){const{context:e,loader:t,stats:i}=this;if(!e||!t)return;const s=t.readyState,a=this.config;if(!i.aborted&&s>=2&&(i.loading.first===0&&(i.loading.first=Math.max(self.performance.now(),i.loading.start),a.timeout!==a.loadPolicy.maxLoadTimeMs&&(self.clearTimeout(this.requestTimeout),a.timeout=a.loadPolicy.maxLoadTimeMs,this.requestTimeout=self.setTimeout(this.loadtimeout.bind(this),a.loadPolicy.maxLoadTimeMs-(i.loading.first-i.loading.start)))),s===4)){self.clearTimeout(this.requestTimeout),t.onreadystatechange=null,t.onprogress=null;const d=t.status,h=t.responseType==="text"?t.responseText:null;if(d>=200&&d<300){const y=h??t.response;if(y!=null){var l,c;i.loading.end=Math.max(self.performance.now(),i.loading.first);const T=t.responseType==="arraybuffer"?y.byteLength:y.length;i.loaded=i.total=T,i.bwEstimate=i.total*8e3/(i.loading.end-i.loading.first);const x=(l=this.callbacks)==null?void 0:l.onProgress;x&&x(i,e,y,t);const w={url:t.responseURL,data:y,code:d};(c=this.callbacks)==null||c.onSuccess(w,i,e,t);return}}const p=a.loadPolicy.errorRetry,g=i.retry,b={url:e.url,data:void 0,code:d};if(du(p,g,!1,b))this.retry(p);else{var f;We.error(`${d} while loading ${e.url}`),(f=this.callbacks)==null||f.onError({code:d,text:t.statusText},e,t,i)}}}loadtimeout(){if(!this.config)return;const e=this.config.loadPolicy.timeoutRetry,t=this.stats.retry;if(du(e,t,!0))this.retry(e);else{var i;We.warn(`timeout while loading ${(i=this.context)==null?void 0:i.url}`);const s=this.callbacks;s&&(this.abortInternal(),s.onTimeout(this.stats,this.context,this.loader))}}retry(e){const{context:t,stats:i}=this;this.retryDelay=qm(e,i.retry),i.retry++,We.warn(`${status?"HTTP Status "+status:"Timeout"} while loading ${t?.url}, retrying ${i.retry}/${e.maxNumRetry} in ${this.retryDelay}ms`),this.abortInternal(),this.loader=null,self.clearTimeout(this.retryTimeout),this.retryTimeout=self.setTimeout(this.loadInternal.bind(this),this.retryDelay)}loadprogress(e){const t=this.stats;t.loaded=e.loaded,e.lengthComputable&&(t.total=e.total)}getCacheAge(){let e=null;if(this.loader&&x3.test(this.loader.getAllResponseHeaders())){const t=this.loader.getResponseHeader("age");e=t?parseFloat(t):null}return e}getResponseHeader(e){return this.loader&&new RegExp(`^${e}:\\s*[\\d.]+\\s*$`,"im").test(this.loader.getAllResponseHeaders())?this.loader.getResponseHeader(e):null}}const T3={maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:null,errorRetry:null},S3=Xe(Xe({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,ignoreDevicePixelRatio:!1,maxDevicePixelRatio:Number.POSITIVE_INFINITY,preferManagedMediaSource:!0,initialLiveManifestSize:1,maxBufferLength:30,backBufferLength:1/0,frontBufferFlushThreshold:1/0,startOnSegmentBoundary:!1,maxBufferSize:60*1e3*1e3,maxFragLookUpTolerance:.25,maxBufferHole:.1,detectStallWithCurrentTimeMs:1250,highBufferWatchdogPeriod:2,nudgeOffset:.1,nudgeMaxRetry:3,nudgeOnVideoHole:!0,liveSyncMode:"edge",liveSyncDurationCount:3,liveSyncOnStallIncrease:1,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,maxLiveSyncPlaybackRate:1,liveDurationInfinity:!1,liveBackBufferLength:null,maxMaxBufferLength:600,enableWorker:!0,workerPath:null,enableSoftwareAES:!0,startLevel:void 0,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,ignorePlaylistParsingErrors:!1,loader:NS,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,licenseResponseCallback:void 0,abrController:Pk,bufferController:AM,capLevelController:ap,errorController:$k,fpsController:RP,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrEwmaDefaultEstimateMax:5e6,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,drmSystems:{},drmSystemOptions:{},requestMediaKeySystemAccessFunc:MT,requireKeySystemAccessOnStart:!1,testBandwidth:!0,progressive:!1,lowLatencyMode:!0,cmcd:void 0,enableDateRangeMetadataCues:!0,enableEmsgMetadataCues:!0,enableEmsgKLVMetadata:!1,enableID3MetadataCues:!0,enableInterstitialPlayback:!0,interstitialAppendInPlace:!0,interstitialLiveLookAhead:10,useMediaCapabilities:!0,preserveManualLevelOnError:!1,certLoadPolicy:{default:T3},keyLoadPolicy:{default:{maxTimeToFirstByteMs:8e3,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"},errorRetry:{maxNumRetry:8,retryDelayMs:1e3,maxRetryDelayMs:2e4,backoff:"linear"}}},manifestLoadPolicy:{default:{maxTimeToFirstByteMs:1/0,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},playlistLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:2,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},fragLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:12e4,timeoutRetry:{maxNumRetry:4,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:6,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},steeringManifestLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:2e4,timeoutRetry:{maxNumRetry:2,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:1,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},interstitialAssetListLoadPolicy:{default:{maxTimeToFirstByteMs:1e4,maxLoadTimeMs:3e4,timeoutRetry:{maxNumRetry:0,retryDelayMs:0,maxRetryDelayMs:0},errorRetry:{maxNumRetry:0,retryDelayMs:1e3,maxRetryDelayMs:8e3}}},manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3},w3()),{},{subtitleStreamController:FP,subtitleTrackController:CP,timelineController:u3,audioStreamController:xM,audioTrackController:TM,emeController:pa,cmcdController:TP,contentSteeringController:wP,interstitialsController:BP});function w3(){return{cueHandler:h3,enableWebVTT:!0,enableIMSC1:!0,enableCEA708Captions:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es",captionsTextTrack3Label:"Unknown CC",captionsTextTrack3LanguageCode:"",captionsTextTrack4Label:"Unknown CC",captionsTextTrack4LanguageCode:"",renderTextTracksNatively:!0}}function A3(n,e,t){if((e.liveSyncDurationCount||e.liveMaxLatencyDurationCount)&&(e.liveSyncDuration||e.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");if(e.liveMaxLatencyDurationCount!==void 0&&(e.liveSyncDurationCount===void 0||e.liveMaxLatencyDurationCount<=e.liveSyncDurationCount))throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be greater than "liveSyncDurationCount"');if(e.liveMaxLatencyDuration!==void 0&&(e.liveSyncDuration===void 0||e.liveMaxLatencyDuration<=e.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be greater than "liveSyncDuration"');const i=fm(n),s=["manifest","level","frag"],a=["TimeOut","MaxRetry","RetryDelay","MaxRetryTimeout"];return s.forEach(l=>{const c=`${l==="level"?"playlist":l}LoadPolicy`,f=e[c]===void 0,d=[];a.forEach(h=>{const p=`${l}Loading${h}`,g=e[p];if(g!==void 0&&f){d.push(p);const b=i[c].default;switch(e[c]={default:b},h){case"TimeOut":b.maxLoadTimeMs=g,b.maxTimeToFirstByteMs=g;break;case"MaxRetry":b.errorRetry.maxNumRetry=g,b.timeoutRetry.maxNumRetry=g;break;case"RetryDelay":b.errorRetry.retryDelayMs=g,b.timeoutRetry.retryDelayMs=g;break;case"MaxRetryTimeout":b.errorRetry.maxRetryDelayMs=g,b.timeoutRetry.maxRetryDelayMs=g;break}}}),d.length&&t.warn(`hls.js config: "${d.join('", "')}" setting(s) are deprecated, use "${c}": ${st(e[c])}`)}),Xe(Xe({},i),e)}function fm(n){return n&&typeof n=="object"?Array.isArray(n)?n.map(fm):Object.keys(n).reduce((e,t)=>(e[t]=fm(n[t]),e),{}):n}function R3(n,e){const t=n.loader;t!==fE&&t!==NS?(e.log("[config]: Custom loader detected, cannot enable progressive streaming"),n.progressive=!1):m3()&&(n.loader=fE,n.progressive=!0,n.enableSoftwareAES=!0,e.log("[config]: Progressive streaming enabled, using FetchLoader"))}const Kc=2,L3=.1,_3=.05,C3=100;class I3 extends CT{constructor(e,t){super("gap-controller",e.logger),this.hls=void 0,this.fragmentTracker=void 0,this.media=null,this.mediaSource=void 0,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1,this.buffered={},this.lastCurrentTime=0,this.ended=0,this.waiting=0,this.onMediaPlaying=()=>{this.ended=0,this.waiting=0},this.onMediaWaiting=()=>{var i;(i=this.media)!=null&&i.seeking||(this.waiting=self.performance.now(),this.tick())},this.onMediaEnded=()=>{if(this.hls){var i;this.ended=((i=this.media)==null?void 0:i.currentTime)||1,this.hls.trigger(L.MEDIA_ENDED,{stalled:!1})}},this.hls=e,this.fragmentTracker=t,this.registerListeners()}registerListeners(){const{hls:e}=this;e&&(e.on(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(L.BUFFER_APPENDED,this.onBufferAppended,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(L.BUFFER_APPENDED,this.onBufferAppended,this))}destroy(){super.destroy(),this.unregisterListeners(),this.media=this.hls=this.fragmentTracker=null,this.mediaSource=void 0}onMediaAttached(e,t){this.setInterval(C3),this.mediaSource=t.mediaSource;const i=this.media=t.media;ri(i,"playing",this.onMediaPlaying),ri(i,"waiting",this.onMediaWaiting),ri(i,"ended",this.onMediaEnded)}onMediaDetaching(e,t){this.clearInterval();const{media:i}=this;i&&(yi(i,"playing",this.onMediaPlaying),yi(i,"waiting",this.onMediaWaiting),yi(i,"ended",this.onMediaEnded),this.media=null),this.mediaSource=void 0}onBufferAppended(e,t){this.buffered=t.timeRanges}get hasBuffered(){return Object.keys(this.buffered).length>0}tick(){var e;if(!((e=this.media)!=null&&e.readyState)||!this.hasBuffered)return;const t=this.media.currentTime;this.poll(t,this.lastCurrentTime),this.lastCurrentTime=t}poll(e,t){var i,s;const a=(i=this.hls)==null?void 0:i.config;if(!a)return;const l=this.media;if(!l)return;const{seeking:c}=l,f=this.seeking&&!c,d=!this.seeking&&c,h=l.paused&&!c||l.ended||l.playbackRate===0;if(this.seeking=c,e!==t){t&&(this.ended=0),this.moved=!0,c||(this.nudgeRetry=0,a.nudgeOnVideoHole&&!h&&e>t&&this.nudgeOnVideoHole(e,t)),this.waiting===0&&this.stallResolved(e);return}if(d||f){f&&this.stallResolved(e);return}if(h){this.nudgeRetry=0,this.stallResolved(e),!this.ended&&l.ended&&this.hls&&(this.ended=e||1,this.hls.trigger(L.MEDIA_ENDED,{stalled:!1}));return}if(!_e.getBuffered(l).length){this.nudgeRetry=0;return}const p=_e.bufferInfo(l,e,0),g=p.nextStart||0,b=this.fragmentTracker;if(c&&b&&this.hls){const P=hE(this.hls.inFlightFragments,e),C=p.len>Kc,O=!g||P||g-e>Kc&&!b.getPartialFragment(e);if(C||O)return;this.moved=!1}const y=(s=this.hls)==null?void 0:s.latestLevelDetails;if(!this.moved&&this.stalled!==null&&b){if(!(p.len>0)&&!g)return;const C=Math.max(g,p.start||0)-e,B=!!(y!=null&&y.live)?y.targetduration*2:Kc,N=Oc(e,b);if(C>0&&(C<=B||N)){l.paused||this._trySkipBufferHole(N);return}}const T=a.detectStallWithCurrentTimeMs,x=self.performance.now(),w=this.waiting;let S=this.stalled;if(S===null)if(w>0&&x-w<T)S=this.stalled=w;else{this.stalled=x;return}const A=x-S;if(!c&&(A>=T||w)&&this.hls){var _;if(((_=this.mediaSource)==null?void 0:_.readyState)==="ended"&&!(y!=null&&y.live)&&Math.abs(e-(y?.edge||0))<1){if(this.ended)return;this.ended=e||1,this.hls.trigger(L.MEDIA_ENDED,{stalled:!0});return}if(this._reportStall(p),!this.media||!this.hls)return}const I=_e.bufferInfo(l,e,a.maxBufferHole);this._tryFixBufferStall(I,A,e)}stallResolved(e){const t=this.stalled;if(t&&this.hls&&(this.stalled=null,this.stallReported)){const i=self.performance.now()-t;this.log(`playback not stuck anymore @${e}, after ${Math.round(i)}ms`),this.stallReported=!1,this.waiting=0,this.hls.trigger(L.STALL_RESOLVED,{})}}nudgeOnVideoHole(e,t){var i;const s=this.buffered.video;if(this.hls&&this.media&&this.fragmentTracker&&(i=this.buffered.audio)!=null&&i.length&&s&&s.length>1&&e>s.end(0)){const a=_e.bufferedInfo(_e.timeRangesToArray(this.buffered.audio),e,0);if(a.len>1&&t>=a.start){const l=_e.timeRangesToArray(s),c=_e.bufferedInfo(l,t,0).bufferedIndex;if(c>-1&&c<l.length-1){const f=_e.bufferedInfo(l,e,0).bufferedIndex,d=l[c].end,h=l[c+1].start;if((f===-1||f>c)&&h-d<1&&e-d<2){const p=new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${e} hole: ${d} -> ${h} buffered index: ${f}`);this.warn(p.message),this.media.currentTime+=1e-6;let g=Oc(e,this.fragmentTracker);g&&"fragment"in g?g=g.fragment:g||(g=void 0);const b=_e.bufferInfo(this.media,e,0);this.hls.trigger(L.ERROR,{type:Ee.MEDIA_ERROR,details:Q.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:p,reason:p.message,frag:g,buffer:b.len,bufferInfo:b})}}}}}_tryFixBufferStall(e,t,i){var s,a;const{fragmentTracker:l,media:c}=this,f=(s=this.hls)==null?void 0:s.config;if(!c||!l||!f)return;const d=(a=this.hls)==null?void 0:a.latestLevelDetails,h=Oc(i,l);if((h||d!=null&&d.live&&i<d.fragmentStart)&&(this._trySkipBufferHole(h)||!this.media))return;const p=e.buffered,g=this.adjacentTraversal(e,i);(p&&p.length>1&&e.len>f.maxBufferHole||e.nextStart&&(e.nextStart-i<f.maxBufferHole||g))&&(t>f.highBufferWatchdogPeriod*1e3||this.waiting)&&(this.warn("Trying to nudge playhead over buffer-hole"),this._tryNudgeBuffer(e))}adjacentTraversal(e,t){const i=this.fragmentTracker,s=e.nextStart;if(i&&s){const a=i.getFragAtPos(t,ge.MAIN),l=i.getFragAtPos(s,ge.MAIN);if(a&&l)return l.sn-a.sn<2}return!1}_reportStall(e){const{hls:t,media:i,stallReported:s,stalled:a}=this;if(!s&&a!==null&&i&&t){this.stallReported=!0;const l=new Error(`Playback stalling at @${i.currentTime} due to low buffer (${st(e)})`);this.warn(l.message),t.trigger(L.ERROR,{type:Ee.MEDIA_ERROR,details:Q.BUFFER_STALLED_ERROR,fatal:!1,error:l,buffer:e.len,bufferInfo:e,stalled:{start:a}})}}_trySkipBufferHole(e){var t;const{fragmentTracker:i,media:s}=this,a=(t=this.hls)==null?void 0:t.config;if(!s||!i||!a)return 0;const l=s.currentTime,c=_e.bufferInfo(s,l,0),f=l<c.start?c.start:c.nextStart;if(f&&this.hls){const h=c.len<=a.maxBufferHole,p=c.len>0&&c.len<1&&s.readyState<3,g=f-l;if(g>0&&(h||p)){if(g>a.maxBufferHole){let y=!1;if(l===0){const T=i.getAppendedFrag(0,ge.MAIN);T&&f<T.end&&(y=!0)}if(!y&&e){var d;if(!((d=this.hls.loadLevelObj)!=null&&d.details)||hE(this.hls.inFlightFragments,f))return 0;let x=!1,w=e.end;for(;w<f;){const S=Oc(w,i);if(S)w+=S.duration;else{x=!0;break}}if(x)return 0}}const b=Math.max(f+_3,l+L3);if(this.warn(`skipping hole, adjusting currentTime from ${l} to ${b}`),this.moved=!0,s.currentTime=b,!(e!=null&&e.gap)){const y=new Error(`fragment loaded with buffer holes, seeking from ${l} to ${b}`),T={type:Ee.MEDIA_ERROR,details:Q.BUFFER_SEEK_OVER_HOLE,fatal:!1,error:y,reason:y.message,buffer:c.len,bufferInfo:c};e&&("fragment"in e?T.part=e:T.frag=e),this.hls.trigger(L.ERROR,T)}return b}}return 0}_tryNudgeBuffer(e){const{hls:t,media:i,nudgeRetry:s}=this,a=t?.config;if(!i||!a)return 0;const l=i.currentTime;if(this.nudgeRetry++,s<a.nudgeMaxRetry){const c=l+(s+1)*a.nudgeOffset,f=new Error(`Nudging 'currentTime' from ${l} to ${c}`);this.warn(f.message),i.currentTime=c,t.trigger(L.ERROR,{type:Ee.MEDIA_ERROR,details:Q.BUFFER_NUDGE_ON_STALL,error:f,fatal:!1,buffer:e.len,bufferInfo:e})}else{const c=new Error(`Playhead still not moving while enough data buffered @${l} after ${a.nudgeMaxRetry} nudges`);this.error(c.message),t.trigger(L.ERROR,{type:Ee.MEDIA_ERROR,details:Q.BUFFER_STALLED_ERROR,error:c,fatal:!0,buffer:e.len,bufferInfo:e})}}}function hE(n,e){const t=mE(n.main);if(t&&t.start<=e)return t;const i=mE(n.audio);return i&&i.start<=e?i:null}function mE(n){if(!n)return null;switch(n.state){case le.IDLE:case le.STOPPED:case le.ENDED:case le.ERROR:return null}return n.frag}function Oc(n,e){return e.getAppendedFrag(n,ge.MAIN)||e.getPartialFragment(n)}const D3=.25;function hm(){if(!(typeof self>"u"))return self.VTTCue||self.TextTrackCue}function Oh(n,e,t,i,s){let a=new n(e,t,"");try{a.value=i,s&&(a.type=s)}catch{a=new n(e,t,st(s?Xe({type:s},i):i))}return a}const Mc=(()=>{const n=hm();try{n&&new n(0,Number.POSITIVE_INFINITY,"")}catch{return Number.MAX_VALUE}return Number.POSITIVE_INFINITY})();class k3{constructor(e){this.hls=void 0,this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.removeCues=!0,this.assetCue=void 0,this.onEventCueEnter=()=>{this.hls&&this.hls.trigger(L.EVENT_CUE_ENTER,{})},this.hls=e,this._registerListeners()}destroy(){this._unregisterListeners(),this.id3Track=null,this.media=null,this.dateRangeCuesAppended={},this.hls=this.onEventCueEnter=null}_registerListeners(){const{hls:e}=this;e&&(e.on(L.MEDIA_ATTACHING,this.onMediaAttaching,this),e.on(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.on(L.BUFFER_FLUSHING,this.onBufferFlushing,this),e.on(L.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(L.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}_unregisterListeners(){const{hls:e}=this;e&&(e.off(L.MEDIA_ATTACHING,this.onMediaAttaching,this),e.off(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.FRAG_PARSING_METADATA,this.onFragParsingMetadata,this),e.off(L.BUFFER_FLUSHING,this.onBufferFlushing,this),e.off(L.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(L.LEVEL_PTS_UPDATED,this.onLevelPtsUpdated,this))}onMediaAttaching(e,t){var i;this.media=t.media,((i=t.overrides)==null?void 0:i.cueRemoval)===!1&&(this.removeCues=!1)}onMediaAttached(){var e;const t=(e=this.hls)==null?void 0:e.latestLevelDetails;t&&this.updateDateRangeCues(t)}onMediaDetaching(e,t){this.media=null,!t.transferMedia&&(this.id3Track&&(this.removeCues&&da(this.id3Track,this.onEventCueEnter),this.id3Track=null),this.dateRangeCuesAppended={})}onManifestLoading(){this.dateRangeCuesAppended={}}createTrack(e){const t=this.getID3Track(e.textTracks);return t.mode="hidden",t}getID3Track(e){if(this.media){for(let t=0;t<e.length;t++){const i=e[t];if(i.kind==="metadata"&&i.label==="id3")return wS(i,this.media),i}return this.media.addTextTrack("metadata","id3")}}onFragParsingMetadata(e,t){if(!this.media||!this.hls)return;const{enableEmsgMetadataCues:i,enableID3MetadataCues:s}=this.hls.config;if(!i&&!s)return;const{samples:a}=t;this.id3Track||(this.id3Track=this.createTrack(this.media));const l=hm();if(l)for(let c=0;c<a.length;c++){const f=a[c].type;if(f===Di.emsg&&!i||!s)continue;const d=ZT(a[c].data),h=a[c].pts;let p=h+a[c].duration;p>Mc&&(p=Mc),p-h<=0&&(p=h+D3);for(let b=0;b<d.length;b++){const y=d[b];if(!JT(y)){this.updateId3CueEnds(h,f);const T=Oh(l,h,p,y,f);T&&this.id3Track.addCue(T)}}}}updateId3CueEnds(e,t){var i;const s=(i=this.id3Track)==null?void 0:i.cues;if(s)for(let a=s.length;a--;){const l=s[a];l.type===t&&l.startTime<e&&l.endTime===Mc&&(l.endTime=e)}}onBufferFlushing(e,{startOffset:t,endOffset:i,type:s}){const{id3Track:a,hls:l}=this;if(!l)return;const{config:{enableEmsgMetadataCues:c,enableID3MetadataCues:f}}=l;if(a&&(c||f)){let d;s==="audio"?d=h=>h.type===Di.audioId3&&f:s==="video"?d=h=>h.type===Di.emsg&&c:d=h=>h.type===Di.audioId3&&f||h.type===Di.emsg&&c,um(a,t,i,d)}}onLevelUpdated(e,{details:t}){this.updateDateRangeCues(t,!0)}onLevelPtsUpdated(e,t){Math.abs(t.drift)>.01&&this.updateDateRangeCues(t.details)}updateDateRangeCues(e,t){if(!this.hls||!this.media)return;const{assetPlayerId:i,timelineOffset:s,enableDateRangeMetadataCues:a,interstitialsController:l}=this.hls.config;if(!a)return;const c=hm();if(i&&s&&!l){const{fragmentStart:T,fragmentEnd:x}=e;let w=this.assetCue;w?(w.startTime=T,w.endTime=x):c&&(w=this.assetCue=Oh(c,T,x,{assetPlayerId:this.hls.config.assetPlayerId},"hlsjs.interstitial.asset"),w&&(w.id=i,this.id3Track||(this.id3Track=this.createTrack(this.media)),this.id3Track.addCue(w),w.addEventListener("enter",this.onEventCueEnter)))}if(!e.hasProgramDateTime)return;const{id3Track:f}=this,{dateRanges:d}=e,h=Object.keys(d);let p=this.dateRangeCuesAppended;if(f&&t){var g;if((g=f.cues)!=null&&g.length){const T=Object.keys(p).filter(x=>!h.includes(x));for(let x=T.length;x--;){var b;const w=T[x],S=(b=p[w])==null?void 0:b.cues;delete p[w],S&&Object.keys(S).forEach(A=>{const _=S[A];if(_){_.removeEventListener("enter",this.onEventCueEnter);try{f.removeCue(_)}catch{}}})}}else p=this.dateRangeCuesAppended={}}const y=e.fragments[e.fragments.length-1];if(!(h.length===0||!pe(y?.programDateTime))){this.id3Track||(this.id3Track=this.createTrack(this.media));for(let T=0;T<h.length;T++){const x=h[T],w=d[x],S=w.startTime,A=p[x],_=A?.cues||{};let I=A?.durationKnown||!1,P=Mc;const{duration:C,endDate:O}=w;if(O&&C!==null)P=S+C,I=!0;else if(w.endOnNext&&!I){const N=h.reduce((V,ee)=>{if(ee!==w.id){const z=d[ee];if(z.class===w.class&&z.startDate>w.startDate&&(!V||w.startDate<V.startDate))return z}return V},null);N&&(P=N.startTime,I=!0)}const B=Object.keys(w.attr);for(let N=0;N<B.length;N++){const V=B[N];if(!Jk(V))continue;const ee=_[V];if(ee)I&&!(A!=null&&A.durationKnown)?ee.endTime=P:Math.abs(ee.startTime-S)>.01&&(ee.startTime=S,ee.endTime=P);else if(c){let z=w.attr[V];eO(V)&&(z=cT(z));const W=Oh(c,S,P,{key:V,data:z},Di.dateRange);W&&(W.id=x,this.id3Track.addCue(W),_[V]=W,l&&(V==="X-ASSET-LIST"||V==="X-ASSET-URL")&&W.addEventListener("enter",this.onEventCueEnter))}}p[x]={cues:_,dateRange:w,durationKnown:I}}}}}class O3{constructor(e){this.hls=void 0,this.config=void 0,this.media=null,this.currentTime=0,this.stallCount=0,this._latency=null,this._targetLatencyUpdated=!1,this.onTimeupdate=()=>{const{media:t}=this,i=this.levelDetails;if(!t||!i)return;this.currentTime=t.currentTime;const s=this.computeLatency();if(s===null)return;this._latency=s;const{lowLatencyMode:a,maxLiveSyncPlaybackRate:l}=this.config;if(!a||l===1||!i.live)return;const c=this.targetLatency;if(c===null)return;const f=s-c,d=Math.min(this.maxLatency,c+i.targetduration);if(f<d&&f>.05&&this.forwardBufferLength>1){const p=Math.min(2,Math.max(1,l)),g=Math.round(2/(1+Math.exp(-.75*f-this.edgeStalled))*20)/20,b=Math.min(p,Math.max(1,g));this.changeMediaPlaybackRate(t,b)}else t.playbackRate!==1&&t.playbackRate!==0&&this.changeMediaPlaybackRate(t,1)},this.hls=e,this.config=e.config,this.registerListeners()}get levelDetails(){var e;return((e=this.hls)==null?void 0:e.latestLevelDetails)||null}get latency(){return this._latency||0}get maxLatency(){const{config:e}=this;if(e.liveMaxLatencyDuration!==void 0)return e.liveMaxLatencyDuration;const t=this.levelDetails;return t?e.liveMaxLatencyDurationCount*t.targetduration:0}get targetLatency(){const e=this.levelDetails;if(e===null||this.hls===null)return null;const{holdBack:t,partHoldBack:i,targetduration:s}=e,{liveSyncDuration:a,liveSyncDurationCount:l,lowLatencyMode:c}=this.config,f=this.hls.userConfig;let d=c&&i||t;(this._targetLatencyUpdated||f.liveSyncDuration||f.liveSyncDurationCount||d===0)&&(d=a!==void 0?a:l*s);const h=s;return d+Math.min(this.stallCount*this.config.liveSyncOnStallIncrease,h)}set targetLatency(e){this.stallCount=0,this.config.liveSyncDuration=e,this._targetLatencyUpdated=!0}get liveSyncPosition(){const e=this.estimateLiveEdge(),t=this.targetLatency;if(e===null||t===null)return null;const i=this.levelDetails;if(i===null)return null;const s=i.edge,a=e-t-this.edgeStalled,l=s-i.totalduration,c=s-(this.config.lowLatencyMode&&i.partTarget||i.targetduration);return Math.min(Math.max(l,a),c)}get drift(){const e=this.levelDetails;return e===null?1:e.drift}get edgeStalled(){const e=this.levelDetails;if(e===null)return 0;const t=(this.config.lowLatencyMode&&e.partTarget||e.targetduration)*3;return Math.max(e.age-t,0)}get forwardBufferLength(){const{media:e}=this,t=this.levelDetails;if(!e||!t)return 0;const i=e.buffered.length;return(i?e.buffered.end(i-1):t.edge)-this.currentTime}destroy(){this.unregisterListeners(),this.onMediaDetaching(),this.hls=null}registerListeners(){const{hls:e}=this;e&&(e.on(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.on(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.LEVEL_UPDATED,this.onLevelUpdated,this),e.on(L.ERROR,this.onError,this))}unregisterListeners(){const{hls:e}=this;e&&(e.off(L.MEDIA_ATTACHED,this.onMediaAttached,this),e.off(L.MEDIA_DETACHING,this.onMediaDetaching,this),e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.LEVEL_UPDATED,this.onLevelUpdated,this),e.off(L.ERROR,this.onError,this))}onMediaAttached(e,t){this.media=t.media,this.media.addEventListener("timeupdate",this.onTimeupdate)}onMediaDetaching(){this.media&&(this.media.removeEventListener("timeupdate",this.onTimeupdate),this.media=null)}onManifestLoading(){this._latency=null,this.stallCount=0}onLevelUpdated(e,{details:t}){t.advanced&&this.onTimeupdate(),!t.live&&this.media&&this.media.removeEventListener("timeupdate",this.onTimeupdate)}onError(e,t){var i;t.details===Q.BUFFER_STALLED_ERROR&&(this.stallCount++,this.hls&&(i=this.levelDetails)!=null&&i.live&&this.hls.logger.warn("[latency-controller]: Stall detected, adjusting target latency"))}changeMediaPlaybackRate(e,t){var i,s;e.playbackRate!==t&&((i=this.hls)==null||i.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(s=this.targetLatency)==null?void 0:s.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${e.playbackRate} to ${t}`),e.playbackRate=t)}estimateLiveEdge(){const e=this.levelDetails;return e===null?null:e.edge+e.age}computeLatency(){const e=this.estimateLiveEdge();return e===null?null:e-this.currentTime}}class M3 extends rp{constructor(e,t){super(e,"level-controller"),this._levels=[],this._firstLevel=-1,this._maxAutoLevel=-1,this._startLevel=void 0,this.currentLevel=null,this.currentLevelIndex=-1,this.manualLevelIndex=-1,this.steering=void 0,this.onParsedComplete=void 0,this.steering=t,this._registerListeners()}_registerListeners(){const{hls:e}=this;e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.MANIFEST_LOADED,this.onManifestLoaded,this),e.on(L.LEVEL_LOADED,this.onLevelLoaded,this),e.on(L.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(L.FRAG_BUFFERED,this.onFragBuffered,this),e.on(L.ERROR,this.onError,this)}_unregisterListeners(){const{hls:e}=this;e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.MANIFEST_LOADED,this.onManifestLoaded,this),e.off(L.LEVEL_LOADED,this.onLevelLoaded,this),e.off(L.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(L.FRAG_BUFFERED,this.onFragBuffered,this),e.off(L.ERROR,this.onError,this)}destroy(){this._unregisterListeners(),this.steering=null,this.resetLevels(),super.destroy()}stopLoad(){this._levels.forEach(t=>{t.loadError=0,t.fragmentError=0}),super.stopLoad()}resetLevels(){this._startLevel=void 0,this.manualLevelIndex=-1,this.currentLevelIndex=-1,this.currentLevel=null,this._levels=[],this._maxAutoLevel=-1}onManifestLoading(e,t){this.resetLevels()}onManifestLoaded(e,t){const i=this.hls.config.preferManagedMediaSource,s=[],a={},l={};let c=!1,f=!1,d=!1;t.levels.forEach(h=>{const p=h.attrs;let{audioCodec:g,videoCodec:b}=h;g&&(h.audioCodec=g=ou(g,i)||void 0),b&&(b=h.videoCodec=gk(b));const{width:y,height:T,unknownCodecs:x}=h,w=x?.length||0;if(c||(c=!!(y&&T)),f||(f=!!b),d||(d=!!g),w||g&&!this.isAudioSupported(g)||b&&!this.isVideoSupported(b)){this.log(`Some or all CODECS not supported "${p.CODECS}"`);return}const{CODECS:S,"FRAME-RATE":A,"HDCP-LEVEL":_,"PATHWAY-ID":I,RESOLUTION:P,"VIDEO-RANGE":C}=p,B=`${`${I||"."}-`}${h.bitrate}-${P}-${A}-${S}-${C}-${_}`;if(a[B])if(a[B].uri!==h.url&&!h.attrs["PATHWAY-ID"]){const N=l[B]+=1;h.attrs["PATHWAY-ID"]=new Array(N+1).join(".");const V=this.createLevel(h);a[B]=V,s.push(V)}else a[B].addGroupId("audio",p.AUDIO),a[B].addGroupId("text",p.SUBTITLES);else{const N=this.createLevel(h);a[B]=N,l[B]=1,s.push(N)}}),this.filterAndSortMediaOptions(s,t,c,f,d)}createLevel(e){const t=new Mo(e),i=e.supplemental;if(i!=null&&i.videoCodec&&!this.isVideoSupported(i.videoCodec)){const s=new Error(`SUPPLEMENTAL-CODECS not supported "${i.videoCodec}"`);this.log(s.message),t.supportedResult=xT(s,[])}return t}isAudioSupported(e){return ko(e,"audio",this.hls.config.preferManagedMediaSource)}isVideoSupported(e){return ko(e,"video",this.hls.config.preferManagedMediaSource)}filterAndSortMediaOptions(e,t,i,s,a){var l;let c=[],f=[],d=e;const h=((l=t.stats)==null?void 0:l.parsing)||{};if((i||s)&&a&&(d=d.filter(({videoCodec:S,videoRange:A,width:_,height:I})=>(!!S||!!(_&&I))&&Rk(A))),d.length===0){Promise.resolve().then(()=>{if(this.hls){let S="no level with compatible codecs found in manifest",A=S;t.levels.length&&(A=`one or more CODECS in variant not supported: ${st(t.levels.map(I=>I.attrs.CODECS).filter((I,P,C)=>C.indexOf(I)===P))}`,this.warn(A),S+=` (${A})`);const _=new Error(S);this.hls.trigger(L.ERROR,{type:Ee.MEDIA_ERROR,details:Q.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:t.url,error:_,reason:A})}}),h.end=performance.now();return}t.audioTracks&&(c=t.audioTracks.filter(S=>!S.audioCodec||this.isAudioSupported(S.audioCodec)),pE(c)),t.subtitles&&(f=t.subtitles,pE(f));const p=d.slice(0);d.sort((S,A)=>{if(S.attrs["HDCP-LEVEL"]!==A.attrs["HDCP-LEVEL"])return(S.attrs["HDCP-LEVEL"]||"")>(A.attrs["HDCP-LEVEL"]||"")?1:-1;if(i&&S.height!==A.height)return S.height-A.height;if(S.frameRate!==A.frameRate)return S.frameRate-A.frameRate;if(S.videoRange!==A.videoRange)return lu.indexOf(S.videoRange)-lu.indexOf(A.videoRange);if(S.videoCodec!==A.videoCodec){const _=ab(S.videoCodec),I=ab(A.videoCodec);if(_!==I)return I-_}if(S.uri===A.uri&&S.codecSet!==A.codecSet){const _=au(S.codecSet),I=au(A.codecSet);if(_!==I)return I-_}return S.averageBitrate!==A.averageBitrate?S.averageBitrate-A.averageBitrate:0});let g=p[0];if(this.steering&&(d=this.steering.filterParsedLevels(d),d.length!==p.length)){for(let S=0;S<p.length;S++)if(p[S].pathwayId===d[0].pathwayId){g=p[S];break}}this._levels=d;for(let S=0;S<d.length;S++)if(d[S]===g){var b;this._firstLevel=S;const A=g.bitrate,_=this.hls.bandwidthEstimate;if(this.log(`manifest loaded, ${d.length} level(s) found, first bitrate: ${A}`),((b=this.hls.userConfig)==null?void 0:b.abrEwmaDefaultEstimate)===void 0){const I=Math.min(A,this.hls.config.abrEwmaDefaultEstimateMax);I>_&&_===this.hls.abrEwmaDefaultEstimate&&(this.hls.bandwidthEstimate=I)}break}const y=a&&!s,T=this.hls.config,x=!!(T.audioStreamController&&T.audioTrackController),w={levels:d,audioTracks:c,subtitleTracks:f,sessionData:t.sessionData,sessionKeys:t.sessionKeys,firstLevel:this._firstLevel,stats:t.stats,audio:a,video:s,altAudio:x&&!y&&c.some(S=>!!S.url)};h.end=performance.now(),this.hls.trigger(L.MANIFEST_PARSED,w)}get levels(){return this._levels.length===0?null:this._levels}get loadLevelObj(){return this.currentLevel}get level(){return this.currentLevelIndex}set level(e){const t=this._levels;if(t.length===0)return;if(e<0||e>=t.length){const h=new Error("invalid level idx"),p=e<0;if(this.hls.trigger(L.ERROR,{type:Ee.OTHER_ERROR,details:Q.LEVEL_SWITCH_ERROR,level:e,fatal:p,error:h,reason:h.message}),p)return;e=Math.min(e,t.length-1)}const i=this.currentLevelIndex,s=this.currentLevel,a=s?s.attrs["PATHWAY-ID"]:void 0,l=t[e],c=l.attrs["PATHWAY-ID"];if(this.currentLevelIndex=e,this.currentLevel=l,i===e&&s&&a===c)return;this.log(`Switching to level ${e} (${l.height?l.height+"p ":""}${l.videoRange?l.videoRange+" ":""}${l.codecSet?l.codecSet+" ":""}@${l.bitrate})${c?" with Pathway "+c:""} from level ${i}${a?" with Pathway "+a:""}`);const f={level:e,attrs:l.attrs,details:l.details,bitrate:l.bitrate,averageBitrate:l.averageBitrate,maxBitrate:l.maxBitrate,realBitrate:l.realBitrate,width:l.width,height:l.height,codecSet:l.codecSet,audioCodec:l.audioCodec,videoCodec:l.videoCodec,audioGroups:l.audioGroups,subtitleGroups:l.subtitleGroups,loaded:l.loaded,loadError:l.loadError,fragmentError:l.fragmentError,name:l.name,id:l.id,uri:l.uri,url:l.url,urlId:0,audioGroupIds:l.audioGroupIds,textGroupIds:l.textGroupIds};this.hls.trigger(L.LEVEL_SWITCHING,f);const d=l.details;if(!d||d.live){const h=this.switchParams(l.uri,s?.details,d);this.loadPlaylist(h)}}get manualLevel(){return this.manualLevelIndex}set manualLevel(e){this.manualLevelIndex=e,this._startLevel===void 0&&(this._startLevel=e),e!==-1&&(this.level=e)}get firstLevel(){return this._firstLevel}set firstLevel(e){this._firstLevel=e}get startLevel(){if(this._startLevel===void 0){const e=this.hls.config.startLevel;return e!==void 0?e:this.hls.firstAutoLevel}return this._startLevel}set startLevel(e){this._startLevel=e}get pathways(){return this.steering?this.steering.pathways():[]}get pathwayPriority(){return this.steering?this.steering.pathwayPriority:null}set pathwayPriority(e){if(this.steering){const t=this.steering.pathways(),i=e.filter(s=>t.indexOf(s)!==-1);if(e.length<1){this.warn(`pathwayPriority ${e} should contain at least one pathway from list: ${t}`);return}this.steering.pathwayPriority=i}}onError(e,t){t.fatal||!t.context||t.context.type===Pe.LEVEL&&t.context.level===this.level&&this.checkRetry(t)}onFragBuffered(e,{frag:t}){if(t!==void 0&&t.type===ge.MAIN){const i=t.elementaryStreams;if(!Object.keys(i).some(a=>!!i[a]))return;const s=this._levels[t.level];s!=null&&s.loadError&&(this.log(`Resetting level error count of ${s.loadError} on frag buffered`),s.loadError=0)}}onLevelLoaded(e,t){var i;const{level:s,details:a}=t,l=t.levelInfo;if(!l){var c;this.warn(`Invalid level index ${s}`),(c=t.deliveryDirectives)!=null&&c.skip&&(a.deltaUpdateFailed=!0);return}if(l===this.currentLevel||t.withoutMultiVariant){l.fragmentError===0&&(l.loadError=0);let f=l.details;f===t.details&&f.advanced&&(f=void 0),this.playlistLoaded(s,t,f)}else(i=t.deliveryDirectives)!=null&&i.skip&&(a.deltaUpdateFailed=!0)}loadPlaylist(e){super.loadPlaylist(),this.shouldLoadPlaylist(this.currentLevel)&&this.scheduleLoading(this.currentLevel,e)}loadingPlaylist(e,t){super.loadingPlaylist(e,t);const i=this.getUrlWithDirectives(e.uri,t),s=this.currentLevelIndex,a=e.attrs["PATHWAY-ID"],l=e.details,c=l?.age;this.log(`Loading level index ${s}${t?.msn!==void 0?" at sn "+t.msn+" part "+t.part:""}${a?" Pathway "+a:""}${c&&l.live?" age "+c.toFixed(1)+(l.type&&" "+l.type||""):""} ${i}`),this.hls.trigger(L.LEVEL_LOADING,{url:i,level:s,levelInfo:e,pathwayId:e.attrs["PATHWAY-ID"],id:0,deliveryDirectives:t||null})}get nextLoadLevel(){return this.manualLevelIndex!==-1?this.manualLevelIndex:this.hls.nextAutoLevel}set nextLoadLevel(e){this.level=e,this.manualLevelIndex===-1&&(this.hls.nextAutoLevel=e)}removeLevel(e){var t;if(this._levels.length===1)return;const i=this._levels.filter((a,l)=>l!==e?!0:(this.steering&&this.steering.removeLevel(a),a===this.currentLevel&&(this.currentLevel=null,this.currentLevelIndex=-1,a.details&&a.details.fragments.forEach(c=>c.level=-1)),!1));HT(i),this._levels=i,this.currentLevelIndex>-1&&(t=this.currentLevel)!=null&&t.details&&(this.currentLevelIndex=this.currentLevel.details.fragments[0].level),this.manualLevelIndex>-1&&(this.manualLevelIndex=this.currentLevelIndex);const s=i.length-1;this._firstLevel=Math.min(this._firstLevel,s),this._startLevel&&(this._startLevel=Math.min(this._startLevel,s)),this.hls.trigger(L.LEVELS_UPDATED,{levels:i})}onLevelsUpdated(e,{levels:t}){this._levels=t}checkMaxAutoUpdated(){const{autoLevelCapping:e,maxAutoLevel:t,maxHdcpLevel:i}=this.hls;this._maxAutoLevel!==t&&(this._maxAutoLevel=t,this.hls.trigger(L.MAX_AUTO_LEVEL_UPDATED,{autoLevelCapping:e,levels:this.levels,maxAutoLevel:t,minAutoLevel:this.hls.minAutoLevel,maxHdcpLevel:i}))}}function pE(n){const e={};n.forEach(t=>{const i=t.groupId||"";t.id=e[i]=e[i]||0,e[i]++})}function BS(){return self.SourceBuffer||self.WebKitSourceBuffer}function FS(){if(!Os())return!1;const e=BS();return!e||e.prototype&&typeof e.prototype.appendBuffer=="function"&&typeof e.prototype.remove=="function"}function P3(){if(!FS())return!1;const n=Os();return typeof n?.isTypeSupported=="function"&&(["avc1.42E01E,mp4a.40.2","av01.0.01M.08","vp09.00.50.08"].some(e=>n.isTypeSupported(Oo(e,"video")))||["mp4a.40.2","fLaC"].some(e=>n.isTypeSupported(Oo(e,"audio"))))}function N3(){var n;const e=BS();return typeof(e==null||(n=e.prototype)==null?void 0:n.changeType)=="function"}const B3=100;class F3 extends Qm{constructor(e,t,i){super(e,t,i,"stream-controller",ge.MAIN),this.audioCodecSwap=!1,this.level=-1,this._forceStartLoad=!1,this._hasEnoughToStart=!1,this.altAudio=0,this.audioOnly=!1,this.fragPlaying=null,this.fragLastKbps=0,this.couldBacktrack=!1,this.backtrackFragment=null,this.audioCodecSwitch=!1,this.videoBuffer=null,this.onMediaPlaying=()=>{this.tick()},this.onMediaSeeked=()=>{const s=this.media,a=s?s.currentTime:null;if(a===null||!pe(a)||(this.log(`Media seeked to ${a.toFixed(3)}`),!this.getBufferedFrag(a)))return;const l=this.getFwdBufferInfoAtPos(s,a,ge.MAIN,0);if(l===null||l.len===0){this.warn(`Main forward buffer length at ${a} on "seeked" event ${l?l.len:"empty"})`);return}this.tick()},this.registerListeners()}registerListeners(){super.registerListeners();const{hls:e}=this;e.on(L.MANIFEST_PARSED,this.onManifestParsed,this),e.on(L.LEVEL_LOADING,this.onLevelLoading,this),e.on(L.LEVEL_LOADED,this.onLevelLoaded,this),e.on(L.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.on(L.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.on(L.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.on(L.BUFFER_CREATED,this.onBufferCreated,this),e.on(L.BUFFER_FLUSHED,this.onBufferFlushed,this),e.on(L.LEVELS_UPDATED,this.onLevelsUpdated,this),e.on(L.FRAG_BUFFERED,this.onFragBuffered,this)}unregisterListeners(){super.unregisterListeners();const{hls:e}=this;e.off(L.MANIFEST_PARSED,this.onManifestParsed,this),e.off(L.LEVEL_LOADED,this.onLevelLoaded,this),e.off(L.FRAG_LOAD_EMERGENCY_ABORTED,this.onFragLoadEmergencyAborted,this),e.off(L.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitching,this),e.off(L.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitched,this),e.off(L.BUFFER_CREATED,this.onBufferCreated,this),e.off(L.BUFFER_FLUSHED,this.onBufferFlushed,this),e.off(L.LEVELS_UPDATED,this.onLevelsUpdated,this),e.off(L.FRAG_BUFFERED,this.onFragBuffered,this)}onHandlerDestroying(){this.onMediaPlaying=this.onMediaSeeked=null,this.unregisterListeners(),super.onHandlerDestroying()}startLoad(e,t){if(this.levels){const{lastCurrentTime:i,hls:s}=this;if(this.stopLoad(),this.setInterval(B3),this.level=-1,!this.startFragRequested){let a=s.startLevel;a===-1&&(s.config.testBandwidth&&this.levels.length>1?(a=0,this.bitrateTest=!0):a=s.firstAutoLevel),s.nextLoadLevel=a,this.level=s.loadLevel,this._hasEnoughToStart=!!t}i>0&&e===-1&&!t&&(this.log(`Override startPosition with lastCurrentTime @${i.toFixed(3)}`),e=i),this.state=le.IDLE,this.nextLoadPosition=this.lastCurrentTime=e+this.timelineOffset,this.startPosition=t?-1:e,this.tick()}else this._forceStartLoad=!0,this.state=le.STOPPED}stopLoad(){this._forceStartLoad=!1,super.stopLoad()}doTick(){switch(this.state){case le.WAITING_LEVEL:{const{levels:e,level:t}=this,i=e?.[t],s=i?.details;if(s&&(!s.live||this.levelLastLoaded===i&&!this.waitForLive(i))){if(this.waitForCdnTuneIn(s))break;this.state=le.IDLE;break}else if(this.hls.nextLoadLevel!==this.level){this.state=le.IDLE;break}break}case le.FRAG_LOADING_WAITING_RETRY:this.checkRetryDate();break}this.state===le.IDLE&&this.doTickIdle(),this.onTickEnd()}onTickEnd(){var e;super.onTickEnd(),(e=this.media)!=null&&e.readyState&&this.media.seeking===!1&&(this.lastCurrentTime=this.media.currentTime),this.checkFragmentChanged()}doTickIdle(){const{hls:e,levelLastLoaded:t,levels:i,media:s}=this;if(t===null||!s&&!this.primaryPrefetch&&(this.startFragRequested||!e.config.startFragPrefetch)||this.altAudio&&this.audioOnly)return;const a=this.buffering?e.nextLoadLevel:e.loadLevel;if(!(i!=null&&i[a]))return;const l=i[a],c=this.getMainFwdBufferInfo();if(c===null)return;const f=this.getLevelDetails();if(f&&this._streamEnded(c,f)){const T={};this.altAudio===2&&(T.type="video"),this.hls.trigger(L.BUFFER_EOS,T),this.state=le.ENDED;return}if(!this.buffering)return;e.loadLevel!==a&&e.manualLevel===-1&&this.log(`Adapting to level ${a} from level ${this.level}`),this.level=e.nextLoadLevel=a;const d=l.details;if(!d||this.state===le.WAITING_LEVEL||this.waitForLive(l)){this.level=a,this.state=le.WAITING_LEVEL,this.startFragRequested=!1;return}const h=c.len,p=this.getMaxBufferLength(l.maxBitrate);if(h>=p)return;this.backtrackFragment&&this.backtrackFragment.start>c.end&&(this.backtrackFragment=null);const g=this.backtrackFragment?this.backtrackFragment.start:c.end;let b=this.getNextFragment(g,d);if(this.couldBacktrack&&!this.fragPrevious&&b&&wt(b)&&this.fragmentTracker.getState(b)!==Mt.OK){var y;const x=((y=this.backtrackFragment)!=null?y:b).sn-d.startSN,w=d.fragments[x-1];w&&b.cc===w.cc&&(b=w,this.fragmentTracker.removeFragment(w))}else this.backtrackFragment&&c.len&&(this.backtrackFragment=null);if(b&&this.isLoopLoading(b,g)){if(!b.gap){const x=this.audioOnly&&!this.altAudio?it.AUDIO:it.VIDEO,w=(x===it.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;w&&this.afterBufferFlushed(w,x,ge.MAIN)}b=this.getNextFragmentLoopLoading(b,d,c,ge.MAIN,p)}b&&(b.initSegment&&!b.initSegment.data&&!this.bitrateTest&&(b=b.initSegment),this.loadFragment(b,l,g))}loadFragment(e,t,i){const s=this.fragmentTracker.getState(e);s===Mt.NOT_LOADED||s===Mt.PARTIAL?wt(e)?this.bitrateTest?(this.log(`Fragment ${e.sn} of level ${e.level} is being downloaded to test bitrate and will not be buffered`),this._loadBitrateTestFrag(e,t)):super.loadFragment(e,t,i):this._loadInitSegment(e,t):this.clearTrackerIfNeeded(e)}getBufferedFrag(e){return this.fragmentTracker.getBufferedFrag(e,ge.MAIN)}followingBufferedFrag(e){return e?this.getBufferedFrag(e.end+.5):null}immediateLevelSwitch(){this.abortCurrentFrag(),this.flushMainBuffer(0,Number.POSITIVE_INFINITY)}nextLevelSwitch(){const{levels:e,media:t}=this;if(t!=null&&t.readyState){let i;const s=this.getAppendedFrag(t.currentTime);s&&s.start>1&&this.flushMainBuffer(0,s.start-1);const a=this.getLevelDetails();if(a!=null&&a.live){const c=this.getMainFwdBufferInfo();if(!c||c.len<a.targetduration*2)return}if(!t.paused&&e){const c=this.hls.nextLoadLevel,f=e[c],d=this.fragLastKbps;d&&this.fragCurrent?i=this.fragCurrent.duration*f.maxBitrate/(1e3*d)+1:i=0}else i=0;const l=this.getBufferedFrag(t.currentTime+i);if(l){const c=this.followingBufferedFrag(l);if(c){this.abortCurrentFrag();const f=c.maxStartPTS?c.maxStartPTS:c.start,d=c.duration,h=Math.max(l.end,f+Math.min(Math.max(d-this.config.maxFragLookUpTolerance,d*(this.couldBacktrack?.5:.125)),d*(this.couldBacktrack?.75:.25)));this.flushMainBuffer(h,Number.POSITIVE_INFINITY)}}}}abortCurrentFrag(){const e=this.fragCurrent;switch(this.fragCurrent=null,this.backtrackFragment=null,e&&(e.abortRequests(),this.fragmentTracker.removeFragment(e)),this.state){case le.KEY_LOADING:case le.FRAG_LOADING:case le.FRAG_LOADING_WAITING_RETRY:case le.PARSING:case le.PARSED:this.state=le.IDLE;break}this.nextLoadPosition=this.getLoadPosition()}flushMainBuffer(e,t){super.flushMainBuffer(e,t,this.altAudio===2?"video":null)}onMediaAttached(e,t){super.onMediaAttached(e,t);const i=t.media;ri(i,"playing",this.onMediaPlaying),ri(i,"seeked",this.onMediaSeeked)}onMediaDetaching(e,t){const{media:i}=this;i&&(yi(i,"playing",this.onMediaPlaying),yi(i,"seeked",this.onMediaSeeked)),this.videoBuffer=null,this.fragPlaying=null,super.onMediaDetaching(e,t),!t.transferMedia&&(this._hasEnoughToStart=!1)}onManifestLoading(){super.onManifestLoading(),this.log("Trigger BUFFER_RESET"),this.hls.trigger(L.BUFFER_RESET,void 0),this.couldBacktrack=!1,this.fragLastKbps=0,this.fragPlaying=this.backtrackFragment=null,this.altAudio=0,this.audioOnly=!1}onManifestParsed(e,t){let i=!1,s=!1;for(let a=0;a<t.levels.length;a++){const l=t.levels[a].audioCodec;l&&(i=i||l.indexOf("mp4a.40.2")!==-1,s=s||l.indexOf("mp4a.40.5")!==-1)}this.audioCodecSwitch=i&&s&&!N3(),this.audioCodecSwitch&&this.log("Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=t.levels,this.startFragRequested=!1}onLevelLoading(e,t){const{levels:i}=this;if(!i||this.state!==le.IDLE)return;const s=t.levelInfo;(!s.details||s.details.live&&(this.levelLastLoaded!==s||s.details.expired)||this.waitForCdnTuneIn(s.details))&&(this.state=le.WAITING_LEVEL)}onLevelLoaded(e,t){var i;const{levels:s,startFragRequested:a}=this,l=t.level,c=t.details,f=c.totalduration;if(!s){this.warn(`Levels were reset while loading level ${l}`);return}this.log(`Level ${l} loaded [${c.startSN},${c.endSN}]${c.lastPartSn?`[part-${c.lastPartSn}-${c.lastPartIndex}]`:""}, cc [${c.startCC}, ${c.endCC}] duration:${f}`);const d=t.levelInfo,h=this.fragCurrent;h&&(this.state===le.FRAG_LOADING||this.state===le.FRAG_LOADING_WAITING_RETRY)&&h.level!==t.level&&h.loader&&this.abortCurrentFrag();let p=0;if(c.live||(i=d.details)!=null&&i.live){var g;if(this.checkLiveUpdate(c),c.deltaUpdateFailed)return;p=this.alignPlaylists(c,d.details,(g=this.levelLastLoaded)==null?void 0:g.details)}if(d.details=c,this.levelLastLoaded=d,a||this.setStartPosition(c,p),this.hls.trigger(L.LEVEL_UPDATED,{details:c,level:l}),this.state===le.WAITING_LEVEL){if(this.waitForCdnTuneIn(c))return;this.state=le.IDLE}a&&c.live&&this.synchronizeToLiveEdge(c),this.tick()}synchronizeToLiveEdge(e){const{config:t,media:i}=this;if(!i)return;const s=this.hls.liveSyncPosition,a=this.getLoadPosition(),l=e.fragmentStart,c=e.edge,f=a>=l-t.maxFragLookUpTolerance&&a<=c;if(s!==null&&i.duration>s&&(a<s||!f)){const h=t.liveMaxLatencyDuration!==void 0?t.liveMaxLatencyDuration:t.liveMaxLatencyDurationCount*e.targetduration;if((!f&&i.readyState<4||a<c-h)&&(this._hasEnoughToStart||(this.nextLoadPosition=s),i.readyState))if(this.warn(`Playback: ${a.toFixed(3)} is located too far from the end of live sliding playlist: ${c}, reset currentTime to : ${s.toFixed(3)}`),this.config.liveSyncMode==="buffered"){var d;const p=_e.bufferInfo(i,s,0);if(!((d=p.buffered)!=null&&d.length)){i.currentTime=s;return}if(p.start<=a){i.currentTime=s;return}const{nextStart:b}=_e.bufferedInfo(p.buffered,a,0);b&&(i.currentTime=b)}else i.currentTime=s}}_handleFragmentLoadProgress(e){var t;const i=e.frag,{part:s,payload:a}=e,{levels:l}=this;if(!l){this.warn(`Levels were reset while fragment load was in progress. Fragment ${i.sn} of level ${i.level} will not be buffered`);return}const c=l[i.level];if(!c){this.warn(`Level ${i.level} not found on progress`);return}const f=c.details;if(!f){this.warn(`Dropping fragment ${i.sn} of level ${i.level} after level details were reset`),this.fragmentTracker.removeFragment(i);return}const d=c.videoCodec,h=f.PTSKnown||!f.live,p=(t=i.initSegment)==null?void 0:t.data,g=this._getAudioCodec(c),b=this.transmuxer=this.transmuxer||new uS(this.hls,ge.MAIN,this._handleTransmuxComplete.bind(this),this._handleTransmuxerFlush.bind(this)),y=s?s.index:-1,T=y!==-1,x=new Ym(i.level,i.sn,i.stats.chunkCount,a.byteLength,y,T),w=this.initPTS[i.cc];b.push(a,p,g,d,i,s,f.totalduration,h,x,w)}onAudioTrackSwitching(e,t){const i=this.hls,s=this.altAudio!==0;if(cu(t.url,i))this.altAudio=1;else{if(this.mediaBuffer!==this.media){this.log("Switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;const l=this.fragCurrent;l&&(this.log("Switching to main audio track, cancel main fragment load"),l.abortRequests(),this.fragmentTracker.removeFragment(l)),this.resetTransmuxer(),this.resetLoadingState()}else this.audioOnly&&this.resetTransmuxer();if(s){this.altAudio=0,this.fragmentTracker.removeAllFragments(),i.once(L.BUFFER_FLUSHED,()=>{this.hls&&this.hls.trigger(L.AUDIO_TRACK_SWITCHED,t)}),i.trigger(L.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:null});return}i.trigger(L.AUDIO_TRACK_SWITCHED,t)}}onAudioTrackSwitched(e,t){const i=cu(t.url,this.hls);if(i){const s=this.videoBuffer;s&&this.mediaBuffer!==s&&(this.log("Switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=s)}this.altAudio=i?2:0,this.tick()}onBufferCreated(e,t){const i=t.tracks;let s,a,l=!1;for(const c in i){const f=i[c];if(f.id==="main"){if(a=c,s=f,c==="video"){const d=i[c];d&&(this.videoBuffer=d.buffer)}}else l=!0}l&&s?(this.log(`Alternate track found, use ${a}.buffered to schedule main fragment loading`),this.mediaBuffer=s.buffer):this.mediaBuffer=this.media}onFragBuffered(e,t){const{frag:i,part:s}=t,a=i.type===ge.MAIN;if(a){if(this.fragContextChanged(i)){this.warn(`Fragment ${i.sn}${s?" p: "+s.index:""} of level ${i.level} finished buffering, but was aborted. state: ${this.state}`),this.state===le.PARSED&&(this.state=le.IDLE);return}const c=s?s.stats:i.stats;this.fragLastKbps=Math.round(8*c.total/(c.buffering.end-c.loading.first)),wt(i)&&(this.fragPrevious=i),this.fragBufferedComplete(i,s)}const l=this.media;l&&(!this._hasEnoughToStart&&_e.getBuffered(l).length&&(this._hasEnoughToStart=!0,this.seekToStartPos()),a&&this.tick())}get hasEnoughToStart(){return this._hasEnoughToStart}onError(e,t){var i;if(t.fatal){this.state=le.ERROR;return}switch(t.details){case Q.FRAG_GAP:case Q.FRAG_PARSING_ERROR:case Q.FRAG_DECRYPT_ERROR:case Q.FRAG_LOAD_ERROR:case Q.FRAG_LOAD_TIMEOUT:case Q.KEY_LOAD_ERROR:case Q.KEY_LOAD_TIMEOUT:this.onFragmentOrKeyLoadError(ge.MAIN,t);break;case Q.LEVEL_LOAD_ERROR:case Q.LEVEL_LOAD_TIMEOUT:case Q.LEVEL_PARSING_ERROR:!t.levelRetry&&this.state===le.WAITING_LEVEL&&((i=t.context)==null?void 0:i.type)===Pe.LEVEL&&(this.state=le.IDLE);break;case Q.BUFFER_ADD_CODEC_ERROR:case Q.BUFFER_APPEND_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&this.resetLoadingState();break;case Q.BUFFER_FULL_ERROR:if(t.parent!=="main")return;this.reduceLengthAndFlushBuffer(t)&&(!this.config.interstitialsController&&this.config.assetPlayerId?this._hasEnoughToStart=!0:this.flushMainBuffer(0,Number.POSITIVE_INFINITY));break;case Q.INTERNAL_EXCEPTION:this.recoverWorkerError(t);break}}onFragLoadEmergencyAborted(){this.state=le.IDLE,this._hasEnoughToStart||(this.startFragRequested=!1,this.nextLoadPosition=this.lastCurrentTime),this.tickImmediate()}onBufferFlushed(e,{type:t}){if(t!==it.AUDIO||!this.altAudio){const i=(t===it.VIDEO?this.videoBuffer:this.mediaBuffer)||this.media;i&&(this.afterBufferFlushed(i,t,ge.MAIN),this.tick())}}onLevelsUpdated(e,t){this.level>-1&&this.fragCurrent&&(this.level=this.fragCurrent.level,this.level===-1&&this.resetWhenMissingContext(this.fragCurrent)),this.levels=t.levels}swapAudioCodec(){this.audioCodecSwap=!this.audioCodecSwap}seekToStartPos(){const{media:e}=this;if(!e)return;const t=e.currentTime;let i=this.startPosition;if(i>=0&&t<i){if(e.seeking){this.log(`could not seek to ${i}, already seeking at ${t}`);return}const s=this.timelineOffset;s&&i&&(i+=s);const a=this.getLevelDetails(),l=_e.getBuffered(e),c=l.length?l.start(0):0,f=c-i,d=Math.max(this.config.maxBufferHole,this.config.maxFragLookUpTolerance);(this.config.startOnSegmentBoundary||f>0&&(f<d||this.loadingParts&&f<2*(a?.partTarget||0)))&&(this.log(`adjusting start position by ${f} to match buffer start`),i+=f,this.startPosition=i),t<i&&(this.log(`seek to target start position ${i} from current time ${t} buffer start ${c}`),e.currentTime=i)}}_getAudioCodec(e){let t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&t&&(this.log("Swapping audio codec"),t.indexOf("mp4a.40.5")!==-1?t="mp4a.40.2":t="mp4a.40.5"),t}_loadBitrateTestFrag(e,t){e.bitrateTest=!0,this._doFragLoad(e,t).then(i=>{const{hls:s}=this,a=i?.frag;if(!a||this.fragContextChanged(a))return;t.fragmentError=0,this.state=le.IDLE,this.startFragRequested=!1,this.bitrateTest=!1;const l=a.stats;l.parsing.start=l.parsing.end=l.buffering.start=l.buffering.end=self.performance.now(),s.trigger(L.FRAG_LOADED,i),a.bitrateTest=!1}).catch(i=>{this.state===le.STOPPED||this.state===le.ERROR||(this.warn(i),this.resetFragmentLoading(e))})}_handleTransmuxComplete(e){const t=this.playlistType,{hls:i}=this,{remuxResult:s,chunkMeta:a}=e,l=this.getCurrentContext(a);if(!l){this.resetWhenMissingContext(a);return}const{frag:c,part:f,level:d}=l,{video:h,text:p,id3:g,initSegment:b}=s,{details:y}=d,T=this.altAudio?void 0:s.audio;if(this.fragContextChanged(c)){this.fragmentTracker.removeFragment(c);return}if(this.state=le.PARSING,b){const x=b.tracks;if(x){const _=c.initSegment||c;if(this.unhandledEncryptionError(b,c))return;this._bufferInitSegment(d,x,_,a),i.trigger(L.FRAG_PARSING_INIT_SEGMENT,{frag:_,id:t,tracks:x})}const w=b.initPTS,S=b.timescale,A=this.initPTS[c.cc];if(pe(w)&&(!A||A.baseTime!==w||A.timescale!==S)){const _=b.trackId;this.initPTS[c.cc]={baseTime:w,timescale:S,trackId:_},i.trigger(L.INIT_PTS_FOUND,{frag:c,id:t,initPTS:w,timescale:S,trackId:_})}}if(h&&y){T&&h.type==="audiovideo"&&this.logMuxedErr(c);const x=y.fragments[c.sn-1-y.startSN],w=c.sn===y.startSN,S=!x||c.cc>x.cc;if(s.independent!==!1){const{startPTS:A,endPTS:_,startDTS:I,endDTS:P}=h;if(f)f.elementaryStreams[h.type]={startPTS:A,endPTS:_,startDTS:I,endDTS:P};else if(h.firstKeyFrame&&h.independent&&a.id===1&&!S&&(this.couldBacktrack=!0),h.dropped&&h.independent){const C=this.getMainFwdBufferInfo(),O=(C?C.end:this.getLoadPosition())+this.config.maxBufferHole,B=h.firstKeyFramePTS?h.firstKeyFramePTS:A;if(!w&&O<B-this.config.maxBufferHole&&!S){this.backtrack(c);return}else S&&(c.gap=!0);c.setElementaryStreamInfo(h.type,c.start,_,c.start,P,!0)}else w&&A-(y.appliedTimelineOffset||0)>Kc&&(c.gap=!0);c.setElementaryStreamInfo(h.type,A,_,I,P),this.backtrackFragment&&(this.backtrackFragment=c),this.bufferFragmentData(h,c,f,a,w||S)}else if(w||S)c.gap=!0;else{this.backtrack(c);return}}if(T){const{startPTS:x,endPTS:w,startDTS:S,endDTS:A}=T;f&&(f.elementaryStreams[it.AUDIO]={startPTS:x,endPTS:w,startDTS:S,endDTS:A}),c.setElementaryStreamInfo(it.AUDIO,x,w,S,A),this.bufferFragmentData(T,c,f,a)}if(y&&g!=null&&g.samples.length){const x={id:t,frag:c,details:y,samples:g.samples};i.trigger(L.FRAG_PARSING_METADATA,x)}if(y&&p){const x={id:t,frag:c,details:y,samples:p.samples};i.trigger(L.FRAG_PARSING_USERDATA,x)}}logMuxedErr(e){this.warn(`${wt(e)?"Media":"Init"} segment with muxed audiovideo where only video expected: ${e.url}`)}_bufferInitSegment(e,t,i,s){if(this.state!==le.PARSING)return;this.audioOnly=!!t.audio&&!t.video,this.altAudio&&!this.audioOnly&&(delete t.audio,t.audiovideo&&this.logMuxedErr(i));const{audio:a,video:l,audiovideo:c}=t;if(a){const d=e.audioCodec;let h=$c(a.codec,d);h==="mp4a"&&(h="mp4a.40.5");const p=navigator.userAgent.toLowerCase();if(this.audioCodecSwitch){h&&(h.indexOf("mp4a.40.5")!==-1?h="mp4a.40.2":h="mp4a.40.5");const g=a.metadata;g&&"channelCount"in g&&(g.channelCount||1)!==1&&p.indexOf("firefox")===-1&&(h="mp4a.40.5")}h&&h.indexOf("mp4a.40.5")!==-1&&p.indexOf("android")!==-1&&a.container!=="audio/mpeg"&&(h="mp4a.40.2",this.log(`Android: force audio codec to ${h}`)),d&&d!==h&&this.log(`Swapping manifest audio codec "${d}" for "${h}"`),a.levelCodec=h,a.id=ge.MAIN,this.log(`Init audio buffer, container:${a.container}, codecs[selected/level/parsed]=[${h||""}/${d||""}/${a.codec}]`),delete t.audiovideo}if(l){l.levelCodec=e.videoCodec,l.id=ge.MAIN;const d=l.codec;if(d?.length===4)switch(d){case"hvc1":case"hev1":l.codec="hvc1.1.6.L120.90";break;case"av01":l.codec="av01.0.04M.08";break;case"avc1":l.codec="avc1.42e01e";break}this.log(`Init video buffer, container:${l.container}, codecs[level/parsed]=[${e.videoCodec||""}/${d}]${l.codec!==d?" parsed-corrected="+l.codec:""}${l.supplemental?" supplemental="+l.supplemental:""}`),delete t.audiovideo}c&&(this.log(`Init audiovideo buffer, container:${c.container}, codecs[level/parsed]=[${e.codecs}/${c.codec}]`),delete t.video,delete t.audio);const f=Object.keys(t);if(f.length){if(this.hls.trigger(L.BUFFER_CODECS,t),!this.hls)return;f.forEach(d=>{const p=t[d].initSegment;p!=null&&p.byteLength&&this.hls.trigger(L.BUFFER_APPENDING,{type:d,data:p,frag:i,part:null,chunkMeta:s,parent:i.type})})}this.tickImmediate()}getMainFwdBufferInfo(){const e=this.mediaBuffer&&this.altAudio===2?this.mediaBuffer:this.media;return this.getFwdBufferInfo(e,ge.MAIN)}get maxBufferLength(){const{levels:e,level:t}=this,i=e?.[t];return i?this.getMaxBufferLength(i.maxBitrate):this.config.maxBufferLength}backtrack(e){this.couldBacktrack=!0,this.backtrackFragment=e,this.resetTransmuxer(),this.flushBufferGap(e),this.fragmentTracker.removeFragment(e),this.fragPrevious=null,this.nextLoadPosition=e.start,this.state=le.IDLE}checkFragmentChanged(){const e=this.media;let t=null;if(e&&e.readyState>1&&e.seeking===!1){const i=e.currentTime;if(_e.isBuffered(e,i)?t=this.getAppendedFrag(i):_e.isBuffered(e,i+.1)&&(t=this.getAppendedFrag(i+.1)),t){this.backtrackFragment=null;const s=this.fragPlaying,a=t.level;(!s||t.sn!==s.sn||s.level!==a)&&(this.fragPlaying=t,this.hls.trigger(L.FRAG_CHANGED,{frag:t}),(!s||s.level!==a)&&this.hls.trigger(L.LEVEL_SWITCHED,{level:a}))}}}get nextLevel(){const e=this.nextBufferedFrag;return e?e.level:-1}get currentFrag(){var e;if(this.fragPlaying)return this.fragPlaying;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;return pe(t)?this.getAppendedFrag(t):null}get currentProgramDateTime(){var e;const t=((e=this.media)==null?void 0:e.currentTime)||this.lastCurrentTime;if(pe(t)){const i=this.getLevelDetails(),s=this.currentFrag||(i?gr(null,i.fragments,t):null);if(s){const a=s.programDateTime;if(a!==null){const l=a+(t-s.start)*1e3;return new Date(l)}}}return null}get currentLevel(){const e=this.currentFrag;return e?e.level:-1}get nextBufferedFrag(){const e=this.currentFrag;return e?this.followingBufferedFrag(e):null}get forceStartLoad(){return this._forceStartLoad}}class U3 extends Zi{constructor(e,t){super("key-loader",t),this.config=void 0,this.keyIdToKeyInfo={},this.emeController=null,this.config=e}abort(e){for(const i in this.keyIdToKeyInfo){const s=this.keyIdToKeyInfo[i].loader;if(s){var t;if(e&&e!==((t=s.context)==null?void 0:t.frag.type))return;s.abort()}}}detach(){for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e];(t.mediaKeySessionContext||t.decryptdata.isCommonEncryption)&&delete this.keyIdToKeyInfo[e]}}destroy(){this.detach();for(const e in this.keyIdToKeyInfo){const t=this.keyIdToKeyInfo[e].loader;t&&t.destroy()}this.keyIdToKeyInfo={}}createKeyLoadError(e,t=Q.KEY_LOAD_ERROR,i,s,a){return new qn({type:Ee.NETWORK_ERROR,details:t,fatal:!1,frag:e,response:a,error:i,networkDetails:s})}loadClear(e,t,i){if(this.emeController&&this.config.emeEnabled&&!this.emeController.getSelectedKeySystemFormats().length){if(t.length)for(let s=0,a=t.length;s<a;s++){const l=t[s];if(e.cc<=l.cc&&(!wt(e)||!wt(l)||e.sn<l.sn)||!i&&s==a-1)return this.emeController.selectKeySystemFormat(l).then(c=>{if(!this.emeController)return;l.setKeyFormat(c);const f=Hc(c);if(f)return this.emeController.getKeySystemAccess([f])})}if(this.config.requireKeySystemAccessOnStart){const s=Ro(this.config);if(s.length)return this.emeController.getKeySystemAccess(s)}}return null}load(e){return!e.decryptdata&&e.encrypted&&this.emeController&&this.config.emeEnabled?this.emeController.selectKeySystemFormat(e).then(t=>this.loadInternal(e,t)):this.loadInternal(e)}loadInternal(e,t){var i,s;t&&e.setKeyFormat(t);const a=e.decryptdata;if(!a){const d=new Error(t?`Expected frag.decryptdata to be defined after setting format ${t}`:`Missing decryption data on fragment in onKeyLoading (emeEnabled with controller: ${this.emeController&&this.config.emeEnabled})`);return Promise.reject(this.createKeyLoadError(e,Q.KEY_LOAD_ERROR,d))}const l=a.uri;if(!l)return Promise.reject(this.createKeyLoadError(e,Q.KEY_LOAD_ERROR,new Error(`Invalid key URI: "${l}"`)));const c=Mh(a);let f=this.keyIdToKeyInfo[c];if((i=f)!=null&&i.decryptdata.key)return a.key=f.decryptdata.key,Promise.resolve({frag:e,keyInfo:f});if(this.emeController&&(s=f)!=null&&s.keyLoadPromise)switch(this.emeController.getKeyStatus(f.decryptdata)){case"usable":case"usable-in-future":return f.keyLoadPromise.then(h=>{const{keyInfo:p}=h;return a.key=p.decryptdata.key,{frag:e,keyInfo:p}})}switch(this.log(`${this.keyIdToKeyInfo[c]?"Rel":"L"}oading${a.keyId?" keyId: "+Kt(a.keyId):""} URI: ${a.uri} from ${e.type} ${e.level}`),f=this.keyIdToKeyInfo[c]={decryptdata:a,keyLoadPromise:null,loader:null,mediaKeySessionContext:null},a.method){case"SAMPLE-AES":case"SAMPLE-AES-CENC":case"SAMPLE-AES-CTR":return a.keyFormat==="identity"?this.loadKeyHTTP(f,e):this.loadKeyEME(f,e);case"AES-128":case"AES-256":case"AES-256-CTR":return this.loadKeyHTTP(f,e);default:return Promise.reject(this.createKeyLoadError(e,Q.KEY_LOAD_ERROR,new Error(`Key supplied with unsupported METHOD: "${a.method}"`)))}}loadKeyEME(e,t){const i={frag:t,keyInfo:e};if(this.emeController&&this.config.emeEnabled){var s;if(!e.decryptdata.keyId&&(s=t.initSegment)!=null&&s.data){const l=sk(t.initSegment.data);if(l.length){let c=l[0];c.some(f=>f!==0)?(this.log(`Using keyId found in init segment ${Kt(c)}`),ks.setKeyIdForUri(e.decryptdata.uri,c)):(c=ks.addKeyIdForUri(e.decryptdata.uri),this.log(`Generating keyId to patch media ${Kt(c)}`)),e.decryptdata.keyId=c}}if(!e.decryptdata.keyId&&!wt(t))return Promise.resolve(i);const a=this.emeController.loadKey(i);return(e.keyLoadPromise=a.then(l=>(e.mediaKeySessionContext=l,i))).catch(l=>{throw e.keyLoadPromise=null,"data"in l&&(l.data.frag=t),l})}return Promise.resolve(i)}loadKeyHTTP(e,t){const i=this.config,s=i.loader,a=new s(i);return t.keyLoader=e.loader=a,e.keyLoadPromise=new Promise((l,c)=>{const f={keyInfo:e,frag:t,responseType:"arraybuffer",url:e.decryptdata.uri},d=i.keyLoadPolicy.default,h={loadPolicy:d,timeout:d.maxLoadTimeMs,maxRetry:0,retryDelay:0,maxRetryDelay:0},p={onSuccess:(g,b,y,T)=>{const{frag:x,keyInfo:w}=y,S=Mh(w.decryptdata);if(!x.decryptdata||w!==this.keyIdToKeyInfo[S])return c(this.createKeyLoadError(x,Q.KEY_LOAD_ERROR,new Error("after key load, decryptdata unset or changed"),T));w.decryptdata.key=x.decryptdata.key=new Uint8Array(g.data),x.keyLoader=null,w.loader=null,l({frag:x,keyInfo:w})},onError:(g,b,y,T)=>{this.resetLoader(b),c(this.createKeyLoadError(t,Q.KEY_LOAD_ERROR,new Error(`HTTP Error ${g.code} loading key ${g.text}`),y,Xe({url:f.url,data:void 0},g)))},onTimeout:(g,b,y)=>{this.resetLoader(b),c(this.createKeyLoadError(t,Q.KEY_LOAD_TIMEOUT,new Error("key loading timed out"),y))},onAbort:(g,b,y)=>{this.resetLoader(b),c(this.createKeyLoadError(t,Q.INTERNAL_ABORTED,new Error("key loading aborted"),y))}};a.load(f,h,p)})}resetLoader(e){const{frag:t,keyInfo:i,url:s}=e,a=i.loader;t.keyLoader===a&&(t.keyLoader=null,i.loader=null);const l=Mh(i.decryptdata)||s;delete this.keyIdToKeyInfo[l],a&&a.destroy()}}function Mh(n){if(n.keyFormat!==Yt.FAIRPLAY){const e=n.keyId;if(e)return Kt(e)}return n.uri}function gE(n){const{type:e}=n;switch(e){case Pe.AUDIO_TRACK:return ge.AUDIO;case Pe.SUBTITLE_TRACK:return ge.SUBTITLE;default:return ge.MAIN}}function Ph(n,e){let t=n.url;return(t===void 0||t.indexOf("data:")===0)&&(t=e.url),t}class $3{constructor(e){this.hls=void 0,this.loaders=Object.create(null),this.variableList=null,this.onManifestLoaded=this.checkAutostartLoad,this.hls=e,this.registerListeners()}startLoad(e){}stopLoad(){this.destroyInternalLoaders()}registerListeners(){const{hls:e}=this;e.on(L.MANIFEST_LOADING,this.onManifestLoading,this),e.on(L.LEVEL_LOADING,this.onLevelLoading,this),e.on(L.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.on(L.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.on(L.LEVELS_UPDATED,this.onLevelsUpdated,this)}unregisterListeners(){const{hls:e}=this;e.off(L.MANIFEST_LOADING,this.onManifestLoading,this),e.off(L.LEVEL_LOADING,this.onLevelLoading,this),e.off(L.AUDIO_TRACK_LOADING,this.onAudioTrackLoading,this),e.off(L.SUBTITLE_TRACK_LOADING,this.onSubtitleTrackLoading,this),e.off(L.LEVELS_UPDATED,this.onLevelsUpdated,this)}createInternalLoader(e){const t=this.hls.config,i=t.pLoader,s=t.loader,a=i||s,l=new a(t);return this.loaders[e.type]=l,l}getInternalLoader(e){return this.loaders[e.type]}resetInternalLoader(e){this.loaders[e]&&delete this.loaders[e]}destroyInternalLoaders(){for(const e in this.loaders){const t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}}destroy(){this.variableList=null,this.unregisterListeners(),this.destroyInternalLoaders()}onManifestLoading(e,t){const{url:i}=t;this.variableList=null,this.load({id:null,level:0,responseType:"text",type:Pe.MANIFEST,url:i,deliveryDirectives:null,levelOrTrack:null})}onLevelLoading(e,t){const{id:i,level:s,pathwayId:a,url:l,deliveryDirectives:c,levelInfo:f}=t;this.load({id:i,level:s,pathwayId:a,responseType:"text",type:Pe.LEVEL,url:l,deliveryDirectives:c,levelOrTrack:f})}onAudioTrackLoading(e,t){const{id:i,groupId:s,url:a,deliveryDirectives:l,track:c}=t;this.load({id:i,groupId:s,level:null,responseType:"text",type:Pe.AUDIO_TRACK,url:a,deliveryDirectives:l,levelOrTrack:c})}onSubtitleTrackLoading(e,t){const{id:i,groupId:s,url:a,deliveryDirectives:l,track:c}=t;this.load({id:i,groupId:s,level:null,responseType:"text",type:Pe.SUBTITLE_TRACK,url:a,deliveryDirectives:l,levelOrTrack:c})}onLevelsUpdated(e,t){const i=this.loaders[Pe.LEVEL];if(i){const s=i.context;s&&!t.levels.some(a=>a===s.levelOrTrack)&&(i.abort(),delete this.loaders[Pe.LEVEL])}}load(e){var t;const i=this.hls.config;let s=this.getInternalLoader(e);if(s){const d=this.hls.logger,h=s.context;if(h&&h.levelOrTrack===e.levelOrTrack&&(h.url===e.url||h.deliveryDirectives&&!e.deliveryDirectives)){h.url===e.url?d.log(`[playlist-loader]: ignore ${e.url} ongoing request`):d.log(`[playlist-loader]: ignore ${e.url} in favor of ${h.url}`);return}d.log(`[playlist-loader]: aborting previous loader for type: ${e.type}`),s.abort()}let a;if(e.type===Pe.MANIFEST?a=i.manifestLoadPolicy.default:a=et({},i.playlistLoadPolicy.default,{timeoutRetry:null,errorRetry:null}),s=this.createInternalLoader(e),pe((t=e.deliveryDirectives)==null?void 0:t.part)){let d;if(e.type===Pe.LEVEL&&e.level!==null?d=this.hls.levels[e.level].details:e.type===Pe.AUDIO_TRACK&&e.id!==null?d=this.hls.audioTracks[e.id].details:e.type===Pe.SUBTITLE_TRACK&&e.id!==null&&(d=this.hls.subtitleTracks[e.id].details),d){const h=d.partTarget,p=d.targetduration;if(h&&p){const g=Math.max(h*3,p*.8)*1e3;a=et({},a,{maxTimeToFirstByteMs:Math.min(g,a.maxTimeToFirstByteMs),maxLoadTimeMs:Math.min(g,a.maxTimeToFirstByteMs)})}}}const l=a.errorRetry||a.timeoutRetry||{},c={loadPolicy:a,timeout:a.maxLoadTimeMs,maxRetry:l.maxNumRetry||0,retryDelay:l.retryDelayMs||0,maxRetryDelay:l.maxRetryDelayMs||0},f={onSuccess:(d,h,p,g)=>{const b=this.getInternalLoader(p);this.resetInternalLoader(p.type);const y=d.data;h.parsing.start=performance.now(),bn.isMediaPlaylist(y)||p.type!==Pe.MANIFEST?this.handleTrackOrLevelPlaylist(d,h,p,g||null,b):this.handleMasterPlaylist(d,h,p,g)},onError:(d,h,p,g)=>{this.handleNetworkError(h,p,!1,d,g)},onTimeout:(d,h,p)=>{this.handleNetworkError(h,p,!0,void 0,d)}};s.load(e,c,f)}checkAutostartLoad(){if(!this.hls)return;const{config:{autoStartLoad:e,startPosition:t},forceStartLoad:i}=this.hls;(e||i)&&(this.hls.logger.log(`${e?"auto":"force"} startLoad with configured startPosition ${t}`),this.hls.startLoad(t))}handleMasterPlaylist(e,t,i,s){const a=this.hls,l=e.data,c=Ph(e,i),f=bn.parseMasterPlaylist(l,c);if(f.playlistParsingError){t.parsing.end=performance.now(),this.handleManifestParsingError(e,i,f.playlistParsingError,s,t);return}const{contentSteering:d,levels:h,sessionData:p,sessionKeys:g,startTimeOffset:b,variableList:y}=f;this.variableList=y,h.forEach(S=>{const{unknownCodecs:A}=S;if(A){const{preferManagedMediaSource:_}=this.hls.config;let{audioCodec:I,videoCodec:P}=S;for(let C=A.length;C--;){const O=A[C];ko(O,"audio",_)?(S.audioCodec=I=I?`${I},${O}`:O,Ea.audio[I.substring(0,4)]=2,A.splice(C,1)):ko(O,"video",_)&&(S.videoCodec=P=P?`${P},${O}`:O,Ea.video[P.substring(0,4)]=2,A.splice(C,1))}}});const{AUDIO:T=[],SUBTITLES:x,"CLOSED-CAPTIONS":w}=bn.parseMasterPlaylistMedia(l,c,f);T.length&&!T.some(A=>!A.url)&&h[0].audioCodec&&!h[0].attrs.AUDIO&&(this.hls.logger.log("[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one"),T.unshift({type:"main",name:"main",groupId:"main",default:!1,autoselect:!1,forced:!1,id:-1,attrs:new ft({}),bitrate:0,url:""})),a.trigger(L.MANIFEST_LOADED,{levels:h,audioTracks:T,subtitles:x,captions:w,contentSteering:d,url:c,stats:t,networkDetails:s,sessionData:p,sessionKeys:g,startTimeOffset:b,variableList:y})}handleTrackOrLevelPlaylist(e,t,i,s,a){const l=this.hls,{id:c,level:f,type:d}=i,h=Ph(e,i),p=pe(f)?f:pe(c)?c:0,g=gE(i),b=bn.parseLevelPlaylist(e.data,h,p,g,0,this.variableList);if(d===Pe.MANIFEST){const y={attrs:new ft({}),bitrate:0,details:b,name:"",url:h};b.requestScheduled=t.loading.start+UT(b,0),l.trigger(L.MANIFEST_LOADED,{levels:[y],audioTracks:[],url:h,stats:t,networkDetails:s,sessionData:null,sessionKeys:null,contentSteering:null,startTimeOffset:null,variableList:null})}t.parsing.end=performance.now(),i.levelDetails=b,this.handlePlaylistLoaded(b,e,t,i,s,a)}handleManifestParsingError(e,t,i,s,a){this.hls.trigger(L.ERROR,{type:Ee.NETWORK_ERROR,details:Q.MANIFEST_PARSING_ERROR,fatal:t.type===Pe.MANIFEST,url:e.url,err:i,error:i,reason:i.message,response:e,context:t,networkDetails:s,stats:a})}handleNetworkError(e,t,i=!1,s,a){let l=`A network ${i?"timeout":"error"+(s?" (status "+s.code+")":"")} occurred while loading ${e.type}`;e.type===Pe.LEVEL?l+=`: ${e.level} id: ${e.id}`:(e.type===Pe.AUDIO_TRACK||e.type===Pe.SUBTITLE_TRACK)&&(l+=` id: ${e.id} group-id: "${e.groupId}"`);const c=new Error(l);this.hls.logger.warn(`[playlist-loader]: ${l}`);let f=Q.UNKNOWN,d=!1;const h=this.getInternalLoader(e);switch(e.type){case Pe.MANIFEST:f=i?Q.MANIFEST_LOAD_TIMEOUT:Q.MANIFEST_LOAD_ERROR,d=!0;break;case Pe.LEVEL:f=i?Q.LEVEL_LOAD_TIMEOUT:Q.LEVEL_LOAD_ERROR,d=!1;break;case Pe.AUDIO_TRACK:f=i?Q.AUDIO_TRACK_LOAD_TIMEOUT:Q.AUDIO_TRACK_LOAD_ERROR,d=!1;break;case Pe.SUBTITLE_TRACK:f=i?Q.SUBTITLE_TRACK_LOAD_TIMEOUT:Q.SUBTITLE_LOAD_ERROR,d=!1;break}h&&this.resetInternalLoader(e.type);const p={type:Ee.NETWORK_ERROR,details:f,fatal:d,url:e.url,loader:h,context:e,error:c,networkDetails:t,stats:a};if(s){const g=t?.url||e.url;p.response=Xe({url:g,data:void 0},s)}this.hls.trigger(L.ERROR,p)}handlePlaylistLoaded(e,t,i,s,a,l){const c=this.hls,{type:f,level:d,levelOrTrack:h,id:p,groupId:g,deliveryDirectives:b}=s,y=Ph(t,s),T=gE(s);let x=typeof s.level=="number"&&T===ge.MAIN?d:void 0;const w=e.playlistParsingError;if(w){if(this.hls.logger.warn(`${w} ${e.url}`),!c.config.ignorePlaylistParsingErrors){c.trigger(L.ERROR,{type:Ee.NETWORK_ERROR,details:Q.LEVEL_PARSING_ERROR,fatal:!1,url:y,error:w,reason:w.message,response:t,context:s,level:x,parent:T,networkDetails:a,stats:i});return}e.playlistParsingError=null}if(!e.fragments.length){const S=e.playlistParsingError=new Error("No Segments found in Playlist");c.trigger(L.ERROR,{type:Ee.NETWORK_ERROR,details:Q.LEVEL_EMPTY_ERROR,fatal:!1,url:y,error:S,reason:S.message,response:t,context:s,level:x,parent:T,networkDetails:a,stats:i});return}switch(e.live&&l&&(l.getCacheAge&&(e.ageHeader=l.getCacheAge()||0),(!l.getCacheAge||isNaN(e.ageHeader))&&(e.ageHeader=0)),f){case Pe.MANIFEST:case Pe.LEVEL:if(x){if(!h)x=0;else if(h!==c.levels[x]){const S=c.levels.indexOf(h);S>-1&&(x=S)}}c.trigger(L.LEVEL_LOADED,{details:e,levelInfo:h||c.levels[0],level:x||0,id:p||0,stats:i,networkDetails:a,deliveryDirectives:b,withoutMultiVariant:f===Pe.MANIFEST});break;case Pe.AUDIO_TRACK:c.trigger(L.AUDIO_TRACK_LOADED,{details:e,track:h,id:p||0,groupId:g||"",stats:i,networkDetails:a,deliveryDirectives:b});break;case Pe.SUBTITLE_TRACK:c.trigger(L.SUBTITLE_TRACK_LOADED,{details:e,track:h,id:p||0,groupId:g||"",stats:i,networkDetails:a,deliveryDirectives:b});break}}}class Yn{static get version(){return Po}static isMSESupported(){return FS()}static isSupported(){return P3()}static getMediaSource(){return Os()}static get Events(){return L}static get MetadataSchema(){return Di}static get ErrorTypes(){return Ee}static get ErrorDetails(){return Q}static get DefaultConfig(){return Yn.defaultConfig?Yn.defaultConfig:S3}static set DefaultConfig(e){Yn.defaultConfig=e}constructor(e={}){this.config=void 0,this.userConfig=void 0,this.logger=void 0,this.coreComponents=void 0,this.networkControllers=void 0,this._emitter=new Zm,this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.abrController=void 0,this.bufferController=void 0,this.capLevelController=void 0,this.latencyController=void 0,this.levelController=void 0,this.streamController=void 0,this.audioStreamController=void 0,this.subtititleStreamController=void 0,this.audioTrackController=void 0,this.subtitleTrackController=void 0,this.interstitialsController=void 0,this.gapController=void 0,this.emeController=void 0,this.cmcdController=void 0,this._media=null,this._url=null,this._sessionId=void 0,this.triggeringException=void 0,this.started=!1;const t=this.logger=qD(e.debug||!1,"Hls instance",e.assetPlayerId),i=this.config=A3(Yn.DefaultConfig,e,t);this.userConfig=e,i.progressive&&R3(i,t);const{abrController:s,bufferController:a,capLevelController:l,errorController:c,fpsController:f}=i,d=new c(this),h=this.abrController=new s(this),p=new jk(this),g=i.interstitialsController,b=g?this.interstitialsController=new g(this,Yn):null,y=this.bufferController=new a(this,p),T=this.capLevelController=new l(this),x=new f(this),w=new $3(this),S=i.contentSteeringController,A=S?new S(this):null,_=this.levelController=new M3(this,A),I=new k3(this),P=new U3(this.config,this.logger),C=this.streamController=new F3(this,p,P),O=this.gapController=new I3(this,p);T.setStreamController(C),x.setStreamController(C);const B=[w,_,C];b&&B.splice(1,0,b),A&&B.splice(1,0,A),this.networkControllers=B;const N=[h,y,O,T,x,I,p];this.audioTrackController=this.createController(i.audioTrackController,B);const V=i.audioStreamController;V&&B.push(this.audioStreamController=new V(this,p,P)),this.subtitleTrackController=this.createController(i.subtitleTrackController,B);const ee=i.subtitleStreamController;ee&&B.push(this.subtititleStreamController=new ee(this,p,P)),this.createController(i.timelineController,N),P.emeController=this.emeController=this.createController(i.emeController,N),this.cmcdController=this.createController(i.cmcdController,N),this.latencyController=this.createController(O3,N),this.coreComponents=N,B.push(d);const z=d.onErrorOut;typeof z=="function"&&this.on(L.ERROR,z,d),this.on(L.MANIFEST_LOADED,w.onManifestLoaded,w)}createController(e,t){if(e){const i=new e(this);return t&&t.push(i),i}return null}on(e,t,i=this){this._emitter.on(e,t,i)}once(e,t,i=this){this._emitter.once(e,t,i)}removeAllListeners(e){this._emitter.removeAllListeners(e)}off(e,t,i=this,s){this._emitter.off(e,t,i,s)}listeners(e){return this._emitter.listeners(e)}emit(e,t,i){return this._emitter.emit(e,t,i)}trigger(e,t){if(this.config.debug)return this.emit(e,e,t);try{return this.emit(e,e,t)}catch(i){if(this.logger.error("An internal error happened while handling event "+e+'. Error message: "'+i.message+'". Here is a stacktrace:',i),!this.triggeringException){this.triggeringException=!0;const s=e===L.ERROR;this.trigger(L.ERROR,{type:Ee.OTHER_ERROR,details:Q.INTERNAL_EXCEPTION,fatal:s,event:e,error:i}),this.triggeringException=!1}}return!1}listenerCount(e){return this._emitter.listenerCount(e)}destroy(){this.logger.log("destroy"),this.trigger(L.DESTROYING,void 0),this.detachMedia(),this.removeAllListeners(),this._autoLevelCapping=-1,this._url=null,this.networkControllers.forEach(t=>t.destroy()),this.networkControllers.length=0,this.coreComponents.forEach(t=>t.destroy()),this.coreComponents.length=0;const e=this.config;e.xhrSetup=e.fetchSetup=void 0,this.userConfig=null}attachMedia(e){if(!e||"media"in e&&!e.media){const a=new Error(`attachMedia failed: invalid argument (${e})`);this.trigger(L.ERROR,{type:Ee.OTHER_ERROR,details:Q.ATTACH_MEDIA_ERROR,fatal:!0,error:a});return}this.logger.log("attachMedia"),this._media&&(this.logger.warn("media must be detached before attaching"),this.detachMedia());const t="media"in e,i=t?e.media:e,s=t?e:{media:i};this._media=i,this.trigger(L.MEDIA_ATTACHING,s)}detachMedia(){this.logger.log("detachMedia"),this.trigger(L.MEDIA_DETACHING,{}),this._media=null}transferMedia(){this._media=null;const e=this.bufferController.transferMedia();return this.trigger(L.MEDIA_DETACHING,{transferMedia:e}),e}loadSource(e){this.stopLoad();const t=this.media,i=this._url,s=this._url=jm.buildAbsoluteURL(self.location.href,e,{alwaysNormalize:!0});this._autoLevelCapping=-1,this._maxHdcpLevel=null,this.logger.log(`loadSource:${s}`),t&&i&&(i!==s||this.bufferController.hasSourceTypes())&&(this.detachMedia(),this.attachMedia(t)),this.trigger(L.MANIFEST_LOADING,{url:e})}get url(){return this._url}get hasEnoughToStart(){return this.streamController.hasEnoughToStart}get startPosition(){return this.streamController.startPositionValue}startLoad(e=-1,t){this.logger.log(`startLoad(${e+(t?", <skip seek to start>":"")})`),this.started=!0,this.resumeBuffering();for(let i=0;i<this.networkControllers.length&&(this.networkControllers[i].startLoad(e,t),!(!this.started||!this.networkControllers));i++);}stopLoad(){this.logger.log("stopLoad"),this.started=!1;for(let e=0;e<this.networkControllers.length&&(this.networkControllers[e].stopLoad(),!(this.started||!this.networkControllers));e++);}get loadingEnabled(){return this.started}get bufferingEnabled(){return this.streamController.bufferingEnabled}resumeBuffering(){this.bufferingEnabled||(this.logger.log("resume buffering"),this.networkControllers.forEach(e=>{e.resumeBuffering&&e.resumeBuffering()}))}pauseBuffering(){this.bufferingEnabled&&(this.logger.log("pause buffering"),this.networkControllers.forEach(e=>{e.pauseBuffering&&e.pauseBuffering()}))}get inFlightFragments(){const e={[ge.MAIN]:this.streamController.inFlightFrag};return this.audioStreamController&&(e[ge.AUDIO]=this.audioStreamController.inFlightFrag),this.subtititleStreamController&&(e[ge.SUBTITLE]=this.subtititleStreamController.inFlightFrag),e}swapAudioCodec(){this.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()}recoverMediaError(){this.logger.log("recoverMediaError");const e=this._media,t=e?.currentTime;this.detachMedia(),e&&(this.attachMedia(e),t&&this.startLoad(t))}removeLevel(e){this.levelController.removeLevel(e)}get sessionId(){let e=this._sessionId;return e||(e=this._sessionId=IP()),e}get levels(){const e=this.levelController.levels;return e||[]}get latestLevelDetails(){return this.streamController.getLevelDetails()||null}get loadLevelObj(){return this.levelController.loadLevelObj}get currentLevel(){return this.streamController.currentLevel}set currentLevel(e){this.logger.log(`set currentLevel:${e}`),this.levelController.manualLevel=e,this.streamController.immediateLevelSwitch()}get nextLevel(){return this.streamController.nextLevel}set nextLevel(e){this.logger.log(`set nextLevel:${e}`),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}get loadLevel(){return this.levelController.level}set loadLevel(e){this.logger.log(`set loadLevel:${e}`),this.levelController.manualLevel=e}get nextLoadLevel(){return this.levelController.nextLoadLevel}set nextLoadLevel(e){this.levelController.nextLoadLevel=e}get firstLevel(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)}set firstLevel(e){this.logger.log(`set firstLevel:${e}`),this.levelController.firstLevel=e}get startLevel(){const e=this.levelController.startLevel;return e===-1&&this.abrController.forcedAutoLevel>-1?this.abrController.forcedAutoLevel:e}set startLevel(e){this.logger.log(`set startLevel:${e}`),e!==-1&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}get capLevelToPlayerSize(){return this.config.capLevelToPlayerSize}set capLevelToPlayerSize(e){const t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}get autoLevelCapping(){return this._autoLevelCapping}get bandwidthEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimate():NaN}set bandwidthEstimate(e){this.abrController.resetEstimator(e)}get abrEwmaDefaultEstimate(){const{bwEstimator:e}=this.abrController;return e?e.defaultEstimate:NaN}get ttfbEstimate(){const{bwEstimator:e}=this.abrController;return e?e.getEstimateTTFB():NaN}set autoLevelCapping(e){this._autoLevelCapping!==e&&(this.logger.log(`set autoLevelCapping:${e}`),this._autoLevelCapping=e,this.levelController.checkMaxAutoUpdated())}get maxHdcpLevel(){return this._maxHdcpLevel}set maxHdcpLevel(e){Ak(e)&&this._maxHdcpLevel!==e&&(this._maxHdcpLevel=e,this.levelController.checkMaxAutoUpdated())}get autoLevelEnabled(){return this.levelController.manualLevel===-1}get manualLevel(){return this.levelController.manualLevel}get minAutoLevel(){const{levels:e,config:{minAutoBitrate:t}}=this;if(!e)return 0;const i=e.length;for(let s=0;s<i;s++)if(e[s].maxBitrate>=t)return s;return 0}get maxAutoLevel(){const{levels:e,autoLevelCapping:t,maxHdcpLevel:i}=this;let s;if(t===-1&&e!=null&&e.length?s=e.length-1:s=t,i)for(let a=s;a--;){const l=e[a].attrs["HDCP-LEVEL"];if(l&&l<=i)return a}return s}get firstAutoLevel(){return this.abrController.firstAutoLevel}get nextAutoLevel(){return this.abrController.nextAutoLevel}set nextAutoLevel(e){this.abrController.nextAutoLevel=e}get playingDate(){return this.streamController.currentProgramDateTime}get mainForwardBufferInfo(){return this.streamController.getMainFwdBufferInfo()}get maxBufferLength(){return this.streamController.maxBufferLength}setAudioOption(e){var t;return((t=this.audioTrackController)==null?void 0:t.setAudioOption(e))||null}setSubtitleOption(e){var t;return((t=this.subtitleTrackController)==null?void 0:t.setSubtitleOption(e))||null}get allAudioTracks(){const e=this.audioTrackController;return e?e.allAudioTracks:[]}get audioTracks(){const e=this.audioTrackController;return e?e.audioTracks:[]}get audioTrack(){const e=this.audioTrackController;return e?e.audioTrack:-1}set audioTrack(e){const t=this.audioTrackController;t&&(t.audioTrack=e)}get allSubtitleTracks(){const e=this.subtitleTrackController;return e?e.allSubtitleTracks:[]}get subtitleTracks(){const e=this.subtitleTrackController;return e?e.subtitleTracks:[]}get subtitleTrack(){const e=this.subtitleTrackController;return e?e.subtitleTrack:-1}get media(){return this._media}set subtitleTrack(e){const t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}get subtitleDisplay(){const e=this.subtitleTrackController;return e?e.subtitleDisplay:!1}set subtitleDisplay(e){const t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}get lowLatencyMode(){return this.config.lowLatencyMode}set lowLatencyMode(e){this.config.lowLatencyMode=e}get liveSyncPosition(){return this.latencyController.liveSyncPosition}get latency(){return this.latencyController.latency}get maxLatency(){return this.latencyController.maxLatency}get targetLatency(){return this.latencyController.targetLatency}set targetLatency(e){this.latencyController.targetLatency=e}get drift(){return this.latencyController.drift}get forceStartLoad(){return this.streamController.forceStartLoad}get pathways(){return this.levelController.pathways}get pathwayPriority(){return this.levelController.pathwayPriority}set pathwayPriority(e){this.levelController.pathwayPriority=e}get bufferedToEnd(){var e;return!!((e=this.bufferController)!=null&&e.bufferedToEnd)}get interstitialsManager(){var e;return((e=this.interstitialsController)==null?void 0:e.interstitialsManager)||null}getMediaDecodingInfo(e,t=this.allAudioTracks){const i=wT(t);return TT(e,i,navigator.mediaCapabilities)}}Yn.defaultConfig=void 0;const j3=({url:n="https://vip.opstream17.com/20260203/26958_3afa23ac/index.m3u8",title:e="Phim hay"})=>{const t=Y.useRef();return Y.useEffect(()=>{const i=new BD({volume:75,autoplay:!0,muted:!0,title:e,container:t.current,url:n,theme:"#FA9700",fullscreen:!0,screenshot:!0,setting:!0,pip:!0,autoHideCursor:!1,autoHideTime:5e3,customHotKey:{t:()=>console.log("Bm phm T")},customType:{m3u8:function(s,a){if(Yn.isSupported()){const l=new Yn;l.loadSource(a),l.attachMedia(s)}else s.canPlayType("application/vnd.apple.mpegurl")&&(s.src=a)}},i18n:{vi:{Play:"Pht",Pause:"Tm dng",Restart:"Pht li",Snapshot:"Chp nh mn hnh",Color:"Mu sc",Loop:"Lp li",Fullscreen:"Ton mn hnh","Exit Fullscreen":"Thot ton mn hnh","Web Fullscreen":"Ton mn hnh web",MiniPlayer:"Trnh pht thu nh","Playback Speed":"Tc  pht","Aspect Ratio":"T l khung hnh","Video Info":"Thng tin video","About Author":"Thng tin tc gi",Screenshot:"Chp mn hnh",Setting:"Ci t","Show subtitle":"Hin ph ","Hide subtitle":"n ph "}},lang:"vi"});return()=>{i&&i.destroy&&i.destroy()}},[n]),U.jsx("div",{ref:t,className:"w-full aspect-video rounded-xl"})},H3=()=>(CR({immediate:!0}),U.jsxs(U.Fragment,{children:[U.jsx(AR,{}),U.jsx(P2,{children:U.jsxs(d2,{children:[U.jsxs(Rs,{element:U.jsx(O_,{}),children:[U.jsx(Rs,{path:"/",element:U.jsx(N_,{})}),U.jsx(Rs,{path:"/info",element:U.jsx(M_,{})}),U.jsx(Rs,{path:"/recents",element:U.jsx(ND,{})}),U.jsx(Rs,{path:"/search",element:U.jsx(q_,{})}),U.jsx(Rs,{path:"/movies-player",element:U.jsx(j3,{})})]}),U.jsx(Rs,{path:"/movies/:slug",element:U.jsx(H_,{})})]})})]})),G3=document.getElementById("root");uA.createRoot(G3).render(U.jsx(H3,{}))});export default z3();
